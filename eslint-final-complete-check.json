[{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/app/providers/AppProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/app/providers/ConfigProvider.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":327,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":327,"endColumn":23}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'weights' is defined but never used.","line":54,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'rule' is defined but never used.","line":56,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":58,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'rule' is defined but never used.","line":58,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":59,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":60,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'preset' is defined but never used.","line":62,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'weights' is defined but never used.","line":66,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":45,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'pattern' is defined but never used.","line":68,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'text' is defined but never used.","line":68,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'preset' is defined but never used.","line":72,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'baseScores' is defined but never used.","line":74,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":62,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * LicitaReview - Configuration Provider\n * \n * üöÄ CORE DIFFERENTIATOR: Manages organizational configuration\n * including personalized analysis parameters, custom rules,\n * and templates.\n */\n\nimport React, { createContext, useContext, useReducer } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from 'sonner';\n\nimport type { \n  OrganizationConfig, \n  AnalysisWeights, \n  CustomRule,\n  AnalysisPreset \n} from '@licitareview/types';\nimport { configService } from '@/services/configService';\nimport { useAuth } from './AuthProvider';\n\n// Configuration State\ninterface ConfigState {\n  currentConfig: OrganizationConfig | null;\n  isLoading: boolean;\n  error: string | null;\n  isDirty: boolean;\n  lastSaved: Date | null;\n}\n\n// Configuration Actions\ntype ConfigAction = \n  | { type: 'SET_CONFIG'; payload: OrganizationConfig }\n  | { type: 'UPDATE_WEIGHTS'; payload: AnalysisWeights }\n  | { type: 'ADD_RULE'; payload: CustomRule }\n  | { type: 'UPDATE_RULE'; payload: { id: string; rule: Partial<CustomRule> } }\n  | { type: 'REMOVE_RULE'; payload: string }\n  | { type: 'SET_PRESET'; payload: AnalysisPreset }\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_ERROR'; payload: string | null }\n  | { type: 'SET_DIRTY'; payload: boolean }\n  | { type: 'MARK_SAVED' };\n\n// Configuration Context\ninterface ConfigContextType {\n  state: ConfigState;\n  currentConfig: OrganizationConfig | null;\n  isLoading: boolean;\n  error: string | null;\n  isDirty: boolean;\n  \n  // Configuration Actions\n  // eslint-disable-next-line no-unused-vars\n  updateWeights: (weights: AnalysisWeights) => void;\n  // eslint-disable-next-line no-unused-vars\n  addCustomRule: (rule: CustomRule) => void;\n  // eslint-disable-next-line no-unused-vars\n  updateCustomRule: (id: string, rule: Partial<CustomRule>) => void;\n  // eslint-disable-next-line no-unused-vars\n  removeCustomRule: (id: string) => void;\n  // eslint-disable-next-line no-unused-vars\n  setPreset: (preset: AnalysisPreset) => void;\n  saveConfig: () => Promise<void>;\n  resetConfig: () => void;\n  // eslint-disable-next-line no-unused-vars\n  validateWeights: (weights: AnalysisWeights) => Promise<boolean>;\n  // eslint-disable-next-line no-unused-vars\n  testRule: (pattern: string, text: string) => Promise<boolean>;\n  \n  // Utility functions\n  // eslint-disable-next-line no-unused-vars\n  getPresetWeights: (preset: AnalysisPreset) => AnalysisWeights;\n  // eslint-disable-next-line no-unused-vars\n  calculateWeightedScore: (baseScores: Record<string, number>) => number;\n}\n\nconst ConfigContext = createContext<ConfigContextType | undefined>(undefined);\n\n// Configuration Reducer\nconst configReducer = (state: ConfigState, action: ConfigAction): ConfigState => {\n  switch (action.type) {\n    case 'SET_CONFIG':\n      return {\n        ...state,\n        currentConfig: action.payload,\n        isLoading: false,\n        error: null,\n        isDirty: false,\n        lastSaved: new Date(),\n      };\n\n    case 'UPDATE_WEIGHTS':\n      if (!state.currentConfig) return state;\n      return {\n        ...state,\n        currentConfig: {\n          ...state.currentConfig,\n          weights: action.payload,\n        },\n        isDirty: true,\n      };\n\n    case 'ADD_RULE':\n      if (!state.currentConfig) return state;\n      return {\n        ...state,\n        currentConfig: {\n          ...state.currentConfig,\n          customRules: [...state.currentConfig.customRules, action.payload],\n        },\n        isDirty: true,\n      };\n\n    case 'UPDATE_RULE':\n      if (!state.currentConfig) return state;\n      return {\n        ...state,\n        currentConfig: {\n          ...state.currentConfig,\n          customRules: state.currentConfig.customRules.map(rule =>\n            rule.id === action.payload.id \n              ? { ...rule, ...action.payload.rule }\n              : rule\n          ),\n        },\n        isDirty: true,\n      };\n\n    case 'REMOVE_RULE':\n      if (!state.currentConfig) return state;\n      return {\n        ...state,\n        currentConfig: {\n          ...state.currentConfig,\n          customRules: state.currentConfig.customRules.filter(\n            rule => rule.id !== action.payload\n          ),\n        },\n        isDirty: true,\n      };\n\n    case 'SET_PRESET':\n      if (!state.currentConfig) return state;\n      return {\n        ...state,\n        currentConfig: {\n          ...state.currentConfig,\n          presetType: action.payload,\n          weights: getPresetWeights(action.payload),\n        },\n        isDirty: true,\n      };\n\n    case 'SET_LOADING':\n      return { ...state, isLoading: action.payload };\n\n    case 'SET_ERROR':\n      return { ...state, error: action.payload, isLoading: false };\n\n    case 'SET_DIRTY':\n      return { ...state, isDirty: action.payload };\n\n    case 'MARK_SAVED':\n      return { \n        ...state, \n        isDirty: false, \n        lastSaved: new Date(),\n        error: null \n      };\n\n    default:\n      return state;\n  }\n};\n\n// Helper function to get preset weights\nconst getPresetWeights = (preset: AnalysisPreset): AnalysisWeights => {\n  const presetWeights = {\n    [AnalysisPreset.RIGOROUS]: { structural: 15, legal: 60, clarity: 20, abnt: 5 },\n    [AnalysisPreset.STANDARD]: { structural: 25, legal: 25, clarity: 25, abnt: 25 },\n    [AnalysisPreset.TECHNICAL]: { structural: 35, legal: 25, clarity: 15, abnt: 25 },\n    [AnalysisPreset.FAST]: { structural: 30, legal: 40, clarity: 20, abnt: 10 },\n    [AnalysisPreset.CUSTOM]: { structural: 25, legal: 25, clarity: 25, abnt: 25 },\n  };\n  return presetWeights[preset];\n};\n\n// Initial state\nconst initialState: ConfigState = {\n  currentConfig: null,\n  isLoading: true,\n  error: null,\n  isDirty: false,\n  lastSaved: null,\n};\n\n/**\n * Configuration Provider Component\n * \n * üöÄ CORE DIFFERENTIATOR: Provides organizational configuration\n * management for personalized analysis parameters.\n */\nexport const ConfigProvider: React.FC<{ children: React.ReactNode }> = ({ \n  children \n}) => {\n  const [state, dispatch] = useReducer(configReducer, initialState);\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n\n  // Fetch current organization config\n  const { data: config, isLoading, error } = useQuery({\n    queryKey: ['config', 'current', user?.organizationId],\n    queryFn: () => configService.getCurrentConfig(),\n    enabled: !!user?.organizationId,\n    onSuccess: (data) => {\n      dispatch({ type: 'SET_CONFIG', payload: data });\n    },\n    onError: (error) => {\n      dispatch({ type: 'SET_ERROR', payload: error.message });\n    },\n  });\n\n  // Save configuration mutation\n  const saveConfigMutation = useMutation({\n    mutationFn: (config: OrganizationConfig) => \n      configService.updateConfig(config.id, config),\n    onSuccess: (savedConfig) => {\n      dispatch({ type: 'SET_CONFIG', payload: savedConfig });\n      queryClient.invalidateQueries(['config']);\n      toast.success('Configuration saved successfully');\n    },\n    onError: (error) => {\n      dispatch({ type: 'SET_ERROR', payload: error.message });\n      toast.error('Failed to save configuration');\n    },\n  });\n\n  // Validate weights mutation\n  const validateWeightsMutation = useMutation({\n    mutationFn: (weights: AnalysisWeights) => \n      configService.validateWeights(weights),\n  });\n\n  // Test rule mutation\n  const testRuleMutation = useMutation({\n    mutationFn: ({ pattern, text }: { pattern: string; text: string }) => \n      configService.testRule(pattern, text),\n  });\n\n  // Context value\n  const contextValue: ConfigContextType = {\n    state,\n    currentConfig: state.currentConfig,\n    isLoading: isLoading || state.isLoading,\n    error: error?.message || state.error,\n    isDirty: state.isDirty,\n\n    // Configuration Actions\n    updateWeights: (weights: AnalysisWeights) => {\n      dispatch({ type: 'UPDATE_WEIGHTS', payload: weights });\n    },\n\n    addCustomRule: (rule: CustomRule) => {\n      dispatch({ type: 'ADD_RULE', payload: rule });\n    },\n\n    updateCustomRule: (id: string, rule: Partial<CustomRule>) => {\n      dispatch({ type: 'UPDATE_RULE', payload: { id, rule } });\n    },\n\n    removeCustomRule: (id: string) => {\n      dispatch({ type: 'REMOVE_RULE', payload: id });\n    },\n\n    setPreset: (preset: AnalysisPreset) => {\n      dispatch({ type: 'SET_PRESET', payload: preset });\n    },\n\n    saveConfig: async () => {\n      if (!state.currentConfig) {\n        throw new Error('No configuration to save');\n      }\n      await saveConfigMutation.mutateAsync(state.currentConfig);\n    },\n\n    resetConfig: () => {\n      if (config) {\n        dispatch({ type: 'SET_CONFIG', payload: config });\n      }\n    },\n\n    validateWeights: async (weights: AnalysisWeights): Promise<boolean> => {\n      const result = await validateWeightsMutation.mutateAsync(weights);\n      return result.isValid;\n    },\n\n    testRule: async (pattern: string, text: string): Promise<boolean> => {\n      const result = await testRuleMutation.mutateAsync({ pattern, text });\n      return result.matches;\n    },\n\n    // Utility functions\n    getPresetWeights,\n\n    calculateWeightedScore: (baseScores: Record<string, number>): number => {\n      if (!state.currentConfig) return 0;\n      const weights = state.currentConfig.weights;\n      return (\n        (baseScores.structural * weights.structural / 100) +\n        (baseScores.legal * weights.legal / 100) +\n        (baseScores.clarity * weights.clarity / 100) +\n        (baseScores.abnt * weights.abnt / 100)\n      );\n    },\n  };\n\n  return (\n    <ConfigContext.Provider value={contextValue}>\n      {children}\n    </ConfigContext.Provider>\n  );\n};\n\n/**\n * Hook to use Configuration Context\n */\nexport const useConfig = (): ConfigContextType => {\n  const context = useContext(ConfigContext);\n  if (context === undefined) {\n    throw new Error('useConfig must be used within a ConfigProvider');\n  }\n  return context;\n};\n\nexport default ConfigProvider;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/backup/document_types_v1.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/DocumentAnalysisAdvanced.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/HierarchicalClassification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/analysis/AdaptiveAnalysisResults.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'format' is defined but never used.","line":31,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":45}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { \n  ChevronDown, \n  ChevronUp, \n  AlertTriangle, \n  CheckCircle, \n  Info, \n  TrendingUp, \n  TrendingDown,\n  Clock,\n  Zap,\n  Target,\n  BarChart3,\n  FileText,\n  Shield,\n  Eye,\n  Settings\n} from 'lucide-react';\nimport { AdaptiveAnalysisResult } from '@/hooks/useAdaptiveAnalysis';\nimport { OrganizationConfig } from '@/hooks/useAnalysisConfig';\n\ninterface AdaptiveAnalysisResultsProps {\n  result: AdaptiveAnalysisResult;\n  baselineResult?: AdaptiveAnalysisResult;\n  config?: OrganizationConfig;\n  onExport?: (format: 'pdf' | 'json' | 'csv') => void;\n}\n\nexport const AdaptiveAnalysisResults: React.FC<AdaptiveAnalysisResultsProps> = ({\n  result,\n  baselineResult,\n  config,\n  onExport\n}) => {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set());\n\n  // Calcular compara√ß√£o com baseline\n  const comparison = useMemo(() => {\n    if (!baselineResult) return null;\n    \n    return {\n      overallScore: result.overallScore - baselineResult.overallScore,\n      categoryScores: {\n        structural: result.categoryResults.structural.score - baselineResult.categoryResults.structural.score,\n        legal: result.categoryResults.legal.score - baselineResult.categoryResults.legal.score,\n        clarity: result.categoryResults.clarity.score - baselineResult.categoryResults.clarity.score,\n        abnt: result.categoryResults.abnt.score - baselineResult.categoryResults.abnt.score\n      },\n      improvements: {\n        structural: result.categoryResults.structural.score > baselineResult.categoryResults.structural.score,\n        legal: result.categoryResults.legal.score > baselineResult.categoryResults.legal.score,\n        clarity: result.categoryResults.clarity.score > baselineResult.categoryResults.clarity.score,\n        abnt: result.categoryResults.abnt.score > baselineResult.categoryResults.abnt.score\n      }\n    };\n  }, [result, baselineResult]);\n\n  // Agrupar problemas por categoria\n  const problemsByCategory = useMemo(() => {\n    const grouped: Record<string, Array<{ categoria?: string; gravidade?: string; [key: string]: unknown }>> = {\n      structural: [],\n      legal: [],\n      clarity: [],\n      abnt: [],\n      general: []\n    };\n\n    result.problems.forEach(problem => {\n      const category = problem.categoria || 'general';\n      if (grouped[category]) {\n        grouped[category].push(problem);\n      }\n    });\n\n    return grouped;\n  }, [result.problems]);\n\n  // Calcular estat√≠sticas por categoria\n  const categoryStats = useMemo(() => {\n    const stats: Record<string, { score: number; problems: number; critical: number; high: number; medium: number; low: number }> = {};\n\n    Object.entries(result.categoryResults).forEach(([category, categoryResult]) => {\n      const categoryProblems = problemsByCategory[category] || [];\n      \n      stats[category] = {\n        score: categoryResult.score,\n        problems: categoryProblems.length,\n        critical: categoryProblems.filter(p => p.gravidade === 'critica').length,\n        high: categoryProblems.filter(p => p.gravidade === 'alta').length,\n        medium: categoryProblems.filter(p => p.gravidade === 'media').length,\n        low: categoryProblems.filter(p => p.gravidade === 'baixa').length\n      };\n    });\n\n    return stats;\n  }, [result.categoryResults, problemsByCategory]);\n\n  // Toggle categoria expandida\n  const toggleCategory = (category: string) => {\n    setExpandedCategories(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(category)) {\n        newSet.delete(category);\n      } else {\n        newSet.add(category);\n      }\n      return newSet;\n    });\n  };\n\n  // Renderizar √≠cone de gravidade\n  const renderSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case 'critica':\n        return <AlertTriangle className=\"w-4 h-4 text-red-600\" />;\n      case 'alta':\n        return <AlertTriangle className=\"w-4 h-4 text-orange-500\" />;\n      case 'media':\n        return <Info className=\"w-4 h-4 text-yellow-500\" />;\n      case 'baixa':\n        return <Info className=\"w-4 h-4 text-blue-500\" />;\n      default:\n        return <Info className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  // Renderizar badge de gravidade\n  const renderSeverityBadge = (severity: string) => {\n    const severityMap = {\n      critica: { color: 'destructive', label: 'Cr√≠tica' },\n      alta: { color: 'default', label: 'Alta' },\n      media: { color: 'secondary', label: 'M√©dia' },\n      baixa: { color: 'outline', label: 'Baixa' }\n    };\n\n    const config = severityMap[severity as keyof typeof severityMap] || severityMap.baixa;\n    \n    return (\n      <Badge variant={config.color as 'destructive' | 'default' | 'secondary' | 'outline'} className=\"text-xs\">\n        {config.label}\n      </Badge>\n    );\n  };\n\n  // Renderizar indicador de melhoria\n  const renderImprovementIndicator = (improvement: number) => {\n    if (improvement > 0) {\n      return (\n        <div className=\"flex items-center text-green-600\">\n          <TrendingUp className=\"w-4 h-4 mr-1\" />\n          <span className=\"text-sm font-medium\">+{improvement.toFixed(1)}</span>\n        </div>\n      );\n    } else if (improvement < 0) {\n      return (\n        <div className=\"flex items-center text-red-600\">\n          <TrendingDown className=\"w-4 h-4 mr-1\" />\n          <span className=\"text-sm font-medium\">{improvement.toFixed(1)}</span>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header com Score Geral */}\n      <Card className=\"border-l-4 border-l-blue-500\">\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Target className=\"w-8 h-8 text-blue-600\" />\n              <div>\n                <CardTitle className=\"text-2xl font-bold\">\n                  Score Geral: {result.overallScore.toFixed(1)}/100\n                </CardTitle>\n                <p className=\"text-gray-600\">\n                  An√°lise personalizada conclu√≠da em {result.totalProcessingTime}ms\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              {config && (\n                <Badge variant=\"outline\" className=\"flex items-center space-x-1\">\n                  <Settings className=\"w-3 h-3\" />\n                  <span>{config.name}</span>\n                </Badge>\n              )}\n              \n              <div className=\"flex space-x-2\">\n                <Button variant=\"outline\" size=\"sm\" onClick={() => onExport?.('pdf')}>\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  PDF\n                </Button>\n                <Button variant=\"outline\" size=\"sm\" onClick={() => onExport?.('json')}>\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  JSON\n                </Button>\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        \n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {result.overallConfidence}%\n              </div>\n              <div className=\"text-sm text-gray-600\">Confian√ßa</div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">\n                {result.problems.length}\n              </div>\n              <div className=\"text-sm text-gray-600\">Problemas</div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {result.cacheStats.hitRate.toFixed(1)}%\n              </div>\n              <div className=\"text-sm text-gray-600\">Cache Hit</div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">\n                {result.fallbackStats.totalFallbacks}\n              </div>\n              <div className=\"text-sm text-gray-600\">Fallbacks</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tabs de Navega√ß√£o */}\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"overview\">Vis√£o Geral</TabsTrigger>\n          <TabsTrigger value=\"categories\">Categorias</TabsTrigger>\n          <TabsTrigger value=\"problems\">Problemas</TabsTrigger>\n          <TabsTrigger value=\"metrics\">M√©tricas</TabsTrigger>\n        </TabsList>\n\n        {/* Tab: Vis√£o Geral */}\n        <TabsContent value=\"overview\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Scores por Categoria */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <BarChart3 className=\"w-5 h-5\" />\n                  <span>Scores por Categoria</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {Object.entries(categoryStats).map(([category, stats]) => (\n                  <div key={category} className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"font-medium capitalize\">{category}</span>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-lg font-bold\">{stats.score.toFixed(1)}</span>\n                        {comparison && renderImprovementIndicator(comparison.categoryScores[category as keyof typeof comparison.categoryScores])}\n                      </div>\n                    </div>\n                    <Progress value={stats.score} className=\"h-2\" />\n                    <div className=\"flex justify-between text-xs text-gray-500\">\n                      <span>{stats.problems} problemas</span>\n                      <span>{stats.critical + stats.high} cr√≠ticos/altos</span>\n                    </div>\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n\n            {/* Compara√ß√£o com Baseline */}\n            {comparison && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <TrendingUp className=\"w-5 h-5\" />\n                    <span>Compara√ß√£o com Baseline</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-3xl font-bold text-blue-600\">\n                      {comparison.overallScore > 0 ? '+' : ''}{comparison.overallScore.toFixed(1)}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">Mudan√ßa no Score Geral</div>\n                  </div>\n                  \n                  <div className=\"space-y-3\">\n                    {Object.entries(comparison.categoryScores).map(([category, change]) => (\n                      <div key={category} className=\"flex items-center justify-between p-2 rounded-lg bg-gray-50\">\n                        <span className=\"font-medium capitalize\">{category}</span>\n                        <div className=\"flex items-center space-x-2\">\n                          {renderImprovementIndicator(change)}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </TabsContent>\n\n        {/* Tab: Categorias */}\n        <TabsContent value=\"categories\" className=\"space-y-4\">\n          {Object.entries(result.categoryResults).map(([category, categoryResult]) => {\n            const stats = categoryStats[category];\n            const isExpanded = expandedCategories.has(category);\n            \n            return (\n              <Card key={category} className=\"overflow-hidden\">\n                <CardHeader \n                  className=\"cursor-pointer hover:bg-gray-50 transition-colors\"\n                  onClick={() => toggleCategory(category)}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center\">\n                        {category === 'structural' && <FileText className=\"w-5 h-5 text-blue-600\" />}\n                        {category === 'legal' && <Shield className=\"w-5 h-5 text-blue-600\" />}\n                        {category === 'clarity' && <Eye className=\"w-5 h-5 text-blue-600\" />}\n                        {category === 'abnt' && <Target className=\"w-5 h-5 text-blue-600\" />}\n                      </div>\n                      <div>\n                        <CardTitle className=\"capitalize\">{category}</CardTitle>\n                        <p className=\"text-sm text-gray-600\">\n                          Score: {categoryResult.score.toFixed(1)} | Confian√ßa: {categoryResult.confidence}%\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"text-right\">\n                        <div className=\"text-2xl font-bold text-blue-600\">\n                          {stats.score.toFixed(1)}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">Score</div>\n                      </div>\n                      \n                      {isExpanded ? (\n                        <ChevronUp className=\"w-5 h-5 text-gray-500\" />\n                      ) : (\n                        <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                      )}\n                    </div>\n                  </div>\n                </CardHeader>\n                \n                {isExpanded && (\n                  <CardContent className=\"border-t bg-gray-50\">\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 py-4\">\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-bold text-red-600\">{stats.critical}</div>\n                        <div className=\"text-xs text-gray-600\">Cr√≠ticos</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-bold text-orange-600\">{stats.high}</div>\n                        <div className=\"text-xs text-gray-600\">Altos</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-bold text-yellow-600\">{stats.medium}</div>\n                        <div className=\"text-xs text-gray-600\">M√©dios</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-bold text-blue-600\">{stats.low}</div>\n                        <div className=\"text-xs text-gray-600\">Baixos</div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-medium text-sm text-gray-700\">M√©tricas Detalhadas:</h4>\n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-gray-600\">Tempo de Processamento:</span>\n                          <span className=\"ml-2 font-medium\">{categoryResult.processingTime}ms</span>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Cache Key:</span>\n                          <span className=\"ml-2 font-medium text-xs font-mono\">\n                            {categoryResult.cacheKey?.substring(0, 20)}...\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                )}\n              </Card>\n            );\n          })}\n        </TabsContent>\n\n        {/* Tab: Problemas */}\n        <TabsContent value=\"problems\" className=\"space-y-4\">\n          {Object.entries(problemsByCategory).map(([category, problems]) => {\n            if (problems.length === 0) return null;\n            \n            return (\n              <Card key={category}>\n                <CardHeader>\n                  <CardTitle className=\"capitalize flex items-center space-x-2\">\n                    <span>{category}</span>\n                    <Badge variant=\"secondary\">{problems.length} problemas</Badge>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {problems.map((problem, index) => (\n                      <div key={index} className=\"p-4 border rounded-lg bg-gray-50\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2 mb-2\">\n                              {renderSeverityIcon(problem.gravidade)}\n                              {renderSeverityBadge(problem.gravidade)}\n                              <span className=\"text-sm text-gray-600\">\n                                {problem.localizacao || 'Documento geral'}\n                              </span>\n                            </div>\n                            \n                            <h4 className=\"font-medium text-gray-900 mb-2\">\n                              {problem.descricao}\n                            </h4>\n                            \n                            {problem.sugestaoCorrecao && (\n                              <div className=\"bg-blue-50 p-3 rounded-md\">\n                                <div className=\"flex items-center space-x-2 mb-1\">\n                                  <CheckCircle className=\"w-4 h-4 text-blue-600\" />\n                                  <span className=\"text-sm font-medium text-blue-800\">Sugest√£o de Corre√ß√£o:</span>\n                                </div>\n                                <p className=\"text-sm text-blue-700\">{problem.sugestaoCorrecao}</p>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </TabsContent>\n\n        {/* Tab: M√©tricas */}\n        <TabsContent value=\"metrics\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* M√©tricas de Performance */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Zap className=\"w-5 h-5\" />\n                  <span>M√©tricas de Performance</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {result.performanceMetrics && (\n                  <>\n                    <div className=\"flex justify-between items-center\">\n                      <span>Tempo de Processamento</span>\n                      <span className=\"font-medium\">{result.performanceMetrics.processingTime}ms</span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <span>Cache Hits</span>\n                      <span className=\"font-medium\">{result.performanceMetrics.cacheHits}</span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <span>Uso de Fallback</span>\n                      <span className=\"font-medium\">{result.performanceMetrics.fallbackUsage}</span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <span>Uso de Mem√≥ria</span>\n                      <span className=\"font-medium\">{result.performanceMetrics.memoryUsage.toFixed(1)}MB</span>\n                    </div>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Estat√≠sticas de Cache */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Clock className=\"w-5 h-5\" />\n                  <span>Estat√≠sticas de Cache</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span>Hit Rate</span>\n                  <span className=\"font-medium\">{result.cacheStats.hitRate.toFixed(1)}%</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>Total de Hits</span>\n                  <span className=\"font-medium\">{result.cacheStats.hits}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>Total de Misses</span>\n                  <span className=\"font-medium\">{result.cacheStats.misses}</span>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Par√¢metros Customizados */}\n          {result.customParameters && Object.keys(result.customParameters).length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Par√¢metros Customizados Aplicados</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                  {Object.entries(result.customParameters).map(([key, value]) => (\n                    <div key={key} className=\"p-3 bg-gray-50 rounded-md\">\n                      <div className=\"text-sm font-medium text-gray-700\">{key}</div>\n                      <div className=\"text-sm text-gray-600\">{String(value)}</div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/analysis/AnalysisProgress.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'analysis' is defined but never used.","line":34,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'elapsedTime'. Either include it or remove the dependency array.","line":287,"column":6,"nodeType":"ArrayExpression","endLine":287,"endColumn":57,"suggestions":[{"desc":"Update the dependencies array to be: [isAnalyzing, documentId, onComplete, steps.length, elapsedTime]","fix":{"range":[8512,8563],"text":"[isAnalyzing, documentId, onComplete, steps.length, elapsedTime]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  FileText,\n  Search,\n  CheckCircle,\n  AlertTriangle,\n  Clock,\n  Zap,\n  Brain,\n  Target,\n  X,\n  Loader2\n} from 'lucide-react';\nimport { DocumentAnalysis } from '@/types/document';\n\ninterface AnalysisStep {\n  id: string;\n  title: string;\n  description: string;\n  status: 'pending' | 'running' | 'completed' | 'error';\n  progress: number;\n  duration?: number;\n  icon: React.ElementType;\n}\n\ninterface AnalysisProgressProps {\n  documentId: string;\n  isAnalyzing: boolean;\n  onCancel?: () => void;\n  onComplete?: (analysis: DocumentAnalysis) => void;\n  className?: string;\n}\n\nconst defaultSteps: AnalysisStep[] = [\n  {\n    id: 'document-processing',\n    title: 'Processamento do Documento',\n    description: 'Extraindo texto e estrutura do documento',\n    status: 'pending',\n    progress: 0,\n    icon: FileText\n  },\n  {\n    id: 'classification',\n    title: 'Classifica√ß√£o Hier√°rquica',\n    description: 'Identificando tipo e modalidade do documento',\n    status: 'pending',\n    progress: 0,\n    icon: Target\n  },\n  {\n    id: 'content-analysis',\n    title: 'An√°lise de Conte√∫do',\n    description: 'Verificando cl√°usulas e requisitos obrigat√≥rios',\n    status: 'pending',\n    progress: 0,\n    icon: Search\n  },\n  {\n    id: 'compliance-check',\n    title: 'Verifica√ß√£o de Conformidade',\n    description: 'Aplicando regras espec√≠ficas e valida√ß√µes',\n    status: 'pending',\n    progress: 0,\n    icon: CheckCircle\n  },\n  {\n    id: 'problem-detection',\n    title: 'Detec√ß√£o de Problemas',\n    description: 'Identificando inconsist√™ncias e n√£o conformidades',\n    status: 'pending',\n    progress: 0,\n    icon: AlertTriangle\n  },\n  {\n    id: 'ai-analysis',\n    title: 'An√°lise com IA',\n    description: 'Aplicando modelos de machine learning',\n    status: 'pending',\n    progress: 0,\n    icon: Brain\n  },\n  {\n    id: 'report-generation',\n    title: 'Gera√ß√£o do Relat√≥rio',\n    description: 'Compilando resultados e recomenda√ß√µes',\n    status: 'pending',\n    progress: 0,\n    icon: Zap\n  }\n];\n\ninterface StepItemProps {\n  step: AnalysisStep;\n  isActive: boolean;\n}\n\nconst StepItem: React.FC<StepItemProps> = ({ step, isActive }) => {\n  const getStatusColor = (status: AnalysisStep['status']) => {\n    switch (status) {\n      case 'completed':\n        return 'text-green-600 bg-green-100';\n      case 'running':\n        return 'text-blue-600 bg-blue-100';\n      case 'error':\n        return 'text-red-600 bg-red-100';\n      default:\n        return 'text-gray-400 bg-gray-100';\n    }\n  };\n\n  const getStatusIcon = () => {\n    switch (step.status) {\n      case 'completed':\n        return <CheckCircle className=\"w-5 h-5\" />;\n      case 'running':\n        return <Loader2 className=\"w-5 h-5 animate-spin\" />;\n      case 'error':\n        return <X className=\"w-5 h-5\" />;\n      default:\n        return <step.icon className=\"w-5 h-5\" />;\n    }\n  };\n\n  return (\n    <div className={`flex items-start space-x-4 p-4 rounded-lg transition-all duration-200 ${\n      isActive ? 'bg-blue-50 border border-blue-200' : 'bg-gray-50'\n    }`}>\n      <div className={`p-2 rounded-lg ${getStatusColor(step.status)}`}>\n        {getStatusIcon()}\n      </div>\n      \n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center justify-between mb-1\">\n          <h3 className=\"font-medium text-gray-900\">{step.title}</h3>\n          <div className=\"flex items-center space-x-2\">\n            {step.duration && (\n              <div className=\"flex items-center text-sm text-gray-500\">\n                <Clock className=\"w-3 h-3 mr-1\" />\n                {step.duration}s\n              </div>\n            )}\n            <Badge \n              className={`text-xs ${\n                step.status === 'completed' ? 'bg-green-100 text-green-800' :\n                step.status === 'running' ? 'bg-blue-100 text-blue-800' :\n                step.status === 'error' ? 'bg-red-100 text-red-800' :\n                'bg-gray-100 text-gray-600'\n              }`}\n            >\n              {step.status === 'completed' ? 'Conclu√≠do' :\n               step.status === 'running' ? 'Executando' :\n               step.status === 'error' ? 'Erro' :\n               'Pendente'}\n            </Badge>\n          </div>\n        </div>\n        \n        <p className=\"text-sm text-gray-600 mb-2\">{step.description}</p>\n        \n        {(step.status === 'running' || step.status === 'completed') && (\n          <div className=\"space-y-1\">\n            <div className=\"flex justify-between text-xs text-gray-500\">\n              <span>Progresso</span>\n              <span>{step.progress}%</span>\n            </div>\n            <Progress value={step.progress} className=\"h-2\" />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport const AnalysisProgress: React.FC<AnalysisProgressProps> = ({\n  documentId,\n  isAnalyzing,\n  onCancel,\n  onComplete,\n  className = ''\n}) => {\n  const [steps, setSteps] = useState<AnalysisStep[]>(defaultSteps);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [overallProgress, setOverallProgress] = useState(0);\n  const [startTime, setStartTime] = useState<Date | null>(null);\n  const [elapsedTime, setElapsedTime] = useState(0);\n\n  // Simular progresso da an√°lise\n  useEffect(() => {\n    if (!isAnalyzing) {\n      return;\n    }\n\n    setStartTime(new Date());\n    \n    const simulateAnalysis = async () => {\n      for (let i = 0; i < steps.length; i++) {\n        const stepStartTime = Date.now();\n        \n        // Marcar step como executando\n        setSteps(prev => prev.map((step, index) => \n          index === i ? { ...step, status: 'running' as const } : step\n        ));\n        setCurrentStepIndex(i);\n\n        // Simular progresso do step\n        for (let progress = 0; progress <= 100; progress += 10) {\n          await new Promise(resolve => setTimeout(resolve, 100 + Math.random() * 200));\n          \n          setSteps(prev => prev.map((step, index) => \n            index === i ? { ...step, progress } : step\n          ));\n          \n          // Atualizar progresso geral\n          const totalProgress = ((i * 100) + progress) / steps.length;\n          setOverallProgress(totalProgress);\n        }\n\n        // Marcar step como conclu√≠do\n        const stepDuration = Math.round((Date.now() - stepStartTime) / 1000);\n        setSteps(prev => prev.map((step, index) => \n          index === i ? { \n            ...step, \n            status: 'completed' as const, \n            progress: 100,\n            duration: stepDuration\n          } : step\n        ));\n\n        // Pequena pausa entre steps\n        await new Promise(resolve => setTimeout(resolve, 300));\n      }\n\n      // An√°lise conclu√≠da\n      if (onComplete) {\n        // Simular resultado da an√°lise\n        const mockAnalysis: DocumentAnalysis = {\n          id: `analysis-${documentId}-${Date.now()}`,\n          documentoId: documentId,\n          textoExtraido: 'Texto extra√≠do do documento...',\n          scoreConformidade: 85.5,\n          classification: {\n            tipoObjeto: 'obra_servicos_eng',\n            modalidadePrincipal: 'processo_licitatorio',\n            subtipo: 'processo_licitatorio',\n            tipoDocumento: 'edital'\n          },\n          problemasEncontrados: [\n            {\n              tipo: 'prazo_inadequado',\n              descricao: 'Prazo de entrega das propostas inferior ao m√≠nimo legal',\n              gravidade: 'alta',\n              categoria: 'juridico',\n              localizacao: 'Se√ß√£o 3.2',\n              sugestaoCorrecao: 'Alterar prazo para no m√≠nimo 30 dias corridos'\n            }\n          ],\n          recomendacoes: [\n            'Revisar cl√°usulas de habilita√ß√£o t√©cnica',\n            'Incluir crit√©rios de sustentabilidade'\n          ],\n          metricas: {\n            totalClauses: 45,\n            validClauses: 38,\n            missingClauses: 3,\n            inconsistencies: 4,\n            processingTime: Math.round(elapsedTime)\n          },\n          specificAnalysis: {\n            prazosAdequados: false,\n            modalidadeCorreta: true,\n            criteriosHabilitacaoClaros: true,\n            especificacoesDetalhadas: true\n          },\n          createdAt: new Date()\n        };\n        \n        onComplete(mockAnalysis);\n      }\n    };\n\n    simulateAnalysis();\n  }, [isAnalyzing, documentId, onComplete, steps.length]);\n\n  // Atualizar tempo decorrido\n  useEffect(() => {\n    if (!startTime || !isAnalyzing) return;\n\n    const interval = setInterval(() => {\n      setElapsedTime(Math.round((Date.now() - startTime.getTime()) / 1000));\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [startTime, isAnalyzing]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const completedSteps = steps.filter(step => step.status === 'completed').length;\n  const hasErrors = steps.some(step => step.status === 'error');\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">An√°lise em Progresso</h2>\n          <p className=\"text-gray-600\">\n            Analisando documento ‚Ä¢ {completedSteps}/{steps.length} etapas conclu√≠das\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-4\">\n          <div className=\"text-right\">\n            <div className=\"text-sm text-gray-500\">Tempo decorrido</div>\n            <div className=\"font-mono text-lg font-medium\">{formatTime(elapsedTime)}</div>\n          </div>\n          \n          {onCancel && (\n            <Button variant=\"outline\" onClick={onCancel}>\n              <X className=\"w-4 h-4 mr-2\" />\n              Cancelar\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Progresso Geral */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <span>Progresso Geral</span>\n            <span className=\"text-lg font-mono\">{overallProgress.toFixed(1)}%</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Progress value={overallProgress} className=\"h-3\" />\n          <div className=\"flex justify-between text-sm text-gray-500 mt-2\">\n            <span>Iniciado</span>\n            <span className=\"font-medium\">\n              {isAnalyzing ? 'Analisando...' : 'Conclu√≠do'}\n            </span>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Lista de Etapas */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Etapas da An√°lise</CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <div className=\"space-y-2 p-6\">\n            {steps.map((step, index) => (\n              <StepItem \n                key={step.id} \n                step={step} \n                isActive={index === currentStepIndex && isAnalyzing}\n              />\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Status de Erro */}\n      {hasErrors && (\n        <Card className=\"border-red-200 bg-red-50\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center space-x-3\">\n              <AlertTriangle className=\"w-6 h-6 text-red-600\" />\n              <div>\n                <h3 className=\"font-medium text-red-900\">Erro na An√°lise</h3>\n                <p className=\"text-red-700\">\n                  Ocorreu um erro durante o processamento. Verifique o documento e tente novamente.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default AnalysisProgress;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/analysis/AnalysisResults.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingDown' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'BarChart3' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarChart3' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":11}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport {\n  CheckCircle,\n  AlertTriangle,\n  XCircle,\n  Info,\n  TrendingUp,\n  TrendingDown,\n  BarChart3,\n  FileText,\n  Download,\n  Share,\n  ChevronDown,\n  ChevronUp,\n  Clock,\n  Target\n} from 'lucide-react';\nimport { DocumentAnalysis, Problem } from '@/types/document';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\ninterface AnalysisResultsProps {\n  analysis: DocumentAnalysis;\n  onExportReport?: () => void;\n  onShareResults?: () => void;\n  className?: string;\n}\n\ninterface MetricCardProps {\n  title: string;\n  value: number;\n  total?: number;\n  icon: React.ElementType;\n  color: 'green' | 'yellow' | 'red' | 'blue';\n  description?: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({ \n  title, \n  value, \n  total, \n  icon: Icon, \n  color, \n  description \n}) => {\n  const colorClasses = {\n    green: 'text-green-600 bg-green-100',\n    yellow: 'text-yellow-600 bg-yellow-100',\n    red: 'text-red-600 bg-red-100',\n    blue: 'text-blue-600 bg-blue-100'\n  };\n\n  const percentage = total ? (value / total) * 100 : 0;\n\n  return (\n    <Card>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <div className={`p-2 rounded-lg ${colorClasses[color]}`}>\n            <Icon className=\"w-5 h-5\" />\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-2xl font-bold\">\n              {value}{total && `/${total}`}\n            </p>\n            {total && (\n              <p className=\"text-sm text-gray-600\">{percentage.toFixed(1)}%</p>\n            )}\n          </div>\n        </div>\n        <h3 className=\"font-medium text-gray-900\">{title}</h3>\n        {description && (\n          <p className=\"text-sm text-gray-600 mt-1\">{description}</p>\n        )}\n        {total && (\n          <Progress value={percentage} className=\"mt-2 h-2\" />\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\ninterface ProblemItemProps {\n  problem: Problem;\n  index: number;\n}\n\nconst ProblemItem: React.FC<ProblemItemProps> = ({ problem, index }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const getSeverityColor = (severity: Problem['gravidade']) => {\n    switch (severity) {\n      case 'critica':\n        return 'bg-red-100 text-red-800 border-red-200';\n      case 'alta':\n        return 'bg-orange-100 text-orange-800 border-orange-200';\n      case 'media':\n        return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      case 'baixa':\n        return 'bg-blue-100 text-blue-800 border-blue-200';\n      default:\n        return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const getSeverityIcon = (severity: Problem['gravidade']) => {\n    switch (severity) {\n      case 'critica':\n        return XCircle;\n      case 'alta':\n        return AlertTriangle;\n      case 'media':\n        return Info;\n      case 'baixa':\n        return Info;\n      default:\n        return Info;\n    }\n  };\n\n  const SeverityIcon = getSeverityIcon(problem.gravidade);\n\n  return (\n    <div className=\"border rounded-lg p-4 space-y-3\">\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex items-start space-x-3 flex-1\">\n          <div className={`p-1 rounded ${getSeverityColor(problem.gravidade)}`}>\n            <SeverityIcon className=\"w-4 h-4\" />\n          </div>\n          <div className=\"flex-1\">\n            <div className=\"flex items-center space-x-2 mb-1\">\n              <h4 className=\"font-medium text-gray-900\">Problema #{index + 1}</h4>\n              <Badge className={getSeverityColor(problem.gravidade)}>\n                {problem.gravidade}\n              </Badge>\n              {problem.categoria && (\n                <Badge variant=\"outline\">{problem.categoria}</Badge>\n              )}\n            </div>\n            <p className=\"text-gray-700\">{problem.descricao}</p>\n            {problem.localizacao && (\n              <p className=\"text-sm text-gray-600 mt-1\">\n                <strong>Local:</strong> {problem.localizacao}\n              </p>\n            )}\n          </div>\n        </div>\n        \n        {problem.sugestaoCorrecao && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setIsExpanded(!isExpanded)}\n          >\n            {isExpanded ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\n          </Button>\n        )}\n      </div>\n      \n      {isExpanded && problem.sugestaoCorrecao && (\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n          <h5 className=\"font-medium text-blue-900 mb-1\">Sugest√£o de Corre√ß√£o:</h5>\n          <p className=\"text-blue-800\">{problem.sugestaoCorrecao}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport const AnalysisResults: React.FC<AnalysisResultsProps> = ({\n  analysis,\n  onExportReport,\n  onShareResults,\n  className = ''\n}) => {\n  const [activeTab, setActiveTab] = useState('overview');\n\n  // Calcular m√©tricas derivadas\n  const conformityPercentage = analysis.scoreConformidade;\n  const totalProblems = analysis.problemasEncontrados.length;\n  const criticalProblems = analysis.problemasEncontrados.filter(p => p.gravidade === 'critica').length;\n  const highProblems = analysis.problemasEncontrados.filter(p => p.gravidade === 'alta').length;\n  const mediumProblems = analysis.problemasEncontrados.filter(p => p.gravidade === 'media').length;\n  const lowProblems = analysis.problemasEncontrados.filter(p => p.gravidade === 'baixa').length;\n\n  // Determinar status geral\n  const getOverallStatus = () => {\n    if (conformityPercentage >= 90) return { status: 'Excelente', color: 'green', icon: CheckCircle };\n    if (conformityPercentage >= 70) return { status: 'Bom', color: 'blue', icon: TrendingUp };\n    if (conformityPercentage >= 50) return { status: 'Regular', color: 'yellow', icon: AlertTriangle };\n    return { status: 'Cr√≠tico', color: 'red', icon: XCircle };\n  };\n\n  const overallStatus = getOverallStatus();\n  const StatusIcon = overallStatus.icon;\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Resultados da An√°lise</h1>\n          <p className=\"text-gray-600\">\n            An√°lise realizada em {format(analysis.createdAt, 'dd/MM/yyyy \\\\√†\\\\s HH:mm', { locale: ptBR })}\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-3\">\n          {onShareResults && (\n            <Button variant=\"outline\" onClick={onShareResults}>\n              <Share className=\"w-4 h-4 mr-2\" />\n              Compartilhar\n            </Button>\n          )}\n          {onExportReport && (\n            <Button onClick={onExportReport}>\n              <Download className=\"w-4 h-4 mr-2\" />\n              Exportar Relat√≥rio\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Status Geral */}\n      <Alert className={`border-${overallStatus.color}-200 bg-${overallStatus.color}-50`}>\n        <StatusIcon className={`h-4 w-4 text-${overallStatus.color}-600`} />\n        <AlertDescription className={`text-${overallStatus.color}-800`}>\n          <strong>Status: {overallStatus.status}</strong> - \n          Score de conformidade: {conformityPercentage.toFixed(1)}%\n          {totalProblems > 0 && ` ‚Ä¢ ${totalProblems} problema${totalProblems !== 1 ? 's' : ''} encontrado${totalProblems !== 1 ? 's' : ''}`}\n        </AlertDescription>\n      </Alert>\n\n      {/* M√©tricas Principais */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <MetricCard\n          title=\"Score de Conformidade\"\n          value={conformityPercentage}\n          icon={Target}\n          color={conformityPercentage >= 70 ? 'green' : conformityPercentage >= 50 ? 'yellow' : 'red'}\n          description={`${conformityPercentage.toFixed(1)}% de conformidade`}\n        />\n        \n        <MetricCard\n          title=\"Cl√°usulas V√°lidas\"\n          value={analysis.metricas.validClauses}\n          total={analysis.metricas.totalClauses}\n          icon={CheckCircle}\n          color=\"green\"\n        />\n        \n        <MetricCard\n          title=\"Problemas Encontrados\"\n          value={totalProblems}\n          icon={AlertTriangle}\n          color={totalProblems === 0 ? 'green' : totalProblems <= 3 ? 'yellow' : 'red'}\n          description={`${criticalProblems} cr√≠ticos, ${highProblems} altos`}\n        />\n        \n        <MetricCard\n          title=\"Tempo de Processamento\"\n          value={analysis.metricas.processingTime}\n          icon={Clock}\n          color=\"blue\"\n          description={`${analysis.metricas.processingTime}s para an√°lise`}\n        />\n      </div>\n\n      {/* Tabs de Detalhes */}\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"overview\">Vis√£o Geral</TabsTrigger>\n          <TabsTrigger value=\"problems\">Problemas ({totalProblems})</TabsTrigger>\n          <TabsTrigger value=\"recommendations\">Recomenda√ß√µes</TabsTrigger>\n          <TabsTrigger value=\"details\">Detalhes T√©cnicos</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Distribui√ß√£o de Problemas */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Distribui√ß√£o de Problemas por Gravidade</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"w-3 h-3 bg-red-500 rounded\"></div>\n                      <span>Cr√≠ticos</span>\n                    </div>\n                    <span className=\"font-medium\">{criticalProblems}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"w-3 h-3 bg-orange-500 rounded\"></div>\n                      <span>Altos</span>\n                    </div>\n                    <span className=\"font-medium\">{highProblems}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"w-3 h-3 bg-yellow-500 rounded\"></div>\n                      <span>M√©dios</span>\n                    </div>\n                    <span className=\"font-medium\">{mediumProblems}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"w-3 h-3 bg-blue-500 rounded\"></div>\n                      <span>Baixos</span>\n                    </div>\n                    <span className=\"font-medium\">{lowProblems}</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* M√©tricas Detalhadas */}\n            <Card>\n              <CardHeader>\n                <CardTitle>M√©tricas de An√°lise</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span>Total de Cl√°usulas:</span>\n                    <span className=\"font-medium\">{analysis.metricas.totalClauses}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Cl√°usulas V√°lidas:</span>\n                    <span className=\"font-medium text-green-600\">{analysis.metricas.validClauses}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Cl√°usulas Faltantes:</span>\n                    <span className=\"font-medium text-red-600\">{analysis.metricas.missingClauses}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Inconsist√™ncias:</span>\n                    <span className=\"font-medium text-yellow-600\">{analysis.metricas.inconsistencies}</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"problems\" className=\"space-y-4\">\n          {totalProblems === 0 ? (\n            <Card>\n              <CardContent className=\"p-8 text-center\">\n                <CheckCircle className=\"w-12 h-12 text-green-600 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                  Nenhum problema encontrado!\n                </h3>\n                <p className=\"text-gray-600\">\n                  O documento est√° em conformidade com todos os crit√©rios analisados.\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"space-y-4\">\n              {analysis.problemasEncontrados.map((problem, index) => (\n                <ProblemItem key={index} problem={problem} index={index} />\n              ))}\n            </div>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"recommendations\" className=\"space-y-4\">\n          {analysis.recomendacoes.length === 0 ? (\n            <Card>\n              <CardContent className=\"p-8 text-center\">\n                <Info className=\"w-12 h-12 text-blue-600 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                  Nenhuma recomenda√ß√£o espec√≠fica\n                </h3>\n                <p className=\"text-gray-600\">\n                  O documento n√£o possui recomenda√ß√µes adicionais no momento.\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <Card>\n              <CardHeader>\n                <CardTitle>Recomenda√ß√µes de Melhoria</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {analysis.recomendacoes.map((recommendation, index) => (\n                    <div key={index} className=\"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg\">\n                      <Info className=\"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-blue-800\">{recommendation}</p>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"details\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Informa√ß√µes do Documento</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-600\">ID da An√°lise:</span>\n                    <p className=\"font-mono text-sm\">{analysis.id}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-600\">Classifica√ß√£o:</span>\n                    <div className=\"flex flex-wrap gap-1 mt-1\">\n                      <Badge variant=\"outline\">{analysis.classification.tipoObjeto}</Badge>\n                      <Badge variant=\"outline\">{analysis.classification.modalidadePrincipal}</Badge>\n                      <Badge variant=\"outline\">{analysis.classification.subtipo}</Badge>\n                      <Badge variant=\"outline\">{analysis.classification.tipoDocumento}</Badge>\n                    </div>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-600\">Data da An√°lise:</span>\n                    <p>{format(analysis.createdAt, 'dd/MM/yyyy HH:mm:ss', { locale: ptBR })}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>An√°lise Espec√≠fica</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {Object.entries(analysis.specificAnalysis).map(([key, value]) => {\n                    if (typeof value === 'boolean') {\n                      return (\n                        <div key={key} className=\"flex items-center justify-between\">\n                          <span className=\"text-sm capitalize\">{key.replace(/([A-Z])/g, ' $1').toLowerCase()}:</span>\n                          <Badge className={value ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}>\n                            {value ? 'Sim' : 'N√£o'}\n                          </Badge>\n                        </div>\n                      );\n                    }\n                    return null;\n                  })}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default AnalysisResults;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/analysis/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/auth/LoginForm.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":25,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":38}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { LogIn, Shield, FileCheck, History, Loader2 } from \"lucide-react\";\n\nexport default function LoginForm() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n  const { login, loginWithGoogle } = useAuth();\n\n  // Get the page user was trying to access before login\n  const from = location.state?.from || \"/dashboard\";\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email || !password) {\n      toast({\n        title: t('common.error'),\n        description: t('auth.fillAllFields'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      await login(email, password);\n      navigate(from, { replace: true });\n    } catch (error) {\n      // Error handling is done in the AuthContext\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleGoogleLogin = async () => {\n    try {\n      setIsLoading(true);\n      await loginWithGoogle();\n      navigate(from, { replace: true });\n    } catch (error) {\n      // Error handling is done in the AuthContext\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex flex-col lg:flex-row\">\n      {/* Left side - Features */}\n      <div className=\"w-full lg:w-1/2 bg-gradient-to-br from-government-50 to-government-100 p-8 lg:p-16 flex flex-col justify-center relative overflow-hidden\">\n        <div className=\"absolute inset-0 z-0\">\n          <img\n            src=\"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40\"\n            alt=\"Government Technology\"\n            className=\"w-full h-full object-cover opacity-10\"\n          />\n        </div>\n        <div className=\"max-w-xl mx-auto relative z-10\">\n          <h1 className=\"text-4xl font-bold text-government-700 mb-4\">{t('features.title')}</h1>\n          <p className=\"text-government-600 mb-12\">\n            {t('features.subtitle')}\n          </p>\n\n          <div className=\"space-y-8\">\n            <div className=\"flex items-start space-x-4 bg-white/80 p-4 rounded-lg backdrop-blur-sm\">\n              <div className=\"p-2 bg-government-100 rounded-lg\">\n                <Shield className=\"h-6 w-6 text-government-500\" />\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-government-700 mb-1\">{t('features.advancedSecurity')}</h3>\n                <p className=\"text-government-600\">{t('features.advancedSecurityDesc')}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start space-x-4 bg-white/80 p-4 rounded-lg backdrop-blur-sm\">\n              <div className=\"p-2 bg-government-100 rounded-lg\">\n                <FileCheck className=\"h-6 w-6 text-government-500\" />\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-government-700 mb-1\">{t('features.automaticAnalysis')}</h3>\n                <p className=\"text-government-600\">{t('features.automaticAnalysisDesc')}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start space-x-4 bg-white/80 p-4 rounded-lg backdrop-blur-sm\">\n              <div className=\"p-2 bg-government-100 rounded-lg\">\n                <History className=\"h-6 w-6 text-government-500\" />\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-government-700 mb-1\">{t('features.completeHistory')}</h3>\n                <p className=\"text-government-600\">{t('features.completeHistoryDesc')}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Right side - Login Form */}\n      <div className=\"w-full lg:w-1/2 p-8 lg:p-16 flex items-center justify-center bg-white relative overflow-hidden\">\n        <div className=\"absolute inset-0 z-0\">\n          <img\n            src=\"https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7\"\n            alt=\"Technology Background\"\n            className=\"w-full h-full object-cover opacity-5\"\n          />\n        </div>\n        <Card className=\"w-full max-w-md p-8 space-y-6 relative z-10 bg-white/90 backdrop-blur-sm\">\n          <div className=\"space-y-2 text-center\">\n            <h2 className=\"text-3xl font-bold tracking-tight text-gray-900\">{t('auth.welcome')}</h2>\n            <p className=\"text-gray-500\">{t('auth.welcomeDescription')}</p>\n          </div>\n\n          <form onSubmit={handleLogin} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <label htmlFor=\"email\" className=\"text-sm font-medium text-gray-700\">\n                {t('auth.email')}\n              </label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder={t('auth.email')}\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label htmlFor=\"password\" className=\"text-sm font-medium text-gray-700\">\n                {t('auth.password')}\n              </label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder={t('auth.password')}\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n              />\n            </div>\n\n            <Button \n              type=\"submit\" \n              className=\"w-full bg-government-500 hover:bg-government-600 text-white\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <LogIn className=\"mr-2 h-4 w-4\" />\n              )}\n              {isLoading ? 'Entrando...' : t('auth.login')}\n            </Button>\n          </form>\n\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 flex items-center\">\n              <span className=\"w-full border-t\" />\n            </div>\n            <div className=\"relative flex justify-center text-xs uppercase\">\n              <span className=\"bg-white px-2 text-muted-foreground\">Ou continue com</span>\n            </div>\n          </div>\n\n          <Button \n            type=\"button\" \n            variant=\"outline\" \n            className=\"w-full\"\n            onClick={handleGoogleLogin}\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n            ) : (\n              <svg className=\"mr-2 h-4 w-4\" viewBox=\"0 0 24 24\">\n                <path\n                  fill=\"currentColor\"\n                  d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                />\n                <path\n                  fill=\"currentColor\"\n                  d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                />\n                <path\n                  fill=\"currentColor\"\n                  d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                />\n                <path\n                  fill=\"currentColor\"\n                  d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                />\n              </svg>\n            )}\n            {isLoading ? 'Entrando...' : 'Entrar com Google'}\n          </Button>\n\n          <div className=\"text-center\">\n            <button\n              onClick={() => navigate(\"/signup\")}\n              className=\"text-government-600 hover:text-government-700 text-sm transition-colors\"\n            >\n              {t('auth.noAccount')}\n            </button>\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/auth/ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/auth/SignUpForm.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":27,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":87,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":37}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { validateCNPJ, formatCNPJ } from \"@/utils/formatters\";\nimport { UserPlus, Building, Mail, Lock, FileText, Loader2 } from \"lucide-react\";\n\nexport default function SignUpForm() {\n  const [formData, setFormData] = useState({\n    prefectureName: \"\",\n    email: \"\",\n    cnpj: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n  const { register } = useAuth();\n\n  const handleSignUp = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Valida√ß√£o de campos obrigat√≥rios\n    if (!formData.prefectureName || !formData.email || !formData.cnpj || !formData.password || !formData.confirmPassword) {\n      toast({\n        title: t('common.error'),\n        description: t('auth.fillAllFields'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      toast({\n        title: t('common.error'),\n        description: t('auth.passwordsDontMatch'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Valida√ß√£o de senha forte\n    if (formData.password.length < 6) {\n      toast({\n        title: t('common.error'),\n        description: 'A senha deve ter pelo menos 6 caracteres',\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!validateCNPJ(formData.cnpj)) {\n      toast({\n        title: t('common.error'),\n        description: t('auth.invalidCnpj'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n       setIsLoading(true);\n       await register(\n         formData.email, \n         formData.password, \n         {\n           displayName: formData.prefectureName,\n           organizationName: formData.prefectureName,\n           cnpj: formData.cnpj\n         }\n       );\n       navigate(\"/dashboard\");\n     } catch (error) {\n       // Error handling is done in the AuthContext\n     } finally {\n       setIsLoading(false);\n     }\n  };\n\n  const handleCnpjChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const formatted = formatCNPJ(e.target.value);\n    setFormData({ ...formData, cnpj: formatted });\n  };\n\n  return (\n    <Card className=\"w-full max-w-md p-8 space-y-6 bg-white/80 backdrop-blur-lg border border-gray-100 rounded-xl shadow-lg animate-fadeIn\">\n      <div className=\"space-y-2 text-center\">\n        <h2 className=\"text-3xl font-bold tracking-tight text-gray-900\">{t('auth.createAccount')}</h2>\n        <p className=\"text-gray-500\">{t('auth.createAccountDescription')}</p>\n      </div>\n      <form onSubmit={handleSignUp} className=\"space-y-4\">\n        <div className=\"relative\">\n          <Building className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\n          <Input\n            placeholder={t('auth.prefectureName')}\n            value={formData.prefectureName}\n            onChange={(e) => setFormData({ ...formData, prefectureName: e.target.value })}\n            className=\"pl-10\"\n            required\n          />\n        </div>\n        <div className=\"relative\">\n          <Mail className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\n          <Input\n            type=\"email\"\n            placeholder={t('auth.email')}\n            value={formData.email}\n            onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n            className=\"pl-10\"\n            required\n          />\n        </div>\n        <div className=\"relative\">\n          <FileText className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\n          <Input\n            placeholder={t('auth.cnpj')}\n            value={formData.cnpj}\n            onChange={handleCnpjChange}\n            className=\"pl-10\"\n            maxLength={18}\n            required\n          />\n        </div>\n        <div className=\"relative\">\n          <Lock className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\n          <Input\n            type=\"password\"\n            placeholder={t('auth.password')}\n            value={formData.password}\n            onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n            className=\"pl-10\"\n            required\n          />\n        </div>\n        <div className=\"relative\">\n          <Lock className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\n          <Input\n            type=\"password\"\n            placeholder={t('auth.confirmPassword')}\n            value={formData.confirmPassword}\n            onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}\n            className=\"pl-10\"\n            required\n          />\n        </div>\n        <Button type=\"submit\" className=\"w-full bg-government-500 hover:bg-government-600 text-white\" disabled={isLoading}>\n          {isLoading ? (\n            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n          ) : (\n            <UserPlus className=\"mr-2 h-4 w-4\" />\n          )}\n          {isLoading ? t('common.loading') : t('auth.signUp')}\n        </Button>\n      </form>\n      <div className=\"text-center\">\n        <button\n          onClick={() => navigate(\"/login\")}\n          className=\"text-government-600 hover:text-government-700 text-sm transition-colors\"\n        >\n          {t('auth.alreadyHaveAccount')}\n        </button>\n      </div>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/comissoes/ComissaoDetails.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'TipoComissao' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TipoComissao' is defined but never used.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2701,2704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2701,2704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport {\n  Edit,\n  X,\n  Calendar,\n  Users,\n  FileText,\n  Settings,\n  Clock,\n  CheckCircle,\n  AlertCircle\n} from 'lucide-react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '../ui/dialog';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '../ui/tabs';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Separator } from '../ui/separator';\nimport {\n  ComissaoDetailsProps,\n  Comissao,\n  StatusComissao,\n  TipoComissao\n} from '../../types/comissao';\nimport MembrosManager from './MembrosManager';\nimport { useToast } from '../ui/use-toast';\nimport { comissoesService } from '../../services/comissoesService';\n\n// Cores para status\nconst statusColors = {\n  'Ativa': 'bg-green-100 text-green-800',\n  'Inativa': 'bg-gray-100 text-gray-800',\n  'Suspensa': 'bg-yellow-100 text-yellow-800',\n  'Encerrada': 'bg-red-100 text-red-800'\n};\n\n// √çcones para status\nconst statusIcons = {\n  'Ativa': CheckCircle,\n  'Inativa': Clock,\n  'Suspensa': AlertCircle,\n  'Encerrada': X\n};\n\n// Cores para tipos\nconst tipoColors = {\n  'Permanente': 'bg-blue-100 text-blue-800',\n  'Temporaria': 'bg-purple-100 text-purple-800'\n};\n\nconst ComissaoDetails: React.FC<ComissaoDetailsProps> = ({\n  comissao: initialComissao,\n  organizationId,\n  onEdit,\n  onClose,\n  onUpdate\n}) => {\n  const [comissao, setComissao] = useState<Comissao>(initialComissao);\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Atualiza o estado local quando a prop muda\n  useEffect(() => {\n    setComissao(initialComissao);\n  }, [initialComissao]);\n\n  const handleFecharComissao = async () => {\n    if (!confirm('Tem certeza que deseja encerrar esta comiss√£o?')) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      await comissoesService.update(organizationId, comissao.id, {\n        status: 'Encerrada' as StatusComissao,\n        dataDeEncerramento: new Date()\n      });\n      \n      const comissaoAtualizada = {\n        ...comissao,\n        status: 'Encerrada' as StatusComissao,\n        dataDeEncerramento: new Date()\n      };\n      \n      setComissao(comissaoAtualizada);\n      onUpdate?.(comissaoAtualizada);\n      \n      toast({\n        title: \"Sucesso\",\n        description: \"Comiss√£o encerrada com sucesso\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao encerrar comiss√£o\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleMembrosChange = (novosMembros: any[]) => {\n    const comissaoAtualizada = {\n      ...comissao,\n      membros: novosMembros\n    };\n    setComissao(comissaoAtualizada);\n    onUpdate?.(comissaoAtualizada);\n  };\n\n  const StatusIcon = statusIcons[comissao.status];\n\n  return (\n    <Dialog open={true} onOpenChange={() => onClose()}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div>\n                <DialogTitle className=\"text-xl\">{comissao.nome}</DialogTitle>\n                <div className=\"flex items-center space-x-2 mt-2\">\n                  <Badge className={tipoColors[comissao.tipo]}>\n                    {comissao.tipo}\n                  </Badge>\n                  <Badge className={statusColors[comissao.status]}>\n                    <StatusIcon className=\"h-3 w-3 mr-1\" />\n                    {comissao.status}\n                  </Badge>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => onEdit(comissao)}\n                disabled={comissao.status === 'Encerrada'}\n              >\n                <Edit className=\"h-4 w-4 mr-2\" />\n                Editar\n              </Button>\n              \n              {comissao.status === 'Ativa' && (\n                <Button\n                  variant=\"destructive\"\n                  size=\"sm\"\n                  onClick={handleFecharComissao}\n                  disabled={loading}\n                >\n                  <X className=\"h-4 w-4 mr-2\" />\n                  Encerrar\n                </Button>\n              )}\n            </div>\n          </div>\n        </DialogHeader>\n\n        <Tabs defaultValue=\"informacoes\" className=\"mt-6\">\n          <TabsList className=\"grid w-full grid-cols-3\">\n            <TabsTrigger value=\"informacoes\">\n              <FileText className=\"h-4 w-4 mr-2\" />\n              Informa√ß√µes\n            </TabsTrigger>\n            <TabsTrigger value=\"membros\">\n              <Users className=\"h-4 w-4 mr-2\" />\n              Membros ({comissao.membros?.filter(m => m.ativo).length || 0})\n            </TabsTrigger>\n            <TabsTrigger value=\"historico\">\n              <Clock className=\"h-4 w-4 mr-2\" />\n              Hist√≥rico\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"informacoes\" className=\"space-y-6\">\n            {/* Informa√ß√µes B√°sicas */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <FileText className=\"h-5 w-5 mr-2\" />\n                  Informa√ß√µes B√°sicas\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-500\">Tipo</label>\n                    <p className=\"mt-1\">{comissao.tipo}</p>\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-500\">Status</label>\n                    <p className=\"mt-1\">{comissao.status}</p>\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-500\">Data de Cria√ß√£o</label>\n                    <p className=\"mt-1\">\n                      {format(new Date(comissao.dataDeCriacao), 'dd/MM/yyyy')}\n                    </p>\n                  </div>\n                  {comissao.dataDeEncerramento && (\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-500\">Data de Encerramento</label>\n                      <p className=\"mt-1\">\n                        {format(new Date(comissao.dataDeEncerramento), 'dd/MM/yyyy')}\n                      </p>\n                    </div>\n                  )}\n                </div>\n                \n                {comissao.descricao && (\n                  <>\n                    <Separator />\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-500\">Descri√ß√£o</label>\n                      <p className=\"mt-1 text-gray-700\">{comissao.descricao}</p>\n                    </div>\n                  </>\n                )}\n                \n                {comissao.objetivo && (\n                  <>\n                    <Separator />\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-500\">Objetivo</label>\n                      <p className=\"mt-1 text-gray-700\">{comissao.objetivo}</p>\n                    </div>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Configura√ß√µes */}\n            {comissao.configuracoes && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center\">\n                    <Settings className=\"h-5 w-5 mr-2\" />\n                    Configura√ß√µes\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-500\">Requer Qu√≥rum</label>\n                      <p className=\"mt-1\">\n                        {comissao.configuracoes.requererQuorum ? 'Sim' : 'N√£o'}\n                      </p>\n                    </div>\n                    {comissao.configuracoes.requererQuorum && comissao.configuracoes.quorumMinimo && (\n                      <div>\n                        <label className=\"text-sm font-medium text-gray-500\">Qu√≥rum M√≠nimo</label>\n                        <p className=\"mt-1\">{comissao.configuracoes.quorumMinimo}</p>\n                      </div>\n                    )}\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-500\">Permite Substitui√ß√µes</label>\n                      <p className=\"mt-1\">\n                        {comissao.configuracoes.permitirSubstituicoes ? 'Sim' : 'N√£o'}\n                      </p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-500\">Notificar Membros</label>\n                      <p className=\"mt-1\">\n                        {comissao.configuracoes.notificarMembros ? 'Sim' : 'N√£o'}\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"membros\">\n            <MembrosManager\n              comissaoId={comissao.id}\n              organizationId={organizationId}\n              membros={comissao.membros || []}\n              onMembrosChange={handleMembrosChange}\n              readonly={comissao.status === 'Encerrada'}\n            />\n          </TabsContent>\n\n          <TabsContent value=\"historico\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <Clock className=\"h-5 w-5 mr-2\" />\n                  Hist√≥rico de Atividades\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-center py-8 text-gray-500\">\n                  <Clock className=\"mx-auto h-12 w-12 text-gray-400\" />\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">\n                    Hist√≥rico em desenvolvimento\n                  </h3>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    O hist√≥rico de atividades ser√° implementado em breve.\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ComissaoDetails;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/comissoes/ComissaoForm.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'date' is defined but never used.","line":78,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'organizationId' is defined but never used.","line":122,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":122,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'organizationId' is defined but never used.","line":122,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":122,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { format } from 'date-fns';\nimport { CalendarIcon, Loader2 } from 'lucide-react';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '../ui/form';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../ui/select';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '../ui/popover';\nimport { Calendar } from '../ui/calendar';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Textarea } from '../ui/textarea';\nimport { Switch } from '../ui/switch';\nimport { cn } from '../../lib/utils';\nimport {\n  ComissaoFormProps,\n  CreateComissaoRequest,\n  UpdateComissaoRequest\n} from '../../types/comissao';\n\n// Schema de valida√ß√£o com Zod\nconst comissaoSchema = z.object({\n  nomeDaComissao: z.string()\n    .min(3, 'Nome deve ter pelo menos 3 caracteres')\n    .max(100, 'Nome deve ter no m√°ximo 100 caracteres'),\n  tipo: z.enum(['Permanente', 'Temporaria']),\n  dataDeCriacao: z.date({\n    required_error: 'Data de cria√ß√£o √© obrigat√≥ria'\n  }),\n  dataDeEncerramento: z.date().optional(),\n  descricao: z.string().optional(),\n  objetivo: z.string().optional(),\n  configuracoes: z.object({\n    requererQuorum: z.boolean().default(false),\n    quorumMinimo: z.number().min(1).optional(),\n    permitirSubstituicoes: z.boolean().default(true),\n    notificarMembros: z.boolean().default(true)\n  }).optional()\n}).refine((data) => {\n  // Valida√ß√£o condicional: se tipo √© Tempor√°ria, data de encerramento √© obrigat√≥ria\n  if (data.tipo === 'Temporaria' && !data.dataDeEncerramento) {\n    return false;\n  }\n  // Data de encerramento deve ser posterior √† data de cria√ß√£o\n  if (data.dataDeEncerramento && data.dataDeEncerramento <= data.dataDeCriacao) {\n    return false;\n  }\n  return true;\n}, {\n  message: 'Data de encerramento √© obrigat√≥ria para comiss√µes tempor√°rias e deve ser posterior √† data de cria√ß√£o',\n  path: ['dataDeEncerramento']\n});\n\ntype ComissaoFormData = z.infer<typeof comissaoSchema>;\n\n// Componente DatePicker personalizado\ninterface DatePickerProps {\n  date?: Date;\n  onDateChange: (date: Date | undefined) => void;\n  placeholder: string;\n  minDate?: Date;\n  disabled?: boolean;\n}\n\nconst DatePicker: React.FC<DatePickerProps> = ({\n  date,\n  onDateChange,\n  placeholder,\n  minDate,\n  disabled\n}) => {\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          className={cn(\n            \"w-full justify-start text-left font-normal\",\n            !date && \"text-muted-foreground\"\n          )}\n          disabled={disabled}\n        >\n          <CalendarIcon className=\"mr-2 h-4 w-4\" />\n          {date ? format(date, \"dd/MM/yyyy\") : <span>{placeholder}</span>}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n        <Calendar\n          mode=\"single\"\n          selected={date}\n          onSelect={onDateChange}\n          disabled={(date) => minDate ? date < minDate : false}\n          initialFocus\n        />\n      </PopoverContent>\n    </Popover>\n  );\n};\n\n// Componente principal do formul√°rio\nconst ComissaoForm: React.FC<ComissaoFormProps> = ({\n  comissao,\n  organizationId,\n  onSubmit,\n  onCancel,\n  isLoading = false\n}) => {\n  const form = useForm<ComissaoFormData>({\n    resolver: zodResolver(comissaoSchema),\n    defaultValues: comissao ? {\n      nomeDaComissao: comissao.nomeDaComissao,\n      tipo: comissao.tipo,\n      dataDeCriacao: new Date(comissao.dataDeCriacao),\n      dataDeEncerramento: comissao.dataDeEncerramento ? new Date(comissao.dataDeEncerramento) : undefined,\n      descricao: comissao.descricao || '',\n      objetivo: comissao.objetivo || '',\n      configuracoes: {\n        requererQuorum: comissao.configuracoes?.requererQuorum || false,\n        quorumMinimo: comissao.configuracoes?.quorumMinimo,\n        permitirSubstituicoes: comissao.configuracoes?.permitirSubstituicoes ?? true,\n        notificarMembros: comissao.configuracoes?.notificarMembros ?? true\n      }\n    } : {\n      tipo: 'Permanente',\n      dataDeCriacao: new Date(),\n      configuracoes: {\n        requererQuorum: false,\n        permitirSubstituicoes: true,\n        notificarMembros: true\n      }\n    }\n  });\n\n  const handleSubmit = async (data: ComissaoFormData) => {\n    try {\n      const submitData: CreateComissaoRequest | UpdateComissaoRequest = {\n        nomeDaComissao: data.nomeDaComissao,\n        tipo: data.tipo,\n        dataDeCriacao: data.dataDeCriacao,\n        dataDeEncerramento: data.dataDeEncerramento,\n        descricao: data.descricao || undefined,\n        objetivo: data.objetivo || undefined,\n        configuracoes: data.configuracoes\n      };\n      \n      await onSubmit(submitData);\n    } catch (error) {\n      console.error('Erro ao submeter formul√°rio:', error);\n    }\n  };\n\n  const tipoSelecionado = form.watch('tipo');\n  const requererQuorum = form.watch('configuracoes.requererQuorum');\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n        {/* Se√ß√£o: Informa√ß√µes B√°sicas */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium\">Informa√ß√µes B√°sicas</h3>\n          \n          <FormField\n            control={form.control}\n            name=\"nomeDaComissao\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Nome da Comiss√£o *</FormLabel>\n                <FormControl>\n                  <Input placeholder=\"Ex: Comiss√£o de Licita√ß√£o\" {...field} />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <FormField\n              control={form.control}\n              name=\"tipo\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Tipo *</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Selecione o tipo\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"Permanente\">Permanente</SelectItem>\n                      <SelectItem value=\"Temporaria\">Tempor√°ria</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"dataDeCriacao\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Data de Cria√ß√£o *</FormLabel>\n                  <FormControl>\n                    <DatePicker\n                      date={field.value}\n                      onDateChange={field.onChange}\n                      placeholder=\"Selecione a data\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n          </div>\n\n          {/* Data de encerramento - condicional */}\n          {tipoSelecionado === 'Temporaria' && (\n            <FormField\n              control={form.control}\n              name=\"dataDeEncerramento\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Data de Encerramento *</FormLabel>\n                  <FormControl>\n                    <DatePicker\n                      date={field.value}\n                      onDateChange={field.onChange}\n                      placeholder=\"Selecione a data de encerramento\"\n                      minDate={form.getValues('dataDeCriacao')}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n          )}\n        </div>\n\n        {/* Se√ß√£o: Descri√ß√£o e Objetivo */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium\">Descri√ß√£o e Objetivo</h3>\n          \n          <FormField\n            control={form.control}\n            name=\"descricao\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Descri√ß√£o</FormLabel>\n                <FormControl>\n                  <Textarea\n                    placeholder=\"Descreva brevemente a comiss√£o...\"\n                    className=\"min-h-[100px]\"\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={form.control}\n            name=\"objetivo\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Objetivo</FormLabel>\n                <FormControl>\n                  <Textarea\n                    placeholder=\"Qual o objetivo desta comiss√£o?\"\n                    className=\"min-h-[100px]\"\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        </div>\n\n        {/* Se√ß√£o: Configura√ß√µes */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium\">Configura√ß√µes</h3>\n          \n          <div className=\"space-y-3\">\n            <FormField\n              control={form.control}\n              name=\"configuracoes.requererQuorum\"\n              render={({ field }) => (\n                <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                  <div className=\"space-y-0.5\">\n                    <FormLabel className=\"text-base\">Requerer Qu√≥rum</FormLabel>\n                    <FormDescription>\n                      Exigir n√∫mero m√≠nimo de membros para decis√µes\n                    </FormDescription>\n                  </div>\n                  <FormControl>\n                    <Switch\n                      checked={field.value}\n                      onCheckedChange={field.onChange}\n                    />\n                  </FormControl>\n                </FormItem>\n              )}\n            />\n\n            {requererQuorum && (\n              <FormField\n                control={form.control}\n                name=\"configuracoes.quorumMinimo\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Qu√≥rum M√≠nimo</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        min=\"1\"\n                        placeholder=\"Ex: 3\"\n                        {...field}\n                        onChange={(e) => field.onChange(parseInt(e.target.value) || undefined)}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            )}\n\n            <FormField\n              control={form.control}\n              name=\"configuracoes.permitirSubstituicoes\"\n              render={({ field }) => (\n                <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                  <div className=\"space-y-0.5\">\n                    <FormLabel className=\"text-base\">Permitir Substitui√ß√µes</FormLabel>\n                    <FormDescription>\n                      Permitir substitui√ß√£o de membros durante o per√≠odo\n                    </FormDescription>\n                  </div>\n                  <FormControl>\n                    <Switch\n                      checked={field.value}\n                      onCheckedChange={field.onChange}\n                    />\n                  </FormControl>\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"configuracoes.notificarMembros\"\n              render={({ field }) => (\n                <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                  <div className=\"space-y-0.5\">\n                    <FormLabel className=\"text-base\">Notificar Membros</FormLabel>\n                    <FormDescription>\n                      Enviar notifica√ß√µes por email para os membros\n                    </FormDescription>\n                  </div>\n                  <FormControl>\n                    <Switch\n                      checked={field.value}\n                      onCheckedChange={field.onChange}\n                    />\n                  </FormControl>\n                </FormItem>\n              )}\n            />\n          </div>\n        </div>\n\n        {/* Bot√µes de A√ß√£o */}\n        <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n          <Button type=\"button\" variant=\"outline\" onClick={onCancel} disabled={isLoading}>\n            Cancelar\n          </Button>\n          <Button type=\"submit\" disabled={isLoading}>\n            {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n            {comissao ? 'Atualizar' : 'Criar'} Comiss√£o\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n};\n\nexport default ComissaoForm;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/comissoes/ComissoesTable.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Comissao' is defined but never used.","line":40,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Comissao' is defined but never used.","line":40,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":64,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":45}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { format } from 'date-fns';\nimport {\n  Eye,\n  Edit,\n  Trash2,\n  MoreHorizontal,\n  Users,\n  Plus,\n  Search\n} from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '../ui/table';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '../ui/dropdown-menu';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../ui/select';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Badge } from '../ui/badge';\nimport { Skeleton } from '../ui/skeleton';\nimport { Card, CardContent } from '../ui/card';\nimport {\n  Comissao,\n  ComissaoFilters,\n  ComissoesTableProps,\n  TipoComissao,\n  StatusComissao\n} from '../../types/comissao';\nimport { useComissoes } from '../../hooks/useComissoes';\n\n// Cores para status e tipos\nconst statusColors = {\n  'Ativa': 'bg-green-100 text-green-800',\n  'Inativa': 'bg-gray-100 text-gray-800',\n  'Suspensa': 'bg-yellow-100 text-yellow-800',\n  'Encerrada': 'bg-red-100 text-red-800'\n};\n\nconst tipoColors = {\n  'Permanente': 'bg-blue-100 text-blue-800',\n  'Temporaria': 'bg-purple-100 text-purple-800'\n};\n\n// Componente de filtros\ninterface TableFiltersProps {\n  filters: ComissaoFilters;\n  onFiltersChange: (filters: ComissaoFilters) => void;\n}\n\nconst TableFilters: React.FC<TableFiltersProps> = ({ filters, onFiltersChange }) => (\n  <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n    <div className=\"flex-1\">\n      <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n        <Input\n          placeholder=\"Buscar comiss√µes...\"\n          value={filters.search || ''}\n          onChange={(e) => onFiltersChange({ ...filters, search: e.target.value })}\n          className=\"pl-10 max-w-sm\"\n        />\n      </div>\n    </div>\n    <Select\n      value={filters.tipo || 'all'}\n      onValueChange={(value) => onFiltersChange({ ...filters, tipo: value as TipoComissao | 'all' })}\n    >\n      <SelectTrigger className=\"w-[180px]\">\n        <SelectValue placeholder=\"Filtrar por tipo\" />\n      </SelectTrigger>\n      <SelectContent>\n        <SelectItem value=\"all\">Todos os tipos</SelectItem>\n        <SelectItem value=\"Permanente\">Permanente</SelectItem>\n        <SelectItem value=\"Temporaria\">Tempor√°ria</SelectItem>\n      </SelectContent>\n    </Select>\n    <Select\n      value={filters.status || 'all'}\n      onValueChange={(value) => onFiltersChange({ ...filters, status: value as StatusComissao | 'all' })}\n    >\n      <SelectTrigger className=\"w-[180px]\">\n        <SelectValue placeholder=\"Filtrar por status\" />\n      </SelectTrigger>\n      <SelectContent>\n        <SelectItem value=\"all\">Todos os status</SelectItem>\n        <SelectItem value=\"Ativa\">Ativa</SelectItem>\n        <SelectItem value=\"Inativa\">Inativa</SelectItem>\n        <SelectItem value=\"Suspensa\">Suspensa</SelectItem>\n        <SelectItem value=\"Encerrada\">Encerrada</SelectItem>\n      </SelectContent>\n    </Select>\n  </div>\n);\n\n// Componente de loading skeleton\nconst TableSkeleton: React.FC = () => (\n  <div className=\"space-y-4\">\n    {[...Array(5)].map((_, i) => (\n      <div key={i} className=\"flex space-x-4\">\n        <Skeleton className=\"h-12 w-full\" />\n      </div>\n    ))}\n  </div>\n);\n\n// Componente de estado vazio\ninterface EmptyStateProps {\n  onCreateNew: () => void;\n}\n\nconst EmptyState: React.FC<EmptyStateProps> = ({ onCreateNew }) => (\n  <Card>\n    <CardContent className=\"text-center py-12\">\n      <Users className=\"mx-auto h-12 w-12 text-gray-400\" />\n      <h3 className=\"mt-2 text-sm font-medium text-gray-900\">\n        Nenhuma comiss√£o encontrada\n      </h3>\n      <p className=\"mt-1 text-sm text-gray-500\">\n        Comece criando sua primeira comiss√£o.\n      </p>\n      <div className=\"mt-6\">\n        <Button onClick={onCreateNew}>\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Nova Comiss√£o\n        </Button>\n      </div>\n    </CardContent>\n  </Card>\n);\n\n// Componente principal da tabela\nconst ComissoesTable: React.FC<ComissoesTableProps> = ({\n  organizationId,\n  onEdit,\n  onDelete,\n  onView\n}) => {\n  const [filters, setFilters] = useState<ComissaoFilters>({\n    search: '',\n    tipo: 'all',\n    status: 'all',\n    sortBy: 'nomeDaComissao',\n    sortOrder: 'asc'\n  });\n\n  const { comissoes, loading, error } = useComissoes({\n    organizationId,\n    filters\n  });\n\n  const handleCreateNew = () => {\n    // Esta fun√ß√£o ser√° chamada pelo componente pai\n    console.log('Criar nova comiss√£o');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <TableFilters filters={filters} onFiltersChange={setFilters} />\n        <TableSkeleton />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <TableFilters filters={filters} onFiltersChange={setFilters} />\n        <Card>\n          <CardContent className=\"text-center py-12\">\n            <div className=\"text-red-500\">\n              <h3 className=\"text-sm font-medium\">Erro ao carregar comiss√µes</h3>\n              <p className=\"text-sm mt-1\">{error}</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (comissoes.length === 0) {\n    return (\n      <div className=\"space-y-6\">\n        <TableFilters filters={filters} onFiltersChange={setFilters} />\n        <EmptyState onCreateNew={handleCreateNew} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <TableFilters filters={filters} onFiltersChange={setFilters} />\n      \n      <div className=\"rounded-md border\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Nome da Comiss√£o</TableHead>\n              <TableHead>Tipo</TableHead>\n              <TableHead>Status</TableHead>\n              <TableHead>Membros</TableHead>\n              <TableHead>Data de Cria√ß√£o</TableHead>\n              <TableHead className=\"text-right\">A√ß√µes</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {comissoes.map((comissao) => (\n              <TableRow key={comissao.id}>\n                <TableCell className=\"font-medium\">\n                  <div>\n                    <div className=\"font-medium\">{comissao.nomeDaComissao}</div>\n                    {comissao.descricao && (\n                      <div className=\"text-sm text-gray-500 truncate max-w-xs\">\n                        {comissao.descricao}\n                      </div>\n                    )}\n                  </div>\n                </TableCell>\n                <TableCell>\n                  <Badge className={tipoColors[comissao.tipo]}>\n                    {comissao.tipo}\n                  </Badge>\n                </TableCell>\n                <TableCell>\n                  <Badge className={statusColors[comissao.status]}>\n                    {comissao.status}\n                  </Badge>\n                </TableCell>\n                <TableCell>\n                  <div className=\"flex items-center gap-2\">\n                    <Users className=\"h-4 w-4\" />\n                    <span>{comissao.membros.filter(m => m.ativo).length}</span>\n                  </div>\n                </TableCell>\n                <TableCell>\n                  {format(new Date(comissao.dataDeCriacao), 'dd/MM/yyyy')}\n                </TableCell>\n                <TableCell className=\"text-right\">\n                  <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                      <Button variant=\"ghost\" size=\"sm\">\n                        <MoreHorizontal className=\"h-4 w-4\" />\n                      </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\">\n                      <DropdownMenuItem onClick={() => onView(comissao)}>\n                        <Eye className=\"h-4 w-4 mr-2\" />\n                        Visualizar\n                      </DropdownMenuItem>\n                      <DropdownMenuItem onClick={() => onEdit(comissao)}>\n                        <Edit className=\"h-4 w-4 mr-2\" />\n                        Editar\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                      <DropdownMenuItem \n                        onClick={() => onDelete(comissao.id)}\n                        className=\"text-red-600\"\n                      >\n                        <Trash2 className=\"h-4 w-4 mr-2\" />\n                        Excluir\n                      </DropdownMenuItem>\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n};\n\nexport default ComissoesTable;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/comissoes/MembrosManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'membro' is defined but never used.","line":69,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":33},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadServidoresDisponiveis'. Either include it or remove the dependency array.","line":88,"column":6,"nodeType":"ArrayExpression","endLine":88,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [loadServidoresDisponiveis, open]","fix":{"range":[2216,2222],"text":"[loadServidoresDisponiveis, open]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'membro' is defined but never used.","line":225,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":225,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'servidorId' is defined but never used.","line":226,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":226,"endColumn":32}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport {\n  UserPlus,\n  Edit,\n  UserMinus,\n  MoreHorizontal,\n  Crown,\n  Shield,\n  FileText,\n  User,\n  UserCheck\n} from 'lucide-react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '../ui/dialog';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '../ui/dropdown-menu';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../ui/select';\nimport { Button } from '../ui/button';\nimport { Label } from '../ui/label';\nimport { Textarea } from '../ui/textarea';\nimport { Badge } from '../ui/badge';\nimport { Card } from '../ui/card';\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar';\nimport {\n  MembrosManagerProps,\n  MembroComissao,\n  PapelMembro,\n  ServidorDisponivel\n} from '../../types/comissao';\nimport { comissoesService } from '../../services/comissoesService';\nimport { useToast } from '../ui/use-toast';\n\n// √çcones e cores para pap√©is\nconst papelIcons = {\n  'Presidente': Crown,\n  'Vice-Presidente': Shield,\n  'Secretario': FileText,\n  'Membro': User,\n  'Suplente': UserCheck\n};\n\nconst papelColors = {\n  'Presidente': 'bg-yellow-100 text-yellow-800',\n  'Vice-Presidente': 'bg-blue-100 text-blue-800',\n  'Secretario': 'bg-green-100 text-green-800',\n  'Membro': 'bg-gray-100 text-gray-800',\n  'Suplente': 'bg-purple-100 text-purple-800'\n};\n\n// Componente para adicionar novo membro\ninterface AdicionarMembroDialogProps {\n  organizationId: string;\n  onAdd: (membro: MembroComissao) => void;\n}\n\nconst AdicionarMembroDialog: React.FC<AdicionarMembroDialogProps> = ({\n  organizationId,\n  onAdd\n}) => {\n  const [open, setOpen] = useState(false);\n  const [selectedServidor, setSelectedServidor] = useState('');\n  const [papel, setPapel] = useState<PapelMembro>('Membro');\n  const [observacoes, setObservacoes] = useState('');\n  const [servidoresDisponiveis, setServidoresDisponiveis] = useState<ServidorDisponivel[]>([]);\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (open) {\n      loadServidoresDisponiveis();\n    }\n  }, [open]);\n\n  const loadServidoresDisponiveis = async () => {\n    try {\n      setLoading(true);\n      const servidores = await comissoesService.getServidoresDisponiveis(organizationId);\n      setServidoresDisponiveis(servidores);\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao carregar servidores dispon√≠veis\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (!selectedServidor) {\n      toast({\n        title: \"Erro\",\n        description: \"Selecione um servidor\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    \n    const servidor = servidoresDisponiveis.find(s => s.id === selectedServidor);\n    if (!servidor) return;\n\n    const novoMembro: MembroComissao = {\n      servidorId: selectedServidor,\n      papel,\n      dataDeIngresso: new Date(),\n      ativo: true,\n      observacoes: observacoes || undefined,\n      servidor: {\n        id: servidor.id,\n        nome: servidor.nome,\n        email: servidor.email,\n        cargo: servidor.cargo,\n        avatar: servidor.avatar\n      }\n    };\n    \n    onAdd(novoMembro);\n    setOpen(false);\n    // Reset form\n    setSelectedServidor('');\n    setPapel('Membro');\n    setObservacoes('');\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button>\n          <UserPlus className=\"h-4 w-4 mr-2\" />\n          Adicionar Membro\n        </Button>\n      </DialogTrigger>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Adicionar Novo Membro</DialogTitle>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"servidor\">Servidor *</Label>\n            <Select value={selectedServidor} onValueChange={setSelectedServidor} disabled={loading}>\n              <SelectTrigger>\n                <SelectValue placeholder={loading ? \"Carregando...\" : \"Selecione um servidor\"} />\n              </SelectTrigger>\n              <SelectContent>\n                {servidoresDisponiveis.map((servidor) => (\n                  <SelectItem key={servidor.id} value={servidor.id}>\n                    <div className=\"flex items-center space-x-2\">\n                      <Avatar className=\"h-6 w-6\">\n                        <AvatarImage src={servidor.avatar} />\n                        <AvatarFallback>\n                          {servidor.nome.split(' ').map(n => n[0]).join('')}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div>\n                        <div className=\"font-medium\">{servidor.nome}</div>\n                        <div className=\"text-sm text-gray-500\">{servidor.cargo}</div>\n                      </div>\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"papel\">Papel na Comiss√£o *</Label>\n            <Select value={papel} onValueChange={(value: PapelMembro) => setPapel(value)}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Presidente\">Presidente</SelectItem>\n                <SelectItem value=\"Vice-Presidente\">Vice-Presidente</SelectItem>\n                <SelectItem value=\"Secretario\">Secret√°rio</SelectItem>\n                <SelectItem value=\"Membro\">Membro</SelectItem>\n                <SelectItem value=\"Suplente\">Suplente</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"observacoes\">Observa√ß√µes</Label>\n            <Textarea\n              id=\"observacoes\"\n              value={observacoes}\n              onChange={(e) => setObservacoes(e.target.value)}\n              placeholder=\"Observa√ß√µes sobre a participa√ß√£o...\"\n            />\n          </div>\n\n          <div className=\"flex justify-end space-x-2\">\n            <Button variant=\"outline\" onClick={() => setOpen(false)}>\n              Cancelar\n            </Button>\n            <Button onClick={handleSubmit} disabled={!selectedServidor || loading}>\n              Adicionar\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\n// Lista de membros\ninterface ListaMembrosProps {\n  membros: MembroComissao[];\n  onEdit: (membro: MembroComissao) => void;\n  onRemove: (servidorId: string) => void;\n  readonly?: boolean;\n}\n\nconst ListaMembros: React.FC<ListaMembrosProps> = ({\n  membros,\n  onEdit,\n  onRemove,\n  readonly = false\n}) => {\n  if (membros.length === 0) {\n    return (\n      <Card className=\"p-8 text-center\">\n        <User className=\"mx-auto h-12 w-12 text-gray-400\" />\n        <h3 className=\"mt-2 text-sm font-medium text-gray-900\">\n          Nenhum membro adicionado\n        </h3>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Adicione membros para formar a comiss√£o.\n        </p>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {membros.map((membro) => {\n        const Icon = papelIcons[membro.papel];\n        \n        return (\n          <Card key={membro.servidorId} className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <Avatar>\n                  <AvatarImage src={membro.servidor?.avatar} />\n                  <AvatarFallback>\n                    {membro.servidor?.nome.split(' ').map(n => n[0]).join('') || 'U'}\n                  </AvatarFallback>\n                </Avatar>\n                \n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-2\">\n                    <h4 className=\"font-medium\">{membro.servidor?.nome || 'Nome n√£o dispon√≠vel'}</h4>\n                    <Badge className={papelColors[membro.papel]}>\n                      <Icon className=\"h-3 w-3 mr-1\" />\n                      {membro.papel}\n                    </Badge>\n                    {!membro.ativo && (\n                      <Badge variant=\"secondary\">Inativo</Badge>\n                    )}\n                  </div>\n                  <p className=\"text-sm text-gray-500\">{membro.servidor?.cargo || 'Cargo n√£o dispon√≠vel'}</p>\n                  <p className=\"text-xs text-gray-400\">\n                    Ingresso: {format(new Date(membro.dataDeIngresso), 'dd/MM/yyyy')}\n                    {membro.dataDeSaida && (\n                      <> ‚Ä¢ Sa√≠da: {format(new Date(membro.dataDeSaida), 'dd/MM/yyyy')}</>\n                    )}\n                  </p>\n                  {membro.observacoes && (\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {membro.observacoes}\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {!readonly && (\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <Button variant=\"ghost\" size=\"sm\">\n                      <MoreHorizontal className=\"h-4 w-4\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent>\n                    <DropdownMenuItem onClick={() => onEdit(membro)}>\n                      <Edit className=\"h-4 w-4 mr-2\" />\n                      Editar\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onRemove(membro.servidorId)}\n                      className=\"text-red-600\"\n                    >\n                      <UserMinus className=\"h-4 w-4 mr-2\" />\n                      Remover\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              )}\n            </div>\n          </Card>\n        );\n      })}\n    </div>\n  );\n};\n\n// Componente principal\nconst MembrosManager: React.FC<MembrosManagerProps> = ({\n  comissaoId,\n  organizationId,\n  membros,\n  onMembrosChange,\n  readonly = false\n}) => {\n  const { toast } = useToast();\n\n  const handleAddMembro = async (novoMembro: MembroComissao) => {\n    try {\n      await comissoesService.addMembro(organizationId, comissaoId, {\n        servidorId: novoMembro.servidorId,\n        papel: novoMembro.papel,\n        observacoes: novoMembro.observacoes\n      });\n      \n      const novosMembros = [...membros, novoMembro];\n      onMembrosChange(novosMembros);\n      \n      toast({\n        title: \"Sucesso\",\n        description: \"Membro adicionado com sucesso\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao adicionar membro\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleEditMembro = (membro: MembroComissao) => {\n    // TODO: Implementar modal de edi√ß√£o\n    console.log('Editar membro:', membro);\n  };\n\n  const handleRemoveMembro = async (servidorId: string) => {\n    if (!confirm('Tem certeza que deseja remover este membro?')) {\n      return;\n    }\n\n    try {\n      await comissoesService.removeMembro(organizationId, comissaoId, servidorId);\n      \n      const novosMembros = membros.filter(m => m.servidorId !== servidorId);\n      onMembrosChange(novosMembros);\n      \n      toast({\n        title: \"Sucesso\",\n        description: \"Membro removido com sucesso\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao remover membro\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-medium\">Membros da Comiss√£o</h3>\n          <p className=\"text-sm text-gray-500\">\n            {membros.filter(m => m.ativo).length} membro(s) ativo(s)\n          </p>\n        </div>\n        {!readonly && (\n          <AdicionarMembroDialog\n            organizationId={organizationId}\n            onAdd={handleAddMembro}\n          />\n        )}\n      </div>\n\n      {/* Lista de membros */}\n      <ListaMembros\n        membros={membros}\n        onEdit={handleEditMembro}\n        onRemove={handleRemoveMembro}\n        readonly={readonly}\n      />\n    </div>\n  );\n};\n\nexport default MembrosManager;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/CategoryOverview.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_category' is defined but never used.","line":10,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/ConfigurationSidebar.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'CardDescription' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'section' is defined but never used.","line":57,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'templates' is assigned a value but never used.","line":88,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'templates' is assigned a value but never used.","line":88,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":14}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Componente ConfigurationSidebar\n * \n * Sidebar de navega√ß√£o para o sistema de configura√ß√£o do LicitaReview.\n * Permite navegar entre diferentes se√ß√µes de configura√ß√£o e visualizar\n * o status atual das configura√ß√µes.\n */\n\nimport React, { useState, useMemo } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Separator } from '@/components/ui/separator';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport {\n  Settings,\n  FileText,\n  Sliders,\n  Code,\n  Eye,\n  Folder,\n  Bookmark,\n  ChevronDown,\n  ChevronRight,\n  CheckCircle,\n  AlertTriangle,\n  Clock,\n  Info,\n  Save,\n  Download,\n  Upload,\n  RefreshCw,\n  Zap,\n  Target,\n  BarChart3,\n  Users,\n  Shield,\n  Database\n} from 'lucide-react';\nimport { useAnalysisConfig } from '@/hooks/useAnalysisConfig';\nimport { cn } from '@/lib/utils';\n\ninterface ConfigurationSidebarProps {\n  activeSection: string;\n  onSectionChange: (section: string) => void;\n  organizationId: string;\n  className?: string;\n}\n\ninterface NavigationItem {\n  id: string;\n  label: string;\n  icon: React.ComponentType<{ className?: string }>;\n  description: string;\n  status?: 'completed' | 'pending' | 'warning' | 'error';\n  badge?: string;\n  children?: NavigationItem[];\n}\n\ninterface ConfigurationStatus {\n  section: string;\n  status: 'completed' | 'pending' | 'warning' | 'error';\n  progress: number;\n  issues: number;\n}\n\nexport const ConfigurationSidebar: React.FC<ConfigurationSidebarProps> = ({\n  activeSection,\n  onSectionChange,\n  organizationId,\n  className\n}) => {\n  const { \n    activeConfig, \n    isLoadingActiveConfig, \n    templates \n  } = useAnalysisConfig(organizationId);\n  \n  // Estados locais\n  const [expandedSections, setExpandedSections] = useState<string[]>(['general', 'analysis']);\n  \n  // Estrutura de navega√ß√£o\n  const navigationItems: NavigationItem[] = [\n    {\n      id: 'general',\n      label: 'Configura√ß√µes Gerais',\n      icon: Settings,\n      description: 'Configura√ß√µes b√°sicas do sistema',\n      children: [\n        {\n          id: 'document-types',\n          label: 'Tipos de Documento',\n          icon: FileText,\n          description: 'Configurar tipos de documentos suportados',\n          status: 'completed'\n        },\n        {\n          id: 'organization',\n          label: 'Organiza√ß√£o',\n          icon: Users,\n          description: 'Configura√ß√µes da organiza√ß√£o',\n          status: 'completed'\n        },\n        {\n          id: 'security',\n          label: 'Seguran√ßa',\n          icon: Shield,\n          description: 'Configura√ß√µes de seguran√ßa e permiss√µes',\n          status: 'pending'\n        }\n      ]\n    },\n    {\n      id: 'analysis',\n      label: 'Configura√ß√£o de An√°lise',\n      icon: BarChart3,\n      description: 'Configura√ß√µes do motor de an√°lise',\n      children: [\n        {\n          id: 'parameter-weights',\n          label: 'Pesos dos Par√¢metros',\n          icon: Sliders,\n          description: 'Ajustar import√¢ncia dos crit√©rios de an√°lise',\n          status: 'completed',\n          badge: '6 categorias'\n        },\n        {\n          id: 'custom-rules',\n          label: 'Regras Personalizadas',\n          icon: Code,\n          description: 'Criar e gerenciar regras espec√≠ficas',\n          status: 'completed',\n          badge: activeConfig?.customRules?.length?.toString() || '0'\n        },\n        {\n          id: 'validation-preview',\n          label: 'Preview de Valida√ß√£o',\n          icon: Eye,\n          description: 'Testar configura√ß√µes com documentos de exemplo',\n          status: 'completed'\n        }\n      ]\n    },\n    {\n      id: 'templates',\n      label: 'Templates e Presets',\n      icon: Folder,\n      description: 'Gerenciar templates de configura√ß√£o',\n      children: [\n        {\n          id: 'template-manager',\n          label: 'Gerenciador de Templates',\n          icon: Folder,\n          description: 'Criar, editar e organizar templates',\n          status: 'completed'\n        },\n        {\n          id: 'parameter-presets',\n          label: 'Presets de Par√¢metros',\n          icon: Bookmark,\n          description: 'Configura√ß√µes predefinidas para diferentes cen√°rios',\n          status: 'pending'\n        }\n      ]\n    },\n    {\n      id: 'advanced',\n      label: 'Configura√ß√µes Avan√ßadas',\n      icon: Zap,\n      description: 'Configura√ß√µes t√©cnicas e experimentais',\n      children: [\n        {\n          id: 'performance',\n          label: 'Performance',\n          icon: Target,\n          description: 'Otimiza√ß√µes de performance e cache',\n          status: 'pending'\n        },\n        {\n          id: 'integrations',\n          label: 'Integra√ß√µes',\n          icon: Database,\n          description: 'APIs externas e webhooks',\n          status: 'pending'\n        },\n        {\n          id: 'experimental',\n          label: 'Recursos Experimentais',\n          icon: Zap,\n          description: 'Funcionalidades em desenvolvimento',\n          status: 'warning',\n          badge: 'Beta'\n        }\n      ]\n    }\n  ];\n  \n  // Calcula status das configura√ß√µes\n  const configurationStatus = useMemo((): ConfigurationStatus[] => {\n    const statuses: ConfigurationStatus[] = [];\n    \n    // Status geral\n    statuses.push({\n      section: 'general',\n      status: 'completed',\n      progress: 85,\n      issues: 0\n    });\n    \n    // Status de an√°lise\n    const analysisIssues = 0; // Placeholder for validation errors\n    statuses.push({\n      section: 'analysis',\n      status: analysisIssues > 0 ? 'warning' : 'completed',\n      progress: 95,\n      issues: analysisIssues\n    });\n    \n    // Status de templates\n    statuses.push({\n      section: 'templates',\n      status: 'pending',\n      progress: 60,\n      issues: 0\n    });\n    \n    // Status avan√ßado\n    statuses.push({\n      section: 'advanced',\n      status: 'pending',\n      progress: 20,\n      issues: 0\n    });\n    \n    return statuses;\n  }, []);\n  \n  // Alterna expans√£o de se√ß√£o\n  const toggleSection = (sectionId: string) => {\n    setExpandedSections(prev => \n      prev.includes(sectionId)\n        ? prev.filter(id => id !== sectionId)\n        : [...prev, sectionId]\n    );\n  };\n  \n  // Renderiza item de navega√ß√£o\n  const renderNavigationItem = (item: NavigationItem, level: number = 0) => {\n    const isActive = activeSection === item.id;\n    const hasChildren = item.children && item.children.length > 0;\n    const isExpanded = expandedSections.includes(item.id);\n    \n    const statusColors = {\n      completed: 'text-green-600',\n      pending: 'text-gray-400',\n      warning: 'text-yellow-600',\n      error: 'text-red-600'\n    };\n    \n    const statusIcons = {\n      completed: CheckCircle,\n      pending: Clock,\n      warning: AlertTriangle,\n      error: AlertTriangle\n    };\n    \n    const StatusIcon = item.status ? statusIcons[item.status] : null;\n    const Icon = item.icon;\n    \n    return (\n      <div key={item.id} className={cn('space-y-1', level > 0 && 'ml-4')}>\n        {hasChildren ? (\n          <Collapsible open={isExpanded} onOpenChange={() => toggleSection(item.id)}>\n            <CollapsibleTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                className={cn(\n                  'w-full justify-start h-auto p-3 text-left',\n                  isActive && 'bg-blue-50 text-blue-700 border-l-2 border-blue-500'\n                )}\n              >\n                <div className=\"flex items-center space-x-3 flex-1\">\n                  <Icon className=\"h-4 w-4 flex-shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"font-medium truncate\">{item.label}</span>\n                      <div className=\"flex items-center space-x-2\">\n                        {item.badge && (\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            {item.badge}\n                          </Badge>\n                        )}\n                        {isExpanded ? (\n                          <ChevronDown className=\"h-3 w-3\" />\n                        ) : (\n                          <ChevronRight className=\"h-3 w-3\" />\n                        )}\n                      </div>\n                    </div>\n                    <p className=\"text-xs text-gray-500 mt-1 truncate\">\n                      {item.description}\n                    </p>\n                  </div>\n                </div>\n              </Button>\n            </CollapsibleTrigger>\n            \n            <CollapsibleContent className=\"space-y-1\">\n              {item.children?.map(child => renderNavigationItem(child, level + 1))}\n            </CollapsibleContent>\n          </Collapsible>\n        ) : (\n          <Button\n            variant=\"ghost\"\n            className={cn(\n              'w-full justify-start h-auto p-3 text-left',\n              isActive && 'bg-blue-50 text-blue-700 border-l-2 border-blue-500'\n            )}\n            onClick={() => onSectionChange(item.id)}\n          >\n            <div className=\"flex items-center space-x-3 flex-1\">\n              <Icon className=\"h-4 w-4 flex-shrink-0\" />\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"font-medium truncate\">{item.label}</span>\n                  <div className=\"flex items-center space-x-2\">\n                    {item.badge && (\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {item.badge}\n                      </Badge>\n                    )}\n                    {StatusIcon && (\n                      <StatusIcon className={cn('h-3 w-3', statusColors[item.status!])} />\n                    )}\n                  </div>\n                </div>\n                <p className=\"text-xs text-gray-500 mt-1 truncate\">\n                  {item.description}\n                </p>\n              </div>\n            </div>\n          </Button>\n        )}\n      </div>\n    );\n  };\n  \n  // Renderiza status geral\n  const renderOverallStatus = () => {\n    const totalProgress = configurationStatus.reduce((sum, status) => sum + status.progress, 0) / configurationStatus.length;\n    const totalIssues = configurationStatus.reduce((sum, status) => sum + status.issues, 0);\n    \n    return (\n      <Card className=\"mb-4\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-sm flex items-center space-x-2\">\n            <BarChart3 className=\"h-4 w-4\" />\n            <span>Status Geral</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span>Progresso</span>\n              <span className=\"font-medium\">{Math.round(totalProgress)}%</span>\n            </div>\n            <Progress value={totalProgress} className=\"h-2\" />\n          </div>\n          \n          {totalIssues > 0 && (\n            <div className=\"flex items-center space-x-2 text-sm text-yellow-600\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              <span>{totalIssues} problema(s) encontrado(s)</span>\n            </div>\n          )}\n          \n          {isLoadingActiveConfig && (\n            <div className=\"flex items-center space-x-2 text-sm text-blue-600\">\n              <Info className=\"h-4 w-4\" />\n              <span>Carregando configura√ß√µes</span>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    );\n  };\n  \n  // Renderiza a√ß√µes r√°pidas\n  const renderQuickActions = () => {\n    return (\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-sm\">A√ß√µes R√°pidas</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-2\">\n          <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n            <Save className=\"mr-2 h-3 w-3\" />\n            Salvar Configura√ß√µes\n          </Button>\n          \n          <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n            <Download className=\"mr-2 h-3 w-3\" />\n            Exportar Configura√ß√£o\n          </Button>\n          \n          <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n            <Upload className=\"mr-2 h-3 w-3\" />\n            Importar Configura√ß√£o\n          </Button>\n          \n          <Separator className=\"my-2\" />\n          \n          <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n            <RefreshCw className=\"mr-2 h-3 w-3\" />\n            Restaurar Padr√µes\n          </Button>\n        </CardContent>\n      </Card>\n    );\n  };\n  \n  return (\n    <div className={cn('w-80 border-r bg-gray-50/50', className)}>\n      <ScrollArea className=\"h-full\">\n        <div className=\"p-4 space-y-4\">\n          {/* Header */}\n          <div>\n            <h2 className=\"text-lg font-semibold\">Configura√ß√µes</h2>\n            <p className=\"text-sm text-gray-600\">\n              Personalize o sistema de an√°lise\n            </p>\n          </div>\n          \n          <Separator />\n          \n          {/* Status Geral */}\n          {renderOverallStatus()}\n          \n          {/* Navega√ß√£o */}\n          <div className=\"space-y-2\">\n            {navigationItems.map(item => renderNavigationItem(item))}\n          </div>\n          \n          <Separator />\n          \n          {/* A√ß√µes R√°pidas */}\n          {renderQuickActions()}\n          \n          {/* Loading State */}\n          {isLoadingActiveConfig && (\n            <div className=\"flex items-center justify-center py-4\">\n              <RefreshCw className=\"h-4 w-4 animate-spin mr-2\" />\n              <span className=\"text-sm text-gray-600\">Carregando...</span>\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n};\n\nexport default ConfigurationSidebar;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/CustomRulesEditor.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useCallback' is defined but never used.","line":18,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":18,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":49},{"ruleId":"no-unused-vars","severity":2,"message":"'Tabs' is defined but never used.","line":28,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Tabs' is defined but never used.","line":28,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsContent' is defined but never used.","line":28,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsContent' is defined but never used.","line":28,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsList' is defined but never used.","line":28,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsList' is defined but never used.","line":28,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":37},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsTrigger' is defined but never used.","line":28,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsTrigger' is defined but never used.","line":28,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":50},{"ruleId":"no-unused-vars","severity":2,"message":"'DropdownMenuLabel' is defined but never used.","line":49,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DropdownMenuLabel' is defined but never used.","line":49,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'Play' is defined but never used.","line":58,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Play' is defined but never used.","line":58,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'Save' is defined but never used.","line":60,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used.","line":60,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":61,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":61,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'Upload' is defined but never used.","line":62,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Upload' is defined but never used.","line":62,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'Zap' is defined but never used.","line":64,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":64,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":64,"endColumn":6},{"ruleId":"no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":65,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":65,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'Settings' is defined but never used.","line":68,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":68,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'Filter' is defined but never used.","line":69,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":69,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":69,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'Target' is defined but never used.","line":70,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Target' is defined but never used.","line":70,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'EyeOff' is defined but never used.","line":73,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EyeOff' is defined but never used.","line":73,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":9},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2782,2785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2782,2785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4674,4677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4674,4677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":190,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":190,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":190,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4706,4709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4706,4709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is defined but never used.","line":191,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'isLoading' is assigned a value but never used.","line":199,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":199,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":199,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'isEditingRule' is assigned a value but never used.","line":207,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":207,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isEditingRule' is assigned a value but never used.","line":207,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":207,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'setIsEditingRule' is assigned a value but never used.","line":207,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":207,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsEditingRule' is assigned a value but never used.","line":207,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":207,"endColumn":41},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'config'. Either include it or remove the dependency array.","line":245,"column":6,"nodeType":"ArrayExpression","endLine":245,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [rules, onConfigChange, config]","fix":{"range":[6316,6339],"text":"[rules, onConfigChange, config]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":530,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":530,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15689,15692],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15689,15692],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":633,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":633,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20691,20694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20691,20694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":728,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":728,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25869,25872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25869,25872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":26,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CustomRulesEditor - Editor de Regras Personalizadas\n * \n * Componente para cria√ß√£o e gerenciamento de regras de an√°lise personalizadas.\n * Permite definir crit√©rios espec√≠ficos, condi√ß√µes l√≥gicas e a√ß√µes autom√°ticas\n * para personalizar o comportamento do motor de an√°lise adaptativo.\n * \n * Funcionalidades:\n * - Editor visual de regras com interface drag-and-drop\n * - Construtor de condi√ß√µes l√≥gicas (AND, OR, NOT)\n * - Biblioteca de templates de regras predefinidas\n * - Valida√ß√£o em tempo real de sintaxe\n * - Preview de execu√ß√£o de regras\n * - Versionamento e hist√≥rico de altera√ß√µes\n * - Importa√ß√£o/exporta√ß√£o de regras\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Plus,\n  Edit,\n  Trash2,\n  Copy,\n  Play,\n  Pause,\n  Save,\n  Download,\n  Upload,\n  Code,\n  Zap,\n  AlertTriangle,\n  CheckCircle,\n  Info,\n  Settings,\n  Filter,\n  Target,\n  MoreVertical,\n  Eye,\n  EyeOff\n} from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\n// Tipos de dados para regras\ninterface CustomRule {\n  id: string;\n  name: string;\n  description: string;\n  category: 'validation' | 'scoring' | 'classification' | 'notification' | 'workflow';\n  priority: number;\n  isActive: boolean;\n  conditions: RuleCondition[];\n  actions: RuleAction[];\n  createdAt: Date;\n  updatedAt: Date;\n  version: number;\n  author: string;\n}\n\ninterface RuleCondition {\n  id: string;\n  field: string;\n  operator: 'equals' | 'contains' | 'greater_than' | 'less_than' | 'regex' | 'exists' | 'not_exists';\n  value: string | number | boolean;\n  logicalOperator?: 'AND' | 'OR';\n}\n\ninterface RuleAction {\n  id: string;\n  type: 'set_score' | 'add_flag' | 'send_notification' | 'block_approval' | 'require_review';\n  parameters: { [key: string]: any };\n}\n\n// Templates de regras predefinidas\nconst RULE_TEMPLATES: Partial<CustomRule>[] = [\n  {\n    name: 'Valor Acima do Limite',\n    description: 'Sinaliza quando o valor estimado excede um limite definido',\n    category: 'validation',\n    conditions: [\n      {\n        id: 'cond1',\n        field: 'valor_estimado',\n        operator: 'greater_than',\n        value: 100000\n      }\n    ],\n    actions: [\n      {\n        id: 'act1',\n        type: 'add_flag',\n        parameters: {\n          flag: 'VALOR_ALTO',\n          severity: 'warning',\n          message: 'Valor estimado acima do limite organizacional'\n        }\n      }\n    ]\n  },\n  {\n    name: 'Documentos Obrigat√≥rios Ausentes',\n    description: 'Verifica se todos os documentos obrigat√≥rios est√£o presentes',\n    category: 'validation',\n    conditions: [\n      {\n        id: 'cond1',\n        field: 'documentos_anexos',\n        operator: 'not_exists',\n        value: 'termo_referencia'\n      }\n    ],\n    actions: [\n      {\n        id: 'act1',\n        type: 'block_approval',\n        parameters: {\n          reason: 'Termo de Refer√™ncia n√£o encontrado',\n          required_action: 'Anexar documento obrigat√≥rio'\n        }\n      }\n    ]\n  },\n  {\n    name: 'Prazo Muito Curto',\n    description: 'Identifica prazos de execu√ß√£o potencialmente inadequados',\n    category: 'scoring',\n    conditions: [\n      {\n        id: 'cond1',\n        field: 'prazo_execucao',\n        operator: 'less_than',\n        value: 30\n      },\n      {\n        id: 'cond2',\n        field: 'complexidade',\n        operator: 'equals',\n        value: 'alta',\n        logicalOperator: 'AND'\n      }\n    ],\n    actions: [\n      {\n        id: 'act1',\n        type: 'set_score',\n        parameters: {\n          score_adjustment: -0.2,\n          reason: 'Prazo inadequado para complexidade'\n        }\n      }\n    ]\n  }\n];\n\ninterface CustomRulesEditorProps {\n  config: any;\n  onConfigChange: (config: any) => void;\n  onProgressChange: (progress: number) => void;\n  isLoading?: boolean;\n}\n\nexport const CustomRulesEditor: React.FC<CustomRulesEditorProps> = ({\n  config,\n  onConfigChange,\n  onProgressChange,\n  isLoading = false\n}) => {\n  const { toast } = useToast();\n  \n  // Estados locais\n  const [rules, setRules] = useState<CustomRule[]>([]);\n  const [selectedRule, setSelectedRule] = useState<CustomRule | null>(null);\n  const [isCreatingRule, setIsCreatingRule] = useState(false);\n  const [isEditingRule, setIsEditingRule] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // Estado para nova regra\n  const [newRule, setNewRule] = useState<Partial<CustomRule>>({\n    name: '',\n    description: '',\n    category: 'validation',\n    priority: 1,\n    isActive: true,\n    conditions: [],\n    actions: []\n  });\n  \n  // Carregar configura√ß√£o inicial\n  useEffect(() => {\n    if (config?.customRules) {\n      setRules(config.customRules);\n    }\n  }, [config]);\n  \n  // Calcular e atualizar progresso\n  useEffect(() => {\n    const activeRules = rules.filter(rule => rule.isActive);\n    const validRules = activeRules.filter(rule => \n      rule.conditions.length > 0 && rule.actions.length > 0\n    );\n    const progress = rules.length > 0 ? (validRules.length / rules.length) * 100 : 0;\n    onProgressChange(Math.min(progress, 100));\n  }, [rules, onProgressChange]);\n  \n  // Atualizar configura√ß√£o quando regras mudarem\n  useEffect(() => {\n    onConfigChange({\n      ...config,\n      customRules: rules\n    });\n  }, [rules, onConfigChange]);\n  \n  // Fun√ß√£o para criar nova regra\n  const createRule = () => {\n    if (!newRule.name || !newRule.description) {\n      toast({\n        title: \"Campos Obrigat√≥rios\",\n        description: \"Preencha nome e descri√ß√£o da regra.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    \n    const rule: CustomRule = {\n      id: `rule-${Date.now()}`,\n      name: newRule.name!,\n      description: newRule.description!,\n      category: newRule.category || 'validation',\n      priority: newRule.priority || 1,\n      isActive: newRule.isActive !== false,\n      conditions: newRule.conditions || [],\n      actions: newRule.actions || [],\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      version: 1,\n      author: 'current_user' // Seria obtido do contexto de autentica√ß√£o\n    };\n    \n    setRules(prev => [...prev, rule]);\n    setNewRule({\n      name: '',\n      description: '',\n      category: 'validation',\n      priority: 1,\n      isActive: true,\n      conditions: [],\n      actions: []\n    });\n    setIsCreatingRule(false);\n    \n    toast({\n      title: \"Regra Criada\",\n      description: `Regra \"${rule.name}\" criada com sucesso.`,\n      variant: \"default\"\n    });\n  };\n  \n  // Fun√ß√£o para aplicar template\n  const applyTemplate = (template: Partial<CustomRule>) => {\n    setNewRule({\n      ...newRule,\n      ...template,\n      conditions: template.conditions?.map(cond => ({ ...cond, id: `cond-${Date.now()}-${Math.random()}` })) || [],\n      actions: template.actions?.map(action => ({ ...action, id: `act-${Date.now()}-${Math.random()}` })) || []\n    });\n  };\n  \n  // Fun√ß√£o para alternar status ativo de uma regra\n  const toggleRuleActive = (ruleId: string) => {\n    setRules(prev => prev.map(rule => \n      rule.id === ruleId ? { ...rule, isActive: !rule.isActive, updatedAt: new Date() } : rule\n    ));\n  };\n  \n  // Fun√ß√£o para excluir regra\n  const deleteRule = (ruleId: string) => {\n    setRules(prev => prev.filter(rule => rule.id !== ruleId));\n    toast({\n      title: \"Regra Exclu√≠da\",\n      description: \"A regra foi removida com sucesso.\",\n      variant: \"default\"\n    });\n  };\n  \n  // Fun√ß√£o para duplicar regra\n  const duplicateRule = (rule: CustomRule) => {\n    const duplicatedRule: CustomRule = {\n      ...rule,\n      id: `rule-${Date.now()}`,\n      name: `${rule.name} (C√≥pia)`,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      version: 1\n    };\n    \n    setRules(prev => [...prev, duplicatedRule]);\n    toast({\n      title: \"Regra Duplicada\",\n      description: `Regra \"${duplicatedRule.name}\" criada com sucesso.`,\n      variant: \"default\"\n    });\n  };\n  \n  // Fun√ß√£o para adicionar condi√ß√£o\n  const addCondition = () => {\n    const newCondition: RuleCondition = {\n      id: `cond-${Date.now()}`,\n      field: '',\n      operator: 'equals',\n      value: ''\n    };\n    \n    setNewRule(prev => ({\n      ...prev,\n      conditions: [...(prev.conditions || []), newCondition]\n    }));\n  };\n  \n  // Fun√ß√£o para adicionar a√ß√£o\n  const addAction = () => {\n    const newAction: RuleAction = {\n      id: `act-${Date.now()}`,\n      type: 'add_flag',\n      parameters: {}\n    };\n    \n    setNewRule(prev => ({\n      ...prev,\n      actions: [...(prev.actions || []), newAction]\n    }));\n  };\n  \n  // Fun√ß√£o para remover condi√ß√£o\n  const removeCondition = (conditionId: string) => {\n    setNewRule(prev => ({\n      ...prev,\n      conditions: prev.conditions?.filter(cond => cond.id !== conditionId) || []\n    }));\n  };\n  \n  // Fun√ß√£o para remover a√ß√£o\n  const removeAction = (actionId: string) => {\n    setNewRule(prev => ({\n      ...prev,\n      actions: prev.actions?.filter(action => action.id !== actionId) || []\n    }));\n  };\n  \n  // Filtrar regras\n  const filteredRules = rules.filter(rule => {\n    const matchesCategory = selectedCategory === 'all' || rule.category === selectedCategory;\n    const matchesSearch = rule.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         rule.description.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesCategory && matchesSearch;\n  });\n  \n  const getCategoryColor = (category: string) => {\n    const colors: { [key: string]: string } = {\n      validation: 'bg-red-100 text-red-800',\n      scoring: 'bg-blue-100 text-blue-800',\n      classification: 'bg-green-100 text-green-800',\n      notification: 'bg-yellow-100 text-yellow-800',\n      workflow: 'bg-purple-100 text-purple-800'\n    };\n    return colors[category] || 'bg-gray-100 text-gray-800';\n  };\n  \n  const getCategoryName = (category: string) => {\n    const names: { [key: string]: string } = {\n      validation: 'Valida√ß√£o',\n      scoring: 'Pontua√ß√£o',\n      classification: 'Classifica√ß√£o',\n      notification: 'Notifica√ß√£o',\n      workflow: 'Fluxo'\n    };\n    return names[category] || category;\n  };\n  \n  const getOperatorName = (operator: string) => {\n    const names: { [key: string]: string } = {\n      equals: 'Igual a',\n      contains: 'Cont√©m',\n      greater_than: 'Maior que',\n      less_than: 'Menor que',\n      regex: 'Express√£o regular',\n      exists: 'Existe',\n      not_exists: 'N√£o existe'\n    };\n    return names[operator] || operator;\n  };\n  \n  const getActionTypeName = (type: string) => {\n    const names: { [key: string]: string } = {\n      set_score: 'Definir Pontua√ß√£o',\n      add_flag: 'Adicionar Sinaliza√ß√£o',\n      send_notification: 'Enviar Notifica√ß√£o',\n      block_approval: 'Bloquear Aprova√ß√£o',\n      require_review: 'Exigir Revis√£o'\n    };\n    return names[type] || type;\n  };\n  \n  return (\n    <div className=\"space-y-6\">\n      {/* Estat√≠sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Total de Regras</span>\n              <span className=\"text-2xl font-bold text-blue-600\">{rules.length}</span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Regras Ativas</span>\n              <span className=\"text-2xl font-bold text-green-600\">\n                {rules.filter(rule => rule.isActive).length}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Categorias</span>\n              <span className=\"text-2xl font-bold text-purple-600\">\n                {new Set(rules.map(rule => rule.category)).size}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Regras V√°lidas</span>\n              <span className=\"text-2xl font-bold text-orange-600\">\n                {rules.filter(rule => rule.conditions.length > 0 && rule.actions.length > 0).length}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n      \n      {/* Controles Principais */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Code className=\"h-5 w-5\" />\n                Regras Personalizadas\n              </CardTitle>\n              <CardDescription>\n                Configure regras espec√≠ficas para an√°lise de documentos\n              </CardDescription>\n            </div>\n            \n            <Dialog open={isCreatingRule} onOpenChange={setIsCreatingRule}>\n              <DialogTrigger asChild>\n                <Button className=\"flex items-center gap-2\">\n                  <Plus className=\"h-4 w-4\" />\n                  Nova Regra\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n                <DialogHeader>\n                  <DialogTitle>Criar Nova Regra</DialogTitle>\n                  <DialogDescription>\n                    Configure uma regra personalizada para an√°lise de documentos\n                  </DialogDescription>\n                </DialogHeader>\n                \n                <div className=\"space-y-6\">\n                  {/* Informa√ß√µes B√°sicas */}\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"rule-name\">Nome da Regra</Label>\n                      <Input\n                        id=\"rule-name\"\n                        value={newRule.name || ''}\n                        onChange={(e) => setNewRule(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Ex: Verificar Valor M√°ximo\"\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"rule-category\">Categoria</Label>\n                      <Select\n                        value={newRule.category || 'validation'}\n                        onValueChange={(value: any) => setNewRule(prev => ({ ...prev, category: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"validation\">Valida√ß√£o</SelectItem>\n                          <SelectItem value=\"scoring\">Pontua√ß√£o</SelectItem>\n                          <SelectItem value=\"classification\">Classifica√ß√£o</SelectItem>\n                          <SelectItem value=\"notification\">Notifica√ß√£o</SelectItem>\n                          <SelectItem value=\"workflow\">Fluxo</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"rule-description\">Descri√ß√£o</Label>\n                    <Textarea\n                      id=\"rule-description\"\n                      value={newRule.description || ''}\n                      onChange={(e) => setNewRule(prev => ({ ...prev, description: e.target.value }))}\n                      placeholder=\"Descreva o prop√≥sito e funcionamento desta regra\"\n                      rows={3}\n                    />\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"rule-priority\">Prioridade</Label>\n                      <Input\n                        id=\"rule-priority\"\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"10\"\n                        value={newRule.priority || 1}\n                        onChange={(e) => setNewRule(prev => ({ ...prev, priority: parseInt(e.target.value) || 1 }))}\n                      />\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2 pt-6\">\n                      <Switch\n                        checked={newRule.isActive !== false}\n                        onCheckedChange={(checked) => setNewRule(prev => ({ ...prev, isActive: checked }))}\n                      />\n                      <Label>Regra Ativa</Label>\n                    </div>\n                  </div>\n                  \n                  {/* Templates */}\n                  <div>\n                    <Label>Templates Predefinidos</Label>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2 mt-2\">\n                      {RULE_TEMPLATES.map((template, index) => (\n                        <Button\n                          key={index}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => applyTemplate(template)}\n                          className=\"text-left justify-start h-auto p-3\"\n                        >\n                          <div>\n                            <div className=\"font-medium\">{template.name}</div>\n                            <div className=\"text-xs text-gray-500\">{template.description}</div>\n                          </div>\n                        </Button>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <Separator />\n                  \n                  {/* Condi√ß√µes */}\n                  <div>\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <Label className=\"text-base font-medium\">Condi√ß√µes</Label>\n                      <Button variant=\"outline\" size=\"sm\" onClick={addCondition}>\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Adicionar Condi√ß√£o\n                      </Button>\n                    </div>\n                    \n                    <div className=\"space-y-3\">\n                      {newRule.conditions?.map((condition, index) => (\n                        <Card key={condition.id} className=\"p-4\">\n                          <div className=\"grid grid-cols-4 gap-3 items-end\">\n                            <div>\n                              <Label>Campo</Label>\n                              <Input\n                                value={condition.field}\n                                onChange={(e) => {\n                                  const updatedConditions = [...(newRule.conditions || [])];\n                                  updatedConditions[index] = { ...condition, field: e.target.value };\n                                  setNewRule(prev => ({ ...prev, conditions: updatedConditions }));\n                                }}\n                                placeholder=\"Ex: valor_estimado\"\n                              />\n                            </div>\n                            \n                            <div>\n                              <Label>Operador</Label>\n                              <Select\n                                value={condition.operator}\n                                onValueChange={(value: any) => {\n                                  const updatedConditions = [...(newRule.conditions || [])];\n                                  updatedConditions[index] = { ...condition, operator: value };\n                                  setNewRule(prev => ({ ...prev, conditions: updatedConditions }));\n                                }}\n                              >\n                                <SelectTrigger>\n                                  <SelectValue />\n                                </SelectTrigger>\n                                <SelectContent>\n                                  <SelectItem value=\"equals\">Igual a</SelectItem>\n                                  <SelectItem value=\"contains\">Cont√©m</SelectItem>\n                                  <SelectItem value=\"greater_than\">Maior que</SelectItem>\n                                  <SelectItem value=\"less_than\">Menor que</SelectItem>\n                                  <SelectItem value=\"regex\">Regex</SelectItem>\n                                  <SelectItem value=\"exists\">Existe</SelectItem>\n                                  <SelectItem value=\"not_exists\">N√£o existe</SelectItem>\n                                </SelectContent>\n                              </Select>\n                            </div>\n                            \n                            <div>\n                              <Label>Valor</Label>\n                              <Input\n                                value={condition.value?.toString() || ''}\n                                onChange={(e) => {\n                                  const updatedConditions = [...(newRule.conditions || [])];\n                                  updatedConditions[index] = { ...condition, value: e.target.value };\n                                  setNewRule(prev => ({ ...prev, conditions: updatedConditions }));\n                                }}\n                                placeholder=\"Valor de compara√ß√£o\"\n                              />\n                            </div>\n                            \n                            <div className=\"flex gap-2\">\n                              {index > 0 && (\n                                <Select\n                                  value={condition.logicalOperator || 'AND'}\n                                  onValueChange={(value: 'AND' | 'OR') => {\n                                    const updatedConditions = [...(newRule.conditions || [])];\n                                    updatedConditions[index] = { ...condition, logicalOperator: value };\n                                    setNewRule(prev => ({ ...prev, conditions: updatedConditions }));\n                                  }}\n                                >\n                                  <SelectTrigger className=\"w-20\">\n                                    <SelectValue />\n                                  </SelectTrigger>\n                                  <SelectContent>\n                                    <SelectItem value=\"AND\">E</SelectItem>\n                                    <SelectItem value=\"OR\">OU</SelectItem>\n                                  </SelectContent>\n                                </Select>\n                              )}\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => removeCondition(condition.id)}\n                                className=\"text-red-600\"\n                              >\n                                <Trash2 className=\"h-4 w-4\" />\n                              </Button>\n                            </div>\n                          </div>\n                        </Card>\n                      ))}\n                      \n                      {(!newRule.conditions || newRule.conditions.length === 0) && (\n                        <Alert>\n                          <Info className=\"h-4 w-4\" />\n                          <AlertDescription>\n                            Adicione pelo menos uma condi√ß√£o para definir quando esta regra deve ser executada.\n                          </AlertDescription>\n                        </Alert>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <Separator />\n                  \n                  {/* A√ß√µes */}\n                  <div>\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <Label className=\"text-base font-medium\">A√ß√µes</Label>\n                      <Button variant=\"outline\" size=\"sm\" onClick={addAction}>\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Adicionar A√ß√£o\n                      </Button>\n                    </div>\n                    \n                    <div className=\"space-y-3\">\n                      {newRule.actions?.map((action, index) => (\n                        <Card key={action.id} className=\"p-4\">\n                          <div className=\"flex items-center justify-between mb-3\">\n                            <Select\n                              value={action.type}\n                              onValueChange={(value: any) => {\n                                const updatedActions = [...(newRule.actions || [])];\n                                updatedActions[index] = { ...action, type: value, parameters: {} };\n                                setNewRule(prev => ({ ...prev, actions: updatedActions }));\n                              }}\n                            >\n                              <SelectTrigger className=\"w-48\">\n                                <SelectValue />\n                              </SelectTrigger>\n                              <SelectContent>\n                                <SelectItem value=\"set_score\">Definir Pontua√ß√£o</SelectItem>\n                                <SelectItem value=\"add_flag\">Adicionar Sinaliza√ß√£o</SelectItem>\n                                <SelectItem value=\"send_notification\">Enviar Notifica√ß√£o</SelectItem>\n                                <SelectItem value=\"block_approval\">Bloquear Aprova√ß√£o</SelectItem>\n                                <SelectItem value=\"require_review\">Exigir Revis√£o</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            \n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => removeAction(action.id)}\n                              className=\"text-red-600\"\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                          \n                          {/* Par√¢metros espec√≠ficos por tipo de a√ß√£o */}\n                          <div className=\"grid grid-cols-2 gap-3\">\n                            {action.type === 'set_score' && (\n                              <>\n                                <div>\n                                  <Label>Ajuste de Pontua√ß√£o</Label>\n                                  <Input\n                                    type=\"number\"\n                                    step=\"0.1\"\n                                    placeholder=\"Ex: -0.2\"\n                                    value={action.parameters.score_adjustment || ''}\n                                    onChange={(e) => {\n                                      const updatedActions = [...(newRule.actions || [])];\n                                      updatedActions[index] = {\n                                        ...action,\n                                        parameters: {\n                                          ...action.parameters,\n                                          score_adjustment: parseFloat(e.target.value) || 0\n                                        }\n                                      };\n                                      setNewRule(prev => ({ ...prev, actions: updatedActions }));\n                                    }}\n                                  />\n                                </div>\n                                <div>\n                                  <Label>Motivo</Label>\n                                  <Input\n                                    placeholder=\"Motivo do ajuste\"\n                                    value={action.parameters.reason || ''}\n                                    onChange={(e) => {\n                                      const updatedActions = [...(newRule.actions || [])];\n                                      updatedActions[index] = {\n                                        ...action,\n                                        parameters: {\n                                          ...action.parameters,\n                                          reason: e.target.value\n                                        }\n                                      };\n                                      setNewRule(prev => ({ ...prev, actions: updatedActions }));\n                                    }}\n                                  />\n                                </div>\n                              </>\n                            )}\n                            \n                            {action.type === 'add_flag' && (\n                              <>\n                                <div>\n                                  <Label>Tipo de Sinaliza√ß√£o</Label>\n                                  <Input\n                                    placeholder=\"Ex: VALOR_ALTO\"\n                                    value={action.parameters.flag || ''}\n                                    onChange={(e) => {\n                                      const updatedActions = [...(newRule.actions || [])];\n                                      updatedActions[index] = {\n                                        ...action,\n                                        parameters: {\n                                          ...action.parameters,\n                                          flag: e.target.value\n                                        }\n                                      };\n                                      setNewRule(prev => ({ ...prev, actions: updatedActions }));\n                                    }}\n                                  />\n                                </div>\n                                <div>\n                                  <Label>Severidade</Label>\n                                  <Select\n                                    value={action.parameters.severity || 'warning'}\n                                    onValueChange={(value) => {\n                                      const updatedActions = [...(newRule.actions || [])];\n                                      updatedActions[index] = {\n                                        ...action,\n                                        parameters: {\n                                          ...action.parameters,\n                                          severity: value\n                                        }\n                                      };\n                                      setNewRule(prev => ({ ...prev, actions: updatedActions }));\n                                    }}\n                                  >\n                                    <SelectTrigger>\n                                      <SelectValue />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                      <SelectItem value=\"info\">Info</SelectItem>\n                                      <SelectItem value=\"warning\">Aviso</SelectItem>\n                                      <SelectItem value=\"error\">Erro</SelectItem>\n                                    </SelectContent>\n                                  </Select>\n                                </div>\n                              </>\n                            )}\n                          </div>\n                        </Card>\n                      ))}\n                      \n                      {(!newRule.actions || newRule.actions.length === 0) && (\n                        <Alert>\n                          <Info className=\"h-4 w-4\" />\n                          <AlertDescription>\n                            Adicione pelo menos uma a√ß√£o para definir o que acontece quando as condi√ß√µes s√£o atendidas.\n                          </AlertDescription>\n                        </Alert>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                <DialogFooter>\n                  <Button variant=\"outline\" onClick={() => setIsCreatingRule(false)}>\n                    Cancelar\n                  </Button>\n                  <Button onClick={createRule}>\n                    Criar Regra\n                  </Button>\n                </DialogFooter>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {/* Filtros */}\n          <div className=\"flex items-center gap-4 mb-6\">\n            <div className=\"flex-1\">\n              <Input\n                placeholder=\"Buscar regras...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"max-w-sm\"\n              />\n            </div>\n            \n            <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n              <SelectTrigger className=\"w-48\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todas as Categorias</SelectItem>\n                <SelectItem value=\"validation\">Valida√ß√£o</SelectItem>\n                <SelectItem value=\"scoring\">Pontua√ß√£o</SelectItem>\n                <SelectItem value=\"classification\">Classifica√ß√£o</SelectItem>\n                <SelectItem value=\"notification\">Notifica√ß√£o</SelectItem>\n                <SelectItem value=\"workflow\">Fluxo</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          \n          {/* Lista de Regras */}\n          {filteredRules.length === 0 ? (\n            <Alert>\n              <Info className=\"h-4 w-4\" />\n              <AlertDescription>\n                {rules.length === 0 \n                  ? \"Nenhuma regra criada ainda. Clique em 'Nova Regra' para come√ßar.\"\n                  : \"Nenhuma regra encontrada com os filtros aplicados.\"\n                }\n              </AlertDescription>\n            </Alert>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredRules.map((rule) => (\n                <Card key={rule.id} className={`transition-all ${\n                  rule.isActive ? 'bg-white' : 'bg-gray-50 opacity-60'\n                }`}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{rule.name}</h4>\n                          <Badge className={getCategoryColor(rule.category)}>\n                            {getCategoryName(rule.category)}\n                          </Badge>\n                          <Badge variant=\"outline\">Prioridade {rule.priority}</Badge>\n                          {rule.isActive ? (\n                            <Badge className=\"bg-green-100 text-green-800\">\n                              <CheckCircle className=\"h-3 w-3 mr-1\" />\n                              Ativa\n                            </Badge>\n                          ) : (\n                            <Badge variant=\"secondary\">\n                              <Pause className=\"h-3 w-3 mr-1\" />\n                              Inativa\n                            </Badge>\n                          )}\n                        </div>\n                        \n                        <p className=\"text-sm text-gray-600 mb-3\">{rule.description}</p>\n                        \n                        <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                          <span>{rule.conditions.length} condi√ß√µes</span>\n                          <span>{rule.actions.length} a√ß√µes</span>\n                          <span>v{rule.version}</span>\n                          <span>por {rule.author}</span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-2\">\n                        <Switch\n                          checked={rule.isActive}\n                          onCheckedChange={() => toggleRuleActive(rule.id)}\n                        />\n                        \n                        <DropdownMenu>\n                          <DropdownMenuTrigger asChild>\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <MoreVertical className=\"h-4 w-4\" />\n                            </Button>\n                          </DropdownMenuTrigger>\n                          <DropdownMenuContent align=\"end\">\n                            <DropdownMenuItem onClick={() => setSelectedRule(rule)}>\n                              <Eye className=\"h-4 w-4 mr-2\" />\n                              Visualizar\n                            </DropdownMenuItem>\n                            <DropdownMenuItem>\n                              <Edit className=\"h-4 w-4 mr-2\" />\n                              Editar\n                            </DropdownMenuItem>\n                            <DropdownMenuItem onClick={() => duplicateRule(rule)}>\n                              <Copy className=\"h-4 w-4 mr-2\" />\n                              Duplicar\n                            </DropdownMenuItem>\n                            <DropdownMenuSeparator />\n                            <DropdownMenuItem \n                              onClick={() => deleteRule(rule.id)}\n                              className=\"text-red-600\"\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-2\" />\n                              Excluir\n                            </DropdownMenuItem>\n                          </DropdownMenuContent>\n                        </DropdownMenu>\n                      </div>\n                    </div>\n                    \n                    {/* Preview das condi√ß√µes e a√ß√µes */}\n                    <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Condi√ß√µes:</span>\n                          <div className=\"mt-1 space-y-1\">\n                            {rule.conditions.slice(0, 2).map((condition, index) => (\n                              <div key={condition.id} className=\"text-gray-600\">\n                                {index > 0 && condition.logicalOperator && (\n                                  <span className=\"text-blue-600 font-medium\">\n                                    {condition.logicalOperator} \n                                  </span>\n                                )}\n                                {condition.field} {getOperatorName(condition.operator)} {condition.value}\n                              </div>\n                            ))}\n                            {rule.conditions.length > 2 && (\n                              <div className=\"text-gray-500\">+{rule.conditions.length - 2} mais...</div>\n                            )}\n                          </div>\n                        </div>\n                        \n                        <div>\n                          <span className=\"font-medium text-gray-700\">A√ß√µes:</span>\n                          <div className=\"mt-1 space-y-1\">\n                            {rule.actions.slice(0, 2).map((action) => (\n                              <div key={action.id} className=\"text-gray-600\">\n                                {getActionTypeName(action.type)}\n                              </div>\n                            ))}\n                            {rule.actions.length > 2 && (\n                              <div className=\"text-gray-500\">+{rule.actions.length - 2} mais...</div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n      \n      {/* Dialog de Visualiza√ß√£o de Regra */}\n      <Dialog open={!!selectedRule} onOpenChange={() => setSelectedRule(null)}>\n        <DialogContent className=\"max-w-3xl\">\n          <DialogHeader>\n            <DialogTitle>{selectedRule?.name}</DialogTitle>\n            <DialogDescription>{selectedRule?.description}</DialogDescription>\n          </DialogHeader>\n          \n          {selectedRule && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-2\">\n                <Badge className={getCategoryColor(selectedRule.category)}>\n                  {getCategoryName(selectedRule.category)}\n                </Badge>\n                <Badge variant=\"outline\">Prioridade {selectedRule.priority}</Badge>\n                <Badge className={selectedRule.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}>\n                  {selectedRule.isActive ? 'Ativa' : 'Inativa'}\n                </Badge>\n              </div>\n              \n              <Separator />\n              \n              <div>\n                <h4 className=\"font-medium mb-2\">Condi√ß√µes</h4>\n                <div className=\"space-y-2\">\n                  {selectedRule.conditions.map((condition, index) => (\n                    <div key={condition.id} className=\"flex items-center gap-2 text-sm\">\n                      {index > 0 && condition.logicalOperator && (\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {condition.logicalOperator}\n                        </Badge>\n                      )}\n                      <code className=\"bg-gray-100 px-2 py-1 rounded\">\n                        {condition.field} {getOperatorName(condition.operator)} {condition.value}\n                      </code>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              <div>\n                <h4 className=\"font-medium mb-2\">A√ß√µes</h4>\n                <div className=\"space-y-2\">\n                  {selectedRule.actions.map((action) => (\n                    <div key={action.id} className=\"text-sm\">\n                      <Badge variant=\"outline\">{getActionTypeName(action.type)}</Badge>\n                      {Object.keys(action.parameters).length > 0 && (\n                        <code className=\"ml-2 bg-gray-100 px-2 py-1 rounded text-xs\">\n                          {JSON.stringify(action.parameters, null, 2)}\n                        </code>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              <Separator />\n              \n              <div className=\"text-xs text-gray-500\">\n                <div>Criada em: {selectedRule.createdAt.toLocaleDateString()}</div>\n                <div>√öltima atualiza√ß√£o: {selectedRule.updatedAt.toLocaleDateString()}</div>\n                <div>Vers√£o: {selectedRule.version}</div>\n                <div>Autor: {selectedRule.author}</div>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default CustomRulesEditor;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/DocumentTypeSelector.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Separator' is defined but never used.","line":23,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":23,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'Edit' is defined but never used.","line":44,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Edit' is defined but never used.","line":44,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":48,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":48,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3260,3263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3260,3263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":118,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":118,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3292,3295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3292,3295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is defined but never used.","line":119,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'isLoading' is assigned a value but never used.","line":127,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":127,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":127,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":127,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'editingType' is assigned a value but never used.","line":135,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":135,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'editingType' is assigned a value but never used.","line":135,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'setEditingType' is assigned a value but never used.","line":135,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":135,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setEditingType' is assigned a value but never used.","line":135,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":37},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'config'. Either include it or remove the dependency array.","line":181,"column":6,"nodeType":"ArrayExpression","endLine":181,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [selectedTypes, customTypes, onConfigChange, config]","fix":{"range":[5380,5424],"text":"[selectedTypes, customTypes, onConfigChange, config]"}}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * DocumentTypeSelector - Seletor de Tipos de Documento\n * \n * Componente para configura√ß√£o e gerenciamento de tipos de documentos\n * suportados pelo sistema de an√°lise. Permite definir caracter√≠sticas\n * espec√≠ficas de cada tipo de documento e seus par√¢metros de an√°lise.\n * \n * Funcionalidades:\n * - Sele√ß√£o de tipos de documento predefinidos\n * - Cria√ß√£o de tipos personalizados\n * - Configura√ß√£o de par√¢metros espec√≠ficos por tipo\n * - Valida√ß√£o de configura√ß√µes\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  FileText,\n  Plus,\n  Edit,\n  Trash2,\n  Check,\n  X,\n  AlertCircle,\n  Info,\n  Settings,\n  CheckCircle\n} from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\n// Tipos de documento predefinidos\nconst PREDEFINED_DOCUMENT_TYPES = [\n  {\n    id: 'edital-licitacao',\n    name: 'Edital de Licita√ß√£o',\n    description: 'Documento principal que define os termos da licita√ß√£o',\n    category: 'principal',\n    requiredFields: ['objeto', 'prazo', 'valor', 'modalidade'],\n    analysisWeight: 1.0,\n    complexityLevel: 'high' as const\n  },\n  {\n    id: 'termo-referencia',\n    name: 'Termo de Refer√™ncia',\n    description: 'Especifica√ß√µes t√©cnicas detalhadas do objeto',\n    category: 'tecnico',\n    requiredFields: ['especificacoes', 'quantidades', 'criterios'],\n    analysisWeight: 0.9,\n    complexityLevel: 'high' as const\n  },\n  {\n    id: 'minuta-contrato',\n    name: 'Minuta de Contrato',\n    description: 'Modelo do contrato a ser firmado',\n    category: 'juridico',\n    requiredFields: ['clausulas', 'obrigacoes', 'penalidades'],\n    analysisWeight: 0.8,\n    complexityLevel: 'medium' as const\n  },\n  {\n    id: 'planilha-orcamentaria',\n    name: 'Planilha Or√ßament√°ria',\n    description: 'Estimativa de custos e valores',\n    category: 'financeiro',\n    requiredFields: ['itens', 'quantidades', 'valores'],\n    analysisWeight: 0.7,\n    complexityLevel: 'medium' as const\n  },\n  {\n    id: 'cronograma',\n    name: 'Cronograma de Execu√ß√£o',\n    description: 'Planejamento temporal das atividades',\n    category: 'planejamento',\n    requiredFields: ['etapas', 'prazos', 'marcos'],\n    analysisWeight: 0.6,\n    complexityLevel: 'low' as const\n  }\n];\n\ninterface DocumentType {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  requiredFields: string[];\n  analysisWeight: number;\n  complexityLevel: 'low' | 'medium' | 'high';\n  isCustom?: boolean;\n  isActive?: boolean;\n}\n\ninterface DocumentTypeSelectorProps {\n  config: any;\n  onConfigChange: (config: any) => void;\n  onProgressChange: (progress: number) => void;\n  isLoading?: boolean;\n}\n\nexport const DocumentTypeSelector: React.FC<DocumentTypeSelectorProps> = ({\n  config,\n  onConfigChange,\n  onProgressChange,\n  isLoading = false\n}) => {\n  const { toast } = useToast();\n  \n  // Estados locais\n  const [selectedTypes, setSelectedTypes] = useState<DocumentType[]>([]);\n  const [customTypes, setCustomTypes] = useState<DocumentType[]>([]);\n  const [isCreatingCustom, setIsCreatingCustom] = useState(false);\n  const [editingType, setEditingType] = useState<DocumentType | null>(null);\n  \n  // Estado para cria√ß√£o de tipo personalizado\n  const [newType, setNewType] = useState<Partial<DocumentType>>({\n    name: '',\n    description: '',\n    category: '',\n    requiredFields: [],\n    analysisWeight: 1.0,\n    complexityLevel: 'medium',\n    isCustom: true,\n    isActive: true\n  });\n  \n  // Carregar configura√ß√£o inicial\n  useEffect(() => {\n    if (config?.documentTypes) {\n      const predefined = config.documentTypes.filter((type: DocumentType) => !type.isCustom);\n      const custom = config.documentTypes.filter((type: DocumentType) => type.isCustom);\n      setSelectedTypes(predefined);\n      setCustomTypes(custom);\n    } else {\n      // Configura√ß√£o padr√£o\n      const defaultTypes: DocumentType[] = PREDEFINED_DOCUMENT_TYPES.slice(0, 3).map(type => ({\n        ...type,\n        isActive: true\n      }));\n      setSelectedTypes(defaultTypes);\n    }\n  }, [config]);\n  \n  // Calcular e atualizar progresso\n  useEffect(() => {\n    const totalTypes = selectedTypes.length + customTypes.length;\n    const activeTypes = [...selectedTypes, ...customTypes].filter(type => type.isActive).length;\n    const progress = totalTypes > 0 ? (activeTypes / Math.max(totalTypes, 3)) * 100 : 0;\n    onProgressChange(Math.min(progress, 100));\n  }, [selectedTypes, customTypes, onProgressChange]);\n  \n  // Atualizar configura√ß√£o quando tipos mudarem\n  useEffect(() => {\n    const allTypes = [...selectedTypes, ...customTypes];\n    onConfigChange({\n      ...config,\n      documentTypes: allTypes\n    });\n  }, [selectedTypes, customTypes, onConfigChange]);\n  \n  // Fun√ß√£o para alternar tipo predefinido\n  const togglePredefinedType = (typeId: string) => {\n    const type = PREDEFINED_DOCUMENT_TYPES.find(t => t.id === typeId);\n    if (!type) return;\n    \n    const isSelected = selectedTypes.some(t => t.id === typeId);\n    \n    if (isSelected) {\n      setSelectedTypes(prev => prev.filter(t => t.id !== typeId));\n    } else {\n      const newType: DocumentType = { ...type, isActive: true };\n      setSelectedTypes(prev => [...prev, newType]);\n    }\n  };\n  \n  // Fun√ß√£o para alternar status ativo de um tipo\n  const toggleTypeActive = (typeId: string, isCustom: boolean = false) => {\n    if (isCustom) {\n      setCustomTypes(prev => prev.map(type => \n        type.id === typeId ? { ...type, isActive: !type.isActive } : type\n      ));\n    } else {\n      setSelectedTypes(prev => prev.map(type => \n        type.id === typeId ? { ...type, isActive: !type.isActive } : type\n      ));\n    }\n  };\n  \n  // Fun√ß√£o para criar tipo personalizado\n  const createCustomType = () => {\n    if (!newType.name || !newType.description || !newType.category) {\n      toast({\n        title: \"Campos Obrigat√≥rios\",\n        description: \"Preencha nome, descri√ß√£o e categoria do tipo de documento.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    \n    const customType: DocumentType = {\n      id: `custom-${Date.now()}`,\n      name: newType.name!,\n      description: newType.description!,\n      category: newType.category!,\n      requiredFields: newType.requiredFields || [],\n      analysisWeight: newType.analysisWeight || 1.0,\n      complexityLevel: newType.complexityLevel || 'medium',\n      isCustom: true,\n      isActive: true\n    };\n    \n    setCustomTypes(prev => [...prev, customType]);\n    setNewType({\n      name: '',\n      description: '',\n      category: '',\n      requiredFields: [],\n      analysisWeight: 1.0,\n      complexityLevel: 'medium',\n      isCustom: true,\n      isActive: true\n    });\n    setIsCreatingCustom(false);\n    \n    toast({\n      title: \"Tipo Criado\",\n      description: `Tipo de documento \"${customType.name}\" criado com sucesso.`,\n      variant: \"default\"\n    });\n  };\n  \n  // Fun√ß√£o para excluir tipo personalizado\n  const deleteCustomType = (typeId: string) => {\n    setCustomTypes(prev => prev.filter(type => type.id !== typeId));\n    toast({\n      title: \"Tipo Exclu√≠do\",\n      description: \"Tipo de documento personalizado foi exclu√≠do.\",\n      variant: \"default\"\n    });\n  };\n  \n  // Fun√ß√£o para adicionar campo obrigat√≥rio\n  const addRequiredField = (field: string) => {\n    if (field && !newType.requiredFields?.includes(field)) {\n      setNewType(prev => ({\n        ...prev,\n        requiredFields: [...(prev.requiredFields || []), field]\n      }));\n    }\n  };\n  \n  // Fun√ß√£o para remover campo obrigat√≥rio\n  const removeRequiredField = (field: string) => {\n    setNewType(prev => ({\n      ...prev,\n      requiredFields: prev.requiredFields?.filter(f => f !== field) || []\n    }));\n  };\n  \n  const getCategoryColor = (category: string) => {\n    const colors: { [key: string]: string } = {\n      principal: 'bg-blue-100 text-blue-800',\n      tecnico: 'bg-green-100 text-green-800',\n      juridico: 'bg-purple-100 text-purple-800',\n      financeiro: 'bg-yellow-100 text-yellow-800',\n      planejamento: 'bg-gray-100 text-gray-800'\n    };\n    return colors[category] || 'bg-gray-100 text-gray-800';\n  };\n  \n  const getComplexityColor = (level: string) => {\n    const colors: { [key: string]: string } = {\n      low: 'bg-green-100 text-green-800',\n      medium: 'bg-yellow-100 text-yellow-800',\n      high: 'bg-red-100 text-red-800'\n    };\n    return colors[level] || 'bg-gray-100 text-gray-800';\n  };\n  \n  // Calcular peso m√©dio dos tipos ativos\n  const calculateAverageWeight = () => {\n    const activeTypes = [...selectedTypes, ...customTypes].filter(type => type.isActive);\n    if (activeTypes.length === 0) return 0;\n    const totalWeight = activeTypes.reduce((sum, type) => sum + type.analysisWeight, 0);\n    return totalWeight / activeTypes.length;\n  };\n  \n  return (\n    <div className=\"space-y-6\">\n      {/* Informa√ß√µes e Estat√≠sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Tipos Ativos</span>\n              <span className=\"text-2xl font-bold text-blue-600\">\n                {[...selectedTypes, ...customTypes].filter(type => type.isActive).length}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Tipos Personalizados</span>\n              <span className=\"text-2xl font-bold text-green-600\">{customTypes.length}</span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Peso M√©dio</span>\n              <span className=\"text-2xl font-bold text-purple-600\">\n                {calculateAverageWeight().toFixed(1)}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n      \n      {/* Tipos Predefinidos */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5\" />\n            Tipos de Documento Predefinidos\n          </CardTitle>\n          <CardDescription>\n            Selecione os tipos de documento que sua organiza√ß√£o utiliza frequentemente\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {PREDEFINED_DOCUMENT_TYPES.map((type) => {\n              const isSelected = selectedTypes.some(t => t.id === type.id);\n              const selectedType = selectedTypes.find(t => t.id === type.id);\n              \n              return (\n                <Card\n                  key={type.id}\n                  className={`cursor-pointer transition-all ${\n                    isSelected ? 'ring-2 ring-blue-500 bg-blue-50' : 'hover:bg-gray-50'\n                  }`}\n                  onClick={() => togglePredefinedType(type.id)}\n                >\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-medium text-gray-900\">{type.name}</h4>\n                        <p className=\"text-sm text-gray-600 mt-1\">{type.description}</p>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {isSelected && (\n                          <Switch\n                            checked={selectedType?.isActive || false}\n                            onCheckedChange={() => toggleTypeActive(type.id)}\n                            onClick={(e) => e.stopPropagation()}\n                          />\n                        )}\n                        <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                          isSelected ? 'border-blue-500 bg-blue-500' : 'border-gray-300'\n                        }`}>\n                          {isSelected && <Check className=\"h-4 w-4 text-white\" />}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Badge className={getCategoryColor(type.category)}>\n                        {type.category}\n                      </Badge>\n                      <Badge className={getComplexityColor(type.complexityLevel)}>\n                        {type.complexityLevel}\n                      </Badge>\n                      <Badge variant=\"outline\">\n                        Peso: {type.analysisWeight}\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"text-xs text-gray-500\">\n                      Campos: {type.requiredFields.join(', ')}\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Tipos Personalizados */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Settings className=\"h-5 w-5\" />\n                Tipos Personalizados\n              </CardTitle>\n              <CardDescription>\n                Crie tipos de documento espec√≠ficos para sua organiza√ß√£o\n              </CardDescription>\n            </div>\n            \n            <Dialog open={isCreatingCustom} onOpenChange={setIsCreatingCustom}>\n              <DialogTrigger asChild>\n                <Button className=\"flex items-center gap-2\">\n                  <Plus className=\"h-4 w-4\" />\n                  Criar Tipo\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-2xl\">\n                <DialogHeader>\n                  <DialogTitle>Criar Tipo de Documento Personalizado</DialogTitle>\n                  <DialogDescription>\n                    Configure um novo tipo de documento com caracter√≠sticas espec√≠ficas\n                  </DialogDescription>\n                </DialogHeader>\n                \n                <div className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"name\">Nome do Tipo</Label>\n                      <Input\n                        id=\"name\"\n                        value={newType.name || ''}\n                        onChange={(e) => setNewType(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Ex: Relat√≥rio T√©cnico\"\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"category\">Categoria</Label>\n                      <Select\n                        value={newType.category || ''}\n                        onValueChange={(value) => setNewType(prev => ({ ...prev, category: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Selecione uma categoria\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"principal\">Principal</SelectItem>\n                          <SelectItem value=\"tecnico\">T√©cnico</SelectItem>\n                          <SelectItem value=\"juridico\">Jur√≠dico</SelectItem>\n                          <SelectItem value=\"financeiro\">Financeiro</SelectItem>\n                          <SelectItem value=\"planejamento\">Planejamento</SelectItem>\n                          <SelectItem value=\"outro\">Outro</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"description\">Descri√ß√£o</Label>\n                    <Textarea\n                      id=\"description\"\n                      value={newType.description || ''}\n                      onChange={(e) => setNewType(prev => ({ ...prev, description: e.target.value }))}\n                      placeholder=\"Descreva o prop√≥sito e caracter√≠sticas deste tipo de documento\"\n                      rows={3}\n                    />\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"weight\">Peso de An√°lise</Label>\n                      <Input\n                        id=\"weight\"\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"1\"\n                        step=\"0.1\"\n                        value={newType.analysisWeight || 1.0}\n                        onChange={(e) => setNewType(prev => ({ ...prev, analysisWeight: parseFloat(e.target.value) }))}\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"complexity\">N√≠vel de Complexidade</Label>\n                      <Select\n                        value={newType.complexityLevel || 'medium'}\n                        onValueChange={(value: 'low' | 'medium' | 'high') => \n                          setNewType(prev => ({ ...prev, complexityLevel: value }))\n                        }\n                      >\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"low\">Baixo</SelectItem>\n                          <SelectItem value=\"medium\">M√©dio</SelectItem>\n                          <SelectItem value=\"high\">Alto</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <Label>Campos Obrigat√≥rios</Label>\n                    <div className=\"flex flex-wrap gap-2 mt-2\">\n                      {newType.requiredFields?.map((field) => (\n                        <Badge key={field} variant=\"secondary\" className=\"flex items-center gap-1\">\n                          {field}\n                          <X\n                            className=\"h-3 w-3 cursor-pointer\"\n                            onClick={() => removeRequiredField(field)}\n                          />\n                        </Badge>\n                      ))}\n                    </div>\n                    <div className=\"flex gap-2 mt-2\">\n                      <Input\n                        placeholder=\"Nome do campo\"\n                        onKeyPress={(e) => {\n                          if (e.key === 'Enter') {\n                            addRequiredField(e.currentTarget.value);\n                            e.currentTarget.value = '';\n                          }\n                        }}\n                      />\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={(e) => {\n                          const input = e.currentTarget.previousElementSibling as HTMLInputElement;\n                          addRequiredField(input.value);\n                          input.value = '';\n                        }}\n                      >\n                        Adicionar\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n                \n                <DialogFooter>\n                  <Button variant=\"outline\" onClick={() => setIsCreatingCustom(false)}>\n                    Cancelar\n                  </Button>\n                  <Button onClick={createCustomType}>\n                    Criar Tipo\n                  </Button>\n                </DialogFooter>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {customTypes.length === 0 ? (\n            <Alert>\n              <Info className=\"h-4 w-4\" />\n              <AlertDescription>\n                Nenhum tipo personalizado criado ainda. Clique em \"Criar Tipo\" para adicionar tipos espec√≠ficos da sua organiza√ß√£o.\n              </AlertDescription>\n            </Alert>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {customTypes.map((type) => (\n                <Card key={type.id} className=\"relative\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-medium text-gray-900\">{type.name}</h4>\n                        <p className=\"text-sm text-gray-600 mt-1\">{type.description}</p>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Switch\n                          checked={type.isActive || false}\n                          onCheckedChange={() => toggleTypeActive(type.id, true)}\n                        />\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => deleteCustomType(type.id)}\n                          className=\"text-red-600 hover:text-red-700\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Badge className={getCategoryColor(type.category)}>\n                        {type.category}\n                      </Badge>\n                      <Badge className={getComplexityColor(type.complexityLevel)}>\n                        {type.complexityLevel}\n                      </Badge>\n                      <Badge variant=\"outline\">\n                        Peso: {type.analysisWeight}\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"text-xs text-gray-500\">\n                      Campos: {type.requiredFields.join(', ') || 'Nenhum'}\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n      \n      {/* Resumo da Configura√ß√£o */}\n      {([...selectedTypes, ...customTypes].filter(type => type.isActive).length > 0) && (\n        <Alert>\n          <CheckCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            Configura√ß√£o v√°lida: {[...selectedTypes, ...customTypes].filter(type => type.isActive).length} tipos de documento ativos.\n            O sistema est√° pronto para analisar estes tipos de documento.\n          </AlertDescription>\n        </Alert>\n      )}\n    </div>\n  );\n};\n\nexport default DocumentTypeSelector;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/ParameterPresets.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Separator' is defined but never used.","line":49,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":49,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'ScrollArea' is defined but never used.","line":50,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ScrollArea' is defined but never used.","line":50,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'Filter' is defined but never used.","line":69,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":69,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":69,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":71,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":71,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":71,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":72,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":72,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'Info' is defined but never used.","line":73,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":73,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'Zap' is defined but never used.","line":74,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":74,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":6},{"ruleId":"no-unused-vars","severity":2,"message":"'presetId' is defined but never used.","line":94,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":103,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2203,2206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2203,2206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'activeConfig' is assigned a value but never used.","line":128,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":128,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeConfig' is assigned a value but never used.","line":128,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'defaultPresets'. Either include it or remove the dependency array.","line":302,"column":6,"nodeType":"ArrayExpression","endLine":302,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [defaultPresets, filters.category, filters.favorites, filters.public, filters.search]","fix":{"range":[7940,7949],"text":"[defaultPresets, filters.category, filters.favorites, filters.public, filters.search]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":570,"column":101,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":570,"endColumn":104,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18086,18089],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18086,18089],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":756,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":756,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25632,25635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25632,25635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Componente ParameterPresets\n * \n * Gerenciador de presets de par√¢metros para o sistema LicitaReview.\n * Permite criar, aplicar e gerenciar configura√ß√µes predefinidas\n * para diferentes tipos de an√°lise e cen√°rios.\n */\n\nimport React, { useState, useMemo } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from '@/components/ui/alert-dialog';\nimport { Separator } from '@/components/ui/separator';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport {\n  Plus,\n  Settings,\n  Play,\n  Copy,\n  Edit,\n  Trash2,\n  Star,\n  StarOff,\n  Download,\n  Upload,\n  Search,\n  Filter,\n  MoreVertical,\n  CheckCircle,\n  AlertTriangle,\n  Info,\n  Zap,\n  Target,\n  FileText,\n  Users,\n  Building,\n  Briefcase\n} from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { useAnalysisConfig } from '@/hooks/useAnalysisConfig';\nimport { cn } from '@/lib/utils';\n\ninterface ParameterPresetsProps {\n  organizationId: string;\n  onPresetApplied?: (presetId: string) => void;\n  className?: string;\n}\n\ninterface ParameterPreset {\n  id: string;\n  name: string;\n  description: string;\n  category: 'edital' | 'tr' | 'contrato' | 'projeto' | 'geral';\n  parameters: Record<string, any>;\n  weights: Record<string, number>;\n  isDefault: boolean;\n  isFavorite: boolean;\n  isPublic: boolean;\n  usageCount: number;\n  rating: number;\n  tags: string[];\n  createdBy: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\ninterface PresetFilters {\n  category?: string;\n  search?: string;\n  favorites?: boolean;\n  public?: boolean;\n}\n\nexport const ParameterPresets: React.FC<ParameterPresetsProps> = ({\n  organizationId,\n  onPresetApplied,\n  className\n}) => {\n  const { activeConfig } = useAnalysisConfig(organizationId);\n  \n  // Estados locais\n  const [filters, setFilters] = useState<PresetFilters>({});\n  const [selectedPreset, setSelectedPreset] = useState<ParameterPreset | null>(null);\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [newPreset, setNewPreset] = useState<Partial<ParameterPreset>>({});\n  \n  // Presets predefinidos (mock data)\n  const defaultPresets: ParameterPreset[] = [\n    {\n      id: 'edital-basico',\n      name: 'Edital B√°sico',\n      description: 'Configura√ß√£o padr√£o para an√°lise de editais simples',\n      category: 'edital',\n      parameters: {\n        'check_legal_requirements': true,\n        'verify_deadlines': true,\n        'analyze_criteria': true,\n        'check_documentation': true\n      },\n      weights: {\n        'structural': 25,\n        'legal': 35,\n        'clarity': 20,\n        'abnt': 10,\n        'general': 10\n      },\n      isDefault: true,\n      isFavorite: false,\n      isPublic: true,\n      usageCount: 156,\n      rating: 4.5,\n      tags: ['b√°sico', 'edital', 'padr√£o'],\n      createdBy: 'Sistema',\n      createdAt: new Date('2024-01-01'),\n      updatedAt: new Date('2024-01-01')\n    },\n    {\n      id: 'edital-complexo',\n      name: 'Edital Complexo',\n      description: 'Configura√ß√£o avan√ßada para editais com m√∫ltiplos lotes e crit√©rios espec√≠ficos',\n      category: 'edital',\n      parameters: {\n        'check_legal_requirements': true,\n        'verify_deadlines': true,\n        'analyze_criteria': true,\n        'check_documentation': true,\n        'validate_lots': true,\n        'check_technical_specs': true,\n        'verify_qualifications': true\n      },\n      weights: {\n        'structural': 20,\n        'legal': 40,\n        'clarity': 25,\n        'abnt': 10,\n        'general': 5\n      },\n      isDefault: false,\n      isFavorite: true,\n      isPublic: true,\n      usageCount: 89,\n      rating: 4.8,\n      tags: ['avan√ßado', 'edital', 'complexo', 'lotes'],\n      createdBy: 'Admin',\n      createdAt: new Date('2024-01-15'),\n      updatedAt: new Date('2024-02-01')\n    },\n    {\n      id: 'tr-tecnico',\n      name: 'Termo de Refer√™ncia T√©cnico',\n      description: 'Foco em especifica√ß√µes t√©cnicas e requisitos funcionais',\n      category: 'tr',\n      parameters: {\n        'check_technical_specs': true,\n        'verify_requirements': true,\n        'analyze_deliverables': true,\n        'check_sla': true,\n        'validate_metrics': true\n      },\n      weights: {\n        'structural': 15,\n        'legal': 20,\n        'clarity': 35,\n        'abnt': 20,\n        'general': 10\n      },\n      isDefault: false,\n      isFavorite: false,\n      isPublic: true,\n      usageCount: 67,\n      rating: 4.3,\n      tags: ['tr', 't√©cnico', 'especifica√ß√µes'],\n      createdBy: 'Especialista',\n      createdAt: new Date('2024-01-20'),\n      updatedAt: new Date('2024-01-25')\n    },\n    {\n      id: 'contrato-servicos',\n      name: 'Contrato de Servi√ßos',\n      description: 'An√°lise focada em cl√°usulas contratuais e obriga√ß√µes',\n      category: 'contrato',\n      parameters: {\n        'check_legal_clauses': true,\n        'verify_obligations': true,\n        'analyze_penalties': true,\n        'check_payment_terms': true,\n        'validate_guarantees': true\n      },\n      weights: {\n        'structural': 20,\n        'legal': 45,\n        'clarity': 20,\n        'abnt': 5,\n        'general': 10\n      },\n      isDefault: false,\n      isFavorite: true,\n      isPublic: false,\n      usageCount: 34,\n      rating: 4.6,\n      tags: ['contrato', 'servi√ßos', 'cl√°usulas'],\n      createdBy: 'Jur√≠dico',\n      createdAt: new Date('2024-02-01'),\n      updatedAt: new Date('2024-02-10')\n    },\n    {\n      id: 'projeto-basico',\n      name: 'Projeto B√°sico',\n      description: 'Valida√ß√£o de projetos b√°sicos e executivos',\n      category: 'projeto',\n      parameters: {\n        'check_technical_drawings': true,\n        'verify_specifications': true,\n        'analyze_quantities': true,\n        'check_standards': true\n      },\n      weights: {\n        'structural': 30,\n        'legal': 15,\n        'clarity': 25,\n        'abnt': 25,\n        'general': 5\n      },\n      isDefault: false,\n      isFavorite: false,\n      isPublic: true,\n      usageCount: 45,\n      rating: 4.2,\n      tags: ['projeto', 'desenhos', 'especifica√ß√µes'],\n      createdBy: 'Engenharia',\n      createdAt: new Date('2024-02-05'),\n      updatedAt: new Date('2024-02-15')\n    }\n  ];\n  \n  // Filtra presets baseado nos filtros aplicados\n  const filteredPresets = useMemo(() => {\n    return defaultPresets.filter(preset => {\n      if (filters.category && preset.category !== filters.category) return false;\n      if (filters.favorites && !preset.isFavorite) return false;\n      if (filters.public !== undefined && preset.isPublic !== filters.public) return false;\n      if (filters.search) {\n        const searchLower = filters.search.toLowerCase();\n        return (\n          preset.name.toLowerCase().includes(searchLower) ||\n          preset.description.toLowerCase().includes(searchLower) ||\n          preset.tags.some(tag => tag.toLowerCase().includes(searchLower))\n        );\n      }\n      return true;\n    });\n  }, [filters]);\n  \n  // Categorias dispon√≠veis\n  const categories = [\n    { value: 'edital', label: 'Editais', icon: FileText, color: 'bg-blue-100 text-blue-800' },\n    { value: 'tr', label: 'Termos de Refer√™ncia', icon: Target, color: 'bg-green-100 text-green-800' },\n    { value: 'contrato', label: 'Contratos', icon: Briefcase, color: 'bg-purple-100 text-purple-800' },\n    { value: 'projeto', label: 'Projetos', icon: Building, color: 'bg-orange-100 text-orange-800' },\n    { value: 'geral', label: 'Geral', icon: Settings, color: 'bg-gray-100 text-gray-800' }\n  ];\n  \n  // Aplica preset\n  const handleApplyPreset = async (preset: ParameterPreset) => {\n    try {\n      // Implementar aplica√ß√£o de preset\n      console.log('Aplicando preset:', preset.id, preset.parameters, preset.weights);\n      onPresetApplied?.(preset.id);\n      \n      // Atualiza contador de uso (mock)\n      preset.usageCount += 1;\n    } catch (error) {\n      console.error('Erro ao aplicar preset:', error);\n    }\n  };\n  \n  // Cria novo preset\n  const handleCreatePreset = async () => {\n    try {\n      // Implementar cria√ß√£o de preset\n      console.log('Criando preset:', newPreset);\n      setIsCreateDialogOpen(false);\n      setNewPreset({});\n    } catch (error) {\n      console.error('Erro ao criar preset:', error);\n    }\n  };\n  \n  // Edita preset\n  const handleEditPreset = async () => {\n    try {\n      // Implementar edi√ß√£o de preset\n      console.log('Editando preset:', selectedPreset);\n      setIsEditDialogOpen(false);\n      setSelectedPreset(null);\n    } catch (error) {\n      console.error('Erro ao editar preset:', error);\n    }\n  };\n  \n  // Deleta preset\n  const handleDeletePreset = async (presetId: string) => {\n    try {\n      // Implementar exclus√£o de preset\n      console.log('Deletando preset:', presetId);\n    } catch (error) {\n      console.error('Erro ao deletar preset:', error);\n    }\n  };\n  \n  // Favorita/desfavorita preset\n  const handleToggleFavorite = (presetId: string) => {\n    const preset = defaultPresets.find(p => p.id === presetId);\n    if (preset) {\n      preset.isFavorite = !preset.isFavorite;\n    }\n  };\n  \n  // Renderiza card de preset\n  const renderPresetCard = (preset: ParameterPreset) => {\n    const category = categories.find(c => c.value === preset.category);\n    const CategoryIcon = category?.icon || Settings;\n    \n    return (\n      <Card key={preset.id} className=\"hover:shadow-md transition-shadow\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className={cn('p-2 rounded-lg', category?.color)}>\n                <CategoryIcon className=\"h-4 w-4\" />\n              </div>\n              <div>\n                <CardTitle className=\"text-base flex items-center space-x-2\">\n                  <span>{preset.name}</span>\n                  {preset.isDefault && (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      Padr√£o\n                    </Badge>\n                  )}\n                  {preset.isFavorite && (\n                    <Star className=\"h-3 w-3 text-yellow-500 fill-current\" />\n                  )}\n                </CardTitle>\n                <CardDescription className=\"text-sm\">\n                  {preset.description}\n                </CardDescription>\n              </div>\n            </div>\n            \n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\">\n                  <MoreVertical className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuLabel>A√ß√µes</DropdownMenuLabel>\n                <DropdownMenuItem onClick={() => handleApplyPreset(preset)}>\n                  <Play className=\"mr-2 h-3 w-3\" />\n                  Aplicar\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => {\n                  setSelectedPreset(preset);\n                  setIsEditDialogOpen(true);\n                }}>\n                  <Edit className=\"mr-2 h-3 w-3\" />\n                  Editar\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => {\n                  // Implementar duplica√ß√£o\n                  console.log('Duplicar preset:', preset.id);\n                }}>\n                  <Copy className=\"mr-2 h-3 w-3\" />\n                  Duplicar\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleToggleFavorite(preset.id)}>\n                  {preset.isFavorite ? (\n                    <StarOff className=\"mr-2 h-3 w-3\" />\n                  ) : (\n                    <Star className=\"mr-2 h-3 w-3\" />\n                  )}\n                  {preset.isFavorite ? 'Remover dos Favoritos' : 'Adicionar aos Favoritos'}\n                </DropdownMenuItem>\n                <DropdownMenuSeparator />\n                <AlertDialogTrigger asChild>\n                  <DropdownMenuItem className=\"text-red-600\">\n                    <Trash2 className=\"mr-2 h-3 w-3\" />\n                    Excluir\n                  </DropdownMenuItem>\n                </AlertDialogTrigger>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-4\">\n          {/* Tags */}\n          <div className=\"flex flex-wrap gap-1\">\n            {preset.tags.map(tag => (\n              <Badge key={tag} variant=\"outline\" className=\"text-xs\">\n                {tag}\n              </Badge>\n            ))}\n          </div>\n          \n          {/* Estat√≠sticas */}\n          <div className=\"flex items-center justify-between text-sm text-gray-600\">\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"flex items-center space-x-1\">\n                <Users className=\"h-3 w-3\" />\n                <span>{preset.usageCount} usos</span>\n              </span>\n              <span className=\"flex items-center space-x-1\">\n                <Star className=\"h-3 w-3\" />\n                <span>{preset.rating.toFixed(1)}</span>\n              </span>\n            </div>\n            <span>{preset.isPublic ? 'P√∫blico' : 'Privado'}</span>\n          </div>\n          \n          {/* Pesos principais */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Distribui√ß√£o de Pesos:</Label>\n            <div className=\"grid grid-cols-2 gap-2 text-xs\">\n              {Object.entries(preset.weights).map(([key, value]) => (\n                <div key={key} className=\"flex justify-between\">\n                  <span className=\"capitalize\">{key}:</span>\n                  <span className=\"font-medium\">{value}%</span>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          {/* A√ß√µes */}\n          <div className=\"flex space-x-2 pt-2\">\n            <Button \n              size=\"sm\" \n              onClick={() => handleApplyPreset(preset)}\n              className=\"flex-1\"\n            >\n              <Play className=\"mr-2 h-3 w-3\" />\n              Aplicar\n            </Button>\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\"\n                    onClick={() => handleToggleFavorite(preset.id)}\n                  >\n                    {preset.isFavorite ? (\n                      <Star className=\"h-3 w-3 text-yellow-500 fill-current\" />\n                    ) : (\n                      <StarOff className=\"h-3 w-3\" />\n                    )}\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  {preset.isFavorite ? 'Remover dos favoritos' : 'Adicionar aos favoritos'}\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  };\n  \n  return (\n    <div className={cn('space-y-6', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Presets de Par√¢metros</h2>\n          <p className=\"text-gray-600\">\n            Configura√ß√µes predefinidas para diferentes tipos de an√°lise\n          </p>\n        </div>\n        \n        <div className=\"flex space-x-2\">\n          <Button variant=\"outline\">\n            <Download className=\"mr-2 h-4 w-4\" />\n            Exportar\n          </Button>\n          <Button variant=\"outline\">\n            <Upload className=\"mr-2 h-4 w-4\" />\n            Importar\n          </Button>\n          <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button>\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Novo Preset\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-2xl\">\n              <DialogHeader>\n                <DialogTitle>Criar Novo Preset</DialogTitle>\n                <DialogDescription>\n                  Configure um novo preset de par√¢metros baseado na configura√ß√£o atual\n                </DialogDescription>\n              </DialogHeader>\n              \n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"preset-name\">Nome</Label>\n                    <Input\n                      id=\"preset-name\"\n                      placeholder=\"Nome do preset\"\n                      value={newPreset.name || ''}\n                      onChange={(e) => setNewPreset(prev => ({ ...prev, name: e.target.value }))}\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"preset-category\">Categoria</Label>\n                    <Select\n                      value={newPreset.category}\n                      onValueChange={(value) => setNewPreset(prev => ({ ...prev, category: value as any }))}\n                    >\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Selecione uma categoria\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {categories.map(category => (\n                          <SelectItem key={category.value} value={category.value}>\n                            {category.label}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"preset-description\">Descri√ß√£o</Label>\n                  <Textarea\n                    id=\"preset-description\"\n                    placeholder=\"Descreva o prop√≥sito e uso deste preset\"\n                    value={newPreset.description || ''}\n                    onChange={(e) => setNewPreset(prev => ({ ...prev, description: e.target.value }))}\n                  />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label>Configura√ß√£o Base</Label>\n                  <div className=\"p-3 bg-gray-50 rounded-lg text-sm\">\n                    <p>Este preset ser√° criado baseado na configura√ß√£o ativa atual:</p>\n                    <ul className=\"mt-2 space-y-1 text-gray-600\">\n                      <li>‚Ä¢ Par√¢metros habilitados e seus valores</li>\n                      <li>‚Ä¢ Pesos de categorias configurados</li>\n                      <li>‚Ä¢ Regras personalizadas ativas</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n              \n              <DialogFooter>\n                <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)}>\n                  Cancelar\n                </Button>\n                <Button onClick={handleCreatePreset}>\n                  Criar Preset\n                </Button>\n              </DialogFooter>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n      \n      {/* Filtros */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base\">Filtros</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"flex-1 min-w-64\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  placeholder=\"Buscar presets...\"\n                  className=\"pl-10\"\n                  value={filters.search || ''}\n                  onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <Select\n              value={filters.category}\n              onValueChange={(value) => setFilters(prev => ({ ...prev, category: value === 'all' ? undefined : value }))}\n            >\n              <SelectTrigger className=\"w-48\">\n                <SelectValue placeholder=\"Todas as categorias\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todas as categorias</SelectItem>\n                {categories.map(category => (\n                  <SelectItem key={category.value} value={category.value}>\n                    {category.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            \n            <div className=\"flex space-x-2\">\n              <Button\n                variant={filters.favorites ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setFilters(prev => ({ ...prev, favorites: !prev.favorites }))}\n              >\n                <Star className=\"mr-2 h-3 w-3\" />\n                Favoritos\n              </Button>\n              \n              <Button\n                variant={filters.public !== undefined ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setFilters(prev => ({ \n                  ...prev, \n                  public: prev.public === undefined ? true : prev.public ? false : undefined \n                }))}\n              >\n                <Users className=\"mr-2 h-3 w-3\" />\n                {filters.public === undefined ? 'Todos' : filters.public ? 'P√∫blicos' : 'Privados'}\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Lista de Presets */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredPresets.map(preset => (\n          <AlertDialog key={preset.id}>\n            {renderPresetCard(preset)}\n            <AlertDialogContent>\n              <AlertDialogHeader>\n                <AlertDialogTitle>Confirmar Exclus√£o</AlertDialogTitle>\n                <AlertDialogDescription>\n                  Tem certeza que deseja excluir o preset \"{preset.name}\"? \n                  Esta a√ß√£o n√£o pode ser desfeita.\n                </AlertDialogDescription>\n              </AlertDialogHeader>\n              <AlertDialogFooter>\n                <AlertDialogCancel>Cancelar</AlertDialogCancel>\n                <AlertDialogAction \n                  onClick={() => handleDeletePreset(preset.id)}\n                  className=\"bg-red-600 hover:bg-red-700\"\n                >\n                  Excluir\n                </AlertDialogAction>\n              </AlertDialogFooter>\n            </AlertDialogContent>\n          </AlertDialog>\n        ))}\n      </div>\n      \n      {filteredPresets.length === 0 && (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Settings className=\"h-12 w-12 text-gray-400 mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              Nenhum preset encontrado\n            </h3>\n            <p className=\"text-gray-600 text-center mb-4\">\n              N√£o h√° presets que correspondam aos filtros aplicados.\n            </p>\n            <Button onClick={() => setFilters({})}>\n              Limpar Filtros\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n      \n      {/* Dialog de Edi√ß√£o */}\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Editar Preset</DialogTitle>\n            <DialogDescription>\n              Modifique as configura√ß√µes do preset selecionado\n            </DialogDescription>\n          </DialogHeader>\n          \n          {selectedPreset && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-preset-name\">Nome</Label>\n                  <Input\n                    id=\"edit-preset-name\"\n                    value={selectedPreset.name}\n                    onChange={(e) => setSelectedPreset(prev => \n                      prev ? { ...prev, name: e.target.value } : null\n                    )}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-preset-category\">Categoria</Label>\n                  <Select\n                    value={selectedPreset.category}\n                    onValueChange={(value) => setSelectedPreset(prev => \n                      prev ? { ...prev, category: value as any } : null\n                    )}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {categories.map(category => (\n                        <SelectItem key={category.value} value={category.value}>\n                          {category.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-preset-description\">Descri√ß√£o</Label>\n                <Textarea\n                  id=\"edit-preset-description\"\n                  value={selectedPreset.description}\n                  onChange={(e) => setSelectedPreset(prev => \n                    prev ? { ...prev, description: e.target.value } : null\n                  )}\n                />\n              </div>\n            </div>\n          )}\n          \n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsEditDialogOpen(false)}>\n              Cancelar\n            </Button>\n            <Button onClick={handleEditPreset}>\n              Salvar Altera√ß√µes\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default ParameterPresets;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/ParameterWeights.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Separator' is defined but never used.","line":25,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":25,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'Dialog' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Dialog' is defined but never used.","line":36,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'DialogContent' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogContent' is defined but never used.","line":37,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'DialogDescription' is defined but never used.","line":38,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogDescription' is defined but never used.","line":38,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'DialogFooter' is defined but never used.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogFooter' is defined but never used.","line":39,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'DialogHeader' is defined but never used.","line":40,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogHeader' is defined but never used.","line":40,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'DialogTitle' is defined but never used.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTitle' is defined but never used.","line":41,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'DialogTrigger' is defined but never used.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used.","line":42,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'Tooltip' is defined but never used.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Tooltip' is defined but never used.","line":45,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'TooltipContent' is defined but never used.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TooltipContent' is defined but never used.","line":46,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'TooltipProvider' is defined but never used.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TooltipProvider' is defined but never used.","line":47,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'TooltipTrigger' is defined but never used.","line":48,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TooltipTrigger' is defined but never used.","line":48,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'Settings' is defined but never used.","line":51,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":51,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":54,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":54,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'Upload' is defined but never used.","line":55,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Upload' is defined but never used.","line":55,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":9},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5778,5781],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5778,5781],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":235,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":235,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":235,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5810,5813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5810,5813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is defined but never used.","line":236,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":236,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'isLoading' is assigned a value but never used.","line":244,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":244,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":244,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":244,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'showAdvanced' is assigned a value but never used.","line":252,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":252,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showAdvanced' is assigned a value but never used.","line":252,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":252,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'setShowAdvanced' is assigned a value but never used.","line":252,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":252,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowAdvanced' is assigned a value but never used.","line":252,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":252,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":259,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6649,6652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6649,6652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'config'. Either include it or remove the dependency array.","line":281,"column":6,"nodeType":"ArrayExpression","endLine":281,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [parameters, onConfigChange, config]","fix":{"range":[7393,7421],"text":"[parameters, onConfigChange, config]"}}]}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ParameterWeights - Editor de Pesos de Par√¢metros\n * \n * Componente para configura√ß√£o avan√ßada dos pesos de an√°lise de documentos.\n * Permite ajustar a import√¢ncia relativa de diferentes crit√©rios de avalia√ß√£o\n * para personalizar o comportamento do motor de an√°lise adaptativo.\n * \n * Funcionalidades:\n * - Editor visual de pesos com sliders e inputs num√©ricos\n * - Categoriza√ß√£o de par√¢metros por tipo de an√°lise\n * - Presets predefinidos para diferentes cen√°rios\n * - Valida√ß√£o em tempo real e preview de impacto\n * - Normaliza√ß√£o autom√°tica de pesos\n * - Hist√≥rico de configura√ß√µes\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport { Switch } from '@/components/ui/switch';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport {\n  Settings,\n  RotateCcw,\n  Save,\n  Download,\n  Upload,\n  Info,\n  AlertTriangle,\n  CheckCircle,\n  BarChart3,\n  Sliders,\n  Target,\n  Zap\n} from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\n// Defini√ß√£o dos par√¢metros de an√°lise\ninterface AnalysisParameter {\n  id: string;\n  name: string;\n  description: string;\n  category: 'conformity' | 'completeness' | 'clarity' | 'technical' | 'legal' | 'financial';\n  weight: number;\n  minWeight: number;\n  maxWeight: number;\n  defaultWeight: number;\n  isActive: boolean;\n  impact: 'low' | 'medium' | 'high';\n  dependencies?: string[];\n}\n\n// Par√¢metros predefinidos do sistema\nconst DEFAULT_PARAMETERS: AnalysisParameter[] = [\n  // Conformidade\n  {\n    id: 'legal_compliance',\n    name: 'Conformidade Legal',\n    description: 'Verifica√ß√£o de adequa√ß√£o √†s normas e leis aplic√°veis',\n    category: 'conformity',\n    weight: 0.25,\n    minWeight: 0.1,\n    maxWeight: 0.4,\n    defaultWeight: 0.25,\n    isActive: true,\n    impact: 'high'\n  },\n  {\n    id: 'format_compliance',\n    name: 'Conformidade de Formato',\n    description: 'Verifica√ß√£o da estrutura e formata√ß√£o do documento',\n    category: 'conformity',\n    weight: 0.15,\n    minWeight: 0.05,\n    maxWeight: 0.3,\n    defaultWeight: 0.15,\n    isActive: true,\n    impact: 'medium'\n  },\n  \n  // Completude\n  {\n    id: 'required_fields',\n    name: 'Campos Obrigat√≥rios',\n    description: 'Presen√ßa de todos os campos e informa√ß√µes obrigat√≥rias',\n    category: 'completeness',\n    weight: 0.2,\n    minWeight: 0.1,\n    maxWeight: 0.35,\n    defaultWeight: 0.2,\n    isActive: true,\n    impact: 'high'\n  },\n  {\n    id: 'supporting_docs',\n    name: 'Documentos Anexos',\n    description: 'Verifica√ß√£o de anexos e documentos de suporte',\n    category: 'completeness',\n    weight: 0.1,\n    minWeight: 0.05,\n    maxWeight: 0.2,\n    defaultWeight: 0.1,\n    isActive: true,\n    impact: 'medium'\n  },\n  \n  // Clareza\n  {\n    id: 'text_clarity',\n    name: 'Clareza do Texto',\n    description: 'An√°lise da legibilidade e compreensibilidade do texto',\n    category: 'clarity',\n    weight: 0.08,\n    minWeight: 0.02,\n    maxWeight: 0.15,\n    defaultWeight: 0.08,\n    isActive: true,\n    impact: 'medium'\n  },\n  {\n    id: 'terminology',\n    name: 'Terminologia T√©cnica',\n    description: 'Uso adequado de termos t√©cnicos e jur√≠dicos',\n    category: 'clarity',\n    weight: 0.07,\n    minWeight: 0.02,\n    maxWeight: 0.12,\n    defaultWeight: 0.07,\n    isActive: true,\n    impact: 'low'\n  },\n  \n  // T√©cnico\n  {\n    id: 'technical_specs',\n    name: 'Especifica√ß√µes T√©cnicas',\n    description: 'Adequa√ß√£o e detalhamento das especifica√ß√µes t√©cnicas',\n    category: 'technical',\n    weight: 0.15,\n    minWeight: 0.05,\n    maxWeight: 0.3,\n    defaultWeight: 0.15,\n    isActive: true,\n    impact: 'high'\n  }\n];\n\n// Presets de configura√ß√£o\ninterface WeightPreset {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  weights: { [parameterId: string]: number };\n}\n\nconst WEIGHT_PRESETS: WeightPreset[] = [\n  {\n    id: 'balanced',\n    name: 'Equilibrado',\n    description: 'Configura√ß√£o balanceada para an√°lise geral',\n    category: 'geral',\n    weights: {\n      legal_compliance: 0.25,\n      format_compliance: 0.15,\n      required_fields: 0.2,\n      supporting_docs: 0.1,\n      text_clarity: 0.08,\n      terminology: 0.07,\n      technical_specs: 0.15\n    }\n  },\n  {\n    id: 'legal_focused',\n    name: 'Foco Jur√≠dico',\n    description: 'Prioriza aspectos legais e de conformidade',\n    category: 'juridico',\n    weights: {\n      legal_compliance: 0.35,\n      format_compliance: 0.2,\n      required_fields: 0.25,\n      supporting_docs: 0.1,\n      text_clarity: 0.05,\n      terminology: 0.03,\n      technical_specs: 0.02\n    }\n  },\n  {\n    id: 'technical_focused',\n    name: 'Foco T√©cnico',\n    description: 'Prioriza especifica√ß√µes e aspectos t√©cnicos',\n    category: 'tecnico',\n    weights: {\n      legal_compliance: 0.15,\n      format_compliance: 0.1,\n      required_fields: 0.2,\n      supporting_docs: 0.15,\n      text_clarity: 0.1,\n      terminology: 0.05,\n      technical_specs: 0.25\n    }\n  }\n];\n\ninterface ParameterWeightsProps {\n  config: any;\n  onConfigChange: (config: any) => void;\n  onProgressChange: (progress: number) => void;\n  isLoading?: boolean;\n}\n\nexport const ParameterWeights: React.FC<ParameterWeightsProps> = ({\n  config,\n  onConfigChange,\n  onProgressChange,\n  isLoading = false\n}) => {\n  const { toast } = useToast();\n  \n  // Estados locais\n  const [parameters, setParameters] = useState<AnalysisParameter[]>(DEFAULT_PARAMETERS);\n  const [selectedPreset, setSelectedPreset] = useState<string>('');\n  const [isNormalized, setIsNormalized] = useState(true);\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [unsavedChanges, setUnsavedChanges] = useState(false);\n  \n  // Carregar configura√ß√£o inicial\n  useEffect(() => {\n    if (config?.parameterWeights) {\n      const loadedParams = DEFAULT_PARAMETERS.map(param => {\n        const savedParam = config.parameterWeights.find((p: any) => p.id === param.id);\n        return savedParam ? { ...param, ...savedParam } : param;\n      });\n      setParameters(loadedParams);\n    }\n  }, [config]);\n  \n  // Calcular e atualizar progresso\n  useEffect(() => {\n    const activeParams = parameters.filter(p => p.isActive);\n    const totalWeight = activeParams.reduce((sum, p) => sum + p.weight, 0);\n    const isValid = Math.abs(totalWeight - 1.0) < 0.01 && activeParams.length > 0;\n    const progress = isValid ? 100 : Math.min((totalWeight * 100), 90);\n    onProgressChange(progress);\n  }, [parameters, onProgressChange]);\n  \n  // Atualizar configura√ß√£o quando par√¢metros mudarem\n  useEffect(() => {\n    onConfigChange({\n      ...config,\n      parameterWeights: parameters\n    });\n  }, [parameters, onConfigChange]);\n  \n  // Fun√ß√£o para normalizar pesos\n  const normalizeWeights = useCallback(() => {\n    const activeParams = parameters.filter(p => p.isActive);\n    const totalWeight = activeParams.reduce((sum, p) => sum + p.weight, 0);\n    \n    if (totalWeight === 0) return;\n    \n    const normalizedParams = parameters.map(param => {\n      if (!param.isActive) return param;\n      return {\n        ...param,\n        weight: param.weight / totalWeight\n      };\n    });\n    \n    setParameters(normalizedParams);\n    setUnsavedChanges(true);\n  }, [parameters]);\n  \n  // Fun√ß√£o para atualizar peso de um par√¢metro\n  const updateParameterWeight = (parameterId: string, newWeight: number) => {\n    setParameters(prev => prev.map(param => \n      param.id === parameterId \n        ? { ...param, weight: Math.max(param.minWeight, Math.min(param.maxWeight, newWeight)) }\n        : param\n    ));\n    setUnsavedChanges(true);\n    \n    if (isNormalized) {\n      setTimeout(normalizeWeights, 100);\n    }\n  };\n  \n  // Fun√ß√£o para alternar status ativo de um par√¢metro\n  const toggleParameterActive = (parameterId: string) => {\n    setParameters(prev => prev.map(param => \n      param.id === parameterId ? { ...param, isActive: !param.isActive } : param\n    ));\n    setUnsavedChanges(true);\n  };\n  \n  // Fun√ß√£o para aplicar preset\n  const applyPreset = (presetId: string) => {\n    const preset = WEIGHT_PRESETS.find(p => p.id === presetId);\n    if (!preset) return;\n    \n    setParameters(prev => prev.map(param => ({\n      ...param,\n      weight: preset.weights[param.id] || param.defaultWeight,\n      isActive: preset.weights[param.id] !== undefined\n    })));\n    \n    setSelectedPreset(presetId);\n    setUnsavedChanges(true);\n    \n    toast({\n      title: \"Preset Aplicado\",\n      description: `Configura√ß√£o \"${preset.name}\" foi aplicada com sucesso.`,\n      variant: \"default\"\n    });\n  };\n  \n  // Fun√ß√£o para resetar para valores padr√£o\n  const resetToDefaults = () => {\n    setParameters(DEFAULT_PARAMETERS.map(param => ({ ...param })));\n    setSelectedPreset('');\n    setUnsavedChanges(true);\n    \n    toast({\n      title: \"Configura√ß√£o Resetada\",\n      description: \"Todos os pesos foram restaurados para os valores padr√£o.\",\n      variant: \"default\"\n    });\n  };\n  \n  // Fun√ß√£o para salvar configura√ß√£o\n  const saveConfiguration = () => {\n    // Aqui seria implementada a l√≥gica de salvamento\n    setUnsavedChanges(false);\n    \n    toast({\n      title: \"Configura√ß√£o Salva\",\n      description: \"Os pesos dos par√¢metros foram salvos com sucesso.\",\n      variant: \"default\"\n    });\n  };\n  \n  // Calcular estat√≠sticas\n  const getStatistics = () => {\n    const activeParams = parameters.filter(p => p.isActive);\n    const totalWeight = activeParams.reduce((sum, p) => sum + p.weight, 0);\n    const categories = activeParams.reduce((acc, param) => {\n      acc[param.category] = (acc[param.category] || 0) + param.weight;\n      return acc;\n    }, {} as { [key: string]: number });\n    \n    return {\n      totalWeight,\n      activeCount: activeParams.length,\n      categories,\n      isValid: Math.abs(totalWeight - 1.0) < 0.01\n    };\n  };\n  \n  const statistics = getStatistics();\n  \n  const getCategoryColor = (category: string) => {\n    const colors: { [key: string]: string } = {\n      conformity: 'bg-blue-100 text-blue-800',\n      completeness: 'bg-green-100 text-green-800',\n      clarity: 'bg-purple-100 text-purple-800',\n      technical: 'bg-orange-100 text-orange-800',\n      legal: 'bg-red-100 text-red-800',\n      financial: 'bg-yellow-100 text-yellow-800'\n    };\n    return colors[category] || 'bg-gray-100 text-gray-800';\n  };\n  \n  const getCategoryName = (category: string) => {\n    const names: { [key: string]: string } = {\n      conformity: 'Conformidade',\n      completeness: 'Completude',\n      clarity: 'Clareza',\n      technical: 'T√©cnico',\n      legal: 'Jur√≠dico',\n      financial: 'Financeiro'\n    };\n    return names[category] || category;\n  };\n  \n  const getImpactIcon = (impact: string) => {\n    switch (impact) {\n      case 'high': return <Target className=\"h-4 w-4 text-red-500\" />;\n      case 'medium': return <BarChart3 className=\"h-4 w-4 text-yellow-500\" />;\n      case 'low': return <Zap className=\"h-4 w-4 text-green-500\" />;\n      default: return <Info className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n  \n  return (\n    <div className=\"space-y-6\">\n      {/* Cabe√ßalho com Estat√≠sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Peso Total</span>\n              <span className={`text-2xl font-bold ${\n                statistics.isValid ? 'text-green-600' : 'text-red-600'\n              }`}>\n                {statistics.totalWeight.toFixed(2)}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Par√¢metros Ativos</span>\n              <span className=\"text-2xl font-bold text-blue-600\">{statistics.activeCount}</span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Categorias</span>\n              <span className=\"text-2xl font-bold text-purple-600\">\n                {Object.keys(statistics.categories).length}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">Status</span>\n              <div className=\"flex items-center gap-1\">\n                {statistics.isValid ? (\n                  <CheckCircle className=\"h-6 w-6 text-green-600\" />\n                ) : (\n                  <AlertTriangle className=\"h-6 w-6 text-red-600\" />\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n      \n      {/* Controles Principais */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Sliders className=\"h-5 w-5\" />\n                Configura√ß√£o de Pesos\n              </CardTitle>\n              <CardDescription>\n                Ajuste a import√¢ncia relativa de cada par√¢metro de an√°lise\n              </CardDescription>\n            </div>\n            \n            <div className=\"flex items-center gap-2\">\n              <Select value={selectedPreset} onValueChange={applyPreset}>\n                <SelectTrigger className=\"w-48\">\n                  <SelectValue placeholder=\"Selecionar preset\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {WEIGHT_PRESETS.map(preset => (\n                    <SelectItem key={preset.id} value={preset.id}>\n                      {preset.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              \n              <Button variant=\"outline\" onClick={resetToDefaults}>\n                <RotateCcw className=\"h-4 w-4 mr-2\" />\n                Resetar\n              </Button>\n              \n              <Button \n                onClick={saveConfiguration}\n                disabled={!unsavedChanges}\n                className=\"bg-blue-600 hover:bg-blue-700\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                Salvar\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {/* Controles de Normaliza√ß√£o */}\n            <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n              <div className=\"flex items-center gap-3\">\n                <Switch\n                  checked={isNormalized}\n                  onCheckedChange={setIsNormalized}\n                />\n                <div>\n                  <Label className=\"font-medium\">Normaliza√ß√£o Autom√°tica</Label>\n                  <p className=\"text-sm text-gray-600\">\n                    Ajusta automaticamente os pesos para somar 1.0\n                  </p>\n                </div>\n              </div>\n              \n              <Button\n                variant=\"outline\"\n                onClick={normalizeWeights}\n                disabled={statistics.isValid}\n              >\n                Normalizar Agora\n              </Button>\n            </div>\n            \n            {/* Lista de Par√¢metros */}\n            <Tabs defaultValue=\"all\" className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-4\">\n                <TabsTrigger value=\"all\">Todos</TabsTrigger>\n                <TabsTrigger value=\"conformity\">Conformidade</TabsTrigger>\n                <TabsTrigger value=\"completeness\">Completude</TabsTrigger>\n                <TabsTrigger value=\"technical\">T√©cnico</TabsTrigger>\n              </TabsList>\n              \n              <TabsContent value=\"all\" className=\"space-y-4\">\n                {parameters.map((parameter) => (\n                  <Card key={parameter.id} className={`transition-all ${\n                    parameter.isActive ? 'bg-white' : 'bg-gray-50 opacity-60'\n                  }`}>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <Switch\n                            checked={parameter.isActive}\n                            onCheckedChange={() => toggleParameterActive(parameter.id)}\n                          />\n                          <div>\n                            <div className=\"flex items-center gap-2\">\n                              <h4 className=\"font-medium text-gray-900\">{parameter.name}</h4>\n                              {getImpactIcon(parameter.impact)}\n                              <Badge className={getCategoryColor(parameter.category)}>\n                                {getCategoryName(parameter.category)}\n                              </Badge>\n                            </div>\n                            <p className=\"text-sm text-gray-600\">{parameter.description}</p>\n                          </div>\n                        </div>\n                        \n                        <div className=\"text-right\">\n                          <div className=\"text-2xl font-bold text-blue-600\">\n                            {(parameter.weight * 100).toFixed(1)}%\n                          </div>\n                          <div className=\"text-xs text-gray-500\">\n                            {parameter.minWeight * 100}% - {parameter.maxWeight * 100}%\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {parameter.isActive && (\n                        <div className=\"space-y-3\">\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"flex-1\">\n                              <Slider\n                                value={[parameter.weight]}\n                                onValueChange={([value]) => updateParameterWeight(parameter.id, value)}\n                                min={parameter.minWeight}\n                                max={parameter.maxWeight}\n                                step={0.01}\n                                className=\"w-full\"\n                              />\n                            </div>\n                            <Input\n                              type=\"number\"\n                              value={parameter.weight.toFixed(2)}\n                              onChange={(e) => updateParameterWeight(parameter.id, parseFloat(e.target.value) || 0)}\n                              min={parameter.minWeight}\n                              max={parameter.maxWeight}\n                              step={0.01}\n                              className=\"w-20\"\n                            />\n                          </div>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                ))}\n              </TabsContent>\n              \n              {/* Tabs por categoria */}\n              {['conformity', 'completeness', 'technical'].map(category => (\n                <TabsContent key={category} value={category} className=\"space-y-4\">\n                  {parameters\n                    .filter(p => p.category === category)\n                    .map((parameter) => (\n                      <Card key={parameter.id} className={`transition-all ${\n                        parameter.isActive ? 'bg-white' : 'bg-gray-50 opacity-60'\n                      }`}>\n                        <CardContent className=\"p-4\">\n                          {/* Mesmo conte√∫do do card acima */}\n                          <div className=\"flex items-center justify-between mb-4\">\n                            <div className=\"flex items-center gap-3\">\n                              <Switch\n                                checked={parameter.isActive}\n                                onCheckedChange={() => toggleParameterActive(parameter.id)}\n                              />\n                              <div>\n                                <div className=\"flex items-center gap-2\">\n                                  <h4 className=\"font-medium text-gray-900\">{parameter.name}</h4>\n                                  {getImpactIcon(parameter.impact)}\n                                </div>\n                                <p className=\"text-sm text-gray-600\">{parameter.description}</p>\n                              </div>\n                            </div>\n                            \n                            <div className=\"text-right\">\n                              <div className=\"text-2xl font-bold text-blue-600\">\n                                {(parameter.weight * 100).toFixed(1)}%\n                              </div>\n                              <div className=\"text-xs text-gray-500\">\n                                {parameter.minWeight * 100}% - {parameter.maxWeight * 100}%\n                              </div>\n                            </div>\n                          </div>\n                          \n                          {parameter.isActive && (\n                            <div className=\"space-y-3\">\n                              <div className=\"flex items-center gap-4\">\n                                <div className=\"flex-1\">\n                                  <Slider\n                                    value={[parameter.weight]}\n                                    onValueChange={([value]) => updateParameterWeight(parameter.id, value)}\n                                    min={parameter.minWeight}\n                                    max={parameter.maxWeight}\n                                    step={0.01}\n                                    className=\"w-full\"\n                                  />\n                                </div>\n                                <Input\n                                  type=\"number\"\n                                  value={parameter.weight.toFixed(2)}\n                                  onChange={(e) => updateParameterWeight(parameter.id, parseFloat(e.target.value) || 0)}\n                                  min={parameter.minWeight}\n                                  max={parameter.maxWeight}\n                                  step={0.01}\n                                  className=\"w-20\"\n                                />\n                              </div>\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))\n                  }\n                </TabsContent>\n              ))}\n            </Tabs>\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Alertas de Valida√ß√£o */}\n      {!statistics.isValid && (\n        <Alert variant=\"destructive\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertDescription>\n            {statistics.totalWeight < 0.99 \n              ? `Peso total muito baixo (${statistics.totalWeight.toFixed(2)}). Ajuste os par√¢metros para somar 1.0.`\n              : `Peso total muito alto (${statistics.totalWeight.toFixed(2)}). Ajuste os par√¢metros para somar 1.0.`\n            }\n          </AlertDescription>\n        </Alert>\n      )}\n      \n      {unsavedChanges && (\n        <Alert>\n          <Info className=\"h-4 w-4\" />\n          <AlertDescription>\n            Voc√™ tem altera√ß√µes n√£o salvas. Clique em \"Salvar\" para aplicar as configura√ß√µes.\n          </AlertDescription>\n        </Alert>\n      )}\n    </div>\n  );\n};\n\nexport default ParameterWeights;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplateAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TemplateStructure' is defined but never used.","line":17,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'organizationId' is defined but never used.","line":51,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":17}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TemplateStructure' is defined but never used.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'organizationId' is defined but never used.","line":51,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Badge } from '../ui/badge';\nimport { Progress } from '../ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs';\nimport { \n  TrendingUp, \n  TrendingDown, \n  Activity,\n  BarChart3,\n  PieChart,\n  Calendar,\n  Users,\n  Clock\n} from 'lucide-react';\nimport { TemplateStructure } from '../../types/template';\n\ninterface TemplateAnalyticsProps {\n  organizationId: string;\n}\n\ninterface CategoryAnalytics {\n  category: string;\n  totalTemplates: number;\n  activeTemplates: number;\n  averageRating: number;\n  totalUsage: number;\n  growthRate: number;\n}\n\ninterface TopTemplate {\n  id: string;\n  name: string;\n  category: string;\n  usageCount: number;\n  rating: number;\n  growth: number;\n}\n\ninterface Insight {\n  id: string;\n  type: 'improvement' | 'warning' | 'opportunity';\n  title: string;\n  description: string;\n  impact: 'low' | 'medium' | 'high';\n  priority: number;\n}\n\nexport const TemplateAnalytics: React.FC<TemplateAnalyticsProps> = ({\n  organizationId\n}) => {\n  // Mock data - em produ√ß√£o viria de API\n  const categoryAnalytics: CategoryAnalytics[] = [\n    {\n      category: 'edital',\n      totalTemplates: 15,\n      activeTemplates: 12,\n      averageRating: 4.6,\n      totalUsage: 234,\n      growthRate: 12.5\n    },\n    {\n      category: 'tr',\n      totalTemplates: 8,\n      activeTemplates: 7,\n      averageRating: 4.8,\n      totalUsage: 156,\n      growthRate: 8.2\n    },\n    {\n      category: 'etp',\n      totalTemplates: 6,\n      activeTemplates: 5,\n      averageRating: 4.4,\n      totalUsage: 89,\n      growthRate: 15.7\n    },\n    {\n      category: 'mapa_risco',\n      totalTemplates: 4,\n      activeTemplates: 3,\n      averageRating: 4.2,\n      totalUsage: 45,\n      growthRate: 5.1\n    },\n    {\n      category: 'minuta',\n      totalTemplates: 10,\n      activeTemplates: 8,\n      averageRating: 4.7,\n      totalUsage: 178,\n      growthRate: 9.8\n    }\n  ];\n\n  const topTemplates: TopTemplate[] = [\n    {\n      id: '1',\n      name: 'Edital Obra P√∫blica',\n      category: 'edital',\n      usageCount: 45,\n      rating: 4.8,\n      growth: 15.2\n    },\n    {\n      id: '2',\n      name: 'TR Desenvolvimento Web',\n      category: 'tr',\n      usageCount: 32,\n      rating: 4.9,\n      growth: 12.8\n    },\n    {\n      id: '3',\n      name: 'ETP Infraestrutura',\n      category: 'etp',\n      usageCount: 28,\n      rating: 4.6,\n      growth: 18.5\n    }\n  ];\n\n  const insights: Insight[] = [\n    {\n      id: '1',\n      type: 'improvement',\n      title: 'Otimizar Templates de ETP',\n      description: 'Templates de ETP t√™m menor rating. Considere revisar valida√ß√µes.',\n      impact: 'medium',\n      priority: 2\n    },\n    {\n      id: '2',\n      type: 'opportunity',\n      title: 'Expandir Categoria Mapas de Risco',\n      description: 'Baixa utiliza√ß√£o mas alto crescimento. Oportunidade de expans√£o.',\n      impact: 'high',\n      priority: 1\n    },\n    {\n      id: '3',\n      type: 'warning',\n      title: 'Templates Inativos',\n      description: '5 templates inativos podem ser removidos ou atualizados.',\n      impact: 'low',\n      priority: 3\n    }\n  ];\n\n  const getCategoryLabel = (category: string) => {\n    const labels: Record<string, string> = {\n      edital: 'Editais',\n      tr: 'Termos de Refer√™ncia',\n      etp: 'ETPs',\n      mapa_risco: 'Mapas de Risco',\n      minuta: 'Minutas'\n    };\n    return labels[category] || category;\n  };\n\n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case 'improvement':\n        return <TrendingUp className=\"w-4 h-4 text-blue-600\" />;\n      case 'warning':\n        return <TrendingDown className=\"w-4 h-4 text-orange-600\" />;\n      case 'opportunity':\n        return <Activity className=\"w-4 h-4 text-green-600\" />;\n      default:\n        return <Activity className=\"w-4 h-4 text-gray-600\" />;\n    }\n  };\n\n  const getInsightBadgeVariant = (impact: string) => {\n    switch (impact) {\n      case 'high':\n        return 'default';\n      case 'medium':\n        return 'secondary';\n      case 'low':\n        return 'outline';\n      default:\n        return 'outline';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* KPIs Principais */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center space-x-2\">\n              <BarChart3 className=\"w-4 h-4 text-blue-600\" />\n              <span className=\"text-sm font-medium text-gray-600\">Total Templates</span>\n            </div>\n            <div className=\"text-2xl font-bold\">43</div>\n            <p className=\"text-xs text-gray-500\">+8% este m√™s</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center space-x-2\">\n              <PieChart className=\"w-4 h-4 text-green-600\" />\n              <span className=\"text-sm font-medium text-gray-600\">Templates Ativos</span>\n            </div>\n            <div className=\"text-2xl font-bold\">35</div>\n            <p className=\"text-xs text-gray-500\">81% ativos</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center space-x-2\">\n              <Users className=\"w-4 h-4 text-purple-600\" />\n              <span className=\"text-sm font-medium text-gray-600\">Total Usos</span>\n            </div>\n            <div className=\"text-2xl font-bold\">702</div>\n            <p className=\"text-xs text-gray-500\">+12% este m√™s</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center space-x-2\">\n              <Clock className=\"w-4 h-4 text-orange-600\" />\n              <span className=\"text-sm font-medium text-gray-600\">Rating M√©dio</span>\n            </div>\n            <div className=\"text-2xl font-bold\">4.6</div>\n            <p className=\"text-xs text-gray-500\">+0.2 este m√™s</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Tabs defaultValue=\"categories\" className=\"space-y-4\">\n        <TabsList>\n          <TabsTrigger value=\"categories\">Por Categoria</TabsTrigger>\n          <TabsTrigger value=\"templates\">Top Templates</TabsTrigger>\n          <TabsTrigger value=\"insights\">Insights</TabsTrigger>\n        </TabsList>\n\n        {/* Tab: An√°lise por Categoria */}\n        <TabsContent value=\"categories\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {categoryAnalytics.map((category) => (\n              <Card key={category.category}>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">\n                    {getCategoryLabel(category.category)}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <span className=\"text-gray-600\">Total:</span>\n                      <div className=\"font-semibold\">{category.totalTemplates}</div>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Ativos:</span>\n                      <div className=\"font-semibold\">{category.activeTemplates}</div>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <div className=\"flex justify-between text-sm mb-2\">\n                      <span>Rating M√©dio</span>\n                      <span className=\"font-medium\">{category.averageRating}</span>\n                    </div>\n                    <Progress value={category.averageRating * 20} className=\"h-2\" />\n                  </div>\n                  \n                  <div>\n                    <div className=\"flex justify-between text-sm mb-2\">\n                      <span>Total de Usos</span>\n                      <span className=\"font-medium\">{category.totalUsage}</span>\n                    </div>\n                    <Progress value={(category.totalUsage / 300) * 100} className=\"h-2\" />\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2 text-sm\">\n                    <span className=\"text-gray-600\">Crescimento:</span>\n                    <div className={`flex items-center space-x-1 ${\n                      category.growthRate > 0 ? 'text-green-600' : 'text-red-600'\n                    }`}>\n                      {category.growthRate > 0 ? (\n                        <TrendingUp className=\"w-4 h-4\" />\n                      ) : (\n                        <TrendingDown className=\"w-4 h-4\" />\n                      )}\n                      <span>{Math.abs(category.growthRate)}%</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        {/* Tab: Top Templates */}\n        <TabsContent value=\"templates\" className=\"space-y-4\">\n          <div className=\"space-y-4\">\n            {topTemplates.map((template, index) => (\n              <Card key={template.id}>\n                <CardContent className=\"pt-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-sm font-bold text-blue-600\">\n                        {index + 1}\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold\">{template.name}</h3>\n                        <p className=\"text-sm text-gray-600\">\n                          {getCategoryLabel(template.category)}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"text-right\">\n                      <div className=\"text-lg font-bold\">{template.usageCount} usos</div>\n                      <div className=\"flex items-center space-x-2 text-sm\">\n                        <span>‚≠ê {template.rating}</span>\n                        <div className={`flex items-center space-x-1 ${\n                          template.growth > 0 ? 'text-green-600' : 'text-red-600'\n                        }`}>\n                          {template.growth > 0 ? (\n                            <TrendingUp className=\"w-3 h-3\" />\n                          ) : (\n                            <TrendingDown className=\"w-3 h-3\" />\n                          )}\n                          <span>{template.growth}%</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        {/* Tab: Insights */}\n        <TabsContent value=\"insights\" className=\"space-y-4\">\n          <div className=\"space-y-4\">\n            {insights.map((insight) => (\n              <Card key={insight.id}>\n                <CardContent className=\"pt-6\">\n                  <div className=\"flex items-start space-x-4\">\n                    {getInsightIcon(insight.type)}\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2 mb-2\">\n                        <h3 className=\"font-semibold\">{insight.title}</h3>\n                        <Badge variant={getInsightBadgeVariant(insight.impact)}>\n                          {insight.impact === 'high' ? 'Alto' : \n                           insight.impact === 'medium' ? 'M√©dio' : 'Baixo'}\n                        </Badge>\n                        <Badge variant=\"outline\">P{insight.priority}</Badge>\n                      </div>\n                      <p className=\"text-gray-600\">{insight.description}</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplateCard.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_template' is defined but never used.","line":24,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_templateId' is defined but never used.","line":25,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_template' is defined but never used.","line":26,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_template' is defined but never used.","line":27,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":45,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_templateId' is defined but never used.","line":28,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplateEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TemplateSection' is defined but never used.","line":24,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_organizationId' is defined but never used.","line":57,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getSeverityColor' is assigned a value but never used.","line":105,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":105,"endColumn":25}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'TemplateSection' is defined but never used.","line":24,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'template' is defined but never used.","line":30,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_organizationId' is defined but never used.","line":57,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getSeverityColor' is assigned a value but never used.","line":105,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Label } from '../ui/label';\nimport { Textarea } from '../ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../ui/select';\nimport { Badge } from '../ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs';\nimport { \n  Save, \n  X, \n  Plus, \n  Trash2,\n  GripVertical,\n  Settings,\n  FileText,\n  Target,\n  Shield,\n  MapPin,\n  FileCode\n} from 'lucide-react';\nimport { TemplateStructure, TemplateSection, ValidationRule } from '../../types/template';\n\ninterface TemplateEditorProps {\n  template: TemplateStructure;\n  organizationId: string;\n  onClose: () => void;\n  onSave: (template: TemplateStructure) => void;\n}\n\ninterface EditingSection {\n  id: string;\n  name: string;\n  description: string;\n  required: boolean;\n  order: number;\n  validationRules: ValidationRule[];\n  scoringWeight: number;\n  keywords: string[];\n  patterns: string[];\n  examples: string[];\n}\n\ninterface EditingRule {\n  id: string;\n  type: 'presence' | 'format' | 'length' | 'regex' | 'custom';\n  condition: string;\n  message: string;\n  severity: 'error' | 'warning' | 'info';\n  enabled: boolean;\n}\n\nexport const TemplateEditor: React.FC<TemplateEditorProps> = ({\n  template,\n  _organizationId,\n  onClose,\n  onSave\n}) => {\n  const [activeTab, setActiveTab] = useState('metadata');\n  const [editingTemplate, setEditingTemplate] = useState<TemplateStructure>(template);\n  const [editingSections, setEditingSections] = useState<EditingSection[]>(\n    template.sections.map(s => ({ ...s }))\n  );\n  const [editingRules, setEditingRules] = useState<ValidationRule[]>(\n    template.validationRules.map(r => ({ ...r }))\n  );\n  const [newSection, setNewSection] = useState<Partial<EditingSection>>({\n    name: '',\n    description: '',\n    required: false,\n    order: template.sections.length + 1,\n    validationRules: [],\n    scoringWeight: 10,\n    keywords: [],\n    patterns: [],\n    examples: []\n  });\n  const [newRule, setNewRule] = useState<Partial<EditingRule>>({\n    type: 'presence' as const,\n    condition: 'required',\n    message: '',\n    severity: 'error' as const,\n    enabled: true\n  });\n\n  const getCategoryIcon = (category: 'edital' | 'tr' | 'etp' | 'mapa_risco' | 'minuta') => {\n    switch (category) {\n      case 'edital':\n        return FileText;\n      case 'tr':\n        return Target;\n      case 'etp':\n        return Shield;\n      case 'mapa_risco':\n        return MapPin;\n      case 'minuta':\n        return FileCode;\n      default:\n        return FileText;\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'error':\n        return 'text-red-600';\n      case 'warning':\n        return 'text-yellow-600';\n      case 'info':\n        return 'text-blue-600';\n      default:\n        return 'text-gray-600';\n    }\n  };\n\n  const handleSave = () => {\n    const updatedTemplate: TemplateStructure = {\n      ...editingTemplate,\n      sections: editingSections,\n      validationRules: editingRules\n    };\n    onSave(updatedTemplate);\n  };\n\n  const addSection = () => {\n    if (newSection.name && newSection.description) {\n      const section: EditingSection = {\n        id: `section_${Date.now()}`,\n        name: newSection.name!,\n        description: newSection.description!,\n        required: newSection.required || false,\n        order: newSection.order || editingSections.length + 1,\n        validationRules: newSection.validationRules || [],\n        scoringWeight: newSection.scoringWeight || 10,\n        keywords: newSection.keywords || [],\n        patterns: newSection.patterns || [],\n        examples: newSection.examples || []\n      };\n      \n      setEditingSections([...editingSections, section]);\n      setNewSection({\n        name: '',\n        description: '',\n        required: false,\n        order: editingSections.length + 2,\n        validationRules: [],\n        scoringWeight: 10,\n        keywords: [],\n        patterns: [],\n        examples: []\n      });\n    }\n  };\n\n  const removeSection = (sectionId: string) => {\n    setEditingSections(editingSections.filter(s => s.id !== sectionId));\n  };\n\n  const updateSection = (sectionId: string, updates: Partial<EditingSection>) => {\n    setEditingSections(editingSections.map(s => \n      s.id === sectionId ? { ...s, ...updates } : s\n    ));\n  };\n\n  const addRule = () => {\n    if (newRule.type && newRule.message) {\n      const rule: ValidationRule = {\n        id: `rule_${Date.now()}`,\n        type: newRule.type!,\n        condition: newRule.condition!,\n        message: newRule.message!,\n        severity: newRule.severity!,\n        enabled: newRule.enabled!\n      };\n      \n      setEditingRules([...editingRules, rule]);\n      setNewRule({\n        type: 'presence',\n        condition: 'required',\n        message: '',\n        severity: 'error',\n        enabled: true\n      });\n    }\n  };\n\n  const removeRule = (ruleId: string) => {\n    setEditingRules(editingRules.filter(r => r.id !== ruleId));\n  };\n\n  const updateRule = (ruleId: string, updates: Partial<ValidationRule>) => {\n    setEditingRules(editingRules.map(r => \n      r.id === ruleId ? { ...r, ...updates } : r\n    ));\n  };\n\n  const addKeyword = (sectionId: string, keyword: string) => {\n    if (keyword.trim()) {\n      updateSection(sectionId, {\n        keywords: [...editingSections.find(s => s.id === sectionId)!.keywords, keyword.trim()]\n      });\n    }\n  };\n\n  const removeKeyword = (sectionId: string, keyword: string) => {\n    const section = editingSections.find(s => s.id === sectionId);\n    if (section) {\n      updateSection(sectionId, {\n        keywords: section.keywords.filter(k => k !== keyword)\n      });\n    }\n  };\n\n  const addPattern = (sectionId: string, pattern: string) => {\n    if (pattern.trim()) {\n      updateSection(sectionId, {\n        patterns: [...editingSections.find(s => s.id === sectionId)!.patterns, pattern.trim()]\n      });\n    }\n  };\n\n  const removePattern = (sectionId: string, pattern: string) => {\n    const section = editingSections.find(s => s.id === sectionId);\n    if (section) {\n      updateSection(sectionId, {\n        patterns: section.patterns.filter(p => p !== pattern)\n      });\n    }\n  };\n\n  const addExample = (sectionId: string, example: string) => {\n    if (example.trim()) {\n      updateSection(sectionId, {\n        examples: [...editingSections.find(s => s.id === sectionId)!.examples, example.trim()]\n      });\n    }\n  };\n\n  const removeExample = (sectionId: string, example: string) => {\n    const section = editingSections.find(s => s.id === sectionId);\n    if (section) {\n      updateSection(sectionId, {\n        examples: section.examples.filter(e => e !== example)\n      });\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\n              {React.createElement(getCategoryIcon(editingTemplate.metadata.category), { \n                className: \"w-5 h-5 text-blue-600\" \n              })}\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold\">Editar Template</h2>\n              <p className=\"text-gray-600\">{editingTemplate.metadata.name}</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <Button variant=\"outline\" onClick={onClose}>\n              <X className=\"w-4 h-4 mr-2\" />\n              Cancelar\n            </Button>\n            <Button onClick={handleSave}>\n              <Save className=\"w-4 h-4 mr-2\" />\n              Salvar\n            </Button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-auto p-6\">\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"metadata\">Metadados</TabsTrigger>\n              <TabsTrigger value=\"sections\">Se√ß√µes</TabsTrigger>\n              <TabsTrigger value=\"validation\">Valida√ß√£o</TabsTrigger>\n              <TabsTrigger value=\"scoring\">Pontua√ß√£o</TabsTrigger>\n            </TabsList>\n\n            {/* Tab: Metadados */}\n            <TabsContent value=\"metadata\" className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-4\">\n                  <div>\n                    <Label htmlFor=\"name\">Nome do Template</Label>\n                    <Input\n                      id=\"name\"\n                      value={editingTemplate.metadata.name}\n                      onChange={(e) => setEditingTemplate({\n                        ...editingTemplate,\n                        metadata: { ...editingTemplate.metadata, name: e.target.value }\n                      })}\n                      placeholder=\"Nome do template\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"description\">Descri√ß√£o</Label>\n                    <Textarea\n                      id=\"description\"\n                      value={editingTemplate.metadata.description}\n                      onChange={(e) => setEditingTemplate({\n                        ...editingTemplate,\n                        metadata: { ...editingTemplate.metadata, description: e.target.value }\n                      })}\n                      placeholder=\"Descri√ß√£o detalhada do template\"\n                      rows={3}\n                    />\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"category\">Categoria</Label>\n                    <Select\n                      value={editingTemplate.metadata.category}\n                      onValueChange={(value) => setEditingTemplate({\n                        ...editingTemplate,\n                        metadata: { ...editingTemplate.metadata, category: value }\n                      })}\n                    >\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"edital\">Editais</SelectItem>\n                        <SelectItem value=\"tr\">Termos de Refer√™ncia</SelectItem>\n                        <SelectItem value=\"etp\">ETPs</SelectItem>\n                        <SelectItem value=\"mapa_risco\">Mapas de Risco</SelectItem>\n                        <SelectItem value=\"minuta\">Minutas</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-4\">\n                  <div>\n                    <Label htmlFor=\"subcategory\">Subcategoria</Label>\n                    <Input\n                      id=\"subcategory\"\n                      value={editingTemplate.metadata.subcategory || ''}\n                      onChange={(e) => setEditingTemplate({\n                        ...editingTemplate,\n                        metadata: { ...editingTemplate.metadata, subcategory: e.target.value }\n                      })}\n                      placeholder=\"Subcategoria espec√≠fica\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"version\">Vers√£o</Label>\n                    <Input\n                      id=\"version\"\n                      value={editingTemplate.metadata.version}\n                      onChange={(e) => setEditingTemplate({\n                        ...editingTemplate,\n                        metadata: { ...editingTemplate.metadata, version: e.target.value }\n                      })}\n                      placeholder=\"1.0.0\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"author\">Autor</Label>\n                    <Input\n                      id=\"author\"\n                      value={editingTemplate.metadata.author}\n                      onChange={(e) => setEditingTemplate({\n                        ...editingTemplate,\n                        metadata: { ...editingTemplate.metadata, author: e.target.value }\n                      })}\n                      placeholder=\"Nome do autor\"\n                    />\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"isPublic\"\n                        checked={editingTemplate.metadata.isPublic}\n                        onChange={(e) => setEditingTemplate({\n                          ...editingTemplate,\n                          metadata: { ...editingTemplate.metadata, isPublic: e.target.checked }\n                        })}\n                      />\n                      <Label htmlFor=\"isPublic\">Template P√∫blico</Label>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"isActive\"\n                        checked={editingTemplate.metadata.isActive}\n                        onChange={(e) => setEditingTemplate({\n                          ...editingTemplate,\n                          metadata: { ...editingTemplate.metadata, isActive: e.target.checked }\n                        })}\n                      />\n                      <Label htmlFor=\"isActive\">Ativo</Label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </TabsContent>\n\n            {/* Tab: Se√ß√µes */}\n            <TabsContent value=\"sections\" className=\"space-y-6\">\n              <div className=\"space-y-4\">\n                {editingSections.map((section, index) => (\n                  <Card key={section.id}>\n                    <CardHeader>\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3\">\n                          <GripVertical className=\"w-4 h-4 text-gray-400 cursor-move\" />\n                          <CardTitle className=\"text-lg\">Se√ß√£o {index + 1}</CardTitle>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => removeSection(section.id)}\n                          className=\"text-red-600 hover:text-red-700\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </CardHeader>\n                    \n                    <CardContent className=\"space-y-4\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <div>\n                          <Label htmlFor={`section-name-${section.id}`}>Nome da Se√ß√£o</Label>\n                          <Input\n                            id={`section-name-${section.id}`}\n                            value={section.name}\n                            onChange={(e) => updateSection(section.id, { name: e.target.value })}\n                            placeholder=\"Nome da se√ß√£o\"\n                          />\n                        </div>\n                        \n                        <div>\n                          <Label htmlFor={`section-order-${section.id}`}>Ordem</Label>\n                          <Input\n                            id={`section-order-${section.id}`}\n                            type=\"number\"\n                            value={section.order}\n                            onChange={(e) => updateSection(section.id, { order: parseInt(e.target.value) })}\n                            min={1}\n                          />\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <Label htmlFor={`section-description-${section.id}`}>Descri√ß√£o</Label>\n                        <Textarea\n                          id={`section-description-${section.id}`}\n                          value={section.description}\n                          onChange={(e) => updateSection(section.id, { description: e.target.value })}\n                          placeholder=\"Descri√ß√£o da se√ß√£o\"\n                          rows={2}\n                        />\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex items-center space-x-2\">\n                          <input\n                            type=\"checkbox\"\n                            id={`section-required-${section.id}`}\n                            checked={section.required}\n                            onChange={(e) => updateSection(section.id, { required: e.target.checked })}\n                          />\n                          <Label htmlFor={`section-required-${section.id}`}>Obrigat√≥ria</Label>\n                        </div>\n                        \n                        <div>\n                          <Label htmlFor={`section-weight-${section.id}`}>Peso da Pontua√ß√£o</Label>\n                          <Input\n                            id={`section-weight-${section.id}`}\n                            type=\"number\"\n                            value={section.scoringWeight}\n                            onChange={(e) => updateSection(section.id, { scoringWeight: parseInt(e.target.value) })}\n                            min={0}\n                            max={100}\n                          />\n                        </div>\n                      </div>\n                      \n                      {/* Keywords */}\n                      <div>\n                        <Label>Palavras-chave</Label>\n                        <div className=\"flex items-center space-x-2 mb-2\">\n                          <Input\n                            placeholder=\"Adicionar palavra-chave\"\n                            onKeyPress={(e) => {\n                              if (e.key === 'Enter') {\n                                addKeyword(section.id, (e.target as HTMLInputElement).value);\n                                (e.target as HTMLInputElement).value = '';\n                              }\n                            }}\n                          />\n                          <Button\n                            size=\"sm\"\n                            onClick={() => {\n                              const input = document.querySelector(`input[placeholder=\"Adicionar palavra-chave\"]`) as HTMLInputElement;\n                              if (input) {\n                                addKeyword(section.id, input.value);\n                                input.value = '';\n                              }\n                            }}\n                          >\n                            <Plus className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {section.keywords.map((keyword, idx) => (\n                            <Badge key={idx} variant=\"secondary\" className=\"cursor-pointer hover:bg-red-100\"\n                                   onClick={() => removeKeyword(section.id, keyword)}>\n                              {keyword} √ó\n                            </Badge>\n                          ))}\n                        </div>\n                      </div>\n                      \n                      {/* Patterns */}\n                      <div>\n                        <Label>Padr√µes Regex</Label>\n                        <div className=\"flex items-center space-x-2 mb-2\">\n                          <Input\n                            placeholder=\"Adicionar padr√£o regex\"\n                            onKeyPress={(e) => {\n                              if (e.key === 'Enter') {\n                                addPattern(section.id, (e.target as HTMLInputElement).value);\n                                (e.target as HTMLInputElement).value = '';\n                              }\n                            }}\n                          />\n                          <Button\n                            size=\"sm\"\n                            onClick={() => {\n                              const input = document.querySelector(`input[placeholder=\"Adicionar padr√£o regex\"]`) as HTMLInputElement;\n                              if (input) {\n                                addPattern(section.id, input.value);\n                                input.value = '';\n                              }\n                            }}\n                          >\n                            <Plus className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {section.patterns.map((pattern, idx) => (\n                            <Badge key={idx} variant=\"outline\" className=\"cursor-pointer hover:bg-red-100 font-mono text-xs\"\n                                   onClick={() => removePattern(section.id, pattern)}>\n                              {pattern} √ó\n                            </Badge>\n                          ))}\n                        </div>\n                      </div>\n                      \n                      {/* Examples */}\n                      <div>\n                        <Label>Exemplos</Label>\n                        <div className=\"flex items-center space-x-2 mb-2\">\n                          <Input\n                            placeholder=\"Adicionar exemplo\"\n                            onKeyPress={(e) => {\n                              if (e.key === 'Enter') {\n                                addExample(section.id, (e.target as HTMLInputElement).value);\n                                (e.target as HTMLInputElement).value = '';\n                              }\n                            }}\n                          />\n                          <Button\n                            size=\"sm\"\n                            onClick={() => {\n                              const input = document.querySelector(`input[placeholder=\"Adicionar exemplo\"]`) as HTMLInputElement;\n                              if (input) {\n                                addExample(section.id, input.value);\n                                input.value = '';\n                              }\n                            }}\n                          >\n                            <Plus className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                        <div className=\"space-y-2\">\n                          {section.examples.map((example, idx) => (\n                            <div key={idx} className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n                              <span className=\"text-sm\">{example}</span>\n                              <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                onClick={() => removeExample(section.id, example)}\n                                className=\"text-red-600 hover:text-red-700 h-6 w-6 p-0\"\n                              >\n                                √ó\n                              </Button>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n                \n                {/* Nova Se√ß√£o */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">Nova Se√ß√£o</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"new-section-name\">Nome</Label>\n                        <Input\n                          id=\"new-section-name\"\n                          value={newSection.name}\n                          onChange={(e) => setNewSection({ ...newSection, name: e.target.value })}\n                          placeholder=\"Nome da nova se√ß√£o\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <Label htmlFor=\"new-section-order\">Ordem</Label>\n                        <Input\n                          id=\"new-section-order\"\n                          type=\"number\"\n                          value={newSection.order}\n                          onChange={(e) => setNewSection({ ...newSection, order: parseInt(e.target.value) })}\n                          min={1}\n                        />\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"new-section-description\">Descri√ß√£o</Label>\n                      <Textarea\n                        id=\"new-section-description\"\n                        value={newSection.description}\n                        onChange={(e) => setNewSection({ ...newSection, description: e.target.value })}\n                        placeholder=\"Descri√ß√£o da nova se√ß√£o\"\n                        rows={2}\n                      />\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          id=\"new-section-required\"\n                          checked={newSection.required}\n                          onChange={(e) => setNewSection({ ...newSection, required: e.target.checked })}\n                        />\n                        <Label htmlFor=\"new-section-required\">Obrigat√≥ria</Label>\n                      </div>\n                      \n                      <div>\n                        <Label htmlFor=\"new-section-weight\">Peso</Label>\n                        <Input\n                          id=\"new-section-weight\"\n                          type=\"number\"\n                          value={newSection.scoringWeight}\n                          onChange={(e) => setNewSection({ ...newSection, scoringWeight: parseInt(e.target.value) })}\n                          min={0}\n                          max={100}\n                        />\n                      </div>\n                    </div>\n                    \n                    <Button onClick={addSection} className=\"w-full\">\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Adicionar Se√ß√£o\n                    </Button>\n                  </CardContent>\n                </Card>\n              </div>\n            </TabsContent>\n\n            {/* Tab: Valida√ß√£o */}\n            <TabsContent value=\"validation\" className=\"space-y-6\">\n              <div className=\"space-y-4\">\n                {editingRules.map((rule) => (\n                  <Card key={rule.id}>\n                    <CardContent className=\"pt-6\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Settings className=\"w-4 h-4 text-blue-600\" />\n                          <h3 className=\"font-semibold\">Regra de Valida√ß√£o</h3>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => removeRule(rule.id)}\n                          className=\"text-red-600 hover:text-red-700\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <div>\n                          <Label htmlFor={`rule-type-${rule.id}`}>Tipo</Label>\n                          <Select\n                            value={rule.type}\n                            onValueChange={(value) => updateRule(rule.id, { type: value })}\n                          >\n                            <SelectTrigger>\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"presence\">Presen√ßa</SelectItem>\n                              <SelectItem value=\"format\">Formato</SelectItem>\n                              <SelectItem value=\"length\">Comprimento</SelectItem>\n                              <SelectItem value=\"range\">Faixa</SelectItem>\n                              <SelectItem value=\"custom\">Customizado</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        \n                        <div>\n                          <Label htmlFor={`rule-condition-${rule.id}`}>Condi√ß√£o</Label>\n                          <Input\n                            id={`rule-condition-${rule.id}`}\n                            value={rule.condition}\n                            onChange={(e) => updateRule(rule.id, { condition: e.target.value })}\n                            placeholder=\"Condi√ß√£o da regra\"\n                          />\n                        </div>\n                      </div>\n                      \n                      <div className=\"mt-4\">\n                        <Label htmlFor={`rule-message-${rule.id}`}>Mensagem de Erro</Label>\n                        <Input\n                          id={`rule-message-${rule.id}`}\n                          value={rule.message}\n                          onChange={(e) => updateRule(rule.id, { message: e.target.value })}\n                          placeholder=\"Mensagem exibida quando a valida√ß√£o falha\"\n                        />\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-4 mt-4\">\n                        <div>\n                          <Label htmlFor={`rule-severity-${rule.id}`}>Severidade</Label>\n                          <Select\n                            value={rule.severity}\n                            onValueChange={(value) => updateRule(rule.id, { severity: value })}\n                          >\n                            <SelectTrigger>\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"error\">Erro</SelectItem>\n                              <SelectItem value=\"warning\">Aviso</SelectItem>\n                              <SelectItem value=\"info\">Informa√ß√£o</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        \n                        <div className=\"flex items-center space-x-2\">\n                          <input\n                            type=\"checkbox\"\n                            id={`rule-enabled-${rule.id}`}\n                            checked={rule.enabled}\n                            onChange={(e) => updateRule(rule.id, { enabled: e.target.checked })}\n                          />\n                          <Label htmlFor={`rule-enabled-${rule.id}`}>Ativa</Label>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n                \n                {/* Nova Regra */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">Nova Regra de Valida√ß√£o</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"new-rule-type\">Tipo</Label>\n                        <Select\n                          value={newRule.type}\n                          onValueChange={(value) => setNewRule({ ...newRule, type: value })}\n                        >\n                          <SelectTrigger>\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"presence\">Presen√ßa</SelectItem>\n                            <SelectItem value=\"format\">Formato</SelectItem>\n                            <SelectItem value=\"length\">Comprimento</SelectItem>\n                            <SelectItem value=\"range\">Faixa</SelectItem>\n                            <SelectItem value=\"custom\">Customizado</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      \n                      <div>\n                        <Label htmlFor=\"new-rule-condition\">Condi√ß√£o</Label>\n                        <Input\n                          id=\"new-rule-condition\"\n                          value={newRule.condition}\n                          onChange={(e) => setNewRule({ ...newRule, condition: e.target.value })}\n                          placeholder=\"Condi√ß√£o da regra\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"new-rule-message\">Mensagem de Erro</Label>\n                      <Input\n                        id=\"new-rule-message\"\n                        value={newRule.message}\n                        onChange={(e) => setNewRule({ ...newRule, message: e.target.value })}\n                        placeholder=\"Mensagem exibida quando a valida√ß√£o falha\"\n                      />\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-4\">\n                      <div>\n                        <Label htmlFor=\"new-rule-severity\">Severidade</Label>\n                        <Select\n                          value={newRule.severity}\n                          onValueChange={(value) => setNewRule({ ...newRule, severity: value })}\n                        >\n                          <SelectTrigger>\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"error\">Erro</SelectItem>\n                            <SelectItem value=\"warning\">Aviso</SelectItem>\n                            <SelectItem value=\"info\">Informa√ß√£o</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          id=\"new-rule-enabled\"\n                          checked={newRule.enabled}\n                          onChange={(e) => setNewRule({ ...newRule, enabled: e.target.checked })}\n                        />\n                        <Label htmlFor=\"new-rule-enabled\">Ativa</Label>\n                      </div>\n                    </div>\n                    \n                    <Button onClick={addRule} className=\"w-full\">\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Adicionar Regra\n                    </Button>\n                  </CardContent>\n                </Card>\n              </div>\n            </TabsContent>\n\n            {/* Tab: Pontua√ß√£o */}\n            <TabsContent value=\"scoring\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Configura√ß√£o de Pontua√ß√£o</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div>\n                    <h3 className=\"font-semibold mb-4\">Pesos por Categoria de An√°lise</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"structural-weight\">Estrutural</Label>\n                        <Input\n                          id=\"structural-weight\"\n                          type=\"number\"\n                          value={editingTemplate.scoringWeights.structural}\n                          onChange={(e) => setEditingTemplate({\n                            ...editingTemplate,\n                            scoringWeights: {\n                              ...editingTemplate.scoringWeights,\n                              structural: parseInt(e.target.value)\n                            }\n                          })}\n                          min={0}\n                          max={100}\n                        />\n                      </div>\n                      \n                      <div>\n                        <Label htmlFor=\"legal-weight\">Legal</Label>\n                        <Input\n                          id=\"legal-weight\"\n                          type=\"number\"\n                          value={editingTemplate.scoringWeights.legal}\n                          onChange={(e) => setEditingTemplate({\n                            ...editingTemplate,\n                            scoringWeights: {\n                              ...editingTemplate.scoringWeights,\n                              legal: parseInt(e.target.value)\n                            }\n                          })}\n                          min={0}\n                          max={100}\n                        />\n                      </div>\n                      \n                      <div>\n                        <Label htmlFor=\"clarity-weight\">Clareza</Label>\n                        <Input\n                          id=\"clarity-weight\"\n                          type=\"number\"\n                          value={editingTemplate.scoringWeights.clarity}\n                          onChange={(e) => setEditingTemplate({\n                            ...editingTemplate,\n                            scoringWeights: {\n                              ...editingTemplate.scoringWeights,\n                              clarity: parseInt(e.target.value)\n                            }\n                          })}\n                          min={0}\n                          max={100}\n                        />\n                      </div>\n                      \n                      <div>\n                        <Label htmlFor=\"abnt-weight\">ABNT</Label>\n                        <Input\n                          id=\"abnt-weight\"\n                          type=\"number\"\n                          value={editingTemplate.scoringWeights.abnt}\n                          onChange={(e) => setEditingTemplate({\n                            ...editingTemplate,\n                            scoringWeights: {\n                              ...editingTemplate.scoringWeights,\n                              abnt: parseInt(e.target.value)\n                            }\n                          })}\n                          min={0}\n                          max={100}\n                        />\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n                      <p className=\"text-sm text-blue-800\">\n                        <strong>Total:</strong> {Object.values(editingTemplate.scoringWeights).reduce((sum, weight) => sum + weight, 0)}%\n                        {Object.values(editingTemplate.scoringWeights).reduce((sum, weight) => sum + weight, 0) !== 100 && \n                          <span className=\"text-red-600 ml-2\">(Recomendado: 100%)</span>\n                        }\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"font-semibold mb-4\">Campos Obrigat√≥rios</h3>\n                    <div className=\"space-y-2\">\n                      {editingTemplate.requiredFields.map((field, index) => (\n                        <div key={index} className=\"flex items-center space-x-2\">\n                          <Input\n                            value={field}\n                            onChange={(e) => {\n                              const newFields = [...editingTemplate.requiredFields];\n                              newFields[index] = e.target.value;\n                              setEditingTemplate({\n                                ...editingTemplate,\n                                requiredFields: newFields\n                              });\n                            }}\n                            placeholder=\"Nome do campo obrigat√≥rio\"\n                          />\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => {\n                              const newFields = editingTemplate.requiredFields.filter((_, i) => i !== index);\n                              setEditingTemplate({\n                                ...editingTemplate,\n                                requiredFields: newFields\n                              });\n                            }}\n                            className=\"text-red-600 hover:text-red-700\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      ))}\n                      \n                      <Button\n                        variant=\"outline\"\n                        onClick={() => setEditingTemplate({\n                          ...editingTemplate,\n                          requiredFields: [...editingTemplate.requiredFields, '']\n                        })}\n                      >\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Adicionar Campo Obrigat√≥rio\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplateFilters.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":15,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'category' is defined but never used.","line":16,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'status' is defined but never used.","line":17,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'field' is defined but never used.","line":18,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":64,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'mode' is defined but never used.","line":19,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplateManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Tabs' is defined but never used.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Tabs' is defined but never used.","line":42,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsContent' is defined but never used.","line":43,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsContent' is defined but never used.","line":43,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsList' is defined but never used.","line":44,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsList' is defined but never used.","line":44,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsTrigger' is defined but never used.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsTrigger' is defined but never used.","line":45,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'ScrollArea' is defined but never used.","line":53,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ScrollArea' is defined but never used.","line":53,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'StarOff' is defined but never used.","line":65,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'StarOff' is defined but never used.","line":65,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":70,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":70,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":71,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":71,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":71,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'template' is defined but never used.","line":79,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2132,2135],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2132,2135],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'configuration' is assigned a value but never used.","line":118,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":118,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'configuration' is assigned a value but never used.","line":118,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":118,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'saveConfiguration' is assigned a value but never used.","line":118,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":118,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'saveConfiguration' is assigned a value but never used.","line":118,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":118,"endColumn":43},{"ruleId":"no-unused-vars","severity":2,"message":"'isDeleting' is assigned a value but never used.","line":151,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":151,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDeleting' is assigned a value but never used.","line":151,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":151,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTemplates'. Either include it or remove the dependency array.","line":157,"column":6,"nodeType":"ArrayExpression","endLine":157,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [loadTemplates, organization.id]","fix":{"range":[4319,4337],"text":"[loadTemplates, organization.id]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":312,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8815,8818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8815,8818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":313,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":313,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8858,8861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8858,8861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":314,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8908,8911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8908,8911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":315,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8958,8961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8958,8961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":316,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":316,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9009,9012],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9009,9012],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":697,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":697,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21292,21295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21292,21295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":852,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":852,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26842,26845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26842,26845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Componente TemplateManager\n * \n * Gerenciador de templates de configura√ß√£o para o sistema LicitaReview.\n * Permite criar, editar, duplicar, importar e exportar templates de an√°lise\n * com diferentes configura√ß√µes de par√¢metros e regras personalizadas.\n */\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport {\n  Plus,\n  Search,\n  Filter,\n  MoreVertical,\n  Edit,\n  Copy,\n  Download,\n  Upload,\n  Trash2,\n  Star,\n  StarOff,\n  Settings,\n  FileText,\n  Users,\n  Calendar,\n  CheckCircle,\n  AlertCircle,\n  Info\n} from 'lucide-react';\nimport { useAnalysisConfig, type AnalysisTemplate, type AnalysisWeights } from '@/hooks/useAnalysisConfig';\nimport { useAuth } from '@/hooks/useAuth';\nimport { toast } from '@/hooks/use-toast';\n\ninterface TemplateManagerProps {\n  onTemplateSelect?: (template: AnalysisTemplate) => void;\n  selectedTemplateId?: string;\n  className?: string;\n}\n\ninterface TemplateFormData {\n  name: string;\n  description: string;\n  documentType: string;\n  category: 'edital' | 'tr' | 'contrato' | 'projeto' | 'geral';\n  weights: AnalysisWeights;\n  customRules: string[];\n  parameters: Record<string, any>;\n  isPublic: boolean;\n}\n\nconst documentTypes = [\n  { value: 'edital', label: 'Edital de Licita√ß√£o' },\n  { value: 'tr', label: 'Termo de Refer√™ncia' },\n  { value: 'contrato', label: 'Contrato' },\n  { value: 'projeto', label: 'Projeto B√°sico/Executivo' },\n  { value: 'ata', label: 'Ata de Registro de Pre√ßos' },\n  { value: 'outros', label: 'Outros Documentos' }\n];\n\nconst templateCategories = [\n  { value: 'edital', label: 'Editais', icon: FileText },\n  { value: 'tr', label: 'Termos de Refer√™ncia', icon: Settings },\n  { value: 'contrato', label: 'Contratos', icon: Users },\n  { value: 'projeto', label: 'Projetos', icon: Calendar },\n  { value: 'geral', label: 'Geral', icon: Star }\n];\n\nexport const TemplateManager: React.FC<TemplateManagerProps> = ({\n  onTemplateSelect,\n  selectedTemplateId,\n  className\n}) => {\n  const { user, organization } = useAuth();\n  const { configuration, saveConfiguration } = useAnalysisConfig(organization?.id || '');\n  \n  // Estados principais\n  const [templates, setTemplates] = useState<AnalysisTemplate[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<'name' | 'created' | 'usage'>('name');\n  \n  // Estados do formul√°rio\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [editingTemplate, setEditingTemplate] = useState<AnalysisTemplate | null>(null);\n  const [formData, setFormData] = useState<TemplateFormData>({\n    name: '',\n    description: '',\n    documentType: 'edital',\n    category: 'edital',\n    weights: {\n      structural: 0.20,\n      legal: 0.25,\n      clarity: 0.20,\n      abnt: 0.15,\n      budgetary: 0.10,\n      formal: 0.10\n    },\n    customRules: [],\n    parameters: {},\n    isPublic: false\n  });\n  \n  // Estados de a√ß√µes\n  const [isSaving, setIsSaving] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isImporting, setIsImporting] = useState(false);\n  \n  // Carrega templates\n  useEffect(() => {\n    loadTemplates();\n  }, [organization?.id]);\n  \n  const loadTemplates = async () => {\n    if (!organization?.id) return;\n    \n    setIsLoading(true);\n    try {\n      const response = await fetch(`/api/templates/${organization.id}`);\n      if (response.ok) {\n        const data = await response.json();\n        setTemplates(data);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar templates:', error);\n      toast({\n        title: 'Erro ao carregar templates',\n        description: 'N√£o foi poss√≠vel carregar os templates dispon√≠veis',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  // Templates filtrados e ordenados\n  const filteredTemplates = useMemo(() => {\n    let filtered = templates.filter(template => {\n      const matchesSearch = template.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                           template.description.toLowerCase().includes(searchTerm.toLowerCase());\n      const matchesCategory = selectedCategory === 'all' || template.category === selectedCategory;\n      \n      return matchesSearch && matchesCategory;\n    });\n    \n    // Ordena√ß√£o\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'name':\n          return a.name.localeCompare(b.name);\n        case 'created':\n          return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n        case 'usage':\n          return (b.usageCount || 0) - (a.usageCount || 0);\n        default:\n          return 0;\n      }\n    });\n    \n    return filtered;\n  }, [templates, searchTerm, selectedCategory, sortBy]);\n  \n  // Cria novo template\n  const handleCreateTemplate = async () => {\n    if (!organization?.id || !user?.id) return;\n    \n    setIsSaving(true);\n    try {\n      const newTemplate: Omit<AnalysisTemplate, 'id' | 'createdAt' | 'updatedAt' | 'usageCount' | 'rating'> = {\n        ...formData,\n        organizationId: organization.id,\n        createdBy: user.id,\n        isDefault: false\n      };\n      \n      const response = await fetch('/api/templates', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newTemplate)\n      });\n      \n      if (response.ok) {\n        const createdTemplate = await response.json();\n        setTemplates(prev => [...prev, createdTemplate]);\n        setIsCreateDialogOpen(false);\n        resetForm();\n        \n        toast({\n          title: 'Template criado',\n          description: 'O template foi criado com sucesso'\n        });\n      } else {\n        throw new Error('Falha ao criar template');\n      }\n    } catch (error) {\n      console.error('Erro ao criar template:', error);\n      toast({\n        title: 'Erro ao criar template',\n        description: 'N√£o foi poss√≠vel criar o template',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  \n  // Edita template existente\n  const handleEditTemplate = async () => {\n    if (!editingTemplate) return;\n    \n    setIsSaving(true);\n    try {\n      const updatedTemplate = {\n        ...editingTemplate,\n        ...formData,\n        updatedAt: new Date()\n      };\n      \n      const response = await fetch(`/api/templates/${editingTemplate.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updatedTemplate)\n      });\n      \n      if (response.ok) {\n        const updated = await response.json();\n        setTemplates(prev => prev.map(t => t.id === updated.id ? updated : t));\n        setIsEditDialogOpen(false);\n        setEditingTemplate(null);\n        resetForm();\n        \n        toast({\n          title: 'Template atualizado',\n          description: 'O template foi atualizado com sucesso'\n        });\n      } else {\n        throw new Error('Falha ao atualizar template');\n      }\n    } catch (error) {\n      console.error('Erro ao atualizar template:', error);\n      toast({\n        title: 'Erro ao atualizar template',\n        description: 'N√£o foi poss√≠vel atualizar o template',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  \n  // Duplica template\n  const handleDuplicateTemplate = async (template: AnalysisTemplate) => {\n    if (!user?.id) return;\n    \n    const duplicatedTemplate = {\n      ...template,\n      name: `${template.name} (C√≥pia)`,\n      createdBy: user.id,\n      isDefault: false,\n      isPublic: false\n    };\n    \n    delete (duplicatedTemplate as any).id;\n    delete (duplicatedTemplate as any).createdAt;\n    delete (duplicatedTemplate as any).updatedAt;\n    delete (duplicatedTemplate as any).usageCount;\n    delete (duplicatedTemplate as any).rating;\n    \n    try {\n      const response = await fetch('/api/templates', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(duplicatedTemplate)\n      });\n      \n      if (response.ok) {\n        const created = await response.json();\n        setTemplates(prev => [...prev, created]);\n        \n        toast({\n          title: 'Template duplicado',\n          description: 'O template foi duplicado com sucesso'\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao duplicar template:', error);\n      toast({\n        title: 'Erro ao duplicar template',\n        description: 'N√£o foi poss√≠vel duplicar o template',\n        variant: 'destructive'\n      });\n    }\n  };\n  \n  // Remove template\n  const handleDeleteTemplate = async (templateId: string) => {\n    setIsDeleting(true);\n    try {\n      const response = await fetch(`/api/templates/${templateId}`, {\n        method: 'DELETE'\n      });\n      \n      if (response.ok) {\n        setTemplates(prev => prev.filter(t => t.id !== templateId));\n        \n        toast({\n          title: 'Template removido',\n          description: 'O template foi removido com sucesso'\n        });\n      } else {\n        throw new Error('Falha ao remover template');\n      }\n    } catch (error) {\n      console.error('Erro ao remover template:', error);\n      toast({\n        title: 'Erro ao remover template',\n        description: 'N√£o foi poss√≠vel remover o template',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n  \n  // Exporta template\n  const handleExportTemplate = async (template: AnalysisTemplate) => {\n    try {\n      const exportData = {\n        ...template,\n        exportedAt: new Date().toISOString(),\n        exportedBy: user?.name || 'Usu√°rio',\n        version: '1.0'\n      };\n      \n      const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n        type: 'application/json'\n      });\n      \n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `template_${template.name.replace(/\\s+/g, '_')}.json`;\n      document.body.appendChild(a);\n      a.click();\n      URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      toast({\n        title: 'Template exportado',\n        description: 'O template foi exportado com sucesso'\n      });\n    } catch (error) {\n      console.error('Erro ao exportar template:', error);\n      toast({\n        title: 'Erro ao exportar template',\n        description: 'N√£o foi poss√≠vel exportar o template',\n        variant: 'destructive'\n      });\n    }\n  };\n  \n  // Importa template\n  const handleImportTemplate = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file || !organization?.id || !user?.id) return;\n    \n    setIsImporting(true);\n    try {\n      const text = await file.text();\n      const importedData = JSON.parse(text);\n      \n      // Valida estrutura b√°sica\n      if (!importedData.name || !importedData.weights) {\n        throw new Error('Arquivo de template inv√°lido');\n      }\n      \n      const newTemplate = {\n        ...importedData,\n        organizationId: organization.id,\n        createdBy: user.id,\n        isDefault: false,\n        name: `${importedData.name} (Importado)`\n      };\n      \n      // Remove campos que n√£o devem ser importados\n      delete newTemplate.id;\n      delete newTemplate.createdAt;\n      delete newTemplate.updatedAt;\n      delete newTemplate.usageCount;\n      delete newTemplate.rating;\n      delete newTemplate.exportedAt;\n      delete newTemplate.exportedBy;\n      delete newTemplate.version;\n      \n      const response = await fetch('/api/templates', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newTemplate)\n      });\n      \n      if (response.ok) {\n        const created = await response.json();\n        setTemplates(prev => [...prev, created]);\n        \n        toast({\n          title: 'Template importado',\n          description: 'O template foi importado com sucesso'\n        });\n      } else {\n        throw new Error('Falha ao importar template');\n      }\n    } catch (error) {\n      console.error('Erro ao importar template:', error);\n      toast({\n        title: 'Erro ao importar template',\n        description: 'N√£o foi poss√≠vel importar o template. Verifique se o arquivo √© v√°lido.',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsImporting(false);\n      // Reset input\n      event.target.value = '';\n    }\n  };\n  \n  // Aplica template\n  const handleApplyTemplate = (template: AnalysisTemplate) => {\n    if (onTemplateSelect) {\n      onTemplateSelect(template);\n    }\n    \n    toast({\n      title: 'Template aplicado',\n      description: `Template \"${template.name}\" foi aplicado √† configura√ß√£o atual`\n    });\n  };\n  \n  // Inicia edi√ß√£o\n  const startEdit = (template: AnalysisTemplate) => {\n    setEditingTemplate(template);\n    setFormData({\n      name: template.name,\n      description: template.description,\n      documentType: template.documentType,\n      category: template.category,\n      weights: template.weights,\n      customRules: template.customRules,\n      parameters: template.parameters,\n      isPublic: template.isPublic\n    });\n    setIsEditDialogOpen(true);\n  };\n  \n  // Reset formul√°rio\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      documentType: 'edital',\n      category: 'edital',\n      weights: {\n        structural: 0.20,\n        legal: 0.25,\n        clarity: 0.20,\n        abnt: 0.15,\n        budgetary: 0.10,\n        formal: 0.10\n      },\n      customRules: [],\n      parameters: {},\n      isPublic: false\n    });\n  };\n  \n  // Renderiza card do template\n  const renderTemplateCard = (template: AnalysisTemplate) => {\n    const categoryInfo = templateCategories.find(c => c.value === template.category);\n    const Icon = categoryInfo?.icon || FileText;\n    const isSelected = selectedTemplateId === template.id;\n    \n    return (\n      <Card \n        key={template.id} \n        className={`cursor-pointer transition-all hover:shadow-md ${\n          isSelected ? 'ring-2 ring-blue-500 bg-blue-50' : ''\n        }`}\n        onClick={() => handleApplyTemplate(template)}\n      >\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Icon className=\"h-5 w-5 text-gray-600\" />\n              <div>\n                <CardTitle className=\"text-lg\">{template.name}</CardTitle>\n                <CardDescription className=\"text-sm\">\n                  {template.description}\n                </CardDescription>\n              </div>\n            </div>\n            \n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                  <MoreVertical className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuLabel>A√ß√µes</DropdownMenuLabel>\n                <DropdownMenuSeparator />\n                <DropdownMenuItem onClick={(e) => {\n                  e.stopPropagation();\n                  startEdit(template);\n                }}>\n                  <Edit className=\"mr-2 h-4 w-4\" />\n                  Editar\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={(e) => {\n                  e.stopPropagation();\n                  handleDuplicateTemplate(template);\n                }}>\n                  <Copy className=\"mr-2 h-4 w-4\" />\n                  Duplicar\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={(e) => {\n                  e.stopPropagation();\n                  handleExportTemplate(template);\n                }}>\n                  <Download className=\"mr-2 h-4 w-4\" />\n                  Exportar\n                </DropdownMenuItem>\n                <DropdownMenuSeparator />\n                <DropdownMenuItem \n                  className=\"text-red-600\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    if (confirm('Tem certeza que deseja remover este template?')) {\n                      handleDeleteTemplate(template.id);\n                    }\n                  }}\n                >\n                  <Trash2 className=\"mr-2 h-4 w-4\" />\n                  Remover\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </CardHeader>\n        \n        <CardContent>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Tipo de Documento:</span>\n              <Badge variant=\"outline\">\n                {documentTypes.find(dt => dt.value === template.documentType)?.label || template.documentType}\n              </Badge>\n            </div>\n            \n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Categoria:</span>\n              <Badge variant=\"secondary\">\n                {categoryInfo?.label || template.category}\n              </Badge>\n            </div>\n            \n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Regras Personalizadas:</span>\n              <span className=\"font-medium\">{template.customRules.length}</span>\n            </div>\n            \n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Uso:</span>\n              <span className=\"font-medium\">{template.usageCount || 0}x</span>\n            </div>\n            \n            {template.isDefault && (\n              <Badge className=\"w-full justify-center\" variant=\"default\">\n                <Star className=\"mr-1 h-3 w-3\" />\n                Template Padr√£o\n              </Badge>\n            )}\n            \n            {template.isPublic && (\n              <Badge className=\"w-full justify-center\" variant=\"outline\">\n                <Users className=\"mr-1 h-3 w-3\" />\n                P√∫blico\n              </Badge>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  };\n  \n  // Renderiza formul√°rio de template\n  const renderTemplateForm = () => (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"name\">Nome do Template</Label>\n          <Input\n            id=\"name\"\n            value={formData.name}\n            onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n            placeholder=\"Ex: An√°lise Rigorosa de Editais\"\n          />\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"documentType\">Tipo de Documento</Label>\n          <Select\n            value={formData.documentType}\n            onValueChange={(value) => setFormData(prev => ({ ...prev, documentType: value }))}\n          >\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {documentTypes.map(type => (\n                <SelectItem key={type.value} value={type.value}>\n                  {type.label}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n      \n      <div className=\"space-y-2\">\n        <Label htmlFor=\"description\">Descri√ß√£o</Label>\n        <Textarea\n          id=\"description\"\n          value={formData.description}\n          onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n          placeholder=\"Descreva o prop√≥sito e caracter√≠sticas deste template...\"\n          rows={3}\n        />\n      </div>\n      \n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"category\">Categoria</Label>\n          <Select\n            value={formData.category}\n            onValueChange={(value: any) => setFormData(prev => ({ ...prev, category: value }))}\n          >\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {templateCategories.map(category => (\n                <SelectItem key={category.value} value={category.value}>\n                  {category.label}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        \n        <div className=\"flex items-center space-x-2 pt-6\">\n          <input\n            type=\"checkbox\"\n            id=\"isPublic\"\n            checked={formData.isPublic}\n            onChange={(e) => setFormData(prev => ({ ...prev, isPublic: e.target.checked }))}\n            className=\"rounded\"\n          />\n          <Label htmlFor=\"isPublic\">Template p√∫blico (vis√≠vel para toda organiza√ß√£o)</Label>\n        </div>\n      </div>\n      \n      <Separator />\n      \n      <div className=\"space-y-4\">\n        <h4 className=\"font-medium\">Pesos dos Par√¢metros</h4>\n        <div className=\"grid grid-cols-2 gap-4\">\n          {Object.entries(formData.weights).map(([key, value]) => (\n            <div key={key} className=\"space-y-2\">\n              <Label htmlFor={key}>\n                {key === 'structural' && 'Estrutural'}\n                {key === 'legal' && 'Jur√≠dico'}\n                {key === 'clarity' && 'Clareza'}\n                {key === 'abnt' && 'ABNT'}\n                {key === 'budgetary' && 'Or√ßament√°rio'}\n                {key === 'formal' && 'Formal'}\n              </Label>\n              <Input\n                id={key}\n                type=\"number\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.01\"\n                value={value}\n                onChange={(e) => setFormData(prev => ({\n                  ...prev,\n                  weights: {\n                    ...prev.weights,\n                    [key]: parseFloat(e.target.value) || 0\n                  }\n                }))}\n              />\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"text-sm text-gray-600\">\n          <Info className=\"inline h-4 w-4 mr-1\" />\n          A soma dos pesos deve ser igual a 1.0. Atual: {Object.values(formData.weights).reduce((sum, w) => sum + w, 0).toFixed(2)}\n        </div>\n      </div>\n    </div>\n  );\n  \n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header com controles */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Gerenciador de Templates</h2>\n          <p className=\"text-gray-600\">Gerencie templates de configura√ß√£o para an√°lises</p>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"file\"\n            accept=\".json\"\n            onChange={handleImportTemplate}\n            className=\"hidden\"\n            id=\"import-template\"\n          />\n          <Button\n            variant=\"outline\"\n            onClick={() => document.getElementById('import-template')?.click()}\n            disabled={isImporting}\n          >\n            <Upload className=\"mr-2 h-4 w-4\" />\n            {isImporting ? 'Importando...' : 'Importar'}\n          </Button>\n          \n          <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button>\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Novo Template\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>Criar Novo Template</DialogTitle>\n                <DialogDescription>\n                  Configure um novo template de an√°lise com par√¢metros e regras personalizadas\n                </DialogDescription>\n              </DialogHeader>\n              \n              {renderTemplateForm()}\n              \n              <DialogFooter>\n                <Button variant=\"outline\" onClick={() => {\n                  setIsCreateDialogOpen(false);\n                  resetForm();\n                }}>\n                  Cancelar\n                </Button>\n                <Button onClick={handleCreateTemplate} disabled={isSaving}>\n                  {isSaving ? 'Criando...' : 'Criar Template'}\n                </Button>\n              </DialogFooter>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n      \n      {/* Filtros e busca */}\n      <div className=\"flex items-center space-x-4\">\n        <div className=\"flex-1 relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <Input\n            placeholder=\"Buscar templates...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n        \n        <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n          <SelectTrigger className=\"w-48\">\n            <Filter className=\"mr-2 h-4 w-4\" />\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">Todas as Categorias</SelectItem>\n            {templateCategories.map(category => (\n              <SelectItem key={category.value} value={category.value}>\n                {category.label}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n        \n        <Select value={sortBy} onValueChange={(value: any) => setSortBy(value)}>\n          <SelectTrigger className=\"w-40\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"name\">Nome</SelectItem>\n            <SelectItem value=\"created\">Data de Cria√ß√£o</SelectItem>\n            <SelectItem value=\"usage\">Mais Usados</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n      \n      {/* Lista de templates */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {isLoading ? (\n          Array.from({ length: 6 }).map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <div className=\"h-3 bg-gray-200 rounded\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\n                </div>\n              </CardContent>\n            </Card>\n          ))\n        ) : filteredTemplates.length > 0 ? (\n          filteredTemplates.map(renderTemplateCard)\n        ) : (\n          <div className=\"col-span-full text-center py-12\">\n            <FileText className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Nenhum template encontrado</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              {searchTerm || selectedCategory !== 'all' \n                ? 'Tente ajustar os filtros de busca'\n                : 'Crie seu primeiro template para come√ßar'\n              }\n            </p>\n          </div>\n        )}\n      </div>\n      \n      {/* Dialog de edi√ß√£o */}\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Editar Template</DialogTitle>\n            <DialogDescription>\n              Modifique as configura√ß√µes do template selecionado\n            </DialogDescription>\n          </DialogHeader>\n          \n          {renderTemplateForm()}\n          \n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => {\n              setIsEditDialogOpen(false);\n              setEditingTemplate(null);\n              resetForm();\n            }}>\n              Cancelar\n            </Button>\n            <Button onClick={handleEditTemplate} disabled={isSaving}>\n              {isSaving ? 'Salvando...' : 'Salvar Altera√ß√µes'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default TemplateManager;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplatePreview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDownload' is assigned a value but never used.","line":102,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleShare' is assigned a value but never used.","line":116,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":20}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleDownload' is assigned a value but never used.","line":102,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":102,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleShare' is assigned a value but never used.","line":116,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":116,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs';\nimport { \n  Download, \n  X, \n  Zap,\n  FileText,\n  Target,\n  Shield,\n  MapPin,\n  FileCode,\n  CheckCircle,\n  AlertTriangle,\n  Info,\n  Settings\n} from 'lucide-react';\nimport { TemplateStructure } from '../../types/template';\nimport { Label } from '../ui/label';\n\ninterface TemplatePreviewProps {\n  template: TemplateStructure;\n  onClose: () => void;\n  onApply: () => void;\n}\n\nexport const TemplatePreview: React.FC<TemplatePreviewProps> = ({\n  template,\n  onClose,\n  onApply\n}) => {\n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'edital':\n        return FileText;\n      case 'tr':\n        return Target;\n      case 'etp':\n        return Shield;\n      case 'mapa_risco':\n        return MapPin;\n      case 'minuta':\n        return FileCode;\n      default:\n        return FileText;\n    }\n  };\n\n  const getCategoryLabel = (category: string) => {\n    const labels: Record<string, string> = {\n      edital: 'Editais',\n      tr: 'Termos de Refer√™ncia',\n      etp: 'ETPs',\n      mapa_risco: 'Mapas de Risco',\n      minuta: 'Minutas'\n    };\n    return labels[category] || category;\n  };\n\n  const getSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case 'error':\n        return <AlertTriangle className=\"w-4 h-4 text-red-600\" />;\n      case 'warning':\n        return <AlertTriangle className=\"w-4 h-4 text-yellow-600\" />;\n      case 'info':\n        return <Info className=\"w-4 h-4 text-blue-600\" />;\n      default:\n        return <Info className=\"w-4 h-4 text-gray-600\" />;\n    }\n  };\n\n  const getSeverityBadgeVariant = (severity: string) => {\n    switch (severity) {\n      case 'error':\n        return 'destructive';\n      case 'warning':\n        return 'default';\n      case 'info':\n        return 'secondary';\n      default:\n        return 'outline';\n    }\n  };\n\n  const getSeverityLabel = (severity: string) => {\n    switch (severity) {\n      case 'error':\n        return 'Erro';\n      case 'warning':\n        return 'Aviso';\n      case 'info':\n        return 'Informa√ß√£o';\n      default:\n        return 'Info';\n    }\n  };\n\n  const handleDownload = () => {\n    // Em produ√ß√£o, geraria um arquivo de template\n    const templateData = JSON.stringify(template, null, 2);\n    const blob = new Blob([templateData], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${template.metadata.name.replace(/\\s+/g, '_')}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleShare = () => {\n    if (navigator.share) {\n      navigator.share({\n        title: template.metadata.name,\n        text: template.metadata.description,\n        url: window.location.href\n      });\n    } else {\n      // Fallback para copiar URL\n      navigator.clipboard.writeText(window.location.href);\n      alert('URL copiada para a √°rea de transfer√™ncia!');\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\n              {React.createElement(getCategoryIcon(template.metadata.category), { \n                className: \"w-5 h-5 text-blue-600\" \n              })}\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold\">Preview do Template</h2>\n              <p className=\"text-gray-600\">{template.metadata.name}</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <Button variant=\"outline\" onClick={onClose}>\n              <X className=\"w-4 h-4 mr-2\" />\n              Fechar\n            </Button>\n            <Button onClick={onApply}>\n              <Zap className=\"w-4 h-4 mr-2\" />\n              Aplicar Template\n            </Button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-auto p-6\">\n          <Tabs defaultValue=\"overview\" className=\"space-y-4\">\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"overview\">Vis√£o Geral</TabsTrigger>\n              <TabsTrigger value=\"sections\">Se√ß√µes</TabsTrigger>\n              <TabsTrigger value=\"validation\">Valida√ß√£o</TabsTrigger>\n              <TabsTrigger value=\"scoring\">Pontua√ß√£o</TabsTrigger>\n            </TabsList>\n\n            {/* Tab: Vis√£o Geral */}\n            <TabsContent value=\"overview\" className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">Informa√ß√µes B√°sicas</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div>\n                      <Label className=\"text-sm font-medium text-gray-600\">Nome</Label>\n                      <p className=\"font-medium\">{template.metadata.name}</p>\n                    </div>\n                    \n                    <div>\n                      <Label className=\"text-sm font-medium text-gray-600\">Descri√ß√£o</Label>\n                      <p className=\"text-gray-700\">{template.metadata.description}</p>\n                    </div>\n                    \n                    <div>\n                      <Label className=\"text-sm font-medium text-gray-600\">Categoria</Label>\n                      <div className=\"flex items-center space-x-2\">\n                        <Badge variant=\"outline\">{getCategoryLabel(template.metadata.category)}</Badge>\n                        {template.metadata.subcategory && (\n                          <Badge variant=\"secondary\">{template.metadata.subcategory}</Badge>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <Label className=\"text-sm font-medium text-gray-600\">Vers√£o</Label>\n                        <p className=\"font-medium\">{template.metadata.version}</p>\n                      </div>\n                      \n                      <div>\n                        <Label className=\"text-sm font-medium text-gray-600\">Autor</Label>\n                        <p className=\"font-medium\">{template.metadata.author}</p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          checked={template.metadata.isPublic}\n                          disabled\n                          className=\"rounded\"\n                        />\n                        <Label className=\"text-sm\">Template P√∫blico</Label>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          checked={template.metadata.isActive}\n                          disabled\n                          className=\"rounded\"\n                        />\n                        <Label className=\"text-sm\">Ativo</Label>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n                \n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">Estat√≠sticas</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n                        <div className=\"text-2xl font-bold text-blue-600\">{template.sections.length}</div>\n                        <div className=\"text-sm text-blue-600\">Se√ß√µes</div>\n                      </div>\n                      \n                      <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n                        <div className=\"text-2xl font-bold text-green-600\">{template.validationRules.length}</div>\n                        <div className=\"text-sm text-green-600\">Regras</div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span>Total de Usos:</span>\n                        <span className=\"font-medium\">{template.metadata.usageCount}</span>\n                      </div>\n                      \n                      <div className=\"flex justify-between text-sm\">\n                        <span>Avalia√ß√£o:</span>\n                        <div className=\"flex items-center space-x-1\">\n                          <span className=\"text-yellow-500\">‚≠ê</span>\n                          <span className=\"font-medium\">{template.metadata.rating}</span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex justify-between text-sm\">\n                        <span>Criado em:</span>\n                        <span className=\"font-medium\">\n                          {template.metadata.createdAt.toLocaleDateString()}\n                        </span>\n                      </div>\n                      \n                      <div className=\"flex justify-between text-sm\">\n                        <span>Atualizado em:</span>\n                        <span className=\"font-medium\">\n                          {template.metadata.updatedAt.toLocaleDateString()}\n                        </span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n              \n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Campos Obrigat√≥rios</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {template.requiredFields.map((field, index) => (\n                      <Badge key={index} variant=\"default\">\n                        {field}\n                      </Badge>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Tab: Se√ß√µes */}\n            <TabsContent value=\"sections\" className=\"space-y-4\">\n              <div className=\"space-y-4\">\n                {template.sections.map((section, index) => (\n                  <Card key={section.id}>\n                    <CardHeader>\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-sm font-bold text-blue-600\">\n                            {index + 1}\n                          </div>\n                          <div>\n                            <CardTitle className=\"text-lg\">{section.name}</CardTitle>\n                            <p className=\"text-sm text-gray-600\">{section.description}</p>\n                          </div>\n                        </div>\n                        \n                        <div className=\"flex items-center space-x-2\">\n                          {section.required && (\n                            <Badge variant=\"default\">Obrigat√≥ria</Badge>\n                          )}\n                          <Badge variant=\"outline\">Peso: {section.scoringWeight}%</Badge>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    \n                    <CardContent className=\"space-y-4\">\n                      {/* Keywords */}\n                      {section.keywords.length > 0 && (\n                        <div>\n                          <Label className=\"text-sm font-medium text-gray-600\">Palavras-chave</Label>\n                          <div className=\"flex flex-wrap gap-2 mt-2\">\n                            {section.keywords.map((keyword, idx) => (\n                              <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\n                                {keyword}\n                              </Badge>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Patterns */}\n                      {section.patterns.length > 0 && (\n                        <div>\n                          <Label className=\"text-sm font-medium text-gray-600\">Padr√µes Regex</Label>\n                          <div className=\"flex flex-wrap gap-2 mt-2\">\n                            {section.patterns.map((pattern, idx) => (\n                              <Badge key={idx} variant=\"outline\" className=\"text-xs font-mono\">\n                                {pattern}\n                              </Badge>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Examples */}\n                      {section.examples.length > 0 && (\n                        <div>\n                          <Label className=\"text-sm font-medium text-gray-600\">Exemplos</Label>\n                          <div className=\"space-y-2 mt-2\">\n                            {section.examples.map((example, idx) => (\n                              <div key={idx} className=\"p-2 bg-gray-50 rounded text-sm\">\n                                {example}\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n\n            {/* Tab: Valida√ß√£o */}\n            <TabsContent value=\"validation\" className=\"space-y-4\">\n              <div className=\"space-y-4\">\n                {template.validationRules.map((rule) => (\n                  <Card key={rule.id}>\n                    <CardContent className=\"pt-6\">\n                      <div className=\"flex items-start space-x-3\">\n                        {getSeverityIcon(rule.severity)}\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2 mb-2\">\n                            <h3 className=\"font-semibold\">Regra de Valida√ß√£o</h3>\n                            <Badge variant={getSeverityBadgeVariant(rule.severity)}>\n                              {getSeverityLabel(rule.severity)}\n                            </Badge>\n                            <Badge variant=\"outline\">{rule.type}</Badge>\n                          </div>\n                          \n                          <div className=\"space-y-2 text-sm\">\n                            <div>\n                              <span className=\"font-medium\">Condi√ß√£o:</span> {rule.condition}\n                            </div>\n                            <div>\n                              <span className=\"font-medium\">Mensagem:</span> {rule.message}\n                            </div>\n                            <div>\n                              <span className=\"font-medium\">Status:</span>\n                              <Badge variant={rule.enabled ? 'default' : 'secondary'} className=\"ml-2\">\n                                {rule.enabled ? 'Ativa' : 'Inativa'}\n                              </Badge>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n                \n                {template.validationRules.length === 0 && (\n                  <Card>\n                    <CardContent className=\"pt-6 text-center\">\n                      <div className=\"w-12 h-12 text-gray-400 mx-auto mb-4\">\n                        <Settings className=\"w-12 h-12\" />\n                      </div>\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Nenhuma regra de valida√ß√£o</h3>\n                      <p className=\"text-gray-600\">\n                        Este template n√£o possui regras de valida√ß√£o configuradas.\n                      </p>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            </TabsContent>\n\n            {/* Tab: Pontua√ß√£o */}\n            <TabsContent value=\"scoring\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Configura√ß√£o de Pontua√ß√£o</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div>\n                    <h3 className=\"font-semibold mb-4\">Pesos por Categoria de An√°lise</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n                        <span className=\"font-medium\">Estrutural</span>\n                        <Badge variant=\"outline\">{template.scoringWeights.structural}%</Badge>\n                      </div>\n                      \n                      <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n                        <span className=\"font-medium\">Legal</span>\n                        <Badge variant=\"outline\">{template.scoringWeights.legal}%</Badge>\n                      </div>\n                      \n                      <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n                        <span className=\"font-medium\">Clareza</span>\n                        <Badge variant=\"outline\">{template.scoringWeights.clarity}%</Badge>\n                      </div>\n                      \n                      <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n                        <span className=\"font-medium\">ABNT</span>\n                        <Badge variant=\"outline\">{template.scoringWeights.abnt}%</Badge>\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n                      <p className=\"text-sm text-blue-800\">\n                        <strong>Total:</strong> {Object.values(template.scoringWeights).reduce((sum, weight) => sum + weight, 0)}%\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"font-semibold mb-4\">Pesos por Se√ß√£o</h3>\n                    <div className=\"space-y-3\">\n                      {template.sections.map((section, index) => (\n                        <div key={section.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n                          <div className=\"flex items-center space-x-3\">\n                            <div className=\"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-600\">\n                              {index + 1}\n                            </div>\n                            <span className=\"font-medium\">{section.name}</span>\n                            {section.required && (\n                              <Badge variant=\"default\" className=\"text-xs\">Obrigat√≥ria</Badge>\n                            )}\n                          </div>\n                          <Badge variant=\"outline\">{section.scoringWeight}%</Badge>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplateUploader.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TemplateSection' is defined but never used.","line":24,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getCategoryIcon' is assigned a value but never used.","line":78,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":78,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getCategoryLabel' is assigned a value but never used.","line":95,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":25}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Trash2' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TemplateSection' is defined but never used.","line":24,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'template' is defined but never used.","line":29,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":42,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getCategoryIcon' is assigned a value but never used.","line":78,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getCategoryLabel' is assigned a value but never used.","line":95,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Label } from '../ui/label';\nimport { Textarea } from '../ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../ui/select';\nimport { Badge } from '../ui/badge';\nimport { Progress } from '../ui/progress';\nimport { \n  Upload, \n  X, \n  Plus, \n  Trash2,\n  FileText,\n  Target,\n  Shield,\n  MapPin,\n  FileCode,\n  CheckCircle,\n  AlertTriangle\n} from 'lucide-react';\nimport { TemplateStructure, TemplateSection, TemplateMetadata } from '../../types/template';\n\ninterface TemplateUploaderProps {\n  organizationId: string;\n  onClose: () => void;\n  onSuccess: (template: TemplateStructure) => void;\n}\n\ninterface ExtractedSection {\n  id: string;\n  name: string;\n  content: string;\n  confidence: number;\n  isSelected: boolean;\n}\n\ninterface UploadProgress {\n  stage: 'uploading' | 'extracting' | 'processing' | 'complete';\n  percentage: number;\n  message: string;\n}\n\nexport const TemplateUploader: React.FC<TemplateUploaderProps> = ({\n  organizationId,\n  onClose,\n  onSuccess\n}) => {\n  const [activeStep, setActiveStep] = useState(1);\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [extractedSections, setExtractedSections] = useState<ExtractedSection[]>([]);\n  const [templateMetadata, setTemplateMetadata] = useState<Partial<TemplateMetadata>>({\n    name: '',\n    description: '',\n    category: 'edital',\n    subcategory: '',\n    version: '1.0.0',\n    author: '',\n    organizationId,\n    tags: [],\n    isPublic: false,\n    isActive: true\n  });\n  const [scoringWeights, setScoringWeights] = useState({\n    structural: 30,\n    legal: 25,\n    clarity: 25,\n    abnt: 20\n  });\n  const [uploadProgress, setUploadProgress] = useState<UploadProgress>({\n    stage: 'uploading',\n    percentage: 0,\n    message: 'Aguardando upload...'\n  });\n\n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'edital':\n        return FileText;\n      case 'tr':\n        return Target;\n      case 'etp':\n        return Shield;\n      case 'mapa_risco':\n        return MapPin;\n      case 'minuta':\n        return FileCode;\n      default:\n        return FileText;\n    }\n  };\n\n  const getCategoryLabel = (category: string) => {\n    const labels: Record<string, string> = {\n      edital: 'Editais',\n      tr: 'Termos de Refer√™ncia',\n      etp: 'ETPs',\n      mapa_risco: 'Mapas de Risco',\n      minuta: 'Minutas'\n    };\n    return labels[category] || category;\n  };\n\n  const getSubcategoryOptions = (category: string) => {\n    const options: Record<string, string[]> = {\n      edital: ['obra_publica', 'servicos', 'compras', 'concessao'],\n      tr: ['desenvolvimento', 'infraestrutura', 'consultoria', 'treinamento'],\n      etp: ['projeto', 'estudo', 'analise', 'avaliacao'],\n      mapa_risco: ['operacional', 'financeiro', 'compliance', 'tecnologico'],\n      minuta: ['contrato', 'aditivo', 'termo', 'acordo']\n    };\n    return options[category] || [];\n  };\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setUploadedFile(file);\n      simulateFileProcessing();\n    }\n  };\n\n  const simulateFileProcessing = () => {\n    setUploadProgress({ stage: 'uploading', percentage: 0, message: 'Fazendo upload do arquivo...' });\n    \n    const interval = setInterval(() => {\n      setUploadProgress(prev => {\n        if (prev.percentage >= 100) {\n          clearInterval(interval);\n          setUploadProgress({ stage: 'extracting', percentage: 0, message: 'Extraindo se√ß√µes...' });\n          setTimeout(() => simulateSectionExtraction(), 500);\n          return prev;\n        }\n        return { ...prev, percentage: prev.percentage + 10 };\n      });\n    }, 100);\n\n    setTimeout(() => {\n      clearInterval(interval);\n      setUploadProgress({ stage: 'extracting', percentage: 0, message: 'Extraindo se√ß√µes...' });\n      setTimeout(() => simulateSectionExtraction(), 500);\n    }, 1000);\n  };\n\n  const simulateSectionExtraction = () => {\n    setUploadProgress({ stage: 'extracting', percentage: 0, message: 'Analisando conte√∫do...' });\n    \n    const interval = setInterval(() => {\n      setUploadProgress(prev => {\n        if (prev.percentage >= 100) {\n          clearInterval(interval);\n          setUploadProgress({ stage: 'processing', percentage: 0, message: 'Processando template...' });\n          setTimeout(() => simulateTemplateProcessing(), 500);\n          return prev;\n        }\n        return { ...prev, percentage: prev.percentage + 15 };\n      });\n    }, 150);\n\n    setTimeout(() => {\n      clearInterval(interval);\n      setUploadProgress({ stage: 'processing', percentage: 0, message: 'Processando template...' });\n      setTimeout(() => simulateTemplateProcessing(), 500);\n    }, 1500);\n  };\n\n  const simulateTemplateProcessing = () => {\n    setUploadProgress({ stage: 'processing', percentage: 0, message: 'Configurando template...' });\n    \n    const interval = setInterval(() => {\n      setUploadProgress(prev => {\n        if (prev.percentage >= 100) {\n          clearInterval(interval);\n          setUploadProgress({ stage: 'complete', percentage: 100, message: 'Template criado com sucesso!' });\n          setTimeout(() => {\n            setActiveStep(2);\n            generateMockSections();\n          }, 500);\n          return prev;\n        }\n        return { ...prev, percentage: prev.percentage + 20 };\n      });\n    }, 200);\n\n    setTimeout(() => {\n      clearInterval(interval);\n      setUploadProgress({ stage: 'complete', percentage: 100, message: 'Template criado com sucesso!' });\n      setTimeout(() => {\n        setActiveStep(2);\n        generateMockSections();\n      }, 500);\n    }, 1000);\n  };\n\n  const generateMockSections = () => {\n    const mockSections: ExtractedSection[] = [\n      {\n        id: '1',\n        name: 'Objeto da Contrata√ß√£o',\n        content: 'Descri√ß√£o clara do objeto a ser contratado, incluindo especifica√ß√µes t√©cnicas...',\n        confidence: 0.95,\n        isSelected: true\n      },\n      {\n        id: '2',\n        name: 'Justificativa',\n        content: 'Fundamenta√ß√£o legal e t√©cnica para a contrata√ß√£o...',\n        confidence: 0.88,\n        isSelected: true\n      },\n      {\n        id: '3',\n        name: 'Crit√©rios de Avalia√ß√£o',\n        content: 'Crit√©rios objetivos para avalia√ß√£o das propostas...',\n        confidence: 0.92,\n        isSelected: true\n      },\n      {\n        id: '4',\n        name: 'Condi√ß√µes de Pagamento',\n        content: 'Forma e prazo para pagamento dos servi√ßos...',\n        confidence: 0.85,\n        isSelected: false\n      },\n      {\n        id: '5',\n        name: 'Prazo de Execu√ß√£o',\n        content: 'Cronograma e prazos para execu√ß√£o...',\n        confidence: 0.78,\n        isSelected: false\n      }\n    ];\n    \n    setExtractedSections(mockSections);\n  };\n\n  const toggleSectionSelection = (sectionId: string) => {\n    setExtractedSections(prev => \n      prev.map(section => \n        section.id === sectionId \n          ? { ...section, isSelected: !section.isSelected }\n          : section\n      )\n    );\n  };\n\n  const addTag = (tag: string) => {\n    if (tag.trim() && !templateMetadata.tags?.includes(tag.trim())) {\n      setTemplateMetadata(prev => ({\n        ...prev,\n        tags: [...(prev.tags || []), tag.trim()]\n      }));\n    }\n  };\n\n  const removeTag = (tagToRemove: string) => {\n    setTemplateMetadata(prev => ({\n      ...prev,\n      tags: prev.tags?.filter(tag => tag !== tagToRemove) || []\n    }));\n  };\n\n  const handleCreateTemplate = () => {\n    const selectedSections = extractedSections.filter(section => section.isSelected);\n    \n    const template: TemplateStructure = {\n      sections: selectedSections.map(section => ({\n        id: section.id,\n        name: section.name,\n        description: section.content.substring(0, 100) + '...',\n        required: true,\n        order: parseInt(section.id),\n        validationRules: [],\n        scoringWeight: Math.floor(100 / selectedSections.length),\n        keywords: [],\n        patterns: [],\n        examples: []\n      })),\n      requiredFields: selectedSections.map(section => section.name.toLowerCase().replace(/\\s+/g, '_')),\n      scoringWeights: scoringWeights,\n      validationRules: [],\n      metadata: {\n        id: `template_${Date.now()}`,\n        name: templateMetadata.name || 'Novo Template',\n        description: templateMetadata.description || 'Template criado a partir de upload',\n        category: templateMetadata.category || 'edital',\n        subcategory: templateMetadata.subcategory || '',\n        version: templateMetadata.version || '1.0.0',\n        author: templateMetadata.author || '',\n        organizationId,\n        tags: templateMetadata.tags || [],\n        isPublic: templateMetadata.isPublic || false,\n        isActive: templateMetadata.isActive || true,\n        usageCount: 0,\n        rating: 0,\n        lastUsed: new Date(),\n        createdAt: new Date(),\n        updatedAt: new Date()\n      }\n    };\n    \n    onSuccess(template);\n  };\n\n  const getProgressColor = (stage: string) => {\n    switch (stage) {\n      case 'uploading':\n        return 'bg-blue-600';\n      case 'extracting':\n        return 'bg-yellow-600';\n      case 'processing':\n        return 'bg-purple-600';\n      case 'complete':\n        return 'bg-green-600';\n      default:\n        return 'bg-gray-600';\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\n              <Upload className=\"w-5 h-5 text-blue-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold\">Upload de Template</h2>\n              <p className=\"text-gray-600\">Crie um template a partir de um documento</p>\n            </div>\n          </div>\n          \n          <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>\n            <X className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-auto p-6\">\n          {activeStep === 1 ? (\n            /* Step 1: Upload e Processamento */\n            <div className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Upload do Documento</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                    <Upload className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-lg font-medium text-gray-900 mb-2\">\n                      Arraste e solte seu arquivo aqui\n                    </p>\n                    <p className=\"text-gray-600 mb-4\">\n                      Suporta arquivos PDF e DOCX at√© 10MB\n                    </p>\n                    <Input\n                      type=\"file\"\n                      accept=\".pdf,.docx\"\n                      onChange={handleFileUpload}\n                      className=\"hidden\"\n                      id=\"file-upload\"\n                    />\n                    <Label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n                      <Button variant=\"outline\">\n                        Selecionar Arquivo\n                      </Button>\n                    </Label>\n                  </div>\n                  \n                  {uploadedFile && (\n                    <div className=\"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg\">\n                      <CheckCircle className=\"w-5 h-5 text-blue-600\" />\n                      <span className=\"font-medium\">{uploadedFile.name}</span>\n                      <Badge variant=\"outline\">\n                        {(uploadedFile.size / 1024 / 1024).toFixed(2)} MB\n                      </Badge>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Progress */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Processamento</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>{uploadProgress.message}</span>\n                      <span>{uploadProgress.percentage}%</span>\n                    </div>\n                    <Progress value={uploadProgress.percentage} className=\"h-2\" />\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                    <div className={`w-3 h-3 rounded-full ${getProgressColor(uploadProgress.stage)}`} />\n                    <span className=\"capitalize\">{uploadProgress.stage}</span>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          ) : (\n            /* Step 2: Configura√ß√£o do Template */\n            <div className=\"space-y-6\">\n              {/* Metadados */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Informa√ß√µes do Template</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"template-name\">Nome do Template</Label>\n                      <Input\n                        id=\"template-name\"\n                        value={templateMetadata.name}\n                        onChange={(e) => setTemplateMetadata(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Nome do template\"\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"template-category\">Categoria</Label>\n                      <Select\n                        value={templateMetadata.category}\n                        onValueChange={(value) => setTemplateMetadata(prev => ({ ...prev, category: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"edital\">Editais</SelectItem>\n                          <SelectItem value=\"tr\">Termos de Refer√™ncia</SelectItem>\n                          <SelectItem value=\"etp\">ETPs</SelectItem>\n                          <SelectItem value=\"mapa_risco\">Mapas de Risco</SelectItem>\n                          <SelectItem value=\"minuta\">Minutas</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"template-description\">Descri√ß√£o</Label>\n                    <Textarea\n                      id=\"template-description\"\n                      value={templateMetadata.description}\n                      onChange={(e) => setTemplateMetadata(prev => ({ ...prev, description: e.target.value }))}\n                      placeholder=\"Descri√ß√£o detalhada do template\"\n                      rows={3}\n                    />\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                      <Label htmlFor=\"template-subcategory\">Subcategoria</Label>\n                      <Select\n                        value={templateMetadata.subcategory}\n                        onValueChange={(value) => setTemplateMetadata(prev => ({ ...prev, subcategory: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Selecionar subcategoria\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {getSubcategoryOptions(templateMetadata.category || 'edital').map(option => (\n                            <SelectItem key={option} value={option}>\n                              {option.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"template-version\">Vers√£o</Label>\n                      <Input\n                        id=\"template-version\"\n                        value={templateMetadata.version}\n                        onChange={(e) => setTemplateMetadata(prev => ({ ...prev, version: e.target.value }))}\n                        placeholder=\"1.0.0\"\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"template-author\">Autor</Label>\n                      <Input\n                        id=\"template-author\"\n                        value={templateMetadata.author}\n                        onChange={(e) => setTemplateMetadata(prev => ({ ...prev, author: e.target.value }))}\n                        placeholder=\"Nome do autor\"\n                      />\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <Label>Tags</Label>\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <Input\n                        placeholder=\"Adicionar tag\"\n                        onKeyPress={(e) => {\n                          if (e.key === 'Enter') {\n                            addTag((e.target as HTMLInputElement).value);\n                            (e.target as HTMLInputElement).value = '';\n                          }\n                        }}\n                      />\n                      <Button\n                        size=\"sm\"\n                        onClick={() => {\n                          const input = document.querySelector('input[placeholder=\"Adicionar tag\"]') as HTMLInputElement;\n                          if (input) {\n                            addTag(input.value);\n                            input.value = '';\n                          }\n                        }}\n                      >\n                        <Plus className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {templateMetadata.tags?.map((tag, index) => (\n                        <Badge key={index} variant=\"secondary\" className=\"cursor-pointer hover:bg-red-100\"\n                               onClick={() => removeTag(tag)}>\n                          {tag} √ó\n                        </Badge>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"template-public\"\n                        checked={templateMetadata.isPublic}\n                        onChange={(e) => setTemplateMetadata(prev => ({ ...prev, isPublic: e.target.checked }))}\n                      />\n                      <Label htmlFor=\"template-public\">Template P√∫blico</Label>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"template-active\"\n                        checked={templateMetadata.isActive}\n                        onChange={(e) => setTemplateMetadata(prev => ({ ...prev, isActive: e.target.checked }))}\n                      />\n                      <Label htmlFor=\"template-active\">Ativo</Label>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Se√ß√µes Extra√≠das */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Se√ß√µes Extra√≠das</CardTitle>\n                  <p className=\"text-sm text-gray-600\">\n                    Selecione as se√ß√µes que devem fazer parte do template\n                  </p>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {extractedSections.map((section) => (\n                    <div key={section.id} className=\"border rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-3 mb-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={section.isSelected}\n                              onChange={() => toggleSectionSelection(section.id)}\n                              className=\"rounded\"\n                            />\n                            <h4 className=\"font-medium\">{section.name}</h4>\n                            <Badge variant={section.confidence > 0.9 ? 'default' : 'secondary'}>\n                              {Math.round(section.confidence * 100)}% confian√ßa\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm text-gray-600\">{section.content}</p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </CardContent>\n              </Card>\n\n              {/* Pesos de Pontua√ß√£o */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">Configura√ß√£o de Pontua√ß√£o</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"structural-weight\">Estrutural</Label>\n                      <Input\n                        id=\"structural-weight\"\n                        type=\"number\"\n                        value={scoringWeights.structural}\n                        onChange={(e) => setScoringWeights(prev => ({ ...prev, structural: parseInt(e.target.value) }))}\n                        min={0}\n                        max={100}\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"legal-weight\">Legal</Label>\n                      <Input\n                        id=\"legal-weight\"\n                        type=\"number\"\n                        value={scoringWeights.legal}\n                        onChange={(e) => setScoringWeights(prev => ({ ...prev, legal: parseInt(e.target.value) }))}\n                        min={0}\n                        max={100}\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"clarity-weight\">Clareza</Label>\n                      <Input\n                        id=\"clarity-weight\"\n                        type=\"number\"\n                        value={scoringWeights.clarity}\n                        onChange={(e) => setScoringWeights(prev => ({ ...prev, clarity: parseInt(e.target.value) }))}\n                        min={0}\n                        max={100}\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"abnt-weight\">ABNT</Label>\n                      <Input\n                        id=\"abnt-weight\"\n                        type=\"number\"\n                        value={scoringWeights.abnt}\n                        onChange={(e) => setScoringWeights(prev => ({ ...prev, abnt: parseInt(e.target.value) }))}\n                        min={0}\n                        max={100}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"p-4 bg-blue-50 rounded-lg\">\n                    <p className=\"text-sm text-blue-800\">\n                      <strong>Total:</strong> {Object.values(scoringWeights).reduce((sum, weight) => sum + weight, 0)}%\n                      {Object.values(scoringWeights).reduce((sum, weight) => sum + weight, 0) !== 100 && \n                        <span className=\"text-red-600 ml-2\">(Recomendado: 100%)</span>\n                      }\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* A√ß√µes */}\n              <div className=\"flex items-center justify-between\">\n                <Button variant=\"outline\" onClick={() => setActiveStep(1)}>\n                  Voltar\n                </Button>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Button variant=\"outline\" onClick={onClose}>\n                    Cancelar\n                  </Button>\n                  <Button onClick={handleCreateTemplate}>\n                    Criar Template\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/TemplateVersioning.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GitMerge' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TemplateStructure' is defined but never used.","line":22,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VersionComparison' is defined but never used.","line":61,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'organizationId' is defined but never used.","line":74,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":17}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'GitMerge' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TemplateStructure' is defined but never used.","line":22,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'VersionComparison' is defined but never used.","line":61,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'organizationId' is defined but never used.","line":74,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs';\nimport { \n  GitBranch, \n  GitCommit, \n  GitMerge, \n  GitPullRequest,\n  History,\n  Calendar,\n  User,\n  MessageSquare,\n  ArrowUp,\n  ArrowDown,\n  Copy,\n  Share2,\n  X\n} from 'lucide-react';\nimport { TemplateStructure } from '../../types/template';\nimport { Label } from '../ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../ui/select';\n\ninterface TemplateVersioningProps {\n  organizationId: string;\n}\n\ninterface TemplateVersion {\n  id: string;\n  version: string;\n  branch: string;\n  commitHash: string;\n  commitMessage: string;\n  author: string;\n  createdAt: Date;\n  status: 'draft' | 'review' | 'approved' | 'merged' | 'archived';\n  changes: VersionChange[];\n  parentVersion?: string;\n  mergeBase?: string;\n}\n\ninterface VersionChange {\n  id: string;\n  type: 'added' | 'modified' | 'removed';\n  section: string;\n  description: string;\n  impact: 'low' | 'medium' | 'high' | 'critical';\n  details: string;\n}\n\ninterface ApprovalStatus {\n  id: string;\n  approver: string;\n  status: 'pending' | 'approved' | 'rejected';\n  comment: string;\n  date: Date;\n}\n\ninterface VersionComparison {\n  fromVersion: string;\n  toVersion: string;\n  changes: VersionChange[];\n  summary: {\n    added: number;\n    modified: number;\n    removed: number;\n    totalImpact: string;\n  };\n}\n\nexport const TemplateVersioning: React.FC<TemplateVersioningProps> = ({\n  organizationId\n}) => {\n  const [activeTab, setActiveTab] = useState('timeline');\n  const [selectedVersion, setSelectedVersion] = useState<TemplateVersion | null>(null);\n  const [comparisonFrom, setComparisonFrom] = useState<string>('');\n  const [comparisonTo, setComparisonTo] = useState<string>('');\n\n  // Mock data - em produ√ß√£o viria de API\n  const versions: TemplateVersion[] = [\n    {\n      id: 'v1',\n      version: '1.0.0',\n      branch: 'main',\n      commitHash: 'a1b2c3d4',\n      commitMessage: 'Vers√£o inicial do template',\n      author: 'Jo√£o Silva',\n      createdAt: new Date('2024-01-01'),\n      status: 'merged',\n      changes: [\n        {\n          id: 'c1',\n          type: 'added',\n          section: 'Objeto da Contrata√ß√£o',\n          description: 'Nova se√ß√£o obrigat√≥ria',\n          impact: 'high',\n          details: 'Se√ß√£o criada com valida√ß√µes e regras de pontua√ß√£o'\n        }\n      ]\n    },\n    {\n      id: 'v2',\n      version: '1.1.0',\n      branch: 'feature/validation-rules',\n      commitHash: 'e5f6g7h8',\n      commitMessage: 'Adiciona regras de valida√ß√£o avan√ßadas',\n      author: 'Maria Santos',\n      createdAt: new Date('2024-01-15'),\n      status: 'review',\n      parentVersion: 'v1',\n      changes: [\n        {\n          id: 'c2',\n          type: 'modified',\n          section: 'Valida√ß√µes',\n          description: 'Regras de valida√ß√£o expandidas',\n          impact: 'medium',\n          details: 'Adicionadas 5 novas regras de valida√ß√£o com diferentes severidades'\n        }\n      ]\n    },\n    {\n      id: 'v3',\n      version: '1.2.0',\n      branch: 'feature/scoring-weights',\n      commitHash: 'i9j0k1l2',\n      commitMessage: 'Implementa sistema de pesos configur√°veis',\n      author: 'Pedro Costa',\n      createdAt: new Date('2024-02-01'),\n      status: 'draft',\n      parentVersion: 'v2',\n      changes: [\n        {\n          id: 'c3',\n          type: 'added',\n          section: 'Configura√ß√£o de Pontua√ß√£o',\n          description: 'Sistema de pesos flex√≠vel',\n          impact: 'high',\n          details: 'Permite configurar pesos por categoria e se√ß√£o'\n        }\n      ]\n    }\n  ];\n\n  const approvalStatuses: ApprovalStatus[] = [\n    {\n      id: 'a1',\n      approver: 'Ana Oliveira',\n      status: 'approved',\n      comment: 'Template aprovado para produ√ß√£o',\n      date: new Date('2024-01-20')\n    },\n    {\n      id: 'a2',\n      approver: 'Carlos Lima',\n      status: 'pending',\n      comment: 'Aguardando revis√£o t√©cnica',\n      date: new Date('2024-01-25')\n    }\n  ];\n\n  const getStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case 'draft':\n        return 'secondary';\n      case 'review':\n        return 'default';\n      case 'approved':\n        return 'default';\n      case 'merged':\n        return 'default';\n      case 'archived':\n        return 'outline';\n      default:\n        return 'outline';\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case 'draft':\n        return 'Rascunho';\n      case 'review':\n        return 'Em Revis√£o';\n      case 'approved':\n        return 'Aprovado';\n      case 'merged':\n        return 'Mesclado';\n      case 'archived':\n        return 'Arquivado';\n      default:\n        return status;\n    }\n  };\n\n  const getImpactBadgeVariant = (impact: string) => {\n    switch (impact) {\n      case 'low':\n        return 'outline';\n      case 'medium':\n        return 'secondary';\n      case 'high':\n        return 'default';\n      case 'critical':\n        return 'destructive';\n      default:\n        return 'outline';\n    }\n  };\n\n  const getImpactLabel = (impact: string) => {\n    switch (impact) {\n      case 'low':\n        return 'Baixo';\n      case 'medium':\n        return 'M√©dio';\n      case 'high':\n        return 'Alto';\n      case 'critical':\n        return 'Cr√≠tico';\n      default:\n        return impact;\n    }\n  };\n\n  const getChangeTypeIcon = (type: string) => {\n    switch (type) {\n      case 'added':\n        return <ArrowUp className=\"w-4 h-4 text-green-600\" />;\n      case 'modified':\n        return <ArrowDown className=\"w-4 h-4 text-yellow-600\" />;\n      case 'removed':\n        return <ArrowDown className=\"w-4 h-4 text-red-600\" />;\n      default:\n        return <ArrowDown className=\"w-4 h-4 text-gray-600\" />;\n    }\n  };\n\n  const handleVersionSelect = (version: TemplateVersion) => {\n    setSelectedVersion(version);\n  };\n\n  const handleCreateBranch = () => {\n    console.log('Criar nova branch');\n  };\n\n  const handleCreateVersion = () => {\n    console.log('Criar nova vers√£o');\n  };\n\n  const handleMergeRequest = () => {\n    console.log('Criar merge request');\n  };\n\n  const handleRollback = () => {\n    console.log('Fazer rollback');\n  };\n\n  const handleCompareVersions = () => {\n    if (comparisonFrom && comparisonTo) {\n      console.log('Comparar vers√µes:', comparisonFrom, comparisonTo);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Versionamento de Templates</h2>\n          <p className=\"text-gray-600\">\n            Gerencie vers√µes, branches e hist√≥rico de mudan√ßas dos templates\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <Button variant=\"outline\" onClick={handleCreateBranch}>\n            <GitBranch className=\"w-4 h-4 mr-2\" />\n            Nova Branch\n          </Button>\n          <Button variant=\"outline\" onClick={handleCreateVersion}>\n            <GitCommit className=\"w-4 h-4 mr-2\" />\n            Nova Vers√£o\n          </Button>\n          <Button onClick={handleMergeRequest}>\n            <GitPullRequest className=\"w-4 h-4 mr-2\" />\n            Merge Request\n          </Button>\n        </div>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"timeline\">Timeline</TabsTrigger>\n          <TabsTrigger value=\"branches\">Branches</TabsTrigger>\n          <TabsTrigger value=\"comparison\">Compara√ß√£o</TabsTrigger>\n          <TabsTrigger value=\"approvals\">Aprova√ß√µes</TabsTrigger>\n        </TabsList>\n\n        {/* Tab: Timeline */}\n        <TabsContent value=\"timeline\" className=\"space-y-4\">\n          <div className=\"space-y-4\">\n            {versions.map((version) => (\n              <Card key={version.id} className=\"hover:shadow-md transition-shadow\">\n                <CardContent className=\"pt-6\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-3\">\n                        <div className=\"flex items-center space-x-2\">\n                          <GitCommit className=\"w-5 h-5 text-blue-600\" />\n                          <span className=\"font-mono text-sm text-gray-600\">{version.commitHash}</span>\n                        </div>\n                        \n                        <Badge variant={getStatusBadgeVariant(version.status)}>\n                          {getStatusLabel(version.status)}\n                        </Badge>\n                        \n                        <Badge variant=\"outline\">v{version.version}</Badge>\n                        \n                        <Badge variant=\"secondary\">{version.branch}</Badge>\n                      </div>\n                      \n                      <h3 className=\"text-lg font-semibold mb-2\">{version.commitMessage}</h3>\n                      \n                      <div className=\"flex items-center space-x-4 text-sm text-gray-600 mb-3\">\n                        <div className=\"flex items-center space-x-1\">\n                          <User className=\"w-4 h-4\" />\n                          <span>{version.author}</span>\n                        </div>\n                        \n                        <div className=\"flex items-center space-x-1\">\n                          <Calendar className=\"w-4 h-4\" />\n                          <span>{version.createdAt.toLocaleDateString()}</span>\n                        </div>\n                        \n                        {version.parentVersion && (\n                          <div className=\"flex items-center space-x-1\">\n                            <GitBranch className=\"w-4 h-4\" />\n                            <span>Base: v{version.parentVersion}</span>\n                          </div>\n                        )}\n                      </div>\n                      \n                      <div className=\"space-y-2\">\n                        {version.changes.map((change) => (\n                          <div key={change.id} className=\"flex items-start space-x-2 p-2 bg-gray-50 rounded\">\n                            {getChangeTypeIcon(change.type)}\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center space-x-2 mb-1\">\n                                <span className=\"font-medium\">{change.section}</span>\n                                <Badge variant={getImpactBadgeVariant(change.impact)}>\n                                  {getImpactLabel(change.impact)}\n                                </Badge>\n                              </div>\n                              <p className=\"text-sm text-gray-700\">{change.description}</p>\n                              <p className=\"text-xs text-gray-500 mt-1\">{change.details}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2 ml-4\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => handleVersionSelect(version)}\n                      >\n                        <History className=\"w-4 h-4 mr-1\" />\n                        Detalhes\n                      </Button>\n                      \n                      {version.status === 'draft' && (\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={handleRollback}\n                        >\n                          <GitBranch className=\"w-4 h-4 mr-1\" />\n                          Rollback\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        {/* Tab: Branches */}\n        <TabsContent value=\"branches\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {versions.map((version) => (\n              <Card key={version.id}>\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <GitBranch className=\"w-4 h-4 text-blue-600\" />\n                      <CardTitle className=\"text-lg\">{version.branch}</CardTitle>\n                    </div>\n                    <Badge variant={getStatusBadgeVariant(version.status)}>\n                      {getStatusLabel(version.status)}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                \n                <CardContent className=\"space-y-3\">\n                  <div className=\"text-sm text-gray-600\">\n                    <p><strong>√öltimo commit:</strong> {version.commitMessage}</p>\n                    <p><strong>Autor:</strong> {version.author}</p>\n                    <p><strong>Data:</strong> {version.createdAt.toLocaleDateString()}</p>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2\">\n                    <Button size=\"sm\" variant=\"outline\" className=\"flex-1\">\n                      <Copy className=\"w-4 h-4 mr-1\" />\n                      Checkout\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" className=\"flex-1\">\n                      <Share2 className=\"w-4 h-4 mr-1\" />\n                      Push\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        {/* Tab: Compara√ß√£o */}\n        <TabsContent value=\"comparison\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Comparar Vers√µes</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <Label className=\"text-sm font-medium\">Vers√£o Base</Label>\n                  <Select value={comparisonFrom} onValueChange={setComparisonFrom}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Selecionar vers√£o base\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {versions.map((version) => (\n                        <SelectItem key={version.id} value={version.id}>\n                          v{version.version} - {version.branch}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div>\n                  <Label className=\"text-sm font-medium\">Vers√£o de Compara√ß√£o</Label>\n                  <Select value={comparisonTo} onValueChange={setComparisonTo}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Selecionar vers√£o para comparar\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {versions.map((version) => (\n                        <SelectItem key={version.id} value={version.id}>\n                          v{version.version} - {version.branch}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              \n              <Button \n                onClick={handleCompareVersions}\n                disabled={!comparisonFrom || !comparisonTo}\n                className=\"w-full\"\n              >\n                <GitBranch className=\"w-4 h-4 mr-2\" />\n                Comparar Vers√µes\n              </Button>\n              \n              {comparisonFrom && comparisonTo && (\n                <div className=\"p-4 bg-blue-50 rounded-lg\">\n                  <p className=\"text-sm text-blue-800\">\n                    Comparando <strong>v{versions.find(v => v.id === comparisonFrom)?.version}</strong> \n                    com <strong>v{versions.find(v => v.id === comparisonTo)?.version}</strong>\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Tab: Aprova√ß√µes */}\n        <TabsContent value=\"approvals\" className=\"space-y-4\">\n          <div className=\"space-y-4\">\n            {approvalStatuses.map((approval) => (\n              <Card key={approval.id}>\n                <CardContent className=\"pt-6\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center\">\n                          <User className=\"w-4 h-4 text-blue-600\" />\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold\">{approval.approver}</h3>\n                          <p className=\"text-sm text-gray-600\">\n                            {approval.date.toLocaleDateString()}\n                          </p>\n                        </div>\n                        <Badge variant={approval.status === 'approved' ? 'default' : 'secondary'}>\n                          {approval.status === 'approved' ? 'Aprovado' : 'Pendente'}\n                        </Badge>\n                      </div>\n                      \n                      {approval.comment && (\n                        <div className=\"mt-3 p-3 bg-gray-50 rounded-lg\">\n                          <div className=\"flex items-start space-x-2\">\n                            <MessageSquare className=\"w-4 h-4 text-gray-500 mt-0.5\" />\n                            <p className=\"text-sm text-gray-700\">{approval.comment}</p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      {approval.status === 'pending' && (\n                        <>\n                          <Button size=\"sm\" variant=\"outline\">\n                            <ArrowUp className=\"w-4 h-4 mr-1\" />\n                            Aprovar\n                          </Button>\n                          <Button size=\"sm\" variant=\"outline\">\n                            <ArrowDown className=\"w-4 h-4 mr-1\" />\n                            Rejeitar\n                          </Button>\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      {/* Modal de Detalhes da Vers√£o */}\n      {selectedVersion && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n            <div className=\"flex items-center justify-between p-6 border-b\">\n              <div>\n                <h2 className=\"text-xl font-bold\">Detalhes da Vers√£o</h2>\n                <p className=\"text-gray-600\">v{selectedVersion.version} - {selectedVersion.branch}</p>\n              </div>\n              \n              <Button variant=\"ghost\" size=\"sm\" onClick={() => setSelectedVersion(null)}>\n                <X className=\"w-5 h-5\" />\n              </Button>\n            </div>\n            \n            <div className=\"p-6 overflow-auto max-h-[calc(90vh-120px)]\">\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"font-semibold mb-3\">Informa√ß√µes do Commit</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <span className=\"font-medium\">Hash:</span>\n                      <p className=\"font-mono bg-gray-100 p-2 rounded mt-1\">{selectedVersion.commitHash}</p>\n                    </div>\n                    <div>\n                      <span className=\"font-medium\">Mensagem:</span>\n                      <p className=\"mt-1\">{selectedVersion.commitMessage}</p>\n                    </div>\n                    <div>\n                      <span className=\"font-medium\">Autor:</span>\n                      <p className=\"mt-1\">{selectedVersion.author}</p>\n                    </div>\n                    <div>\n                      <span className=\"font-medium\">Data:</span>\n                      <p className=\"mt-1\">{selectedVersion.createdAt.toLocaleDateString()}</p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <h3 className=\"font-semibold mb-3\">Mudan√ßas</h3>\n                  <div className=\"space-y-3\">\n                    {selectedVersion.changes.map((change) => (\n                      <div key={change.id} className=\"border rounded-lg p-4\">\n                        <div className=\"flex items-start space-x-3\">\n                          {getChangeTypeIcon(change.type)}\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2 mb-2\">\n                              <h4 className=\"font-medium\">{change.section}</h4>\n                              <Badge variant={getImpactBadgeVariant(change.impact)}>\n                                {getImpactLabel(change.impact)}\n                              </Badge>\n                            </div>\n                            <p className=\"text-gray-700 mb-2\">{change.description}</p>\n                            <p className=\"text-sm text-gray-500\">{change.details}</p>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/ValidationPreview.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Separator' is defined but never used.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":31,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":44,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":44,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'Upload' is defined but never used.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Upload' is defined but never used.","line":45,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'useAnalysisConfig' is defined but never used.","line":51,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useAnalysisConfig' is defined but never used.","line":51,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'organization' is assigned a value but never used.","line":178,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":178,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'organization' is assigned a value but never used.","line":178,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":178,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'runAnalysis' is assigned a value but never used.","line":179,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'runAnalysis' is assigned a value but never used.","line":179,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":179,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'runSimulation'. Either include it or remove the dependency array.","line":389,"column":6,"nodeType":"ArrayExpression","endLine":389,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [weights, customRules, selectedDocument, runSimulation]","fix":{"range":[11182,11222],"text":"[weights, customRules, selectedDocument, runSimulation]"}}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Componente ValidationPreview\n * \n * Preview de valida√ß√£o para o sistema LicitaReview.\n * Permite visualizar como as configura√ß√µes atuais afetar√£o a an√°lise\n * de documentos, mostrando simula√ß√µes e exemplos de valida√ß√£o.\n */\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport {\n  Alert,\n  AlertDescription,\n  AlertTitle,\n} from '@/components/ui/alert';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Separator } from '@/components/ui/separator';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport {\n  Play,\n  RefreshCw,\n  CheckCircle,\n  AlertTriangle,\n  XCircle,\n  Info,\n  FileText,\n  BarChart3,\n  Settings,\n  Eye,\n  Download,\n  Upload,\n  Zap,\n  Target,\n  TrendingUp,\n  Clock\n} from 'lucide-react';\nimport { useAnalysisConfig, type AnalysisWeights, type AnalysisRule } from '@/hooks/useAnalysisConfig';\nimport { useAdaptiveAnalysis } from '@/hooks/useAdaptiveAnalysis';\nimport { useAuth } from '@/hooks/useAuth';\nimport { toast } from '@/hooks/use-toast';\n\ninterface ValidationPreviewProps {\n  weights: AnalysisWeights;\n  customRules: AnalysisRule[];\n  documentType: string;\n  className?: string;\n}\n\ninterface ValidationResult {\n  id: string;\n  category: string;\n  description: string;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  score: number;\n  weight: number;\n  finalScore: number;\n  suggestions: string[];\n  ruleId?: string;\n}\n\ninterface SimulationResult {\n  overallScore: number;\n  categoryScores: Record<string, number>;\n  validationResults: ValidationResult[];\n  appliedRules: number;\n  totalChecks: number;\n  processingTime: number;\n  recommendations: string[];\n}\n\nconst sampleDocuments = [\n  {\n    id: 'edital_sample',\n    name: 'Edital de Licita√ß√£o - Exemplo',\n    type: 'edital',\n    description: 'Edital para contrata√ß√£o de servi√ßos de TI',\n    content: `EDITAL DE LICITA√á√ÉO N¬∫ 001/2024\n    \nPROCESSO ADMINISTRATIVO: 2024.001.001\nMODALIDADE: Preg√£o Eletr√¥nico\nTIPO: Menor Pre√ßo\nOBJETO: Contrata√ß√£o de empresa especializada em desenvolvimento de software...\n    \n1. DO OBJETO\n1.1. O presente edital tem por objeto a contrata√ß√£o de empresa especializada...\n    \n2. DAS CONDI√á√ïES DE PARTICIPA√á√ÉO\n2.1. Poder√£o participar desta licita√ß√£o...\n    \n3. DO CREDENCIAMENTO\n3.1. Para participar do preg√£o eletr√¥nico...\n    \n4. DA PROPOSTA\n4.1. A proposta dever√° ser apresentada...`\n  },\n  {\n    id: 'tr_sample',\n    name: 'Termo de Refer√™ncia - Exemplo',\n    type: 'tr',\n    description: 'TR para desenvolvimento de sistema web',\n    content: `TERMO DE REFER√äNCIA\n    \n1. OBJETO\nContrata√ß√£o de empresa especializada no desenvolvimento de sistema web...\n    \n2. JUSTIFICATIVA\nA necessidade de moderniza√ß√£o dos processos...\n    \n3. ESPECIFICA√á√ïES T√âCNICAS\n3.1. O sistema dever√° ser desenvolvido em tecnologia web...\n3.2. Dever√° possuir interface responsiva...\n    \n4. METODOLOGIA\n4.1. A metodologia de desenvolvimento dever√° ser √°gil...\n    \n5. CRONOGRAMA\n5.1. O prazo total para execu√ß√£o ser√° de 12 meses...`\n  },\n  {\n    id: 'contrato_sample',\n    name: 'Contrato - Exemplo',\n    type: 'contrato',\n    description: 'Contrato de presta√ß√£o de servi√ßos',\n    content: `CONTRATO N¬∫ 001/2024\n    \nCONTRATANTE: √ìrg√£o P√∫blico\nCONTRATADA: Empresa XYZ Ltda.\n    \nCL√ÅUSULA PRIMEIRA - DO OBJETO\nO presente contrato tem por objeto...\n    \nCL√ÅUSULA SEGUNDA - DO VALOR\nO valor total do contrato √© de R$ 100.000,00...\n    \nCL√ÅUSULA TERCEIRA - DO PRAZO\nO prazo de vig√™ncia ser√° de 12 meses...\n    \nCL√ÅUSULA QUARTA - DAS OBRIGA√á√ïES\n4.1. S√£o obriga√ß√µes da CONTRATADA...\n4.2. S√£o obriga√ß√µes da CONTRATANTE...`\n  }\n];\n\nconst severityColors = {\n  low: 'bg-green-100 text-green-800 border-green-200',\n  medium: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  high: 'bg-orange-100 text-orange-800 border-orange-200',\n  critical: 'bg-red-100 text-red-800 border-red-200'\n};\n\nconst severityIcons = {\n  low: CheckCircle,\n  medium: Info,\n  high: AlertTriangle,\n  critical: XCircle\n};\n\nexport const ValidationPreview: React.FC<ValidationPreviewProps> = ({\n  weights,\n  customRules,\n  documentType,\n  className\n}) => {\n  const { organization } = useAuth();\n  const { runAnalysis } = useAdaptiveAnalysis();\n  \n  // Estados principais\n  const [selectedDocument, setSelectedDocument] = useState(sampleDocuments[0]);\n  const [simulationResult, setSimulationResult] = useState<SimulationResult | null>(null);\n  const [isRunning, setIsRunning] = useState(false);\n  const [activeTab, setActiveTab] = useState('overview');\n  \n  // Filtra documentos por tipo\n  const availableDocuments = useMemo(() => {\n    if (documentType === 'all') return sampleDocuments;\n    return sampleDocuments.filter(doc => doc.type === documentType);\n  }, [documentType]);\n  \n  // Executa simula√ß√£o\n  const runSimulation = async () => {\n    setIsRunning(true);\n    \n    try {\n      // Simula tempo de processamento\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      // Gera resultados simulados baseados na configura√ß√£o atual\n      const results = generateSimulationResults();\n      setSimulationResult(results);\n      \n      toast({\n        title: 'Simula√ß√£o conclu√≠da',\n        description: 'Preview de valida√ß√£o gerado com sucesso'\n      });\n    } catch (error) {\n      console.error('Erro na simula√ß√£o:', error);\n      toast({\n        title: 'Erro na simula√ß√£o',\n        description: 'N√£o foi poss√≠vel executar o preview de valida√ß√£o',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsRunning(false);\n    }\n  };\n  \n  // Gera resultados simulados\n  const generateSimulationResults = (): SimulationResult => {\n    const validationResults: ValidationResult[] = [];\n    \n    // Valida√ß√µes estruturais\n    validationResults.push({\n      id: 'struct_1',\n      category: 'structural',\n      description: 'Estrutura do documento est√° bem organizada',\n      severity: 'low',\n      score: 0.9,\n      weight: weights.structural,\n      finalScore: 0.9 * weights.structural,\n      suggestions: ['Manter a organiza√ß√£o atual']\n    });\n    \n    validationResults.push({\n      id: 'struct_2',\n      category: 'structural',\n      description: 'Falta numera√ß√£o sequencial em algumas se√ß√µes',\n      severity: 'medium',\n      score: 0.7,\n      weight: weights.structural,\n      finalScore: 0.7 * weights.structural,\n      suggestions: ['Adicionar numera√ß√£o sequencial', 'Revisar estrutura de se√ß√µes']\n    });\n    \n    // Valida√ß√µes jur√≠dicas\n    validationResults.push({\n      id: 'legal_1',\n      category: 'legal',\n      description: 'Conformidade com Lei 8.666/93 verificada',\n      severity: 'low',\n      score: 0.95,\n      weight: weights.legal,\n      finalScore: 0.95 * weights.legal,\n      suggestions: ['Documento em conformidade']\n    });\n    \n    validationResults.push({\n      id: 'legal_2',\n      category: 'legal',\n      description: 'Cl√°usula de penalidades pode ser mais espec√≠fica',\n      severity: 'medium',\n      score: 0.75,\n      weight: weights.legal,\n      finalScore: 0.75 * weights.legal,\n      suggestions: ['Detalhar tipos de penalidades', 'Especificar valores de multa']\n    });\n    \n    // Valida√ß√µes de clareza\n    validationResults.push({\n      id: 'clarity_1',\n      category: 'clarity',\n      description: 'Linguagem clara e objetiva',\n      severity: 'low',\n      score: 0.85,\n      weight: weights.clarity,\n      finalScore: 0.85 * weights.clarity,\n      suggestions: ['Manter clareza na reda√ß√£o']\n    });\n    \n    validationResults.push({\n      id: 'clarity_2',\n      category: 'clarity',\n      description: 'Alguns termos t√©cnicos sem defini√ß√£o',\n      severity: 'high',\n      score: 0.6,\n      weight: weights.clarity,\n      finalScore: 0.6 * weights.clarity,\n      suggestions: ['Adicionar gloss√°rio', 'Definir termos t√©cnicos']\n    });\n    \n    // Valida√ß√µes ABNT\n    validationResults.push({\n      id: 'abnt_1',\n      category: 'abnt',\n      description: 'Formata√ß√£o conforme normas ABNT',\n      severity: 'low',\n      score: 0.8,\n      weight: weights.abnt,\n      finalScore: 0.8 * weights.abnt,\n      suggestions: ['Verificar espa√ßamento entre par√°grafos']\n    });\n    \n    // Valida√ß√µes or√ßament√°rias\n    validationResults.push({\n      id: 'budget_1',\n      category: 'budgetary',\n      description: 'Estimativa or√ßament√°ria presente',\n      severity: 'low',\n      score: 0.9,\n      weight: weights.budgetary,\n      finalScore: 0.9 * weights.budgetary,\n      suggestions: ['Manter detalhamento atual']\n    });\n    \n    // Valida√ß√µes formais\n    validationResults.push({\n      id: 'formal_1',\n      category: 'formal',\n      description: 'Assinaturas e carimbos presentes',\n      severity: 'low',\n      score: 0.95,\n      weight: weights.formal,\n      finalScore: 0.95 * weights.formal,\n      suggestions: ['Documento formalmente correto']\n    });\n    \n    // Aplica regras personalizadas\n    customRules.forEach((rule, index) => {\n      if (rule.isActive) {\n        validationResults.push({\n          id: `custom_${index}`,\n          category: rule.category,\n          description: `Regra personalizada: ${rule.name}`,\n          severity: rule.severity,\n          score: Math.random() * 0.4 + 0.6, // Score entre 0.6 e 1.0\n          weight: 0.05, // Peso fixo para regras personalizadas\n          finalScore: (Math.random() * 0.4 + 0.6) * 0.05,\n          suggestions: [rule.suggestion || 'Verificar conformidade com a regra'],\n          ruleId: rule.id\n        });\n      }\n    });\n    \n    // Calcula scores por categoria\n    const categoryScores: Record<string, number> = {};\n    const categories = ['structural', 'legal', 'clarity', 'abnt', 'budgetary', 'formal'];\n    \n    categories.forEach(category => {\n      const categoryResults = validationResults.filter(r => r.category === category);\n      if (categoryResults.length > 0) {\n        const totalScore = categoryResults.reduce((sum, r) => sum + r.finalScore, 0);\n        const totalWeight = categoryResults.reduce((sum, r) => sum + r.weight, 0);\n        categoryScores[category] = totalWeight > 0 ? totalScore / totalWeight : 0;\n      } else {\n        categoryScores[category] = 0;\n      }\n    });\n    \n    // Calcula score geral\n    const overallScore = validationResults.reduce((sum, r) => sum + r.finalScore, 0);\n    \n    // Gera recomenda√ß√µes\n    const recommendations = [\n      'Revisar se√ß√µes com score abaixo de 0.7',\n      'Adicionar gloss√°rio para termos t√©cnicos',\n      'Verificar conformidade com normas ABNT',\n      'Detalhar cl√°usulas de penalidades'\n    ];\n    \n    return {\n      overallScore: Math.min(overallScore, 1.0),\n      categoryScores,\n      validationResults,\n      appliedRules: customRules.filter(r => r.isActive).length,\n      totalChecks: validationResults.length,\n      processingTime: Math.random() * 2000 + 1000, // Entre 1-3 segundos\n      recommendations\n    };\n  };\n  \n  // Executa simula√ß√£o automaticamente quando configura√ß√£o muda\n  useEffect(() => {\n    if (selectedDocument) {\n      runSimulation();\n    }\n  }, [weights, customRules, selectedDocument]);\n  \n  // Renderiza resultado de valida√ß√£o\n  const renderValidationResult = (result: ValidationResult) => {\n    const SeverityIcon = severityIcons[result.severity];\n    \n    return (\n      <Card key={result.id} className=\"mb-4\">\n        <CardContent className=\"pt-4\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-start space-x-3\">\n              <SeverityIcon className={`h-5 w-5 mt-0.5 ${\n                result.severity === 'low' ? 'text-green-600' :\n                result.severity === 'medium' ? 'text-yellow-600' :\n                result.severity === 'high' ? 'text-orange-600' :\n                'text-red-600'\n              }`} />\n              <div className=\"flex-1\">\n                <h4 className=\"font-medium text-gray-900\">{result.description}</h4>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  Categoria: {result.category} ‚Ä¢ Score: {(result.score * 100).toFixed(1)}%\n                </p>\n                {result.suggestions.length > 0 && (\n                  <div className=\"mt-2\">\n                    <p className=\"text-sm font-medium text-gray-700\">Sugest√µes:</p>\n                    <ul className=\"text-sm text-gray-600 list-disc list-inside\">\n                      {result.suggestions.map((suggestion, index) => (\n                        <li key={index}>{suggestion}</li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <Badge className={severityColors[result.severity]}>\n                {result.severity === 'low' && 'Baixo'}\n                {result.severity === 'medium' && 'M√©dio'}\n                {result.severity === 'high' && 'Alto'}\n                {result.severity === 'critical' && 'Cr√≠tico'}\n              </Badge>\n              <div className=\"text-right\">\n                <div className=\"text-sm font-medium\">\n                  {(result.finalScore * 100).toFixed(1)}%\n                </div>\n                <div className=\"text-xs text-gray-500\">\n                  Peso: {(result.weight * 100).toFixed(0)}%\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  };\n  \n  // Renderiza scores por categoria\n  const renderCategoryScores = () => {\n    if (!simulationResult) return null;\n    \n    const categories = [\n      { key: 'structural', label: 'Estrutural', icon: Settings },\n      { key: 'legal', label: 'Jur√≠dico', icon: FileText },\n      { key: 'clarity', label: 'Clareza', icon: Eye },\n      { key: 'abnt', label: 'ABNT', icon: Target },\n      { key: 'budgetary', label: 'Or√ßament√°rio', icon: BarChart3 },\n      { key: 'formal', label: 'Formal', icon: CheckCircle }\n    ];\n    \n    return (\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n        {categories.map(category => {\n          const score = simulationResult.categoryScores[category.key] || 0;\n          const Icon = category.icon;\n          \n          return (\n            <Card key={category.key}>\n              <CardContent className=\"pt-4\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Icon className=\"h-4 w-4 text-gray-600\" />\n                  <span className=\"text-sm font-medium\">{category.label}</span>\n                </div>\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-2xl font-bold\">\n                      {(score * 100).toFixed(1)}%\n                    </span>\n                    <Badge variant={score >= 0.8 ? 'default' : score >= 0.6 ? 'secondary' : 'destructive'}>\n                      {score >= 0.8 ? 'Bom' : score >= 0.6 ? 'Regular' : 'Ruim'}\n                    </Badge>\n                  </div>\n                  <Progress value={score * 100} className=\"h-2\" />\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n    );\n  };\n  \n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Preview de Valida√ß√£o</h2>\n          <p className=\"text-gray-600\">\n            Visualize como suas configura√ß√µes afetar√£o a an√°lise de documentos\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <Button variant=\"outline\" onClick={runSimulation} disabled={isRunning}>\n            {isRunning ? (\n              <RefreshCw className=\"mr-2 h-4 w-4 animate-spin\" />\n            ) : (\n              <Play className=\"mr-2 h-4 w-4\" />\n            )}\n            {isRunning ? 'Executando...' : 'Executar Simula√ß√£o'}\n          </Button>\n        </div>\n      </div>\n      \n      {/* Sele√ß√£o de documento */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <FileText className=\"h-5 w-5\" />\n            <span>Documento de Teste</span>\n          </CardTitle>\n          <CardDescription>\n            Selecione um documento de exemplo para testar suas configura√ß√µes\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {availableDocuments.map(doc => (\n              <Card \n                key={doc.id}\n                className={`cursor-pointer transition-all hover:shadow-md ${\n                  selectedDocument.id === doc.id ? 'ring-2 ring-blue-500 bg-blue-50' : ''\n                }`}\n                onClick={() => setSelectedDocument(doc)}\n              >\n                <CardContent className=\"pt-4\">\n                  <h4 className=\"font-medium\">{doc.name}</h4>\n                  <p className=\"text-sm text-gray-600 mt-1\">{doc.description}</p>\n                  <Badge variant=\"outline\" className=\"mt-2\">\n                    {doc.type.toUpperCase()}\n                  </Badge>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Resultados da simula√ß√£o */}\n      {simulationResult && (\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"overview\">Vis√£o Geral</TabsTrigger>\n            <TabsTrigger value=\"categories\">Por Categoria</TabsTrigger>\n            <TabsTrigger value=\"details\">Detalhes</TabsTrigger>\n            <TabsTrigger value=\"recommendations\">Recomenda√ß√µes</TabsTrigger>\n          </TabsList>\n          \n          {/* Tab: Vis√£o Geral */}\n          <TabsContent value=\"overview\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <TrendingUp className=\"h-4 w-4 text-blue-600\" />\n                    <span className=\"text-sm font-medium\">Score Geral</span>\n                  </div>\n                  <div className=\"text-3xl font-bold text-blue-600\">\n                    {(simulationResult.overallScore * 100).toFixed(1)}%\n                  </div>\n                  <Progress value={simulationResult.overallScore * 100} className=\"mt-2\" />\n                </CardContent>\n              </Card>\n              \n              <Card>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Zap className=\"h-4 w-4 text-green-600\" />\n                    <span className=\"text-sm font-medium\">Regras Aplicadas</span>\n                  </div>\n                  <div className=\"text-3xl font-bold text-green-600\">\n                    {simulationResult.appliedRules}\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1\">regras personalizadas</p>\n                </CardContent>\n              </Card>\n              \n              <Card>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <CheckCircle className=\"h-4 w-4 text-purple-600\" />\n                    <span className=\"text-sm font-medium\">Total de Verifica√ß√µes</span>\n                  </div>\n                  <div className=\"text-3xl font-bold text-purple-600\">\n                    {simulationResult.totalChecks}\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1\">verifica√ß√µes realizadas</p>\n                </CardContent>\n              </Card>\n              \n              <Card>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Clock className=\"h-4 w-4 text-orange-600\" />\n                    <span className=\"text-sm font-medium\">Tempo de Processamento</span>\n                  </div>\n                  <div className=\"text-3xl font-bold text-orange-600\">\n                    {(simulationResult.processingTime / 1000).toFixed(1)}s\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1\">tempo estimado</p>\n                </CardContent>\n              </Card>\n            </div>\n            \n            {renderCategoryScores()}\n          </TabsContent>\n          \n          {/* Tab: Por Categoria */}\n          <TabsContent value=\"categories\" className=\"space-y-6\">\n            {renderCategoryScores()}\n            \n            <div className=\"space-y-4\">\n              {Object.entries(simulationResult.categoryScores).map(([category, score]) => {\n                const categoryResults = simulationResult.validationResults.filter(\n                  r => r.category === category\n                );\n                \n                if (categoryResults.length === 0) return null;\n                \n                return (\n                  <Card key={category}>\n                    <CardHeader>\n                      <CardTitle className=\"capitalize\">\n                        {category === 'structural' && 'Estrutural'}\n                        {category === 'legal' && 'Jur√≠dico'}\n                        {category === 'clarity' && 'Clareza'}\n                        {category === 'abnt' && 'ABNT'}\n                        {category === 'budgetary' && 'Or√ßament√°rio'}\n                        {category === 'formal' && 'Formal'}\n                      </CardTitle>\n                      <CardDescription>\n                        Score: {(score * 100).toFixed(1)}% ‚Ä¢ {categoryResults.length} verifica√ß√µes\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        {categoryResults.map(renderValidationResult)}\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n              })}\n            </div>\n          </TabsContent>\n          \n          {/* Tab: Detalhes */}\n          <TabsContent value=\"details\" className=\"space-y-4\">\n            <ScrollArea className=\"h-96\">\n              {simulationResult.validationResults.map(renderValidationResult)}\n            </ScrollArea>\n          </TabsContent>\n          \n          {/* Tab: Recomenda√ß√µes */}\n          <TabsContent value=\"recommendations\" className=\"space-y-4\">\n            <Alert>\n              <Info className=\"h-4 w-4\" />\n              <AlertTitle>Recomenda√ß√µes de Melhoria</AlertTitle>\n              <AlertDescription>\n                Com base na an√°lise atual, sugerimos as seguintes melhorias:\n              </AlertDescription>\n            </Alert>\n            \n            <div className=\"space-y-3\">\n              {simulationResult.recommendations.map((recommendation, index) => (\n                <Card key={index}>\n                  <CardContent className=\"pt-4\">\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium\">\n                        {index + 1}\n                      </div>\n                      <p className=\"text-gray-700\">{recommendation}</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n            \n            <Card>\n              <CardHeader>\n                <CardTitle>Pr√≥ximos Passos</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm text-gray-600\">\n                    ‚Ä¢ Ajuste os pesos dos par√¢metros conforme necess√°rio\n                  </p>\n                  <p className=\"text-sm text-gray-600\">\n                    ‚Ä¢ Adicione regras personalizadas para casos espec√≠ficos\n                  </p>\n                  <p className=\"text-sm text-gray-600\">\n                    ‚Ä¢ Teste com documentos reais da sua organiza√ß√£o\n                  </p>\n                  <p className=\"text-sm text-gray-600\">\n                    ‚Ä¢ Monitore os resultados e ajuste conforme feedback\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      )}\n      \n      {/* Loading state */}\n      {isRunning && (\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center space-y-4\">\n              <RefreshCw className=\"h-8 w-8 animate-spin mx-auto text-blue-600\" />\n              <div>\n                <h3 className=\"font-medium\">Executando simula√ß√£o...</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Analisando documento com as configura√ß√µes atuais\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default ValidationPreview;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/configuration/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/CTASection.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onLearnMore' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onLearnMore' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo } from 'react';\nimport { useReducedMotion } from './hooks/useAnimations';\nimport { FeatureList } from './components/FeatureList';\nimport { StatsSection } from './components/StatsSection';\nimport { CTAButtons } from './components/CTAButtons';\nimport { GlassMockup } from './components/GlassMockup';\nimport { FEATURES, STATS, FONTS, GRADIENTS } from './constants';\nimport type { CTASectionProps, CTAButton } from './types';\n\nexport function CTASection({ \n  onStartAnalysis, \n  onViewDemo, \n  onLearnMore, \n  className = '' \n}: CTASectionProps) {\n  const reducedMotion = useReducedMotion();\n\n  // Memoize buttons configuration to prevent unnecessary re-renders\n  const buttons: CTAButton[] = useMemo(() => [\n    {\n      text: 'Come√ßar agora',\n      variant: 'primary' as const,\n      onClick: () => {\n        if (onStartAnalysis) {\n          onStartAnalysis();\n        } else {\n          window.location.href = '/documentos';\n        }\n      }\n    },\n    {\n      text: 'Ver demonstra√ß√£o',\n      variant: 'secondary' as const,\n      onClick: () => {\n        if (onViewDemo) {\n          onViewDemo();\n        } else {\n          console.log('View demonstration requested');\n        }\n      }\n    }\n  ], [onStartAnalysis, onViewDemo]);\n\n  return (\n    <section \n      className={`relative min-h-[600px] w-full overflow-hidden ${!reducedMotion ? 'animate-fadeIn' : ''} ${className}`}\n      aria-labelledby=\"cta-heading\"\n      aria-describedby=\"cta-description\"\n    >\n      {/* Background with GOV.BR gradient */}\n      <div className={`absolute inset-0 ${GRADIENTS.GOVBR_BACKGROUND}`}>\n        {/* Glassmorphism overlay */}\n        <div className=\"absolute inset-0 bg-white/5 backdrop-blur-sm\"></div>\n        \n        {/* Animated background elements */}\n        {!reducedMotion && (\n          <>\n            <div className=\"absolute top-1/4 left-1/4 w-64 h-64 bg-white/5 rounded-full blur-3xl animate-pulse\"></div>\n            <div \n              className=\"absolute bottom-1/4 right-1/4 w-48 h-48 bg-blue-300/10 rounded-full blur-2xl animate-pulse\" \n              style={{ animationDelay: '1s' }}\n            ></div>\n          </>\n        )}\n      </div>\n\n      {/* Main content */}\n      <div className=\"relative z-10 container mx-auto px-4 py-16 max-w-7xl\">\n        <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n          \n          {/* Left column - Content */}\n          <div className=\"space-y-8\">\n            {/* Headlines */}\n            <div className=\"space-y-4\">\n              <h1 \n                id=\"cta-heading\"\n                className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight\"\n                style={{ fontFamily: FONTS.RAWLINE }}\n              >\n                Transforme suas \n                <span className=\"bg-gradient-to-r from-yellow-300 to-orange-400 bg-clip-text text-transparent block\">\n                  licita√ß√µes\n                </span>\n                em processos seguros\n              </h1>\n              \n              <p \n                id=\"cta-description\"\n                className=\"text-xl text-blue-100 max-w-lg leading-relaxed\"\n                style={{ fontFamily: FONTS.RAWLINE }}\n              >\n                Sistema completo de an√°lise e revis√£o de editais que garante conformidade legal e reduz riscos em seus processos licitat√≥rios.\n              </p>\n            </div>\n\n            {/* Features */}\n            <FeatureList features={FEATURES} />\n\n            {/* Statistics */}\n            <StatsSection stats={STATS} />\n\n            {/* CTA Buttons */}\n            <CTAButtons buttons={buttons} />\n          </div>\n\n          {/* Right column - Visual mockup */}\n          <div className=\"relative lg:pl-8\">\n            <div className={`${!reducedMotion ? 'animate-bounce' : ''}`}>\n              <GlassMockup />\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/components/AnimatedCounter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/components/CTAButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/components/FeatureList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/components/GlassMockup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/components/StatsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/hooks/useAnimations.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'IntersectionObserverInit' is not defined.","line":21,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\n\nexport const useReducedMotion = () => {\n  const [reducedMotion, setReducedMotion] = useState(false);\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n    setReducedMotion(mediaQuery.matches);\n    \n    const handleChange = (e: MediaQueryListEvent) => setReducedMotion(e.matches);\n    mediaQuery.addEventListener('change', handleChange);\n    \n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, []);\n\n  return reducedMotion;\n};\n\nexport const useIntersectionObserver = (\n  callback: () => void,\n  options?: IntersectionObserverInit\n) => {\n  const [ref, setRef] = useState<HTMLElement | null>(null);\n  const [hasTriggered, setHasTriggered] = useState(false);\n\n  useEffect(() => {\n    if (!ref || hasTriggered) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setHasTriggered(true);\n          callback();\n        }\n      },\n      { threshold: 0.3, ...options }\n    );\n\n    observer.observe(ref);\n    return () => observer.disconnect();\n  }, [ref, callback, hasTriggered, options]);\n\n  return setRef;\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/hooks/useCounterAnimation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/cta/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/dashboard/DocumentDashboard.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Tabs' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Tabs' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsContent' is defined but never used.","line":6,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsContent' is defined but never used.","line":6,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsList' is defined but never used.","line":6,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsList' is defined but never used.","line":6,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":37},{"ruleId":"no-unused-vars","severity":2,"message":"'TabsTrigger' is defined but never used.","line":6,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsTrigger' is defined but never used.","line":6,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":50},{"ruleId":"no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'BarChart3' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarChart3' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'Filter' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'DocumentAnalysis' is defined but never used.","line":22,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentAnalysis' is defined but never used.","line":22,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'document' is defined but never used.","line":32,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":47},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":87,"column":6,"nodeType":"ArrayExpression","endLine":87,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [loadData, prefeituraId]","fix":{"range":[2502,2516],"text":"[loadData, prefeituraId]"}}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  FileText,\n  Upload,\n  CheckCircle,\n  AlertTriangle,\n  Clock,\n  TrendingUp,\n  BarChart3,\n  Eye,\n  Download,\n  RefreshCw,\n  Filter,\n  Search\n} from 'lucide-react';\nimport { DocumentService } from '@/services/documentService';\nimport { DocumentUpload, DocumentAnalysis } from '@/types/document';\nimport { useToast } from '@/components/ui/use-toast';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\ninterface DocumentDashboardProps {\n  prefeituraId: string;\n  onUploadClick?: () => void;\n  onDocumentSelect?: (document: DocumentUpload) => void;\n}\n\ninterface DocumentStats {\n  total: number;\n  pendentes: number;\n  processando: number;\n  concluidos: number;\n  erros: number;\n}\n\nexport const DocumentDashboard: React.FC<DocumentDashboardProps> = ({\n  prefeituraId,\n  onUploadClick,\n  onDocumentSelect\n}) => {\n  const [documents, setDocuments] = useState<DocumentUpload[]>([]);\n  const [stats, setStats] = useState<DocumentStats>({\n    total: 0,\n    pendentes: 0,\n    processando: 0,\n    concluidos: 0,\n    erros: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [typeFilter, setTypeFilter] = useState<string>('all');\n  const { toast } = useToast();\n\n  // Carregar documentos e estat√≠sticas\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      const [documentsData, statsData] = await Promise.all([\n        DocumentService.getDocumentosByPrefeitura(prefeituraId),\n        DocumentService.getDocumentStats(prefeituraId)\n      ]);\n      \n      setDocuments(documentsData);\n      setStats(statsData);\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n      toast({\n        title: 'Erro',\n        description: 'Falha ao carregar documentos',\n        variant: 'destructive'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadData();\n  }, [prefeituraId]);\n\n  // Filtrar documentos\n  const filteredDocuments = documents.filter(doc => {\n    const matchesSearch = doc.nome.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         doc.descricao?.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || doc.status === statusFilter;\n    const matchesType = typeFilter === 'all' || doc.tipo === typeFilter;\n    \n    return matchesSearch && matchesStatus && matchesType;\n  });\n\n  // Obter cor do status\n  const getStatusColor = (status: DocumentUpload['status']) => {\n    switch (status) {\n      case 'pendente':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'processando':\n        return 'bg-blue-100 text-blue-800';\n      case 'concluido':\n        return 'bg-green-100 text-green-800';\n      case 'erro':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Obter √≠cone do status\n  const getStatusIcon = (status: DocumentUpload['status']) => {\n    switch (status) {\n      case 'pendente':\n        return Clock;\n      case 'processando':\n        return RefreshCw;\n      case 'concluido':\n        return CheckCircle;\n      case 'erro':\n        return AlertTriangle;\n      default:\n        return FileText;\n    }\n  };\n\n  // Calcular porcentagem de conclus√£o\n  const completionRate = stats.total > 0 ? (stats.concluidos / stats.total) * 100 : 0;\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {[...Array(4)].map((_, i) => (\n            <Card key={i}>\n              <CardContent className=\"p-6\">\n                <div className=\"animate-pulse\">\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                  <div className=\"h-8 bg-gray-200 rounded w-1/2\"></div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Dashboard de Documentos</h1>\n          <p className=\"text-gray-600\">Gerencie e monitore seus documentos</p>\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <Button variant=\"outline\" onClick={loadData}>\n            <RefreshCw className=\"w-4 h-4 mr-2\" />\n            Atualizar\n          </Button>\n          {onUploadClick && (\n            <Button onClick={onUploadClick}>\n              <Upload className=\"w-4 h-4 mr-2\" />\n              Novo Upload\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Estat√≠sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Total</p>\n                <p className=\"text-2xl font-bold\">{stats.total}</p>\n              </div>\n              <FileText className=\"w-8 h-8 text-blue-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Conclu√≠dos</p>\n                <p className=\"text-2xl font-bold text-green-600\">{stats.concluidos}</p>\n              </div>\n              <CheckCircle className=\"w-8 h-8 text-green-600\" />\n            </div>\n            <div className=\"mt-2\">\n              <Progress value={completionRate} className=\"h-2\" />\n              <p className=\"text-xs text-gray-500 mt-1\">{completionRate.toFixed(1)}% conclu√≠do</p>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Processando</p>\n                <p className=\"text-2xl font-bold text-blue-600\">{stats.processando}</p>\n              </div>\n              <RefreshCw className=\"w-8 h-8 text-blue-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Erros</p>\n                <p className=\"text-2xl font-bold text-red-600\">{stats.erros}</p>\n              </div>\n              <AlertTriangle className=\"w-8 h-8 text-red-600\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filtros */}\n      <Card>\n        <CardContent className=\"p-4\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <Input\n                  placeholder=\"Buscar documentos...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            \n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-[180px]\">\n                <SelectValue placeholder=\"Status\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todos os Status</SelectItem>\n                <SelectItem value=\"pendente\">Pendente</SelectItem>\n                <SelectItem value=\"processando\">Processando</SelectItem>\n                <SelectItem value=\"concluido\">Conclu√≠do</SelectItem>\n                <SelectItem value=\"erro\">Erro</SelectItem>\n              </SelectContent>\n            </Select>\n            \n            <Select value={typeFilter} onValueChange={setTypeFilter}>\n              <SelectTrigger className=\"w-[180px]\">\n                <SelectValue placeholder=\"Tipo\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todos os Tipos</SelectItem>\n                <SelectItem value=\"PDF\">PDF</SelectItem>\n                <SelectItem value=\"DOCX\">DOCX</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Lista de Documentos */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <span>Documentos ({filteredDocuments.length})</span>\n            <Badge variant=\"outline\">\n              {filteredDocuments.length} de {documents.length}\n            </Badge>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {filteredDocuments.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                {documents.length === 0 ? 'Nenhum documento encontrado' : 'Nenhum documento corresponde aos filtros'}\n              </h3>\n              <p className=\"text-gray-600 mb-4\">\n                {documents.length === 0 \n                  ? 'Fa√ßa o upload do primeiro documento para come√ßar'\n                  : 'Tente ajustar os filtros de busca'\n                }\n              </p>\n              {documents.length === 0 && onUploadClick && (\n                <Button onClick={onUploadClick}>\n                  <Upload className=\"w-4 h-4 mr-2\" />\n                  Fazer Upload\n                </Button>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {filteredDocuments.map((document) => {\n                const StatusIcon = getStatusIcon(document.status);\n                \n                return (\n                  <div\n                    key={document.id}\n                    className=\"flex items-center space-x-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer\"\n                    onClick={() => onDocumentSelect?.(document)}\n                  >\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\n                        <FileText className=\"w-5 h-5 text-blue-600\" />\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center space-x-2 mb-1\">\n                        <h3 className=\"font-medium truncate\">{document.nome}</h3>\n                        <Badge variant=\"outline\">{document.tipo}</Badge>\n                        <Badge className={getStatusColor(document.status)}>\n                          <StatusIcon className=\"w-3 h-3 mr-1\" />\n                          {document.status}\n                        </Badge>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                        <span>{(document.tamanho / 1024 / 1024).toFixed(2)} MB</span>\n                        <span>‚Ä¢</span>\n                        <span>{format(document.createdAt, 'dd/MM/yyyy HH:mm', { locale: ptBR })}</span>\n                        {document.descricao && (\n                          <>\n                            <span>‚Ä¢</span>\n                            <span className=\"truncate max-w-xs\">{document.descricao}</span>\n                          </>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          window.open(document.urlStorage, '_blank');\n                        }}\n                        title=\"Visualizar\"\n                      >\n                        <Eye className=\"w-4 h-4\" />\n                      </Button>\n                      \n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          const link = window.document.createElement('a');\n                          link.href = document.urlStorage;\n                          link.download = document.nome;\n                          link.click();\n                        }}\n                        title=\"Download\"\n                      >\n                        <Download className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default DocumentDashboard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/dashboard/DocumentsTable.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'document' is defined but never used.","line":48,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'document' is defined but never used.","line":49,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":39},{"ruleId":"no-unused-vars","severity":2,"message":"'document' is defined but never used.","line":50,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":43}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  FileText,\n  Eye,\n  Download,\n  MoreHorizontal,\n  Search,\n  Filter,\n  CheckCircle,\n  Clock,\n  AlertTriangle,\n  RefreshCw\n} from 'lucide-react';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\ninterface Document {\n  id: string;\n  name: string;\n  type: string;\n  status: 'completed' | 'processing' | 'failed';\n  score: number;\n  createdAt: Date;\n  processingTime: number;\n}\n\ninterface DocumentsTableProps {\n  documents: Document[];\n  showAll?: boolean;\n  onDocumentClick?: (document: Document) => void;\n  onViewDocument?: (document: Document) => void;\n  onDownloadDocument?: (document: Document) => void;\n}\n\nconst getStatusConfig = (status: Document['status']) => {\n  switch (status) {\n    case 'completed':\n      return {\n        label: 'Conclu√≠do',\n        color: 'bg-green-100 text-green-800',\n        icon: CheckCircle\n      };\n    case 'processing':\n      return {\n        label: 'Processando',\n        color: 'bg-blue-100 text-blue-800',\n        icon: RefreshCw\n      };\n    case 'failed':\n      return {\n        label: 'Falhou',\n        color: 'bg-red-100 text-red-800',\n        icon: AlertTriangle\n      };\n    default:\n      return {\n        label: 'Desconhecido',\n        color: 'bg-gray-100 text-gray-800',\n        icon: Clock\n      };\n  }\n};\n\nconst getScoreColor = (score: number) => {\n  if (score >= 90) return 'text-green-600 bg-green-50';\n  if (score >= 80) return 'text-blue-600 bg-blue-50';\n  if (score >= 70) return 'text-yellow-600 bg-yellow-50';\n  if (score >= 60) return 'text-orange-600 bg-orange-50';\n  return 'text-red-600 bg-red-50';\n};\n\nconst getTypeIcon = (type: string) => {\n  switch (type.toLowerCase()) {\n    case 'pdf':\n      return 'üìÑ';\n    case 'docx':\n    case 'doc':\n      return 'üìù';\n    case 'xlsx':\n    case 'xls':\n      return 'üìä';\n    default:\n      return 'üìÑ';\n  }\n};\n\nexport const DocumentsTable: React.FC<DocumentsTableProps> = ({\n  documents,\n  showAll = false,\n  onDocumentClick,\n  onViewDocument,\n  onDownloadDocument\n}) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<'name' | 'createdAt' | 'score'>('createdAt');\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\n\n  // Filtrar e ordenar documentos\n  const filteredAndSortedDocuments = documents\n    .filter(doc => {\n      const matchesSearch = doc.name.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesStatus = statusFilter === 'all' || doc.status === statusFilter;\n      return matchesSearch && matchesStatus;\n    })\n    .sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortBy) {\n        case 'name':\n          comparison = a.name.localeCompare(b.name);\n          break;\n        case 'createdAt':\n          comparison = new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n          break;\n        case 'score':\n          comparison = a.score - b.score;\n          break;\n      }\n      \n      return sortOrder === 'asc' ? comparison : -comparison;\n    })\n    .slice(0, showAll ? undefined : 10);\n\n  const handleSort = (field: 'name' | 'createdAt' | 'score') => {\n    if (sortBy === field) {\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortBy(field);\n      setSortOrder('desc');\n    }\n  };\n\n  const handleViewDocument = (document: Document) => {\n    if (onViewDocument) {\n      onViewDocument(document);\n    } else {\n      // Implementa√ß√£o padr√£o\n      console.log('Visualizar documento:', document.id);\n    }\n  };\n\n  const handleDownloadDocument = (document: Document) => {\n    if (onDownloadDocument) {\n      onDownloadDocument(document);\n    } else {\n      // Implementa√ß√£o padr√£o\n      console.log('Download documento:', document.id);\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle className=\"flex items-center space-x-2\">\n              <FileText className=\"w-5 h-5\" />\n              <span>Documentos Recentes</span>\n              <Badge variant=\"outline\">\n                {filteredAndSortedDocuments.length}\n                {!showAll && documents.length > 10 && ` de ${documents.length}`}\n              </Badge>\n            </CardTitle>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {showAll ? 'Todos os documentos' : '√öltimos documentos processados'}\n            </p>\n          </div>\n          \n          {!showAll && documents.length > 10 && (\n            <Button variant=\"outline\" size=\"sm\">\n              Ver Todos ({documents.length})\n            </Button>\n          )}\n        </div>\n        \n        {/* Filtros */}\n        {showAll && (\n          <div className=\"flex flex-col sm:flex-row gap-4 mt-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <Input\n                  placeholder=\"Buscar documentos...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            \n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\">\n                  <Filter className=\"w-4 h-4 mr-2\" />\n                  Status: {statusFilter === 'all' ? 'Todos' : statusFilter}\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent>\n                <DropdownMenuItem onClick={() => setStatusFilter('all')}>\n                  Todos\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => setStatusFilter('completed')}>\n                  Conclu√≠do\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => setStatusFilter('processing')}>\n                  Processando\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => setStatusFilter('failed')}>\n                  Falhou\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        )}\n      </CardHeader>\n      \n      <CardContent>\n        {filteredAndSortedDocuments.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              {documents.length === 0 ? 'Nenhum documento encontrado' : 'Nenhum documento corresponde aos filtros'}\n            </h3>\n            <p className=\"text-gray-600\">\n              {documents.length === 0 \n                ? 'Fa√ßa o upload do primeiro documento para come√ßar'\n                : 'Tente ajustar os filtros de busca'\n              }\n            </p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead \n                    className=\"cursor-pointer hover:bg-gray-50\"\n                    onClick={() => handleSort('name')}\n                  >\n                    <div className=\"flex items-center space-x-1\">\n                      <span>Documento</span>\n                      {sortBy === 'name' && (\n                        <span className=\"text-xs\">\n                          {sortOrder === 'asc' ? '‚Üë' : '‚Üì'}\n                        </span>\n                      )}\n                    </div>\n                  </TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead \n                    className=\"cursor-pointer hover:bg-gray-50\"\n                    onClick={() => handleSort('score')}\n                  >\n                    <div className=\"flex items-center space-x-1\">\n                      <span>Score</span>\n                      {sortBy === 'score' && (\n                        <span className=\"text-xs\">\n                          {sortOrder === 'asc' ? '‚Üë' : '‚Üì'}\n                        </span>\n                      )}\n                    </div>\n                  </TableHead>\n                  <TableHead>Tempo</TableHead>\n                  <TableHead \n                    className=\"cursor-pointer hover:bg-gray-50\"\n                    onClick={() => handleSort('createdAt')}\n                  >\n                    <div className=\"flex items-center space-x-1\">\n                      <span>Data</span>\n                      {sortBy === 'createdAt' && (\n                        <span className=\"text-xs\">\n                          {sortOrder === 'asc' ? '‚Üë' : '‚Üì'}\n                        </span>\n                      )}\n                    </div>\n                  </TableHead>\n                  <TableHead className=\"w-[100px]\">A√ß√µes</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredAndSortedDocuments.map((document) => {\n                  const statusConfig = getStatusConfig(document.status);\n                  const StatusIcon = statusConfig.icon;\n                  \n                  return (\n                    <TableRow \n                      key={document.id}\n                      className=\"hover:bg-gray-50 cursor-pointer\"\n                      onClick={() => onDocumentClick?.(document)}\n                    >\n                      <TableCell>\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"text-2xl\">\n                            {getTypeIcon(document.type)}\n                          </div>\n                          <div className=\"min-w-0 flex-1\">\n                            <p className=\"font-medium text-gray-900 truncate\">\n                              {document.name}\n                            </p>\n                            <p className=\"text-sm text-gray-500\">\n                              {document.type.toUpperCase()}\n                            </p>\n                          </div>\n                        </div>\n                      </TableCell>\n                      \n                      <TableCell>\n                        <Badge className={statusConfig.color}>\n                          <StatusIcon className=\"w-3 h-3 mr-1\" />\n                          {statusConfig.label}\n                        </Badge>\n                      </TableCell>\n                      \n                      <TableCell>\n                        {document.status === 'completed' ? (\n                          <div className={`inline-flex items-center px-2 py-1 rounded-full text-sm font-medium ${getScoreColor(document.score)}`}>\n                            {document.score.toFixed(1)}%\n                          </div>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </TableCell>\n                      \n                      <TableCell>\n                        {document.status === 'completed' ? (\n                          <span className=\"text-sm text-gray-600\">\n                            {document.processingTime.toFixed(1)}s\n                          </span>\n                        ) : document.status === 'processing' ? (\n                          <div className=\"flex items-center space-x-1 text-blue-600\">\n                            <RefreshCw className=\"w-3 h-3 animate-spin\" />\n                            <span className=\"text-sm\">Processando...</span>\n                          </div>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </TableCell>\n                      \n                      <TableCell>\n                        <span className=\"text-sm text-gray-600\">\n                          {format(document.createdAt, 'dd/MM HH:mm', { locale: ptBR })}\n                        </span>\n                      </TableCell>\n                      \n                      <TableCell>\n                        <DropdownMenu>\n                          <DropdownMenuTrigger asChild>\n                            <Button \n                              variant=\"ghost\" \n                              size=\"sm\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              <MoreHorizontal className=\"w-4 h-4\" />\n                            </Button>\n                          </DropdownMenuTrigger>\n                          <DropdownMenuContent align=\"end\">\n                            <DropdownMenuItem \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleViewDocument(document);\n                              }}\n                            >\n                              <Eye className=\"w-4 h-4 mr-2\" />\n                              Visualizar\n                            </DropdownMenuItem>\n                            <DropdownMenuItem \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleDownloadDocument(document);\n                              }}\n                            >\n                              <Download className=\"w-4 h-4 mr-2\" />\n                              Download\n                            </DropdownMenuItem>\n                          </DropdownMenuContent>\n                        </DropdownMenu>\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default DocumentsTable;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/dashboard/IssuesBreakdown.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  AlertTriangle,\n  AlertCircle,\n  Info,\n  CheckCircle,\n  TrendingUp,\n  TrendingDown,\n  Minus\n} from 'lucide-react';\n\ninterface Issue {\n  id: string;\n  type: 'critical' | 'warning' | 'info';\n  category: string;\n  title: string;\n  description: string;\n  count: number;\n  percentage: number;\n  trend: 'up' | 'down' | 'stable';\n  trendValue: number;\n}\n\ninterface IssuesBreakdownProps {\n  issues: Issue[];\n  totalDocuments: number;\n  className?: string;\n}\n\nconst getIssueConfig = (type: Issue['type']) => {\n  switch (type) {\n    case 'critical':\n      return {\n        icon: AlertTriangle,\n        color: 'text-red-600',\n        bgColor: 'bg-red-50',\n        borderColor: 'border-red-200',\n        badgeColor: 'bg-red-100 text-red-800'\n      };\n    case 'warning':\n      return {\n        icon: AlertCircle,\n        color: 'text-yellow-600',\n        bgColor: 'bg-yellow-50',\n        borderColor: 'border-yellow-200',\n        badgeColor: 'bg-yellow-100 text-yellow-800'\n      };\n    case 'info':\n      return {\n        icon: Info,\n        color: 'text-blue-600',\n        bgColor: 'bg-blue-50',\n        borderColor: 'border-blue-200',\n        badgeColor: 'bg-blue-100 text-blue-800'\n      };\n    default:\n      return {\n        icon: Info,\n        color: 'text-gray-600',\n        bgColor: 'bg-gray-50',\n        borderColor: 'border-gray-200',\n        badgeColor: 'bg-gray-100 text-gray-800'\n      };\n  }\n};\n\nconst getTrendConfig = (trend: Issue['trend'], value: number) => {\n  switch (trend) {\n    case 'up':\n      return {\n        icon: TrendingUp,\n        color: 'text-red-600',\n        text: `+${value}%`\n      };\n    case 'down':\n      return {\n        icon: TrendingDown,\n        color: 'text-green-600',\n        text: `-${Math.abs(value)}%`\n      };\n    case 'stable':\n      return {\n        icon: Minus,\n        color: 'text-gray-600',\n        text: '0%'\n      };\n    default:\n      return {\n        icon: Minus,\n        color: 'text-gray-600',\n        text: '0%'\n      };\n  }\n};\n\nconst getCategoryColor = (category: string) => {\n  const colors = {\n    'Conformidade': 'bg-purple-100 text-purple-800',\n    'Documenta√ß√£o': 'bg-blue-100 text-blue-800',\n    'Prazos': 'bg-orange-100 text-orange-800',\n    'Valores': 'bg-green-100 text-green-800',\n    'T√©cnico': 'bg-indigo-100 text-indigo-800',\n    'Legal': 'bg-red-100 text-red-800',\n    'Qualidade': 'bg-yellow-100 text-yellow-800'\n  };\n  \n  return colors[category as keyof typeof colors] || 'bg-gray-100 text-gray-800';\n};\n\nexport const IssuesBreakdown: React.FC<IssuesBreakdownProps> = ({\n  issues,\n  totalDocuments,\n  className = ''\n}) => {\n  // Calcular estat√≠sticas gerais\n  const totalIssues = issues.reduce((sum, issue) => sum + issue.count, 0);\n  const criticalIssues = issues.filter(issue => issue.type === 'critical');\n  const warningIssues = issues.filter(issue => issue.type === 'warning');\n  const infoIssues = issues.filter(issue => issue.type === 'info');\n  \n  const criticalCount = criticalIssues.reduce((sum, issue) => sum + issue.count, 0);\n  const warningCount = warningIssues.reduce((sum, issue) => sum + issue.count, 0);\n  const infoCount = infoIssues.reduce((sum, issue) => sum + issue.count, 0);\n  \n  // Agrupar por categoria\n  const issuesByCategory = issues.reduce((acc, issue) => {\n    if (!acc[issue.category]) {\n      acc[issue.category] = [];\n    }\n    acc[issue.category].push(issue);\n    return acc;\n  }, {} as Record<string, Issue[]>);\n  \n  // Ordenar issues por severidade e contagem\n  const sortedIssues = [...issues].sort((a, b) => {\n    const severityOrder = { critical: 3, warning: 2, info: 1 };\n    const severityDiff = severityOrder[b.type] - severityOrder[a.type];\n    if (severityDiff !== 0) return severityDiff;\n    return b.count - a.count;\n  });\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center space-x-2\">\n          <AlertTriangle className=\"w-5 h-5 text-orange-600\" />\n          <span>An√°lise de Problemas</span>\n          <Badge variant=\"outline\">\n            {totalIssues} problemas encontrados\n          </Badge>\n        </CardTitle>\n        <p className=\"text-sm text-gray-600\">\n          Distribui√ß√£o e tend√™ncias dos problemas identificados\n        </p>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-6\">\n        {/* Resumo por Severidade */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-2\">\n                <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n                <span className=\"font-medium text-red-900\">Cr√≠ticos</span>\n              </div>\n              <span className=\"text-2xl font-bold text-red-600\">{criticalCount}</span>\n            </div>\n            <div className=\"mt-2\">\n              <Progress \n                value={(criticalCount / totalIssues) * 100} \n                className=\"h-2\"\n              />\n              <p className=\"text-xs text-red-700 mt-1\">\n                {((criticalCount / totalIssues) * 100).toFixed(1)}% do total\n              </p>\n            </div>\n          </div>\n          \n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-2\">\n                <AlertCircle className=\"w-5 h-5 text-yellow-600\" />\n                <span className=\"font-medium text-yellow-900\">Avisos</span>\n              </div>\n              <span className=\"text-2xl font-bold text-yellow-600\">{warningCount}</span>\n            </div>\n            <div className=\"mt-2\">\n              <Progress \n                value={(warningCount / totalIssues) * 100} \n                className=\"h-2\"\n              />\n              <p className=\"text-xs text-yellow-700 mt-1\">\n                {((warningCount / totalIssues) * 100).toFixed(1)}% do total\n              </p>\n            </div>\n          </div>\n          \n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-2\">\n                <Info className=\"w-5 h-5 text-blue-600\" />\n                <span className=\"font-medium text-blue-900\">Informativos</span>\n              </div>\n              <span className=\"text-2xl font-bold text-blue-600\">{infoCount}</span>\n            </div>\n            <div className=\"mt-2\">\n              <Progress \n                value={(infoCount / totalIssues) * 100} \n                className=\"h-2\"\n              />\n              <p className=\"text-xs text-blue-700 mt-1\">\n                {((infoCount / totalIssues) * 100).toFixed(1)}% do total\n              </p>\n            </div>\n          </div>\n        </div>\n        \n        {/* Lista Detalhada de Problemas */}\n        <div className=\"space-y-4\">\n          <h4 className=\"font-medium text-gray-900\">Problemas Mais Frequentes</h4>\n          \n          {sortedIssues.slice(0, 8).map((issue) => {\n            const config = getIssueConfig(issue.type);\n            const trendConfig = getTrendConfig(issue.trend, issue.trendValue);\n            const Icon = config.icon;\n            const TrendIcon = trendConfig.icon;\n            \n            return (\n              <div \n                key={issue.id}\n                className={`border rounded-lg p-4 ${config.borderColor} ${config.bgColor}`}\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start space-x-3 flex-1\">\n                    <Icon className={`w-5 h-5 mt-0.5 ${config.color}`} />\n                    \n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center space-x-2 mb-1\">\n                        <h5 className=\"font-medium text-gray-900 truncate\">\n                          {issue.title}\n                        </h5>\n                        <Badge className={getCategoryColor(issue.category)}>\n                          {issue.category}\n                        </Badge>\n                      </div>\n                      \n                      <p className=\"text-sm text-gray-600 mb-2\">\n                        {issue.description}\n                      </p>\n                      \n                      <div className=\"flex items-center space-x-4 text-sm\">\n                        <span className=\"font-medium text-gray-900\">\n                          {issue.count} ocorr√™ncias\n                        </span>\n                        <span className=\"text-gray-600\">\n                          {issue.percentage.toFixed(1)}% dos documentos\n                        </span>\n                        \n                        <div className={`flex items-center space-x-1 ${trendConfig.color}`}>\n                          <TrendIcon className=\"w-3 h-3\" />\n                          <span className=\"text-xs font-medium\">\n                            {trendConfig.text}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"text-right ml-4\">\n                    <div className={`text-lg font-bold ${config.color}`}>\n                      {issue.count}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">\n                      de {totalDocuments}\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Barra de Progresso */}\n                <div className=\"mt-3\">\n                  <Progress \n                    value={issue.percentage} \n                    className=\"h-1.5\"\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        \n        {/* Resumo por Categoria */}\n        {Object.keys(issuesByCategory).length > 1 && (\n          <div className=\"space-y-3\">\n            <h4 className=\"font-medium text-gray-900\">Problemas por Categoria</h4>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              {Object.entries(issuesByCategory).map(([category, categoryIssues]) => {\n                const categoryCount = categoryIssues.reduce((sum, issue) => sum + issue.count, 0);\n                const categoryPercentage = (categoryCount / totalIssues) * 100;\n                \n                return (\n                  <div key={category} className=\"border rounded-lg p-3\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <Badge className={getCategoryColor(category)}>\n                        {category}\n                      </Badge>\n                      <span className=\"font-medium text-gray-900\">\n                        {categoryCount}\n                      </span>\n                    </div>\n                    \n                    <Progress value={categoryPercentage} className=\"h-2\" />\n                    \n                    <div className=\"flex justify-between text-xs text-gray-600 mt-1\">\n                      <span>{categoryPercentage.toFixed(1)}% do total</span>\n                      <span>{categoryIssues.length} tipos</span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n        \n        {/* Estat√≠sticas Gerais */}\n        <div className=\"bg-gray-50 rounded-lg p-4\">\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n            <div>\n              <div className=\"text-2xl font-bold text-gray-900\">\n                {((totalIssues / totalDocuments) * 100).toFixed(1)}%\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Taxa de Problemas\n              </div>\n            </div>\n            \n            <div>\n              <div className=\"text-2xl font-bold text-gray-900\">\n                {(totalIssues / totalDocuments).toFixed(1)}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Problemas por Doc\n              </div>\n            </div>\n            \n            <div>\n              <div className=\"text-2xl font-bold text-green-600\">\n                {totalDocuments - issues.filter(i => i.type === 'critical').length}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Docs sem Cr√≠ticos\n              </div>\n            </div>\n            \n            <div>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {Object.keys(issuesByCategory).length}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Categorias\n              </div>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default IssuesBreakdown;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/dashboard/MetricsCards.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Activity' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":11}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  FileText,\n  TrendingUp,\n  TrendingDown,\n  Clock,\n  Target,\n  CheckCircle,\n  Activity\n} from 'lucide-react';\n\ninterface OverviewData {\n  totalDocuments: number;\n  documentsThisMonth: number;\n  averageScore: number;\n  averageProcessingTime: number;\n  totalAnalyses: number;\n  successRate: number;\n}\n\ninterface MetricsCardsProps {\n  data: OverviewData;\n}\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: React.ElementType;\n  trend?: {\n    value: number;\n    isPositive: boolean;\n    period: string;\n  };\n  progress?: {\n    value: number;\n    max: number;\n    color?: string;\n  };\n  color: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'indigo';\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({\n  title,\n  value,\n  subtitle,\n  icon: Icon,\n  trend,\n  progress,\n  color\n}) => {\n  const colorClasses = {\n    blue: {\n      icon: 'text-blue-600',\n      bg: 'bg-blue-100',\n      text: 'text-blue-600',\n      progress: 'bg-blue-500'\n    },\n    green: {\n      icon: 'text-green-600',\n      bg: 'bg-green-100',\n      text: 'text-green-600',\n      progress: 'bg-green-500'\n    },\n    purple: {\n      icon: 'text-purple-600',\n      bg: 'bg-purple-100',\n      text: 'text-purple-600',\n      progress: 'bg-purple-500'\n    },\n    orange: {\n      icon: 'text-orange-600',\n      bg: 'bg-orange-100',\n      text: 'text-orange-600',\n      progress: 'bg-orange-500'\n    },\n    red: {\n      icon: 'text-red-600',\n      bg: 'bg-red-100',\n      text: 'text-red-600',\n      progress: 'bg-red-500'\n    },\n    indigo: {\n      icon: 'text-indigo-600',\n      bg: 'bg-indigo-100',\n      text: 'text-indigo-600',\n      progress: 'bg-indigo-500'\n    }\n  };\n\n  const colors = colorClasses[color];\n\n  return (\n    <Card className=\"hover:shadow-lg transition-shadow duration-200\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className={`p-2 rounded-lg ${colors.bg}`}>\n              <Icon className={`w-5 h-5 ${colors.icon}`} />\n            </div>\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">{title}</p>\n              {subtitle && (\n                <p className=\"text-xs text-gray-500\">{subtitle}</p>\n              )}\n            </div>\n          </div>\n          \n          {trend && (\n            <div className={`flex items-center space-x-1 text-sm ${\n              trend.isPositive ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {trend.isPositive ? (\n                <TrendingUp className=\"w-4 h-4\" />\n              ) : (\n                <TrendingDown className=\"w-4 h-4\" />\n              )}\n              <span className=\"font-medium\">\n                {trend.isPositive ? '+' : ''}{trend.value}%\n              </span>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"space-y-2\">\n          <div className={`text-2xl font-bold ${colors.text}`}>\n            {typeof value === 'number' ? value.toLocaleString('pt-BR') : value}\n          </div>\n          \n          {progress && (\n            <div className=\"space-y-1\">\n              <Progress \n                value={(progress.value / progress.max) * 100} \n                className=\"h-2\"\n              />\n              <p className=\"text-xs text-gray-500\">\n                {progress.value} de {progress.max} ({((progress.value / progress.max) * 100).toFixed(1)}%)\n              </p>\n            </div>\n          )}\n          \n          {trend && (\n            <p className=\"text-xs text-gray-500\">\n              {trend.period}\n            </p>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const MetricsCards: React.FC<MetricsCardsProps> = ({ data }) => {\n  // Calcular tend√™ncias (simuladas para demonstra√ß√£o)\n  const documentsTrend = {\n    value: 12.5,\n    isPositive: true,\n    period: 'vs. m√™s anterior'\n  };\n  \n  const scoreTrend = {\n    value: 3.2,\n    isPositive: true,\n    period: 'vs. m√™s anterior'\n  };\n  \n  const timeTrend = {\n    value: -8.1,\n    isPositive: true, // Redu√ß√£o no tempo √© positiva\n    period: 'vs. m√™s anterior'\n  };\n  \n  const successTrend = {\n    value: 1.8,\n    isPositive: true,\n    period: 'vs. m√™s anterior'\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n      <MetricCard\n        title=\"Total de Documentos\"\n        subtitle=\"Processados\"\n        value={data.totalDocuments}\n        icon={FileText}\n        trend={documentsTrend}\n        progress={{\n          value: data.documentsThisMonth,\n          max: 100\n        }}\n        color=\"blue\"\n      />\n      \n      <MetricCard\n        title=\"Score M√©dio\"\n        subtitle=\"Conformidade\"\n        value={`${data.averageScore.toFixed(1)}%`}\n        icon={Target}\n        trend={scoreTrend}\n        progress={{\n          value: data.averageScore,\n          max: 100\n        }}\n        color=\"green\"\n      />\n      \n      <MetricCard\n        title=\"Tempo M√©dio\"\n        subtitle=\"Processamento\"\n        value={`${data.averageProcessingTime.toFixed(1)}s`}\n        icon={Clock}\n        trend={timeTrend}\n        color=\"orange\"\n      />\n      \n      <MetricCard\n        title=\"Taxa de Sucesso\"\n        subtitle=\"An√°lises\"\n        value={`${data.successRate.toFixed(1)}%`}\n        icon={CheckCircle}\n        trend={successTrend}\n        progress={{\n          value: data.successRate,\n          max: 100\n        }}\n        color=\"purple\"\n      />\n    </div>\n  );\n};\n\nexport default MetricsCards;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/dashboard/PerformanceMetrics.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":8}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  Zap,\n  Clock,\n  TrendingUp,\n  TrendingDown,\n  Activity,\n  Server,\n  Database,\n  Cpu,\n  HardDrive,\n  Wifi,\n  CheckCircle,\n  AlertTriangle,\n  Minus\n} from 'lucide-react';\n\ninterface PerformanceMetric {\n  id: string;\n  name: string;\n  value: number;\n  unit: string;\n  target?: number;\n  status: 'good' | 'warning' | 'critical';\n  trend: 'up' | 'down' | 'stable';\n  trendValue: number;\n  description: string;\n}\n\ninterface SystemHealth {\n  cpu: number;\n  memory: number;\n  disk: number;\n  network: number;\n  uptime: number;\n  responseTime: number;\n}\n\ninterface PerformanceMetricsProps {\n  metrics: PerformanceMetric[];\n  systemHealth: SystemHealth;\n  className?: string;\n}\n\ntype StatusType = 'good' | 'warning' | 'critical';\n\nconst getStatusConfig = (status: StatusType) => {\n  switch (status) {\n    case 'good':\n      return {\n        color: 'text-green-600',\n        bgColor: 'bg-green-50',\n        borderColor: 'border-green-200',\n        badgeColor: 'bg-green-100 text-green-800',\n        icon: CheckCircle\n      };\n    case 'warning':\n      return {\n        color: 'text-yellow-600',\n        bgColor: 'bg-yellow-50',\n        borderColor: 'border-yellow-200',\n        badgeColor: 'bg-yellow-100 text-yellow-800',\n        icon: AlertTriangle\n      };\n    case 'critical':\n      return {\n        color: 'text-red-600',\n        bgColor: 'bg-red-50',\n        borderColor: 'border-red-200',\n        badgeColor: 'bg-red-100 text-red-800',\n        icon: AlertTriangle\n      };\n    default:\n      return {\n        color: 'text-gray-600',\n        bgColor: 'bg-gray-50',\n        borderColor: 'border-gray-200',\n        badgeColor: 'bg-gray-100 text-gray-800',\n        icon: Minus\n      };\n  }\n};\n\nconst getTrendConfig = (trend: PerformanceMetric['trend'], value: number) => {\n  switch (trend) {\n    case 'up':\n      return {\n        icon: TrendingUp,\n        color: 'text-green-600',\n        text: `+${value}%`\n      };\n    case 'down':\n      return {\n        icon: TrendingDown,\n        color: 'text-red-600',\n        text: `-${Math.abs(value)}%`\n      };\n    case 'stable':\n      return {\n        icon: Minus,\n        color: 'text-gray-600',\n        text: '0%'\n      };\n    default:\n      return {\n        icon: Minus,\n        color: 'text-gray-600',\n        text: '0%'\n      };\n  }\n};\n\nconst getHealthStatus = (value: number, thresholds: { warning: number; critical: number }): StatusType => {\n  if (value >= thresholds.critical) return 'critical';\n  if (value >= thresholds.warning) return 'warning';\n  return 'good';\n};\n\nconst formatUptime = (hours: number) => {\n  const days = Math.floor(hours / 24);\n  const remainingHours = hours % 24;\n  \n  if (days > 0) {\n    return `${days}d ${remainingHours.toFixed(0)}h`;\n  }\n  return `${remainingHours.toFixed(1)}h`;\n};\n\nconst formatValue = (value: number, unit: string) => {\n  switch (unit) {\n    case 'ms':\n      return value < 1000 ? `${value.toFixed(0)}ms` : `${(value / 1000).toFixed(1)}s`;\n    case 's':\n      return `${value.toFixed(1)}s`;\n    case '%':\n      return `${value.toFixed(1)}%`;\n    case 'MB':\n      return value > 1024 ? `${(value / 1024).toFixed(1)}GB` : `${value.toFixed(0)}MB`;\n    case 'req/min':\n      return `${value.toFixed(0)} req/min`;\n    default:\n      return `${value.toFixed(1)} ${unit}`;\n  }\n};\n\nexport const PerformanceMetrics: React.FC<PerformanceMetricsProps> = ({\n  metrics,\n  systemHealth,\n  className = ''\n}) => {\n  // Calcular status geral do sistema\n  const systemMetrics = [\n    {\n      name: 'CPU',\n      value: systemHealth.cpu,\n      icon: Cpu,\n      status: getHealthStatus(systemHealth.cpu, { warning: 70, critical: 90 })\n    },\n    {\n      name: 'Mem√≥ria',\n      value: systemHealth.memory,\n      icon: HardDrive,\n      status: getHealthStatus(systemHealth.memory, { warning: 80, critical: 95 })\n    },\n    {\n      name: 'Disco',\n      value: systemHealth.disk,\n      icon: Database,\n      status: getHealthStatus(systemHealth.disk, { warning: 85, critical: 95 })\n    },\n    {\n      name: 'Rede',\n      value: systemHealth.network,\n      icon: Wifi,\n      status: getHealthStatus(systemHealth.network, { warning: 80, critical: 95 })\n    }\n  ];\n  \n  const overallSystemStatus: StatusType = systemMetrics.some(m => m.status === 'critical') \n    ? 'critical' \n    : systemMetrics.some(m => m.status === 'warning') \n    ? 'warning' \n    : 'good';\n  \n  const overallStatusConfig = getStatusConfig(overallSystemStatus);\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center space-x-2\">\n          <Activity className=\"w-5 h-5 text-blue-600\" />\n          <span>M√©tricas de Performance</span>\n          <Badge className={overallStatusConfig.badgeColor}>\n            Sistema {overallSystemStatus === 'good' ? 'Saud√°vel' : \n                    overallSystemStatus === 'warning' ? 'Aten√ß√£o' : 'Cr√≠tico'}\n          </Badge>\n        </CardTitle>\n        <p className=\"text-sm text-gray-600\">\n          Monitoramento em tempo real do desempenho do sistema\n        </p>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-6\">\n        {/* Status do Sistema */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          {systemMetrics.map((metric) => {\n            const config = getStatusConfig(metric.status);\n            const Icon = metric.icon;\n            \n            return (\n              <div \n                key={metric.name}\n                className={`border rounded-lg p-3 ${config.borderColor} ${config.bgColor}`}\n              >\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Icon className={`w-4 h-4 ${config.color}`} />\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {metric.name}\n                    </span>\n                  </div>\n                  <span className={`text-lg font-bold ${config.color}`}>\n                    {metric.value.toFixed(0)}%\n                  </span>\n                </div>\n                \n                <Progress \n                  value={metric.value} \n                  className=\"h-2\"\n                />\n              </div>\n            );\n          })}\n        </div>\n        \n        {/* Informa√ß√µes do Sistema */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-center space-x-2 mb-2\">\n              <Server className=\"w-5 h-5 text-blue-600\" />\n              <span className=\"font-medium text-blue-900\">Uptime</span>\n            </div>\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {formatUptime(systemHealth.uptime)}\n            </div>\n            <p className=\"text-xs text-blue-700 mt-1\">\n              Sistema operacional\n            </p>\n          </div>\n          \n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <div className=\"flex items-center space-x-2 mb-2\">\n              <Zap className=\"w-5 h-5 text-green-600\" />\n              <span className=\"font-medium text-green-900\">Resposta</span>\n            </div>\n            <div className=\"text-2xl font-bold text-green-600\">\n              {systemHealth.responseTime.toFixed(0)}ms\n            </div>\n            <p className=\"text-xs text-green-700 mt-1\">\n              Tempo m√©dio de resposta\n            </p>\n          </div>\n          \n          <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n            <div className=\"flex items-center space-x-2 mb-2\">\n              <Activity className=\"w-5 h-5 text-purple-600\" />\n              <span className=\"font-medium text-purple-900\">Status</span>\n            </div>\n            <div className={`text-2xl font-bold ${overallStatusConfig.color}`}>\n              {overallSystemStatus === 'good' ? '‚úì' : \n               overallSystemStatus === 'warning' ? '‚ö†' : '‚úó'}\n            </div>\n            <p className=\"text-xs text-purple-700 mt-1\">\n              {overallSystemStatus === 'good' ? 'Todos os sistemas OK' :\n               overallSystemStatus === 'warning' ? 'Requer aten√ß√£o' : 'Problemas cr√≠ticos'}\n            </p>\n          </div>\n        </div>\n        \n        {/* M√©tricas de Performance */}\n        <div className=\"space-y-4\">\n          <h4 className=\"font-medium text-gray-900\">M√©tricas de Aplica√ß√£o</h4>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {metrics.map((metric) => {\n              const config = getStatusConfig(metric.status);\n              const trendConfig = getTrendConfig(metric.trend, metric.trendValue);\n              const StatusIcon = config.icon;\n              const TrendIcon = trendConfig.icon;\n              \n              return (\n                <div \n                  key={metric.id}\n                  className={`border rounded-lg p-4 ${config.borderColor} ${config.bgColor}`}\n                >\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex items-center space-x-2\">\n                      <StatusIcon className={`w-5 h-5 ${config.color}`} />\n                      <div>\n                        <h5 className=\"font-medium text-gray-900\">\n                          {metric.name}\n                        </h5>\n                        <p className=\"text-xs text-gray-600\">\n                          {metric.description}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"text-right\">\n                      <div className={`text-xl font-bold ${config.color}`}>\n                        {formatValue(metric.value, metric.unit)}\n                      </div>\n                      {metric.target && (\n                        <div className=\"text-xs text-gray-500\">\n                          Meta: {formatValue(metric.target, metric.unit)}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Progresso em rela√ß√£o √† meta */}\n                  {metric.target && (\n                    <div className=\"mb-3\">\n                      <Progress \n                        value={Math.min((metric.value / metric.target) * 100, 100)} \n                        className=\"h-2\"\n                      />\n                      <div className=\"flex justify-between text-xs text-gray-600 mt-1\">\n                        <span>0</span>\n                        <span>{formatValue(metric.target, metric.unit)}</span>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Tend√™ncia */}\n                  <div className=\"flex items-center justify-between\">\n                    <Badge className={config.badgeColor}>\n                      {metric.status === 'good' ? 'Bom' :\n                       metric.status === 'warning' ? 'Aten√ß√£o' : 'Cr√≠tico'}\n                    </Badge>\n                    \n                    <div className={`flex items-center space-x-1 ${trendConfig.color}`}>\n                      <TrendIcon className=\"w-3 h-3\" />\n                      <span className=\"text-xs font-medium\">\n                        {trendConfig.text}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        \n        {/* Resumo de Performance */}\n        <div className=\"bg-gray-50 rounded-lg p-4\">\n          <h4 className=\"font-medium text-gray-900 mb-3\">Resumo de Performance</h4>\n          \n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n            <div>\n              <div className=\"text-2xl font-bold text-green-600\">\n                {metrics.filter(m => m.status === 'good').length}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                M√©tricas Saud√°veis\n              </div>\n            </div>\n            \n            <div>\n              <div className=\"text-2xl font-bold text-yellow-600\">\n                {metrics.filter(m => m.status === 'warning').length}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Requerem Aten√ß√£o\n              </div>\n            </div>\n            \n            <div>\n              <div className=\"text-2xl font-bold text-red-600\">\n                {metrics.filter(m => m.status === 'critical').length}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Cr√≠ticas\n              </div>\n            </div>\n            \n            <div>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {((metrics.filter(m => m.status === 'good').length / metrics.length) * 100).toFixed(0)}%\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Taxa de Sa√∫de\n              </div>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default PerformanceMetrics;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/dashboard/QuickActions.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Filter' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":9},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[515,518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[515,518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Upload,\n  FileText,\n  Download,\n  Settings,\n  RefreshCw,\n  BarChart3,\n  Users,\n  Bell,\n  Search,\n  Filter,\n  Calendar,\n  Archive,\n  Trash2,\n  ExternalLink,\n  Plus,\n  Eye\n} from 'lucide-react';\n\ninterface QuickAction {\n  id: string;\n  title: string;\n  description: string;\n  icon: React.ComponentType<any>;\n  variant: 'default' | 'destructive' | 'outline' | 'secondary' | 'ghost' | 'link';\n  color: string;\n  badge?: {\n    text: string;\n    variant: 'default' | 'destructive' | 'outline' | 'secondary';\n  };\n  onClick: () => void;\n  disabled?: boolean;\n  external?: boolean;\n}\n\ninterface QuickActionsProps {\n  onUploadDocument?: () => void;\n  onViewReports?: () => void;\n  onManageUsers?: () => void;\n  onSystemSettings?: () => void;\n  onRefreshData?: () => void;\n  onExportData?: () => void;\n  onViewNotifications?: () => void;\n  onSearchDocuments?: () => void;\n  onScheduleAnalysis?: () => void;\n  onArchiveDocuments?: () => void;\n  onDeleteOldData?: () => void;\n  pendingNotifications?: number;\n  isRefreshing?: boolean;\n  className?: string;\n}\n\nexport const QuickActions: React.FC<QuickActionsProps> = ({\n  onUploadDocument,\n  onViewReports,\n  onManageUsers,\n  onSystemSettings,\n  onRefreshData,\n  onExportData,\n  onViewNotifications,\n  onSearchDocuments,\n  onScheduleAnalysis,\n  onArchiveDocuments,\n  onDeleteOldData,\n  pendingNotifications = 0,\n  isRefreshing = false,\n  className = ''\n}) => {\n  const primaryActions: QuickAction[] = [\n    {\n      id: 'upload',\n      title: 'Novo Documento',\n      description: 'Fazer upload de um novo documento para an√°lise',\n      icon: Upload,\n      variant: 'default',\n      color: 'bg-blue-500 hover:bg-blue-600',\n      onClick: () => onUploadDocument?.()\n    },\n    {\n      id: 'reports',\n      title: 'Relat√≥rios',\n      description: 'Visualizar relat√≥rios e an√°lises detalhadas',\n      icon: BarChart3,\n      variant: 'outline',\n      color: 'border-green-500 text-green-600 hover:bg-green-50',\n      onClick: () => onViewReports?.()\n    },\n    {\n      id: 'search',\n      title: 'Buscar Documentos',\n      description: 'Pesquisar e filtrar documentos existentes',\n      icon: Search,\n      variant: 'outline',\n      color: 'border-purple-500 text-purple-600 hover:bg-purple-50',\n      onClick: () => onSearchDocuments?.()\n    },\n    {\n      id: 'notifications',\n      title: 'Notifica√ß√µes',\n      description: 'Ver alertas e notifica√ß√µes do sistema',\n      icon: Bell,\n      variant: 'outline',\n      color: 'border-orange-500 text-orange-600 hover:bg-orange-50',\n      badge: pendingNotifications > 0 ? {\n        text: pendingNotifications.toString(),\n        variant: 'destructive'\n      } : undefined,\n      onClick: () => onViewNotifications?.()\n    }\n  ];\n\n  const secondaryActions: QuickAction[] = [\n    {\n      id: 'refresh',\n      title: 'Atualizar Dados',\n      description: 'Sincronizar dados mais recentes',\n      icon: RefreshCw,\n      variant: 'ghost',\n      color: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100',\n      disabled: isRefreshing,\n      onClick: () => onRefreshData?.()\n    },\n    {\n      id: 'export',\n      title: 'Exportar',\n      description: 'Baixar dados em formato Excel/PDF',\n      icon: Download,\n      variant: 'ghost',\n      color: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100',\n      onClick: () => onExportData?.()\n    },\n    {\n      id: 'schedule',\n      title: 'Agendar An√°lise',\n      description: 'Programar an√°lises autom√°ticas',\n      icon: Calendar,\n      variant: 'ghost',\n      color: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100',\n      onClick: () => onScheduleAnalysis?.()\n    },\n    {\n      id: 'users',\n      title: 'Gerenciar Usu√°rios',\n      description: 'Administrar permiss√µes e acessos',\n      icon: Users,\n      variant: 'ghost',\n      color: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100',\n      onClick: () => onManageUsers?.()\n    },\n    {\n      id: 'settings',\n      title: 'Configura√ß√µes',\n      description: 'Ajustar configura√ß√µes do sistema',\n      icon: Settings,\n      variant: 'ghost',\n      color: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100',\n      onClick: () => onSystemSettings?.()\n    },\n    {\n      id: 'archive',\n      title: 'Arquivar',\n      description: 'Mover documentos antigos para arquivo',\n      icon: Archive,\n      variant: 'ghost',\n      color: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100',\n      onClick: () => onArchiveDocuments?.()\n    }\n  ];\n\n  const dangerActions: QuickAction[] = [\n    {\n      id: 'cleanup',\n      title: 'Limpeza de Dados',\n      description: 'Remover dados antigos e desnecess√°rios',\n      icon: Trash2,\n      variant: 'ghost',\n      color: 'text-red-600 hover:text-red-700 hover:bg-red-50',\n      onClick: () => onDeleteOldData?.()\n    }\n  ];\n\n  const renderActionButton = (action: QuickAction, size: 'sm' | 'default' = 'default') => {\n    const Icon = action.icon;\n    \n    return (\n      <Button\n        key={action.id}\n        variant={action.variant}\n        size={size}\n        disabled={action.disabled}\n        onClick={action.onClick}\n        className={`relative ${action.color} ${size === 'sm' ? 'h-8' : 'h-auto'}`}\n      >\n        <div className=\"flex items-center space-x-2\">\n          <Icon className={`${size === 'sm' ? 'w-3 h-3' : 'w-4 h-4'} ${action.disabled && isRefreshing ? 'animate-spin' : ''}`} />\n          <span className={size === 'sm' ? 'text-xs' : 'text-sm'}>\n            {action.title}\n          </span>\n          {action.external && (\n            <ExternalLink className=\"w-3 h-3\" />\n          )}\n        </div>\n        \n        {action.badge && (\n          <Badge \n            variant={action.badge.variant}\n            className=\"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs\"\n          >\n            {action.badge.text}\n          </Badge>\n        )}\n      </Button>\n    );\n  };\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center space-x-2\">\n          <Plus className=\"w-5 h-5 text-blue-600\" />\n          <span>A√ß√µes R√°pidas</span>\n        </CardTitle>\n        <p className=\"text-sm text-gray-600\">\n          Acesso r√°pido √†s funcionalidades principais\n        </p>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-6\">\n        {/* A√ß√µes Principais */}\n        <div className=\"space-y-3\">\n          <h4 className=\"text-sm font-medium text-gray-900\">Principais</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n            {primaryActions.map((action) => (\n              <div key={action.id} className=\"space-y-1\">\n                {renderActionButton(action)}\n                <p className=\"text-xs text-gray-500 px-1\">\n                  {action.description}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n        \n        {/* A√ß√µes Secund√°rias */}\n        <div className=\"space-y-3\">\n          <h4 className=\"text-sm font-medium text-gray-900\">Ferramentas</h4>\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n            {secondaryActions.map((action) => renderActionButton(action, 'sm'))}\n          </div>\n        </div>\n        \n        {/* A√ß√µes de Manuten√ß√£o */}\n        {dangerActions.length > 0 && (\n          <div className=\"space-y-3\">\n            <h4 className=\"text-sm font-medium text-gray-900\">Manuten√ß√£o</h4>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {dangerActions.map((action) => (\n                <div key={action.id} className=\"space-y-1\">\n                  {renderActionButton(action, 'sm')}\n                  <p className=\"text-xs text-gray-500 px-1\">\n                    {action.description}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        {/* Status de Sistema */}\n        <div className=\"bg-gray-50 rounded-lg p-3\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <h4 className=\"text-sm font-medium text-gray-900\">Status do Sistema</h4>\n            <div className=\"flex items-center space-x-1\">\n              <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n              <span className=\"text-xs text-green-600 font-medium\">Online</span>\n            </div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4 text-center\">\n            <div>\n              <div className=\"text-lg font-bold text-blue-600\">99.9%</div>\n              <div className=\"text-xs text-gray-600\">Uptime</div>\n            </div>\n            <div>\n              <div className=\"text-lg font-bold text-green-600\">&lt; 100ms</div>\n              <div className=\"text-xs text-gray-600\">Resposta</div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Links √öteis */}\n        <div className=\"space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-900\">Links √öteis</h4>\n          <div className=\"space-y-1\">\n            <Button \n              variant=\"link\" \n              size=\"sm\" \n              className=\"h-auto p-0 text-blue-600 hover:text-blue-700\"\n              onClick={() => window.open('/docs', '_blank')}\n            >\n              <FileText className=\"w-3 h-3 mr-1\" />\n              Documenta√ß√£o\n              <ExternalLink className=\"w-3 h-3 ml-1\" />\n            </Button>\n            \n            <Button \n              variant=\"link\" \n              size=\"sm\" \n              className=\"h-auto p-0 text-blue-600 hover:text-blue-700\"\n              onClick={() => window.open('/support', '_blank')}\n            >\n              <Eye className=\"w-3 h-3 mr-1\" />\n              Suporte T√©cnico\n              <ExternalLink className=\"w-3 h-3 ml-1\" />\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default QuickActions;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/dashboard/TrendsChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[425,428],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[425,428],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport {\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer\n} from 'recharts';\nimport { format, parseISO } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\ninterface TrendsChartProps {\n  data: any[];\n  title: string;\n  type: 'documents' | 'processing' | 'distribution' | 'scores';\n  className?: string;\n}\n\ninterface CustomTooltipProps {\n  active?: boolean;\n  payload?: any[];\n  label?: string;\n  type: string;\n}\n\nconst CustomTooltip: React.FC<CustomTooltipProps> = ({ active, payload, label, type }) => {\n  if (active && payload && payload.length) {\n    return (\n      <div className=\"bg-white p-3 border border-gray-200 rounded-lg shadow-lg\">\n        <p className=\"font-medium text-gray-900 mb-2\">\n          {type === 'distribution' ? label : format(parseISO(label || ''), 'dd/MM/yyyy', { locale: ptBR })}\n        </p>\n        {payload.map((entry, index) => (\n          <p key={index} className=\"text-sm\" style={{ color: entry.color }}>\n            <span className=\"font-medium\">{entry.name}:</span>\n            <span className=\"ml-1\">\n              {type === 'documents' && entry.dataKey === 'count' && `${entry.value} documentos`}\n              {type === 'documents' && entry.dataKey === 'score' && `${entry.value.toFixed(1)}%`}\n              {type === 'processing' && entry.dataKey === 'avgTime' && `${entry.value.toFixed(1)}s`}\n              {type === 'processing' && entry.dataKey === 'p95Time' && `${entry.value.toFixed(1)}s`}\n              {type === 'distribution' && `${entry.value} (${((entry.value / payload.reduce((sum, p) => sum + p.value, 0)) * 100).toFixed(1)}%)`}\n              {type === 'scores' && `${entry.value.toFixed(1)}%`}\n            </span>\n          </p>\n        ))}\n      </div>\n    );\n  }\n  return null;\n};\n\nconst COLORS = {\n  primary: '#3B82F6',\n  secondary: '#10B981',\n  tertiary: '#F59E0B',\n  quaternary: '#EF4444',\n  pie: ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899']\n};\n\nexport const TrendsChart: React.FC<TrendsChartProps> = ({ \n  data, \n  title, \n  type, \n  className = '' \n}) => {\n  const renderChart = () => {\n    switch (type) {\n      case 'documents':\n        return (\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <AreaChart data={data}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n              <XAxis \n                dataKey=\"date\" \n                tickFormatter={(value) => format(parseISO(value), 'dd/MM', { locale: ptBR })}\n                stroke=\"#6b7280\"\n                fontSize={12}\n              />\n              <YAxis \n                yAxisId=\"count\"\n                orientation=\"left\"\n                stroke=\"#6b7280\"\n                fontSize={12}\n              />\n              <YAxis \n                yAxisId=\"score\"\n                orientation=\"right\"\n                domain={[0, 100]}\n                stroke=\"#6b7280\"\n                fontSize={12}\n              />\n              <Tooltip content={<CustomTooltip type={type} />} />\n              <Legend />\n              <Area\n                yAxisId=\"count\"\n                type=\"monotone\"\n                dataKey=\"count\"\n                stroke={COLORS.primary}\n                fill={COLORS.primary}\n                fillOpacity={0.3}\n                name=\"Documentos\"\n              />\n              <Line\n                yAxisId=\"score\"\n                type=\"monotone\"\n                dataKey=\"score\"\n                stroke={COLORS.secondary}\n                strokeWidth={2}\n                name=\"Score M√©dio (%)\"\n                dot={{ fill: COLORS.secondary, strokeWidth: 2, r: 4 }}\n              />\n            </AreaChart>\n          </ResponsiveContainer>\n        );\n\n      case 'processing':\n        return (\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <LineChart data={data}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n              <XAxis \n                dataKey=\"date\" \n                tickFormatter={(value) => format(parseISO(value), 'dd/MM', { locale: ptBR })}\n                stroke=\"#6b7280\"\n                fontSize={12}\n              />\n              <YAxis \n                stroke=\"#6b7280\"\n                fontSize={12}\n                label={{ value: 'Tempo (s)', angle: -90, position: 'insideLeft' }}\n              />\n              <Tooltip content={<CustomTooltip type={type} />} />\n              <Legend />\n              <Line\n                type=\"monotone\"\n                dataKey=\"avgTime\"\n                stroke={COLORS.primary}\n                strokeWidth={2}\n                name=\"Tempo M√©dio\"\n                dot={{ fill: COLORS.primary, strokeWidth: 2, r: 4 }}\n              />\n              <Line\n                type=\"monotone\"\n                dataKey=\"p95Time\"\n                stroke={COLORS.tertiary}\n                strokeWidth={2}\n                strokeDasharray=\"5 5\"\n                name=\"P95\"\n                dot={{ fill: COLORS.tertiary, strokeWidth: 2, r: 4 }}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        );\n\n      case 'distribution':\n        return (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <ResponsiveContainer width=\"100%\" height={250}>\n              <PieChart>\n                <Pie\n                  data={data}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={({ name, percentage }) => `${name}: ${percentage}%`}\n                  outerRadius={80}\n                  fill=\"#8884d8\"\n                  dataKey=\"count\"\n                >\n                  {data.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS.pie[index % COLORS.pie.length]} />\n                  ))}\n                </Pie>\n                <Tooltip content={<CustomTooltip type={type} />} />\n              </PieChart>\n            </ResponsiveContainer>\n            \n            <ResponsiveContainer width=\"100%\" height={250}>\n              <BarChart data={data} layout=\"horizontal\">\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n                <XAxis type=\"number\" stroke=\"#6b7280\" fontSize={12} />\n                <YAxis \n                  type=\"category\" \n                  dataKey=\"range\" \n                  stroke=\"#6b7280\" \n                  fontSize={12}\n                  width={60}\n                />\n                <Tooltip content={<CustomTooltip type={type} />} />\n                <Bar dataKey=\"count\" fill={COLORS.primary} />\n              </BarChart>\n            </ResponsiveContainer>\n          </div>\n        );\n\n      case 'scores':\n        return (\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <AreaChart data={data}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n              <XAxis \n                dataKey=\"date\" \n                tickFormatter={(value) => format(parseISO(value), 'dd/MM', { locale: ptBR })}\n                stroke=\"#6b7280\"\n                fontSize={12}\n              />\n              <YAxis \n                domain={[0, 100]}\n                stroke=\"#6b7280\"\n                fontSize={12}\n                label={{ value: 'Score (%)', angle: -90, position: 'insideLeft' }}\n              />\n              <Tooltip content={<CustomTooltip type={type} />} />\n              <Legend />\n              <Area\n                type=\"monotone\"\n                dataKey=\"score\"\n                stroke={COLORS.secondary}\n                fill={COLORS.secondary}\n                fillOpacity={0.3}\n                name=\"Score de Conformidade\"\n              />\n            </AreaChart>\n          </ResponsiveContainer>\n        );\n\n      default:\n        return (\n          <div className=\"flex items-center justify-center h-64 text-gray-500\">\n            Tipo de gr√°fico n√£o suportado\n          </div>\n        );\n    }\n  };\n\n  const getDescription = () => {\n    switch (type) {\n      case 'documents':\n        return 'Volume de documentos processados e score m√©dio de conformidade ao longo do tempo';\n      case 'processing':\n        return 'Tempo m√©dio de processamento e percentil 95 das an√°lises';\n      case 'distribution':\n        return 'Distribui√ß√£o dos scores de conformidade por faixas';\n      case 'scores':\n        return 'Evolu√ß√£o do score de conformidade ao longo do tempo';\n      default:\n        return '';\n    }\n  };\n\n  return (\n    <Card className={`${className}`}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-semibold\">{title}</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">{getDescription()}</p>\n          </div>\n          <div className=\"text-sm text-gray-500\">\n            {data.length} {type === 'distribution' ? 'faixas' : 'pontos'}\n          </div>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        {data.length === 0 ? (\n          <div className=\"flex items-center justify-center h-64 text-gray-500\">\n            <div className=\"text-center\">\n              <div className=\"text-4xl mb-2\">üìä</div>\n              <p>Nenhum dado dispon√≠vel</p>\n            </div>\n          </div>\n        ) : (\n          renderChart()\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default TrendsChart;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/debug/ErrorTestComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/documents/AnalysisCharts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/documents/ProblemsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/error/ConsoleInterceptor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/error/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/error/ErrorFallback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/error/ErrorReportDialog.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isOpen' is defined but never used.","line":46,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { useErrorReport } from '@/hooks/useErrorReport';\nimport { ErrorSeverity } from '@/types/error';\n\nconst reportSchema = z.object({\n  description: z.string().min(10, 'Descri√ß√£o deve ter pelo menos 10 caracteres'),\n  stepsToReproduce: z.string().optional(),\n  userEmail: z.string().email('Email inv√°lido').optional().or(z.literal('')),\n  severity: z.enum(['low', 'medium', 'high', 'critical'] as const),\n});\n\ntype ReportFormData = z.infer<typeof reportSchema>;\n\ninterface ErrorReportDialogProps {\n  open: boolean;\n  onOpenChange: (isOpen: boolean) => void;\n  errorId: string;\n  error?: Error;\n}\n\nconst ErrorReportDialog: React.FC<ErrorReportDialogProps> = ({\n  open,\n  onOpenChange,\n  errorId,\n  error,\n}) => {\n  const { submitReport, isSubmitting } = useErrorReport();\n\n  const form = useForm<ReportFormData>({\n    resolver: zodResolver(reportSchema),\n    defaultValues: {\n      description: '',\n      stepsToReproduce: '',\n      userEmail: '',\n      severity: 'medium',\n    },\n  });\n\n  const onSubmit = async (data: ReportFormData) => {\n    const success = await submitReport({\n      errorId,\n      error,\n      userFeedback: {\n        description: data.description,\n        stepsToReproduce: data.stepsToReproduce || undefined,\n        userEmail: data.userEmail || undefined,\n        severity: data.severity,\n      },\n    });\n\n    if (success) {\n      form.reset();\n      onOpenChange(false);\n    }\n  };\n\n  const getSeverityColor = (severity: ErrorSeverity) => {\n    switch (severity) {\n      case 'low': return 'bg-green-100 text-green-800';\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\n      case 'high': return 'bg-orange-100 text-orange-800';\n      case 'critical': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Reportar Problema</DialogTitle>\n          <DialogDescription>\n            Nos ajude a melhorar a aplica√ß√£o reportando este erro. \n            Suas informa√ß√µes nos ajudar√£o a identificar e corrigir o problema rapidamente.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Descri√ß√£o do Problema *</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Descreva o que estava fazendo quando o erro ocorreu...\"\n                      className=\"min-h-[100px]\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"stepsToReproduce\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Passos para Reproduzir (Opcional)</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"1. Cliquei em...&#10;2. Preenchi o campo...&#10;3. Pressionei o bot√£o...\"\n                      className=\"min-h-[80px]\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"severity\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Severidade</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Selecione a severidade\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"low\">Baixa - N√£o afeta o uso</SelectItem>\n                        <SelectItem value=\"medium\">M√©dia - Dificulta o uso</SelectItem>\n                        <SelectItem value=\"high\">Alta - Impede algumas funcionalidades</SelectItem>\n                        <SelectItem value=\"critical\">Cr√≠tica - Aplica√ß√£o inutiliz√°vel</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"userEmail\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email (Opcional)</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"seu@email.com\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <Separator />\n\n            <div className=\"space-y-3\">\n              <h4 className=\"text-sm font-medium text-muted-foreground\">\n                Informa√ß√µes T√©cnicas (coletadas automaticamente)\n              </h4>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-muted-foreground\">ID do Erro:</span>\n                  <Badge variant=\"outline\" className=\"font-mono\">\n                    {errorId}\n                  </Badge>\n                </div>\n                {error && (\n                  <>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-muted-foreground\">Tipo:</span>\n                      <Badge variant=\"outline\">{error.name}</Badge>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-muted-foreground\">Categoria:</span>\n                      <Badge \n                        variant=\"outline\"\n                        className={getSeverityColor(form.watch('severity'))}\n                      >\n                        {form.watch('severity')}\n                      </Badge>\n                    </div>\n                  </>\n                )}\n                <div className=\"text-xs text-muted-foreground\">\n                  URL, User Agent, Timestamp e Stack Trace s√£o coletados automaticamente\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => onOpenChange(false)}\n                disabled={isSubmitting}\n              >\n                Cancelar\n              </Button>\n              <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting ? 'Enviando...' : 'Enviar Relat√≥rio'}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ErrorReportDialog;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/error/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/landing/CallToAction.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/landing/Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/landing/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/landing/HeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/landing/Services.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/landing/Stats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/landing/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/ErrorBoundary.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":10,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'_errorInfo' is defined but never used.","line":10,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2254,2257],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2254,2257],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { AlertTriangle, RefreshCw, FileText, Copy, ChevronDown, ChevronUp } from 'lucide-react';\nimport { Button } from './button';\nimport { Card, CardContent, CardHeader, CardTitle } from './card';\nimport { Alert, AlertDescription } from './alert';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (_error: Error, _errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n  showErrorDetails: boolean;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      showErrorDetails: false,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<State> {\n    // Atualiza o state para que a pr√≥xima renderiza√ß√£o mostre a UI de fallback\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // Salva a informa√ß√£o do erro no state\n    this.setState({\n      error,\n      errorInfo,\n    });\n\n    // Log do erro para debug\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n\n    // Chama callback personalizado se fornecido\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n\n    // Opcional: Enviar erro para servi√ßo de monitoramento\n    // this.reportErrorToService(error, errorInfo);\n  }\n\n  handleRetry = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      showErrorDetails: false,\n    });\n  };\n\n  handleShowDetails = () => {\n    this.setState(prevState => ({\n      showErrorDetails: !prevState.showErrorDetails,\n    }));\n  };\n\n  handleCopyError = async () => {\n    const { error, errorInfo } = this.state;\n    if (!error || !errorInfo) return;\n\n    const errorReport = `\nRELAT√ìRIO DE ERRO\n================\n\nTimestamp: ${new Date().toISOString()}\nURL: ${window.location.href}\nUser Agent: ${navigator.userAgent}\n\nERROR MESSAGE:\n${error.message}\n\nERROR STACK:\n${error.stack}\n\nCOMPONENT STACK:\n${errorInfo.componentStack}\n\nADDITIONAL INFO:\n${JSON.stringify({\n  name: error.name,\n  cause: (error as any)?.cause,\n}, null, 2)}\n    `.trim();\n\n    try {\n      await navigator.clipboard.writeText(errorReport);\n      // Opcional: Mostrar toast de sucesso\n      console.log('Error report copied to clipboard');\n    } catch (err) {\n      console.error('Failed to copy error report:', err);\n    }\n  };\n\n  render() {\n    if (this.state.hasError) {\n      // Interface de fallback customizada\n      const { error, errorInfo, showErrorDetails } = this.state;\n\n      // Se um fallback customizado foi fornecido via props, use-o\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <div className=\"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4\">\n          <Card className=\"w-full max-w-2xl border-red-200 shadow-lg\">\n            <CardHeader className=\"text-center\">\n              <div className=\"flex items-center justify-center mb-4\">\n                <div className=\"bg-red-100 p-3 rounded-full\">\n                  <AlertTriangle className=\"h-8 w-8 text-red-600\" />\n                </div>\n              </div>\n              <CardTitle className=\"text-2xl text-red-900\">\n                Opa, algo deu errado\n              </CardTitle>\n              <p className=\"text-red-700 mt-2\">\n                Encontramos um problema inesperado. Voc√™ pode tentar novamente ou gerar um relat√≥rio \n                de erro para nos ajudar a resolver o problema.\n              </p>\n            </CardHeader>\n            \n            <CardContent className=\"space-y-4\">\n              {/* Bot√µes de a√ß√£o */}\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                <Button\n                  onClick={this.handleRetry}\n                  variant=\"default\"\n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                >\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  Tentar Novamente\n                </Button>\n                \n                <Button\n                  onClick={this.handleShowDetails}\n                  variant=\"outline\"\n                  className=\"border-red-300 text-red-700 hover:bg-red-50\"\n                >\n                  <FileText className=\"h-4 w-4 mr-2\" />\n                  {showErrorDetails ? 'Ocultar' : 'Gerar'} Relat√≥rio de Erro\n                  {showErrorDetails ? \n                    <ChevronUp className=\"h-4 w-4 ml-2\" /> : \n                    <ChevronDown className=\"h-4 w-4 ml-2\" />\n                  }\n                </Button>\n              </div>\n\n              {/* √Årea de detalhes do erro (condicional) */}\n              {showErrorDetails && (\n                <div className=\"mt-6 space-y-4\">\n                  <Alert className=\"border-red-200 bg-red-50\">\n                    <AlertTriangle className=\"h-4 w-4\" />\n                    <AlertDescription className=\"text-red-800\">\n                      <strong>Detalhes t√©cnicos do erro:</strong> As informa√ß√µes abaixo podem \n                      ajudar desenvolvedores a diagnosticar o problema.\n                    </AlertDescription>\n                  </Alert>\n\n                  <div className=\"bg-gray-50 border rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"font-medium text-gray-900\">Informa√ß√µes do Erro</h4>\n                      <Button\n                        onClick={this.handleCopyError}\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        className=\"text-gray-600 hover:text-gray-900\"\n                      >\n                        <Copy className=\"h-4 w-4 mr-1\" />\n                        Copiar\n                      </Button>\n                    </div>\n\n                    {error && (\n                      <div className=\"space-y-3\">\n                        <div>\n                          <h5 className=\"font-medium text-red-900 mb-1\">Mensagem do Erro:</h5>\n                          <pre className=\"bg-red-100 p-2 rounded text-sm text-red-800 whitespace-pre-wrap border\">\n                            {error.message}\n                          </pre>\n                        </div>\n\n                        {error.stack && (\n                          <div>\n                            <h5 className=\"font-medium text-red-900 mb-1\">Stack Trace:</h5>\n                            <pre className=\"bg-gray-100 p-2 rounded text-xs text-gray-700 whitespace-pre-wrap border max-h-32 overflow-y-auto\">\n                              {error.stack}\n                            </pre>\n                          </div>\n                        )}\n\n                        {errorInfo?.componentStack && (\n                          <div>\n                            <h5 className=\"font-medium text-red-900 mb-1\">Component Stack:</h5>\n                            <pre className=\"bg-blue-100 p-2 rounded text-xs text-blue-800 whitespace-pre-wrap border max-h-32 overflow-y-auto\">\n                              {errorInfo.componentStack}\n                            </pre>\n                          </div>\n                        )}\n\n                        <div className=\"text-xs text-gray-600 pt-2 border-t\">\n                          <p><strong>Timestamp:</strong> {new Date().toLocaleString()}</p>\n                          <p><strong>URL:</strong> {window.location.href}</p>\n                          <p><strong>User Agent:</strong> {navigator.userAgent}</p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":36,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":36,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":56,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":56,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/calendar.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_props' is defined but never used.","line":55,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_props' is defined but never used.","line":55,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":31},{"ruleId":"no-unused-vars","severity":2,"message":"'_props' is defined but never used.","line":56,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_props' is defined but never used.","line":56,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":56,"endColumn":32}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { DayPicker } from \"react-day-picker\";\n\nimport { cn } from \"@/lib/utils\";\nimport { buttonVariants } from \"@/components/ui/button\";\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>;\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ ..._props }) => <ChevronLeft className=\"h-4 w-4\" />,\n        IconRight: ({ ..._props }) => <ChevronRight className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  );\n}\nCalendar.displayName = \"Calendar\";\n\nexport { Calendar };\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/carousel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'api' is defined but never used.","line":19,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/chart.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'k' is defined but never used.","line":10,"column":4,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":5},{"ruleId":"no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":70,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":70,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":8}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([_, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item.dataKey || item.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/date-picker.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'date' is defined but never used.","line":16,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":36}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport { Calendar as CalendarIcon } from 'lucide-react';\nimport { cn } from '../../lib/utils';\nimport { Button } from './button';\nimport { Calendar } from './calendar';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from './popover';\n\ninterface DatePickerProps {\n  value?: Date;\n  onChange: (date: Date | undefined) => void;\n  placeholder?: string;\n  disabled?: boolean;\n  className?: string;\n}\n\nconst DatePicker: React.FC<DatePickerProps> = ({\n  value,\n  onChange,\n  placeholder = \"Selecione uma data\",\n  disabled = false,\n  className\n}) => {\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          className={cn(\n            \"w-full justify-start text-left font-normal\",\n            !value && \"text-muted-foreground\",\n            className\n          )}\n          disabled={disabled}\n        >\n          <CalendarIcon className=\"mr-2 h-4 w-4\" />\n          {value ? (\n            format(value, \"dd/MM/yyyy\", { locale: ptBR })\n          ) : (\n            <span>{placeholder}</span>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-auto p-0\">\n        <Calendar\n          mode=\"single\"\n          selected={value}\n          onSelect={onChange}\n          initialFocus\n          locale={ptBR}\n        />\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport { DatePicker };","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":168,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":168,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message) : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":119,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":119,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/resizable.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":9,"column":4,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":25,"column":4,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":9}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/sidebar.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":30,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":26},{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":32,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":32},{"ruleId":"no-redeclare","severity":2,"message":"'SidebarContext' is already defined.","line":37,"column":7,"nodeType":"Identifier","messageId":"redeclared","endLine":37,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":53,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":76,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":41},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":760,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":760,"endColumn":13}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContext>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden md:block text-sidebar-foreground\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/skeleton.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":6,"column":4,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/sonner.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":4,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":43,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":43,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/ui/use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/components/upload/DocumentUploader.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'document' is defined but never used.","line":30,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'autoApplied' is assigned a value but never used.","line":62,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'autoApplied' is assigned a value but never used.","line":62,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'clearClassification' is assigned a value but never used.","line":63,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clearClassification' is assigned a value but never used.","line":63,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2407,2410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2407,2410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2594,2597],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2594,2597],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'autoClassifyEnabled' and 'classifyDocument'. Either include them or remove the dependency array.","line":124,"column":6,"nodeType":"ArrayExpression","endLine":124,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [autoClassifyEnabled, classifyDocument, maxFiles]","fix":{"range":[4135,4145],"text":"[autoClassifyEnabled, classifyDocument, maxFiles]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isValid' is defined but never used.","line":355,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":355,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isValid' is defined but never used.","line":355,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":355,"endColumn":41}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useRef } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport {\n  Upload,\n  FileText,\n  X,\n  CheckCircle,\n  AlertTriangle,\n  Eye,\n  Download,\n  Trash2,\n  Brain,\n  Zap\n} from 'lucide-react';\nimport { DocumentService, UploadProgress } from '@/services/documentService';\nimport { DocumentClassification, DocumentUpload } from '@/types/document';\nimport { HierarchicalClassification } from '@/components/HierarchicalClassification';\nimport { useSmartClassification } from '@/hooks/useSmartClassification';\nimport { useToast } from '@/components/ui/use-toast';\n\ninterface DocumentUploaderProps {\n  prefeituraId: string;\n  onUploadSuccess?: (document: DocumentUpload) => void;\n  onClose?: () => void;\n  maxFiles?: number;\n  className?: string;\n}\n\ninterface FileWithPreview extends File {\n  preview?: string;\n  id: string;\n  uploadProgress?: UploadProgress;\n  uploadedDocument?: DocumentUpload;\n  error?: string;\n}\n\nexport const DocumentUploader: React.FC<DocumentUploaderProps> = ({\n  prefeituraId,\n  onUploadSuccess,\n  onClose,\n  maxFiles = 5,\n  className = ''\n}) => {\n  const [files, setFiles] = useState<FileWithPreview[]>([]);\n  const [classification, setClassification] = useState<DocumentClassification | null>(null);\n  const [description, setDescription] = useState('');\n  const [autoClassifyEnabled, setAutoClassifyEnabled] = useState(true);\n  \n  // Hook para classifica√ß√£o autom√°tica\n  const { \n    classifyDocument, \n    isClassifying, \n    result: classificationResult, \n    error: classificationError,\n    autoApplied,\n    clearClassification,\n    getConfidenceText,\n    getConfidenceColor,\n    isHighConfidence\n  } = useSmartClassification();\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadErrors, setUploadErrors] = useState<string[]>([]);\n  const { toast } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Configura√ß√£o do dropzone\n  const onDrop = useCallback((acceptedFiles: File[], rejectedFiles: any[]) => {\n    // Processar arquivos rejeitados\n    if (rejectedFiles.length > 0) {\n      const errors = rejectedFiles.map(({ file, errors }) => \n        `${file.name}: ${errors.map((e: any) => e.message).join(', ')}`\n      );\n      setUploadErrors(errors);\n    }\n\n    // Processar arquivos aceitos\n    const newFiles: FileWithPreview[] = acceptedFiles.map(file => {\n      const validation = DocumentService.validateFile(file);\n      \n      return {\n        ...file,\n        id: Math.random().toString(36).substr(2, 9),\n        preview: file.type === 'application/pdf' ? undefined : URL.createObjectURL(file),\n        error: validation.valid ? undefined : validation.error\n      };\n    });\n\n    setFiles(prev => {\n      const combined = [...prev, ...newFiles];\n      return combined.slice(0, maxFiles);\n    });\n\n    // Classifica√ß√£o autom√°tica para o primeiro arquivo v√°lido\n    if (autoClassifyEnabled && acceptedFiles.length > 0) {\n      const firstValidFile = acceptedFiles.find(file => \n        DocumentService.validateFile(file).valid\n      );\n      \n      if (firstValidFile) {\n        // Extrair texto do arquivo para classifica√ß√£o\n        DocumentService.extractTextFromFile(firstValidFile).then(({ text }) => {\n          classifyDocument(text, {\n            autoApply: false, // N√£o aplicar automaticamente no upload\n            onSuggestion: (result) => {\n              // Sugerir classifica√ß√£o baseada no resultado\n              if (result.confidence > 0.7) {\n                setClassification({\n                  tipoObjeto: result.documentType,\n                  tipoDocumento: result.documentType\n                });\n              }\n            }\n          });\n        }).catch(console.error);\n      }\n    }\n  }, [maxFiles]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf'],\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx']\n    },\n    maxSize: 10 * 1024 * 1024, // 10MB\n    maxFiles,\n    multiple: true\n  });\n\n  // Remover arquivo\n  const removeFile = (fileId: string) => {\n    setFiles(prev => {\n      const updated = prev.filter(f => f.id !== fileId);\n      // Limpar preview URLs\n      const fileToRemove = prev.find(f => f.id === fileId);\n      if (fileToRemove?.preview) {\n        URL.revokeObjectURL(fileToRemove.preview);\n      }\n      return updated;\n    });\n  };\n\n  // Upload de arquivos\n  const handleUpload = async () => {\n    if (!classification) {\n      toast({\n        title: 'Erro',\n        description: 'Selecione a classifica√ß√£o do documento',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    if (files.length === 0) {\n      toast({\n        title: 'Erro',\n        description: 'Selecione pelo menos um arquivo',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    setIsUploading(true);\n    setUploadErrors([]);\n\n    try {\n      // Upload sequencial dos arquivos\n      for (const file of files) {\n        if (file.error || file.uploadedDocument) continue;\n\n        try {\n          const uploadedDoc = await DocumentService.uploadDocument(\n            file,\n            prefeituraId,\n            classification,\n            description,\n            (progress) => {\n              setFiles(prev => prev.map(f => \n                f.id === file.id \n                  ? { ...f, uploadProgress: progress }\n                  : f\n              ));\n            }\n          );\n\n          // Marcar arquivo como enviado\n          setFiles(prev => prev.map(f => \n            f.id === file.id \n              ? { ...f, uploadedDocument: uploadedDoc, uploadProgress: undefined }\n              : f\n          ));\n\n          onUploadSuccess?.(uploadedDoc);\n\n          toast({\n            title: 'Sucesso',\n            description: `${file.name} enviado com sucesso!`\n          });\n        } catch (error) {\n          console.error('Erro no upload:', error);\n          setFiles(prev => prev.map(f => \n            f.id === file.id \n              ? { ...f, error: 'Erro no upload', uploadProgress: undefined }\n              : f\n          ));\n        }\n      }\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  // Preview do arquivo\n  const previewFile = (file: FileWithPreview) => {\n    if (file.uploadedDocument?.urlStorage) {\n      window.open(file.uploadedDocument.urlStorage, '_blank');\n    } else if (file.preview) {\n      window.open(file.preview, '_blank');\n    }\n  };\n\n  // Download do arquivo\n  const downloadFile = (file: FileWithPreview) => {\n    if (file.uploadedDocument?.urlStorage) {\n      const link = document.createElement('a');\n      link.href = file.uploadedDocument.urlStorage;\n      link.download = file.name;\n      link.click();\n    }\n  };\n\n  // Limpar todos os arquivos\n  const clearAllFiles = () => {\n    files.forEach(file => {\n      if (file.preview) {\n        URL.revokeObjectURL(file.preview);\n      }\n    });\n    setFiles([]);\n    setUploadErrors([]);\n  };\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Upload de Documentos</h2>\n          <p className=\"text-gray-600\">Envie documentos para an√°lise autom√°tica</p>\n        </div>\n        {onClose && (\n          <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>\n            <X className=\"w-4 h-4\" />\n          </Button>\n        )}\n      </div>\n\n      {/* Configura√ß√£o da Classifica√ß√£o Autom√°tica */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Brain className=\"w-5 h-5\" />\n            Classifica√ß√£o Autom√°tica com IA\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <Zap className=\"w-4 h-4 text-blue-500\" />\n              <span className=\"text-sm font-medium\">Detectar tipo automaticamente</span>\n            </div>\n            <Button\n              variant={autoClassifyEnabled ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setAutoClassifyEnabled(!autoClassifyEnabled)}\n            >\n              {autoClassifyEnabled ? 'Ativado' : 'Desativado'}\n            </Button>\n          </div>\n\n          {/* Resultados da Classifica√ß√£o */}\n          {classificationResult && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                <span className=\"font-medium text-sm\">Tipo detectado:</span>\n                <Badge variant=\"secondary\">{classificationResult.documentType}</Badge>\n              </div>\n              <div className=\"flex items-center gap-2 mb-2\">\n                <span className=\"text-sm text-gray-600\">Confian√ßa:</span>\n                <Badge \n                  variant={isHighConfidence(classificationResult.confidence) ? \"default\" : \"outline\"}\n                  className={getConfidenceColor(classificationResult.confidence)}\n                >\n                  {getConfidenceText(classificationResult.confidence)}\n                </Badge>\n                <span className=\"text-xs text-gray-500\">\n                  ({(classificationResult.confidence * 100).toFixed(1)}%)\n                </span>\n              </div>\n              {classificationResult.alternatives && classificationResult.alternatives.length > 0 && (\n                <div className=\"text-sm text-gray-600\">\n                  <span>Alternativas: </span>\n                  {classificationResult.alternatives.slice(0, 2).map((alt, idx) => (\n                    <Badge key={idx} variant=\"outline\" className=\"mr-1\">\n                      {alt.type} ({(alt.confidence * 100).toFixed(0)}%)\n                    </Badge>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Erro na Classifica√ß√£o */}\n          {classificationError && (\n            <Alert className=\"border-red-200 bg-red-50\">\n              <AlertTriangle className=\"w-4 h-4 text-red-500\" />\n              <AlertDescription className=\"text-red-700\">\n                Erro na classifica√ß√£o autom√°tica: {classificationError}\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {/* Indicador de Processamento */}\n          {isClassifying && (\n            <div className=\"flex items-center gap-2 text-blue-600\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\n              <span className=\"text-sm\">Analisando documento...</span>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Classifica√ß√£o */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Classifica√ß√£o do Documento</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <HierarchicalClassification\n            classification={classification || undefined}\n            onClassificationChange={(newClassification) => {\n              if (newClassification.tipoObjeto && newClassification.modalidadePrincipal && \n                  newClassification.subtipo && newClassification.tipoDocumento) {\n                setClassification(newClassification as DocumentClassification);\n              }\n            }}\n            onValidationChange={(isValid) => {\n              // Callback para valida√ß√£o se necess√°rio\n            }}\n          />\n        </CardContent>\n      </Card>\n\n      {/* √Årea de Upload */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Selecionar Arquivos</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div\n            {...getRootProps()}\n            className={`\n              border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\n              ${isDragActive \n                ? 'border-blue-400 bg-blue-50' \n                : 'border-gray-300 hover:border-gray-400'\n              }\n            `}\n          >\n            <input {...getInputProps()} ref={fileInputRef} />\n            <Upload className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              {isDragActive \n                ? 'Solte os arquivos aqui...' \n                : 'Arraste arquivos ou clique para selecionar'\n              }\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              Suporta PDF e DOCX at√© 10MB cada ‚Ä¢ M√°ximo {maxFiles} arquivos\n            </p>\n            <Button variant=\"outline\" type=\"button\">\n              Selecionar Arquivos\n            </Button>\n          </div>\n\n          {/* Descri√ß√£o */}\n          <div className=\"mt-4\">\n            <Label htmlFor=\"description\">Descri√ß√£o (opcional)</Label>\n            <Textarea\n              id=\"description\"\n              placeholder=\"Adicione uma descri√ß√£o para os documentos...\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              className=\"mt-1\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Lista de Arquivos */}\n      {files.length > 0 && (\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between\">\n            <CardTitle>Arquivos Selecionados ({files.length})</CardTitle>\n            <Button variant=\"outline\" size=\"sm\" onClick={clearAllFiles}>\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Limpar Todos\n            </Button>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {files.map((file) => (\n                <div key={file.id} className=\"flex items-center space-x-3 p-3 border rounded-lg\">\n                  <FileText className=\"w-8 h-8 text-blue-600 flex-shrink-0\" />\n                  \n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center space-x-2\">\n                      <p className=\"font-medium truncate\">{file.name}</p>\n                      <Badge variant=\"outline\">\n                        {(file.size / 1024 / 1024).toFixed(2)} MB\n                      </Badge>\n                      \n                      {/* Status badges */}\n                      {file.uploadedDocument && (\n                        <Badge className=\"bg-green-100 text-green-800\">\n                          <CheckCircle className=\"w-3 h-3 mr-1\" />\n                          Enviado\n                        </Badge>\n                      )}\n                      {file.error && (\n                        <Badge variant=\"destructive\">\n                          <AlertTriangle className=\"w-3 h-3 mr-1\" />\n                          Erro\n                        </Badge>\n                      )}\n                    </div>\n                    \n                    {/* Progress bar */}\n                    {file.uploadProgress && (\n                      <div className=\"mt-2\">\n                        <div className=\"flex justify-between text-sm text-gray-600 mb-1\">\n                          <span>{file.uploadProgress.message}</span>\n                          <span>{file.uploadProgress.percentage}%</span>\n                        </div>\n                        <Progress value={file.uploadProgress.percentage} className=\"h-2\" />\n                      </div>\n                    )}\n                    \n                    {/* Error message */}\n                    {file.error && (\n                      <p className=\"text-sm text-red-600 mt-1\">{file.error}</p>\n                    )}\n                  </div>\n                  \n                  {/* Actions */}\n                  <div className=\"flex items-center space-x-1\">\n                    {(file.preview || file.uploadedDocument) && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => previewFile(file)}\n                        title=\"Visualizar\"\n                      >\n                        <Eye className=\"w-4 h-4\" />\n                      </Button>\n                    )}\n                    \n                    {file.uploadedDocument && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => downloadFile(file)}\n                        title=\"Download\"\n                      >\n                        <Download className=\"w-4 h-4\" />\n                      </Button>\n                    )}\n                    \n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => removeFile(file.id)}\n                      title=\"Remover\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Erros de Upload */}\n      {uploadErrors.length > 0 && (\n        <Alert variant=\"destructive\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertDescription>\n            <div className=\"space-y-1\">\n              {uploadErrors.map((error, index) => (\n                <div key={index}>{error}</div>\n              ))}\n            </div>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Actions */}\n      <div className=\"flex justify-end space-x-3\">\n        {onClose && (\n          <Button variant=\"outline\" onClick={onClose}>\n            Cancelar\n          </Button>\n        )}\n        <Button\n          onClick={handleUpload}\n          disabled={isUploading || files.length === 0 || !classification}\n          className=\"min-w-[120px]\"\n        >\n          {isUploading ? 'Enviando...' : `Enviar ${files.length} arquivo${files.length !== 1 ? 's' : ''}`}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentUploader;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/contexts/AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[867,870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[867,870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[885,888],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[885,888],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":44,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'password' is defined but never used.","line":44,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":46,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'password' is defined but never used.","line":46,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":45},{"ruleId":"no-unused-vars","severity":2,"message":"'userData' is defined but never used.","line":46,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":69},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3267,3270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3267,3270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":157,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4389,4392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4389,4392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":198,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5560,5563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5560,5563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'createUserProfile'. Either include it or remove the dependency array.","line":274,"column":6,"nodeType":"ArrayExpression","endLine":274,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [createUserProfile]","fix":{"range":[7469,7471],"text":"[createUserProfile]"}}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":294,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":294,"endColumn":21}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * LicitaReview - Authentication Context\n * \n * Centralizes authentication logic using Firebase Auth and Firestore.\n * Provides user state management and authentication methods throughout the app.\n */\n\nimport React, { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { \n  User,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n  GoogleAuthProvider,\n  signInWithPopup,\n  updateProfile\n} from 'firebase/auth';\nimport { \n  doc, \n  setDoc, \n  getDoc, \n  serverTimestamp \n} from 'firebase/firestore';\nimport { auth, db } from '@/lib/firebase';\nimport { useToast } from '@/hooks/use-toast';\n\n// Types\ninterface UserProfile {\n  uid: string;\n  email: string;\n  displayName: string;\n  organizationName?: string;\n  cnpj?: string;\n  role: 'admin' | 'manager' | 'analyst' | 'user';\n  createdAt: any;\n  updatedAt: any;\n}\n\ninterface AuthContextType {\n  currentUser: User | null;\n  userProfile: UserProfile | null;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  loginWithGoogle: () => Promise<void>;\n  register: (email: string, password: string, userData: RegisterData) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\ninterface RegisterData {\n  displayName: string;\n  organizationName?: string;\n  cnpj?: string;\n}\n\n// Create Context\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\n// Google Auth Provider\nconst googleProvider = new GoogleAuthProvider();\ngoogleProvider.setCustomParameters({\n  prompt: 'select_account'\n});\n\n// AuthProvider Component\nexport const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const { toast } = useToast();\n\n  // Create user profile in Firestore\n  const createUserProfile = async (user: User, additionalData?: Partial<UserProfile>) => {\n    try {\n      const userRef = doc(db, 'users', user.uid);\n      const userSnap = await getDoc(userRef);\n\n      if (!userSnap.exists()) {\n        const { displayName, email } = user;\n        const userData: UserProfile = {\n          uid: user.uid,\n          email: email || '',\n          displayName: displayName || '',\n          role: 'user',\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp(),\n          ...additionalData\n        };\n\n        await setDoc(userRef, userData);\n        setUserProfile(userData);\n      } else {\n        setUserProfile(userSnap.data() as UserProfile);\n      }\n    } catch (error) {\n      console.error('Error creating user profile:', error);\n      toast({\n        title: 'Erro',\n        description: 'Erro ao criar perfil do usu√°rio',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  // Login with email and password\n  const login = async (email: string, password: string): Promise<void> => {\n    try {\n      setLoading(true);\n      const result = await signInWithEmailAndPassword(auth, email, password);\n      await createUserProfile(result.user);\n      \n      toast({\n        title: 'Sucesso',\n        description: 'Login realizado com sucesso!'\n      });\n    } catch (error: any) {\n      console.error('Login error:', error);\n      let errorMessage = 'Erro ao fazer login';\n      \n      switch (error.code) {\n        case 'auth/user-not-found':\n          errorMessage = 'Usu√°rio n√£o encontrado';\n          break;\n        case 'auth/wrong-password':\n          errorMessage = 'Senha incorreta';\n          break;\n        case 'auth/invalid-email':\n          errorMessage = 'Email inv√°lido';\n          break;\n        case 'auth/too-many-requests':\n          errorMessage = 'Muitas tentativas. Tente novamente mais tarde';\n          break;\n      }\n      \n      toast({\n        title: 'Erro',\n        description: errorMessage,\n        variant: 'destructive'\n      });\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Login with Google\n  const loginWithGoogle = async (): Promise<void> => {\n    try {\n      setLoading(true);\n      const result = await signInWithPopup(auth, googleProvider);\n      await createUserProfile(result.user);\n      \n      toast({\n        title: 'Sucesso',\n        description: 'Login com Google realizado com sucesso!'\n      });\n    } catch (error: any) {\n      console.error('Google login error:', error);\n      let errorMessage = 'Erro ao fazer login com Google';\n      \n      if (error.code === 'auth/popup-closed-by-user') {\n        errorMessage = 'Login cancelado pelo usu√°rio';\n      }\n      \n      toast({\n        title: 'Erro',\n        description: errorMessage,\n        variant: 'destructive'\n      });\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Register new user\n  const register = async (email: string, password: string, userData: RegisterData): Promise<void> => {\n    try {\n      setLoading(true);\n      const result = await createUserWithEmailAndPassword(auth, email, password);\n      \n      // Update display name in Firebase Auth\n      await updateProfile(result.user, {\n        displayName: userData.displayName\n      });\n\n      // Create user profile in Firestore\n      await createUserProfile(result.user, {\n        displayName: userData.displayName,\n        organizationName: userData.organizationName,\n        cnpj: userData.cnpj\n      });\n      \n      toast({\n        title: 'Sucesso',\n        description: 'Conta criada com sucesso!'\n      });\n    } catch (error: any) {\n      console.error('Registration error:', error);\n      let errorMessage = 'Erro ao criar conta';\n      \n      switch (error.code) {\n        case 'auth/email-already-in-use':\n          errorMessage = 'Este email j√° est√° em uso';\n          break;\n        case 'auth/invalid-email':\n          errorMessage = 'Email inv√°lido';\n          break;\n        case 'auth/weak-password':\n          errorMessage = 'Senha muito fraca. Use pelo menos 6 caracteres';\n          break;\n      }\n      \n      toast({\n        title: 'Erro',\n        description: errorMessage,\n        variant: 'destructive'\n      });\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Logout\n  const logout = async (): Promise<void> => {\n    try {\n      await signOut(auth);\n      setUserProfile(null);\n      \n      toast({\n        title: 'Sucesso',\n        description: 'Logout realizado com sucesso!'\n      });\n    } catch (error) {\n      console.error('Logout error:', error);\n      toast({\n        title: 'Erro',\n        description: 'Erro ao fazer logout',\n        variant: 'destructive'\n      });\n      throw error;\n    }\n  };\n\n  // Auth state listener\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      setCurrentUser(user);\n      \n      if (user) {\n        // Load user profile from Firestore\n        try {\n          const userRef = doc(db, 'users', user.uid);\n          const userSnap = await getDoc(userRef);\n          \n          if (userSnap.exists()) {\n            setUserProfile(userSnap.data() as UserProfile);\n          } else {\n            // Create profile if it doesn't exist\n            await createUserProfile(user);\n          }\n        } catch (error) {\n          console.error('Error loading user profile:', error);\n        }\n      } else {\n        setUserProfile(null);\n      }\n      \n      setLoading(false);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const value: AuthContextType = {\n    currentUser,\n    userProfile,\n    loading,\n    login,\n    loginWithGoogle,\n    register,\n    logout\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Custom hook to use auth context\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport default AuthContext;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/data/analysisRules.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/data/classification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/data/mockAnalysis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/examples/comissoes-firebase.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'deleteDoc' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteDoc' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'DocumentReference' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentReference' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2636,2639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2636,2639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isAdmin' is assigned a value but never used.","line":120,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":120,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAdmin' is assigned a value but never used.","line":120,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":151,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4440,4443],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4440,4443],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5805,5808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5805,5808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5855,5858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5855,5858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":197,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5904,5907],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5904,5907],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":324,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":324,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9617,9620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9617,9620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":362,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":362,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10683,10686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10683,10686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":384,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":384,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11430,11433],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11430,11433],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Exemplo de integra√ß√£o com Firebase para Comiss√µes\n// Este arquivo demonstra como interagir com o Firestore respeitando as regras de seguran√ßa\n\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  query,\n  where,\n  orderBy,\n  limit,\n  Timestamp,\n  DocumentReference,\n  QueryConstraint\n} from 'firebase/firestore';\nimport { User } from 'firebase/auth';\nimport { db } from '../lib/firebase'; // Assumindo que voc√™ tem a configura√ß√£o do Firebase\nimport { Comissao, MembroComissao, TipoComissao, StatusComissao, PapelMembro, CreateComissaoRequest } from '../types/comissao';\n\n/**\n * Servi√ßo para gerenciar comiss√µes no Firebase Firestore\n * Implementa as opera√ß√µes CRUD respeitando as regras de seguran√ßa\n */\nexport class ComissoesFirebaseService {\n  private readonly COLLECTION_NAME = 'comissoes';\n\n  /**\n   * Cria uma nova comiss√£o (apenas para administradores)\n   */\n  async criarComissao(\n    user: User,\n    dadosComissao: CreateComissaoRequest & { organizationId: string }\n  ): Promise<Comissao> {\n    try {\n      // Verificar se o usu√°rio √© administrador\n      const isAdmin = await this.isUserAdmin(user);\n      if (!isAdmin) {\n        throw new Error('Apenas administradores podem criar comiss√µes');\n      }\n\n      // Preparar dados com campos de auditoria\n      const agora = Timestamp.now();\n      const novaComissao = {\n        ...dadosComissao,\n        status: 'Ativa' as StatusComissao,\n        membros: [],\n        createdBy: user.uid,\n        createdAt: agora,\n        updatedAt: agora\n      };\n\n      // Validar dados\n      this.validarDadosComissao(novaComissao);\n\n      // Criar documento no Firestore\n      const docRef = await addDoc(collection(db, this.COLLECTION_NAME), {\n        ...novaComissao,\n        createdAt: agora,\n        updatedAt: agora\n      });\n      \n      return {\n        ...novaComissao,\n        id: docRef.id,\n        createdAt: agora.toDate(),\n        updatedAt: agora.toDate()\n      };\n    } catch (error) {\n      console.error('Erro ao criar comiss√£o:', error);\n      throw new Error(`Falha ao criar comiss√£o: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);\n    }\n  }\n\n  /**\n   * Busca uma comiss√£o por ID\n   */\n  async buscarComissaoPorId(user: User, comissaoId: string): Promise<Comissao | null> {\n    try {\n      const docRef = doc(db, this.COLLECTION_NAME, comissaoId);\n      const docSnap = await getDoc(docRef);\n\n      if (!docSnap.exists()) {\n        return null;\n      }\n\n      const dados = docSnap.data();\n      \n      // Verificar permiss√µes de leitura\n      const podeAcessar = await this.podeUsuarioLerComissao(user, dados as any);\n      if (!podeAcessar) {\n        throw new Error('Usu√°rio n√£o tem permiss√£o para acessar esta comiss√£o');\n      }\n\n      return this.converterDocumentoParaComissao(docSnap.id, dados);\n    } catch (error) {\n      console.error('Erro ao buscar comiss√£o:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Lista comiss√µes que o usu√°rio pode acessar\n   */\n  async listarComissoes(\n    user: User,\n    filtros?: {\n      tipo?: TipoComissao;\n      status?: StatusComissao;\n      limite?: number;\n    }\n  ): Promise<Comissao[]> {\n    try {\n      const constraints: QueryConstraint[] = [];\n\n      // Verificar se √© administrador\n      const isAdmin = await this.isUserAdmin(user);\n      \n      // Se n√£o for admin, filtrar apenas comiss√µes da organiza√ß√£o do usu√°rio\n      // Em um cen√°rio real, voc√™ implementaria l√≥gica para determinar a organiza√ß√£o do usu√°rio\n      // constraints.push(where('organizationId', '==', userOrganizationId));\n\n      // Aplicar filtros\n      if (filtros?.tipo) {\n        constraints.push(where('tipo', '==', filtros.tipo));\n      }\n      if (filtros?.status) {\n        constraints.push(where('status', '==', filtros.status));\n      }\n\n      // Ordenar por data de cria√ß√£o (mais recentes primeiro)\n      constraints.push(orderBy('createdAt', 'desc'));\n\n      // Limitar resultados\n      if (filtros?.limite) {\n        constraints.push(limit(filtros.limite));\n      }\n\n      const q = query(collection(db, this.COLLECTION_NAME), ...constraints);\n      const querySnapshot = await getDocs(q);\n\n      const comissoes: Comissao[] = [];\n      \n      for (const docSnap of querySnapshot.docs) {\n        const dados = docSnap.data();\n        \n        // Verificar permiss√µes de leitura para cada documento\n        const podeAcessar = await this.podeUsuarioLerComissao(user, dados as any);\n        if (podeAcessar) {\n          const comissao = this.converterDocumentoParaComissao(docSnap.id, dados);\n          comissoes.push(comissao);\n        }\n      }\n\n      return comissoes;\n    } catch (error) {\n      console.error('Erro ao listar comiss√µes:', error);\n      throw new Error(`Falha ao listar comiss√µes: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);\n    }\n  }\n\n  /**\n   * Atualiza uma comiss√£o existente\n   */\n  async atualizarComissao(\n    user: User,\n    comissaoId: string,\n    atualizacoes: Partial<Omit<Comissao, 'id' | 'criadoPor' | 'criadoEm'>>\n  ): Promise<Comissao> {\n    try {\n      // Buscar comiss√£o atual para verificar permiss√µes\n      const comissaoAtual = await this.buscarComissaoPorId(user, comissaoId);\n      if (!comissaoAtual) {\n        throw new Error('Comiss√£o n√£o encontrada');\n      }\n\n      // Verificar permiss√µes de escrita\n      const podeEditar = await this.podeUsuarioEditarComissao(user, comissaoAtual);\n      if (!podeEditar) {\n        throw new Error('Usu√°rio n√£o tem permiss√£o para editar esta comiss√£o');\n      }\n\n      // Preparar dados de atualiza√ß√£o\n      const agora = Timestamp.now();\n      const dadosAtualizacao = {\n        ...atualizacoes,\n        atualizadoPor: user.uid,\n        atualizadoEm: agora\n      };\n\n      // Remover campos protegidos\n      delete (dadosAtualizacao as any).criadoPor;\n      delete (dadosAtualizacao as any).criadoEm;\n      delete (dadosAtualizacao as any).id;\n\n      // Atualizar no Firestore\n      const docRef = doc(db, this.COLLECTION_NAME, comissaoId);\n      await updateDoc(docRef, dadosAtualizacao);\n\n      // Retornar comiss√£o atualizada\n      const comissaoAtualizada = await this.buscarComissaoPorId(user, comissaoId);\n      if (!comissaoAtualizada) {\n        throw new Error('Erro ao buscar comiss√£o atualizada');\n      }\n\n      return comissaoAtualizada;\n    } catch (error) {\n      console.error('Erro ao atualizar comiss√£o:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Adiciona um membro √† comiss√£o\n   */\n  async adicionarMembro(\n    user: User,\n    comissaoId: string,\n    dadosMembro: { servidorId: string; papel: PapelMembro; observacoes?: string }\n  ): Promise<void> {\n    try {\n      // Verificar permiss√µes\n      const comissao = await this.buscarComissaoPorId(user, comissaoId);\n      if (!comissao) {\n        throw new Error('Comiss√£o n√£o encontrada');\n      }\n\n      const podeEditar = await this.podeUsuarioEditarComissao(user, comissao);\n      if (!podeEditar) {\n        throw new Error('Usu√°rio n√£o tem permiss√£o para adicionar membros');\n      }\n\n      // Preparar dados do membro\n      const agora = Timestamp.now();\n      const novoMembro: MembroComissao = {\n        ...dadosMembro,\n        dataDeIngresso: agora.toDate(),\n        ativo: true\n      };\n\n      // Validar dados do membro\n      this.validarDadosMembro(novoMembro);\n\n      // Adicionar √† sub-cole√ß√£o\n      const membrosRef = collection(db, this.COLLECTION_NAME, comissaoId, 'membros');\n      await addDoc(membrosRef, {\n        ...novoMembro,\n        dataDeIngresso: agora\n      });\n\n      // Atualizar tamb√©m o array de membros da comiss√£o principal\n      const comissaoRef = doc(db, this.COLLECTION_NAME, comissaoId);\n      const membrosAtualizados = [...comissao.membros, novoMembro];\n\n      await updateDoc(comissaoRef, {\n        membros: membrosAtualizados,\n        updatedAt: agora\n      });\n    } catch (error) {\n      console.error('Erro ao adicionar membro:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Remove um membro da comiss√£o\n   */\n  async removerMembro(\n    user: User,\n    comissaoId: string,\n    usuarioId: string\n  ): Promise<void> {\n    try {\n      // Verificar permiss√µes\n      const comissao = await this.buscarComissaoPorId(user, comissaoId);\n      if (!comissao) {\n        throw new Error('Comiss√£o n√£o encontrada');\n      }\n\n      const podeEditar = await this.podeUsuarioEditarComissao(user, comissao);\n      if (!podeEditar) {\n        throw new Error('Usu√°rio n√£o tem permiss√£o para remover membros');\n      }\n\n      // Atualizar array de membros na comiss√£o principal\n      const membrosAtualizados = comissao.membros.filter(m => m.servidorId !== usuarioId);\n\n      const agora = Timestamp.now();\n      const comissaoRef = doc(db, this.COLLECTION_NAME, comissaoId);\n      await updateDoc(comissaoRef, {\n        membros: membrosAtualizados,\n        updatedAt: agora\n      });\n\n      // Nota: Em um cen√°rio real, voc√™ pode querer marcar o membro como inativo\n      // em vez de deletar completamente para manter o hist√≥rico\n    } catch (error) {\n      console.error('Erro ao remover membro:', error);\n      throw error;\n    }\n  }\n\n  // M√©todos auxiliares privados\n\n  /**\n   * Verifica se o usu√°rio √© administrador\n   */\n  private async isUserAdmin(user: User): Promise<boolean> {\n    try {\n      const tokenResult = await user.getIdTokenResult();\n      return tokenResult.claims.admin === true;\n    } catch (error) {\n      console.error('Erro ao verificar claims de admin:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Verifica se o usu√°rio pode ler uma comiss√£o\n   */\n  private async podeUsuarioLerComissao(user: User, comissao: any): Promise<boolean> {\n    // Administradores podem ler tudo\n    const isAdmin = await this.isUserAdmin(user);\n    if (isAdmin) {\n      return true;\n    }\n\n    // Membros da comiss√£o podem ler\n    if (comissao.membros && comissao.membros.some(m => m.servidorId === user.uid)) {\n      return true;\n    }\n\n    // Por padr√£o, usu√°rios autenticados podem ler comiss√µes da mesma organiza√ß√£o\n    return true;\n  }\n\n  /**\n   * Verifica se o usu√°rio pode editar uma comiss√£o\n   */\n  private async podeUsuarioEditarComissao(user: User, comissao: Comissao): Promise<boolean> {\n    // Administradores podem editar tudo\n    const isAdmin = await this.isUserAdmin(user);\n    if (isAdmin) {\n      return true;\n    }\n\n    // Presidente da comiss√£o pode editar\n    const membro = comissao.membros.find(m => m.servidorId === user.uid);\n    if (membro && membro.papel === 'Presidente' && membro.ativo) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Converte documento do Firestore para objeto Comissao\n   */\n  private converterDocumentoParaComissao(id: string, dados: any): Comissao {\n    return {\n      id,\n      organizationId: dados.organizationId,\n      nomeDaComissao: dados.nomeDaComissao,\n      tipo: dados.tipo,\n      status: dados.status,\n      dataDeCriacao: dados.dataDeCriacao?.toDate() || dados.dataDeCriacao,\n      dataDeEncerramento: dados.dataDeEncerramento?.toDate() || dados.dataDeEncerramento,\n      descricao: dados.descricao,\n      objetivo: dados.objetivo,\n      configuracoes: dados.configuracoes,\n      membros: dados.membros || [],\n      createdBy: dados.createdBy,\n      createdAt: dados.createdAt?.toDate() || dados.createdAt,\n      updatedAt: dados.updatedAt?.toDate() || dados.updatedAt\n    };\n  }\n\n  /**\n   * Valida dados de uma comiss√£o\n   */\n  private validarDadosComissao(comissao: any): void {\n    if (!comissao.nomeDaComissao || typeof comissao.nomeDaComissao !== 'string') {\n      throw new Error('Nome da comiss√£o √© obrigat√≥rio');\n    }\n    if (!comissao.tipo || !['Permanente', 'Temporaria'].includes(comissao.tipo)) {\n      throw new Error('Tipo da comiss√£o √© obrigat√≥rio e deve ser v√°lido');\n    }\n    if (!comissao.status || !['Ativa', 'Inativa', 'Suspensa', 'Encerrada'].includes(comissao.status)) {\n      throw new Error('Status da comiss√£o √© obrigat√≥rio e deve ser v√°lido');\n    }\n    if (!comissao.dataDeCriacao) {\n      throw new Error('Data de cria√ß√£o √© obrigat√≥ria');\n    }\n    if (!comissao.organizationId || typeof comissao.organizationId !== 'string') {\n      throw new Error('ID da organiza√ß√£o √© obrigat√≥rio');\n    }\n  }\n\n  /**\n   * Valida dados de um membro\n   */\n  private validarDadosMembro(membro: MembroComissao): void {\n    if (!membro.servidorId || typeof membro.servidorId !== 'string') {\n      throw new Error('ID do servidor √© obrigat√≥rio');\n    }\n    if (!membro.papel || !['Presidente', 'Vice-Presidente', 'Secretario', 'Membro', 'Suplente'].includes(membro.papel)) {\n      throw new Error('Papel do membro √© obrigat√≥rio e deve ser v√°lido');\n    }\n    if (!membro.dataDeIngresso) {\n      throw new Error('Data de ingresso √© obrigat√≥ria');\n    }\n  }\n}\n\n// Inst√¢ncia singleton do servi√ßo\nexport const comissoesFirebaseService = new ComissoesFirebaseService();\n\n// Hooks personalizados para React (opcional)\nexport const useComissoesFirebase = () => {\n  return {\n    criarComissao: comissoesFirebaseService.criarComissao.bind(comissoesFirebaseService),\n    buscarComissaoPorId: comissoesFirebaseService.buscarComissaoPorId.bind(comissoesFirebaseService),\n    listarComissoes: comissoesFirebaseService.listarComissoes.bind(comissoesFirebaseService),\n    atualizarComissao: comissoesFirebaseService.atualizarComissao.bind(comissoesFirebaseService),\n    adicionarMembro: comissoesFirebaseService.adicionarMembro.bind(comissoesFirebaseService),\n    removerMembro: comissoesFirebaseService.removerMembro.bind(comissoesFirebaseService)\n  };\n};\n\n// Exemplo de uso:\n/*\nimport { useAuth } from './hooks/useAuth';\nimport { useComissoesFirebase } from './examples/comissoes-firebase';\n\nfunction ExemploUso() {\n  const { user } = useAuth();\n  const { criarComissao, listarComissoes } = useComissoesFirebase();\n\n  const handleCriarComissao = async () => {\n    if (!user) return;\n\n    try {\n      const novaComissao = await criarComissao(user, {\n        nome: 'Comiss√£o de Licita√ß√µes',\n        tipo: 'PERMANENTE',\n        status: 'ATIVA',\n        dataInicio: new Date(),\n        membros: {},\n        configuracoes: {\n          publica: false,\n          permiteConvidados: true\n        }\n      });\n      console.log('Comiss√£o criada:', novaComissao);\n    } catch (error) {\n      console.error('Erro ao criar comiss√£o:', error);\n    }\n  };\n\n  const handleListarComissoes = async () => {\n    if (!user) return;\n\n    try {\n      const comissoes = await listarComissoes(user, {\n        status: 'ATIVA',\n        limite: 10\n      });\n      console.log('Comiss√µes encontradas:', comissoes);\n    } catch (error) {\n      console.error('Erro ao listar comiss√µes:', error);\n    }\n  };\n\n  return (\n    <div>\n      <button onClick={handleCriarComissao}>Criar Comiss√£o</button>\n      <button onClick={handleListarComissoes}>Listar Comiss√µes</button>\n    </div>\n  );\n}\n*/","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/use-toast.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":129,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useAdaptiveAnalysis.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AnalysisParameter' is defined but never used.","line":4,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalysisParameter' is defined but never used.","line":4,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[454,457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[454,457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[516,519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[516,519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1126,1129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1126,1129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1625,1628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1625,1628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1654,1657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1654,1657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1682,1685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1682,1685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":69,"column":48,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":54},{"ruleId":"no-unused-vars","severity":2,"message":"'addProgressUpdate' is assigned a value but never used.","line":265,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":265,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addProgressUpdate' is assigned a value but never used.","line":265,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":265,"endColumn":26},{"ruleId":"no-unused-vars","severity":2,"message":"'configId' is defined but never used.","line":332,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":332,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'configId' is defined but never used.","line":332,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":332,"endColumn":52},{"ruleId":"no-unreachable","severity":2,"message":"Unreachable code.","line":337,"column":21,"nodeType":"BlockStatement","messageId":"unreachableCode","endLine":340,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":346,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":346,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11306,11309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11306,11309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":347,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":347,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11331,11334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11331,11334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":348,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":348,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11374,11377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11374,11377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'orgId' is defined but never used.","line":364,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":364,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'orgId' is defined but never used.","line":364,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":364,"endColumn":53},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'progressIntervals.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'progressIntervals.current' to a variable inside the effect, and use that variable in the cleanup function.","line":413,"column":25,"nodeType":"Identifier","endLine":413,"endColumn":32}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useRef, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { AnalysisOrchestrator, ComprehensiveAnalysisResult } from '@/services/analysis';\nimport { OrganizationConfig, AnalysisParameter } from './useAnalysisConfig';\nimport { toast } from '@/hooks/use-toast';\n\nexport interface AdaptiveAnalysisRequest {\n  documentId: string;\n  text: string;\n  classification: any;\n  configId?: string;\n  customParameters?: Record<string, any>;\n  priority?: 'low' | 'normal' | 'high';\n  enableRealTime?: boolean;\n}\n\nexport interface AnalysisStatus {\n  id: string;\n  status: 'pending' | 'processing' | 'completed' | 'failed' | 'cancelled';\n  progress: number; // 0-100\n  currentStep: string;\n  estimatedTimeRemaining?: number; // segundos\n  startedAt: Date;\n  completedAt?: Date;\n  error?: string;\n}\n\nexport interface AnalysisProgress {\n  step: string;\n  progress: number;\n  details?: string;\n  timestamp: Date;\n}\n\nexport interface AdaptiveAnalysisResult extends ComprehensiveAnalysisResult {\n  configId?: string;\n  customParameters?: Record<string, any>;\n  baselineComparison?: {\n    baselineScore: number;\n    customScore: number;\n    improvement: number;\n    changedCategories: string[];\n  };\n  performanceMetrics?: {\n    processingTime: number;\n    cacheHits: number;\n    fallbackUsage: number;\n    memoryUsage: number;\n  };\n}\n\nexport interface AnalysisComparison {\n  baseline: ComprehensiveAnalysisResult;\n  custom: AdaptiveAnalysisResult;\n  differences: {\n    overallScore: number;\n    categoryScores: Record<string, number>;\n    newProblems: any[];\n    resolvedProblems: any[];\n    changedProblems: any[];\n  };\n}\n\nexport const useAdaptiveAnalysis = (organizationId: string) => {\n  const queryClient = useQueryClient();\n  const [activeAnalyses, setActiveAnalyses] = useState<Map<string, AnalysisStatus>>(new Map());\n  const [analysisProgress, setAnalysisProgress] = useState<Map<string, AnalysisProgress[]>>(new Map());\n  const orchestratorRef = useRef<AnalysisOrchestrator | null>(null);\n  const progressIntervals = useRef<Map<string, NodeJS.Timeout>>(new Map());\n\n  // Inicializar orquestrador\n  useEffect(() => {\n    if (!orchestratorRef.current) {\n      orchestratorRef.current = new AnalysisOrchestrator({\n        enableCache: true,\n        enableFallback: true,\n        enableParallelProcessing: true,\n        maxConcurrentAnalyses: 5,\n        timeout: 30000\n      });\n    }\n  }, []);\n\n  // Query para buscar an√°lises recentes\n  const {\n    data: recentAnalyses,\n    isLoading: isLoadingRecentAnalyses,\n    error: recentAnalysesError,\n    refetch: refetchRecentAnalyses\n  } = useQuery({\n    queryKey: ['recent-adaptive-analyses', organizationId],\n    queryFn: () => getRecentAnalyses(organizationId),\n    staleTime: 2 * 60 * 1000, // 2 minutos\n    enabled: !!organizationId\n  });\n\n  // Query para buscar an√°lise espec√≠fica\n  const getAnalysisById = useCallback((analysisId: string) => {\n    return queryClient.getQueryData(['adaptive-analysis', analysisId]) as AdaptiveAnalysisResult | undefined;\n  }, [queryClient]);\n\n  // Mutation para executar an√°lise adaptativa\n  const executeAnalysisMutation = useMutation({\n    mutationFn: async (request: AdaptiveAnalysisRequest): Promise<AdaptiveAnalysisResult> => {\n      if (!orchestratorRef.current) {\n        throw new Error('Orquestrador n√£o inicializado');\n      }\n\n      const analysisId = generateAnalysisId();\n      \n      // Criar status inicial\n      const initialStatus: AnalysisStatus = {\n        id: analysisId,\n        status: 'pending',\n        progress: 0,\n        currentStep: 'Iniciando an√°lise...',\n        startedAt: new Date()\n      };\n\n      setActiveAnalyses(prev => new Map(prev).set(analysisId, initialStatus));\n      setAnalysisProgress(prev => new Map(prev).set(analysisId, []));\n\n      try {\n        // Atualizar status para processando\n        updateAnalysisStatus(analysisId, {\n          status: 'processing',\n          currentStep: 'Configurando par√¢metros...',\n          progress: 10\n        });\n\n        // Aplicar configura√ß√£o personalizada se fornecida\n        let customParams = request.customParameters || {};\n        if (request.configId) {\n          const config = await getConfigById(request.configId);\n          if (config) {\n            customParams = mergeConfigParameters(config, customParams);\n          }\n        }\n\n        // Atualizar progresso\n        updateAnalysisStatus(analysisId, {\n          currentStep: 'Executando an√°lise estrutural...',\n          progress: 25\n        });\n\n        // Executar an√°lise com par√¢metros customizados\n        const result = await orchestratorRef.current.analyzeDocument(\n          request.text,\n          request.classification,\n          customParams\n        );\n\n        // Converter para resultado adaptativo\n        const adaptiveResult: AdaptiveAnalysisResult = {\n          ...result,\n          configId: request.configId,\n          customParameters: customParams,\n          performanceMetrics: {\n            processingTime: result.totalProcessingTime,\n            cacheHits: result.cacheStats.hits,\n            fallbackUsage: result.fallbackStats.totalFallbacks,\n            memoryUsage: Math.random() * 100 + 50 // Simulado\n          }\n        };\n\n        // Atualizar status para completado\n        updateAnalysisStatus(analysisId, {\n          status: 'completed',\n          progress: 100,\n          currentStep: 'An√°lise conclu√≠da',\n          completedAt: new Date()\n        });\n\n        // Salvar no cache\n        queryClient.setQueryData(['adaptive-analysis', analysisId], adaptiveResult);\n        queryClient.invalidateQueries({ queryKey: ['recent-adaptive-analyses', organizationId] });\n\n        return adaptiveResult;\n\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Erro desconhecido';\n        \n        updateAnalysisStatus(analysisId, {\n          status: 'failed',\n          currentStep: 'An√°lise falhou',\n          error: errorMessage,\n          completedAt: new Date()\n        });\n\n        throw error;\n      } finally {\n        // Limpar intervalos de progresso\n        const interval = progressIntervals.current.get(analysisId);\n        if (interval) {\n          clearInterval(interval);\n          progressIntervals.current.delete(analysisId);\n        }\n      }\n    },\n    onSuccess: (result, request) => {\n      toast({\n        title: 'An√°lise conclu√≠da',\n        description: `An√°lise do documento ${request.documentId} foi conclu√≠da com sucesso.`,\n        variant: 'default'\n      });\n    },\n    onError: (error: Error, request) => {\n      toast({\n        title: 'Erro na an√°lise',\n        description: `Falha ao analisar documento ${request.documentId}: ${error.message}`,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  // Mutation para cancelar an√°lise\n  const cancelAnalysisMutation = useMutation({\n    mutationFn: async (analysisId: string) => {\n      // Simular cancelamento (em produ√ß√£o, chamaria API para cancelar)\n      await new Promise(resolve => setTimeout(resolve, 500));\n      return analysisId;\n    },\n    onSuccess: (analysisId) => {\n      updateAnalysisStatus(analysisId, {\n        status: 'cancelled',\n        currentStep: 'An√°lise cancelada',\n        completedAt: new Date()\n      });\n\n      // Limpar intervalos\n      const interval = progressIntervals.current.get(analysisId);\n      if (interval) {\n        clearInterval(interval);\n        progressIntervals.current.delete(analysisId);\n      }\n\n      toast({\n        title: 'An√°lise cancelada',\n        description: 'An√°lise foi cancelada com sucesso.',\n        variant: 'default'\n      });\n    }\n  });\n\n  // Fun√ß√µes auxiliares\n  const executeAnalysis = useCallback(async (request: AdaptiveAnalysisRequest): Promise<AdaptiveAnalysisResult> => {\n    return executeAnalysisMutation.mutateAsync(request);\n  }, [executeAnalysisMutation]);\n\n  const cancelAnalysis = useCallback(async (analysisId: string): Promise<string> => {\n    return cancelAnalysisMutation.mutateAsync(analysisId);\n  }, [cancelAnalysisMutation]);\n\n  const updateAnalysisStatus = useCallback((analysisId: string, updates: Partial<AnalysisStatus>) => {\n    setActiveAnalyses(prev => {\n      const newMap = new Map(prev);\n      const current = newMap.get(analysisId);\n      if (current) {\n        newMap.set(analysisId, { ...current, ...updates });\n      }\n      return newMap;\n    });\n  }, []);\n\n  const addProgressUpdate = useCallback((analysisId: string, progress: AnalysisProgress) => {\n    setAnalysisProgress(prev => {\n      const newMap = new Map(prev);\n      const current = newMap.get(analysisId) || [];\n      newMap.set(analysisId, [...current, progress]);\n      return newMap;\n    });\n  }, []);\n\n  const startProgressTracking = useCallback((analysisId: string) => {\n    const interval = setInterval(() => {\n      setActiveAnalyses(prev => {\n        const newMap = new Map(prev);\n        const current = newMap.get(analysisId);\n        if (current && current.status === 'processing') {\n          // Simular progresso incremental\n          const newProgress = Math.min(current.progress + Math.random() * 5, 95);\n          const steps = [\n            'Analisando estrutura...',\n            'Verificando conformidade legal...',\n            'Avaliando clareza...',\n            'Validando normas ABNT...',\n            'Consolidando resultados...'\n          ];\n          \n          const stepIndex = Math.floor((newProgress / 100) * steps.length);\n          const currentStep = steps[Math.min(stepIndex, steps.length - 1)];\n          \n          newMap.set(analysisId, {\n            ...current,\n            progress: newProgress,\n            currentStep,\n            estimatedTimeRemaining: Math.max(0, Math.round((100 - newProgress) / 5))\n          });\n        }\n        return newMap;\n      });\n    }, 1000);\n\n    progressIntervals.current.set(analysisId, interval);\n  }, []);\n\n  const getAnalysisProgress = useCallback((analysisId: string): AnalysisProgress[] => {\n    return analysisProgress.get(analysisId) || [];\n  }, [analysisProgress]);\n\n  const getActiveAnalysisStatus = useCallback((analysisId: string): AnalysisStatus | undefined => {\n    return activeAnalyses.get(analysisId);\n  }, [activeAnalyses]);\n\n  const getAllActiveAnalyses = useCallback((): AnalysisStatus[] => {\n    return Array.from(activeAnalyses.values());\n  }, [activeAnalyses]);\n\n  const clearCompletedAnalyses = useCallback(() => {\n    setActiveAnalyses(prev => {\n      const newMap = new Map(prev);\n      for (const [id, status] of newMap.entries()) {\n        if (status.status === 'completed' || status.status === 'failed' || status.status === 'cancelled') {\n          newMap.delete(id);\n        }\n      }\n      return newMap;\n    });\n  }, []);\n\n  // Fun√ß√£o para buscar configura√ß√£o por ID\n  const getConfigById = useCallback(async (configId: string): Promise<OrganizationConfig | null> => {\n    try {\n      // Em produ√ß√£o, chamaria o servi√ßo de configura√ß√£o\n      // Por enquanto, retorna null\n      return null;\n    } catch (error) {\n      console.error('Erro ao buscar configura√ß√£o:', error);\n      return null;\n    }\n  }, []);\n\n  // Fun√ß√£o para mesclar par√¢metros de configura√ß√£o\n  const mergeConfigParameters = useCallback((\n    config: OrganizationConfig, \n    customParams: Record<string, any>\n  ): Record<string, any> => {\n    const merged: Record<string, any> = {};\n    \n    // Aplicar par√¢metros da configura√ß√£o\n    config.parameters.forEach(param => {\n      if (param.enabled) {\n        merged[param.name] = param.value;\n      }\n    });\n    \n    // Sobrescrever com par√¢metros customizados\n    Object.assign(merged, customParams);\n    \n    return merged;\n  }, []);\n\n  // Fun√ß√£o para buscar an√°lises recentes\n  const getRecentAnalyses = useCallback(async (orgId: string): Promise<AdaptiveAnalysisResult[]> => {\n    // Em produ√ß√£o, chamaria API para buscar an√°lises recentes\n    // Por enquanto, retorna array vazio\n    return [];\n  }, []);\n\n  // Fun√ß√£o para gerar ID √∫nico\n  const generateAnalysisId = useCallback((): string => {\n    return `analysis_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }, []);\n\n  // Fun√ß√£o para comparar com baseline\n  const compareWithBaseline = useCallback((\n    customResult: AdaptiveAnalysisResult,\n    baselineResult: ComprehensiveAnalysisResult\n  ): AnalysisComparison => {\n    const differences = {\n      overallScore: customResult.overallScore - baselineResult.overallScore,\n      categoryScores: {\n        structural: customResult.categoryResults.structural.score - baselineResult.categoryResults.structural.score,\n        legal: customResult.categoryResults.legal.score - baselineResult.categoryResults.legal.score,\n        clarity: customResult.categoryResults.clarity.score - baselineResult.categoryResults.clarity.score,\n        abnt: customResult.categoryResults.abnt.score - baselineResult.categoryResults.abnt.score\n      },\n      newProblems: customResult.problems.filter(p => \n        !baselineResult.problems.some(bp => bp.descricao === p.descricao)\n      ),\n      resolvedProblems: baselineResult.problems.filter(bp => \n        !customResult.problems.some(p => p.descricao === bp.descricao)\n      ),\n      changedProblems: customResult.problems.filter(p => \n        baselineResult.problems.some(bp => \n          bp.descricao === p.descricao && bp.gravidade !== p.gravidade\n        )\n      )\n    };\n\n    return {\n      baseline: baselineResult,\n      custom: customResult,\n      differences\n    };\n  }, []);\n\n  // Cleanup ao desmontar\n  useEffect(() => {\n    return () => {\n      // Limpar todos os intervalos\n      progressIntervals.current.forEach(interval => clearInterval(interval));\n      progressIntervals.current.clear();\n    };\n  }, []);\n\n  return {\n    // Data\n    recentAnalyses,\n    activeAnalyses: getAllActiveAnalyses(),\n    \n    // Loading states\n    isLoadingRecentAnalyses,\n    isExecuting: executeAnalysisMutation.isPending,\n    isCancelling: cancelAnalysisMutation.isPending,\n    \n    // Errors\n    recentAnalysesError,\n    executionError: executeAnalysisMutation.error,\n    \n    // Functions\n    executeAnalysis,\n    cancelAnalysis,\n    getAnalysisById,\n    getAnalysisProgress,\n    getActiveAnalysisStatus,\n    compareWithBaseline,\n    clearCompletedAnalyses,\n    startProgressTracking,\n    \n    // Utilities\n    refetchRecentAnalyses,\n    hasActiveAnalyses: activeAnalyses.size > 0,\n    totalActiveAnalyses: activeAnalyses.size,\n    totalRecentAnalyses: recentAnalyses?.length || 0\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useAnalysisConfig.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[485,488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[485,488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[506,509],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[506,509],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":151,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4631,4634],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4631,4634],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5558,5561],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5558,5561],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { AnalysisConfigService } from '@/services/AnalysisConfigService';\nimport { toast } from '@/hooks/use-toast';\n\nexport interface AnalysisParameter {\n  id: string;\n  name: string;\n  description: string;\n  category: 'structural' | 'legal' | 'clarity' | 'abnt' | 'general';\n  type: 'boolean' | 'number' | 'string' | 'select' | 'range';\n  value: any;\n  defaultValue: any;\n  options?: string[]; // Para tipo 'select'\n  min?: number; // Para tipo 'range'\n  max?: number; // Para tipo 'range'\n  step?: number; // Para tipo 'range'\n  required: boolean;\n  weight: number; // Peso na an√°lise (0-100)\n  enabled: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface AnalysisRule {\n  id: string;\n  name: string;\n  description: string;\n  category: 'structural' | 'legal' | 'clarity' | 'abnt' | 'general';\n  type: 'keyword_presence' | 'keyword_any' | 'pattern' | 'custom';\n  keywordsAll?: string[];\n  keywordsAny?: string[];\n  pattern?: string;\n  severity: 'baixa' | 'media' | 'alta' | 'critica';\n  suggestion: string;\n  enabled: boolean;\n  priority: number;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface OrganizationConfig {\n  id: string;\n  organizationId: string;\n  name: string;\n  description: string;\n  parameters: AnalysisParameter[];\n  rules: AnalysisRule[];\n  isDefault: boolean;\n  isActive: boolean;\n  version: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface ConfigTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: 'edital' | 'tr' | 'contrato' | 'projeto' | 'geral';\n  parameters: Partial<AnalysisParameter>[];\n  rules: Partial<AnalysisRule>[];\n  isPublic: boolean;\n  usageCount: number;\n  rating: number;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface AnalysisConfigFilters {\n  category?: string;\n  enabled?: boolean;\n  search?: string;\n  organizationId?: string;\n}\n\nexport const useAnalysisConfig = (organizationId: string) => {\n  const queryClient = useQueryClient();\n  const [filters, setFilters] = useState<AnalysisConfigFilters>({\n    organizationId,\n    enabled: true\n  });\n\n  // Query para buscar configura√ß√µes da organiza√ß√£o\n  const {\n    data: configs,\n    isLoading: isLoadingConfigs,\n    error: configsError,\n    refetch: refetchConfigs\n  } = useQuery({\n    queryKey: ['analysis-configs', organizationId, filters],\n    queryFn: () => AnalysisConfigService.getOrganizationConfigs(organizationId, filters),\n    staleTime: 5 * 60 * 1000, // 5 minutos\n    cacheTime: 30 * 60 * 1000, // 30 minutos\n    enabled: !!organizationId\n  });\n\n  // Query para buscar configura√ß√£o ativa\n  const {\n    data: activeConfig,\n    isLoading: isLoadingActiveConfig,\n    error: activeConfigError\n  } = useQuery({\n    queryKey: ['active-analysis-config', organizationId],\n    queryFn: () => AnalysisConfigService.getActiveConfig(organizationId),\n    staleTime: 2 * 60 * 1000, // 2 minutos\n    enabled: !!organizationId\n  });\n\n  // Query para buscar templates dispon√≠veis\n  const {\n    data: templates,\n    isLoading: isLoadingTemplates,\n    error: templatesError\n  } = useQuery({\n    queryKey: ['analysis-templates', filters.category],\n    queryFn: () => AnalysisConfigService.getTemplates(filters.category),\n    staleTime: 10 * 60 * 1000, // 10 minutos\n  });\n\n  // Mutation para criar nova configura√ß√£o\n  const createConfigMutation = useMutation({\n    mutationFn: (config: Omit<OrganizationConfig, 'id' | 'createdAt' | 'updatedAt'>) =>\n      AnalysisConfigService.createConfig(config),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['analysis-configs', organizationId] });\n      toast({\n        title: 'Configura√ß√£o criada',\n        description: 'Nova configura√ß√£o de an√°lise foi criada com sucesso.',\n        variant: 'default'\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Erro ao criar configura√ß√£o',\n        description: error.message,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  // Mutation para atualizar configura√ß√£o\n  const updateConfigMutation = useMutation({\n    mutationFn: ({ id, config }: { id: string; config: Partial<OrganizationConfig> }) =>\n      AnalysisConfigService.updateConfig(id, config),\n    onSuccess: (updatedConfig) => {\n      queryClient.invalidateQueries({ queryKey: ['analysis-configs', organizationId] });\n      queryClient.invalidateQueries({ queryKey: ['active-analysis-config', organizationId] });\n      \n      // Atualizar cache local\n      queryClient.setQueryData(['analysis-configs', organizationId, filters], (old: any) => {\n        if (!old) return old;\n        return old.map((c: OrganizationConfig) => \n          c.id === updatedConfig.id ? updatedConfig : c\n        );\n      });\n      \n      toast({\n        title: 'Configura√ß√£o atualizada',\n        description: 'Configura√ß√£o foi atualizada com sucesso.',\n        variant: 'default'\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Erro ao atualizar configura√ß√£o',\n        description: error.message,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  // Mutation para deletar configura√ß√£o\n  const deleteConfigMutation = useMutation({\n    mutationFn: (id: string) => AnalysisConfigService.deleteConfig(id),\n    onSuccess: (deletedId) => {\n      queryClient.invalidateQueries({ queryKey: ['analysis-configs', organizationId] });\n      \n      // Remover do cache local\n      queryClient.setQueryData(['analysis-configs', organizationId, filters], (old: any) => {\n        if (!old) return old;\n        return old.filter((c: OrganizationConfig) => c.id !== deletedId);\n      });\n      \n      toast({\n        title: 'Configura√ß√£o removida',\n        description: 'Configura√ß√£o foi removida com sucesso.',\n        variant: 'default'\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Erro ao remover configura√ß√£o',\n        description: error.message,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  // Mutation para ativar/desativar configura√ß√£o\n  const toggleConfigStatusMutation = useMutation({\n    mutationFn: ({ id, isActive }: { id: string; isActive: boolean }) =>\n      AnalysisConfigService.updateConfig(id, { isActive }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['analysis-configs', organizationId] });\n      queryClient.invalidateQueries({ queryKey: ['active-analysis-config', organizationId] });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Erro ao alterar status',\n        description: error.message,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  // Mutation para aplicar template\n  const applyTemplateMutation = useMutation({\n    mutationFn: ({ templateId, organizationId }: { templateId: string; organizationId: string }) =>\n      AnalysisConfigService.applyTemplate(templateId, organizationId),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['analysis-configs', organizationId] });\n      queryClient.invalidateQueries({ queryKey: ['active-analysis-config', organizationId] });\n      \n      toast({\n        title: 'Template aplicado',\n        description: 'Template foi aplicado com sucesso √† organiza√ß√£o.',\n        variant: 'default'\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Erro ao aplicar template',\n        description: error.message,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  // Mutation para duplicar configura√ß√£o\n  const duplicateConfigMutation = useMutation({\n    mutationFn: (id: string) => AnalysisConfigService.duplicateConfig(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['analysis-configs', organizationId] });\n      \n      toast({\n        title: 'Configura√ß√£o duplicada',\n        description: 'Configura√ß√£o foi duplicada com sucesso.',\n        variant: 'default'\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Erro ao duplicar configura√ß√£o',\n        description: error.message,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  // Fun√ß√µes auxiliares\n  const createConfig = useCallback((config: Omit<OrganizationConfig, 'id' | 'createdAt' | 'updatedAt'>) => {\n    return createConfigMutation.mutateAsync(config);\n  }, [createConfigMutation]);\n\n  const updateConfig = useCallback((id: string, config: Partial<OrganizationConfig>) => {\n    return updateConfigMutation.mutateAsync({ id, config });\n  }, [updateConfigMutation]);\n\n  const deleteConfig = useCallback((id: string) => {\n    return deleteConfigMutation.mutateAsync(id);\n  }, [deleteConfigMutation]);\n\n  const toggleConfigStatus = useCallback((id: string, isActive: boolean) => {\n    return toggleConfigStatusMutation.mutateAsync({ id, isActive });\n  }, [toggleConfigStatusMutation]);\n\n  const applyTemplate = useCallback((templateId: string) => {\n    return applyTemplateMutation.mutateAsync({ templateId, organizationId });\n  }, [applyTemplateMutation, organizationId]);\n\n  const duplicateConfig = useCallback((id: string) => {\n    return duplicateConfigMutation.mutateAsync(id);\n  }, [duplicateConfigMutation]);\n\n  const updateFilters = useCallback((newFilters: Partial<AnalysisConfigFilters>) => {\n    setFilters(prev => ({ ...prev, ...newFilters }));\n  }, []);\n\n  const resetFilters = useCallback(() => {\n    setFilters({ organizationId, enabled: true });\n  }, [organizationId]);\n\n  // Computed values\n  const enabledConfigs = configs?.filter(c => c.enabled) || [];\n  const disabledConfigs = configs?.filter(c => !c.enabled) || [];\n  const configsByCategory = configs?.reduce((acc, config) => {\n    config.parameters.forEach(param => {\n      if (!acc[param.category]) acc[param.category] = [];\n      acc[param.category].push(param);\n    });\n    return acc;\n  }, {} as Record<string, AnalysisParameter[]>) || {};\n\n  // Auto-sync com backend\n  useEffect(() => {\n    if (organizationId) {\n      const interval = setInterval(() => {\n        refetchConfigs();\n      }, 5 * 60 * 1000); // Sync a cada 5 minutos\n\n      return () => clearInterval(interval);\n    }\n  }, [organizationId, refetchConfigs]);\n\n  return {\n    // Data\n    configs,\n    activeConfig,\n    templates,\n    enabledConfigs,\n    disabledConfigs,\n    configsByCategory,\n    \n    // Loading states\n    isLoadingConfigs,\n    isLoadingActiveConfig,\n    isLoadingTemplates,\n    \n    // Errors\n    configsError,\n    activeConfigError,\n    templatesError,\n    \n    // Filters\n    filters,\n    updateFilters,\n    resetFilters,\n    \n    // Mutations\n    createConfig,\n    updateConfig,\n    deleteConfig,\n    toggleConfigStatus,\n    applyTemplate,\n    duplicateConfig,\n    \n    // Mutation states\n    isCreating: createConfigMutation.isPending,\n    isUpdating: updateConfigMutation.isPending,\n    isDeleting: deleteConfigMutation.isPending,\n    isToggling: toggleConfigStatusMutation.isPending,\n    isApplyingTemplate: applyTemplateMutation.isPending,\n    isDuplicating: duplicateConfigMutation.isPending,\n    \n    // Utilities\n    refetchConfigs,\n    hasActiveConfig: !!activeConfig,\n    totalConfigs: configs?.length || 0,\n    totalTemplates: templates?.length || 0\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useClassificationData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useComissoes.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ComissaoFilters' is defined but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ComissaoFilters' is defined but never used.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'options.filters'. Either include it or remove the dependency array.","line":47,"column":6,"nodeType":"ArrayExpression","endLine":56,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [options.organizationId, options.filters, options.pagination?.page, options.pagination?.limit]","fix":{"range":[1383,1622],"text":"[options.organizationId, options.filters, options.pagination?.page, options.pagination?.limit]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport {\n  Comissao,\n  ComissaoFilters,\n  ComissaoPagination,\n  CreateComissaoRequest,\n  UpdateComissaoRequest,\n  UseComissoesOptions,\n  UseComissoesReturn\n} from '../types/comissao';\nimport { comissoesService } from '../services/comissoesService';\n\nexport const useComissoes = (options: UseComissoesOptions): UseComissoesReturn => {\n  const [comissoes, setComissoes] = useState<Comissao[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [pagination, setPagination] = useState<ComissaoPagination>({\n    page: 1,\n    limit: 20,\n    total: 0,\n    totalPages: 0,\n    hasNext: false,\n    hasPrev: false\n  });\n\n  const fetchComissoes = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await comissoesService.list(\n        options.organizationId,\n        options.filters,\n        options.pagination?.page || 1,\n        options.pagination?.limit || 20\n      );\n      \n      setComissoes(response.data);\n      setPagination(response.pagination);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro ao carregar comiss√µes';\n      setError(errorMessage);\n      console.error('Erro ao buscar comiss√µes:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [\n    options.organizationId,\n    options.filters?.search,\n    options.filters?.tipo,\n    options.filters?.status,\n    options.filters?.sortBy,\n    options.filters?.sortOrder,\n    options.pagination?.page,\n    options.pagination?.limit\n  ]);\n\n  useEffect(() => {\n    fetchComissoes();\n  }, [fetchComissoes]);\n\n  const createComissao = useCallback(async (data: CreateComissaoRequest): Promise<Comissao> => {\n    try {\n      const novaComissao = await comissoesService.create(options.organizationId, data);\n      await fetchComissoes(); // Recarregar lista\n      return novaComissao;\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro ao criar comiss√£o';\n      setError(errorMessage);\n      throw err;\n    }\n  }, [options.organizationId, fetchComissoes]);\n\n  const updateComissao = useCallback(async (\n    id: string,\n    data: UpdateComissaoRequest\n  ): Promise<Comissao> => {\n    try {\n      const comissaoAtualizada = await comissoesService.update(options.organizationId, id, data);\n      await fetchComissoes(); // Recarregar lista\n      return comissaoAtualizada;\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro ao atualizar comiss√£o';\n      setError(errorMessage);\n      throw err;\n    }\n  }, [options.organizationId, fetchComissoes]);\n\n  const deleteComissao = useCallback(async (id: string): Promise<void> => {\n    try {\n      await comissoesService.delete(options.organizationId, id);\n      await fetchComissoes(); // Recarregar lista\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro ao excluir comiss√£o';\n      setError(errorMessage);\n      throw err;\n    }\n  }, [options.organizationId, fetchComissoes]);\n\n  const refetch = useCallback(async (): Promise<void> => {\n    await fetchComissoes();\n  }, [fetchComissoes]);\n\n  return {\n    comissoes,\n    loading,\n    error,\n    pagination,\n    createComissao,\n    updateComissao,\n    deleteComissao,\n    refetch\n  };\n};\n\nexport default useComissoes;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useDocumentAnalysis.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'documentId' is defined but never used.","line":41,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":37},{"ruleId":"no-unused-vars","severity":2,"message":"'documentId' is defined but never used.","line":42,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'documentId' is defined but never used.","line":43,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":37},{"ruleId":"no-unused-vars","severity":2,"message":"'analysisId' is defined but never used.","line":46,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'documentId' is defined but never used.","line":47,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'prefeituraId' is defined but never used.","line":48,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":50},{"ruleId":"no-unused-vars","severity":2,"message":"'analysis' is defined but never used.","line":51,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":57},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":56,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":31},{"ruleId":"no-unused-vars","severity":2,"message":"'documentId' is defined but never used.","line":57,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'file' is defined but never used.","line":67,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":39},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":67,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":74},{"ruleId":"no-unused-vars","severity":2,"message":"'files' is defined but never used.","line":68,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":31},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":68,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":66},{"ruleId":"no-unused-vars","severity":2,"message":"'documentId' is defined but never used.","line":69,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'analysisId' is defined but never used.","line":70,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'documentId' is defined but never used.","line":128,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":128,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'documentId' is defined but never used.","line":128,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":63},{"ruleId":"no-unused-vars","severity":2,"message":"'prefeituraId' is defined but never used.","line":150,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":150,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'prefeituraId' is defined but never used.","line":150,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":150,"endColumn":67},{"ruleId":"no-unused-vars","severity":2,"message":"'parametersService' is assigned a value but never used.","line":264,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'parametersService' is assigned a value but never used.","line":264,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":264,"endColumn":26},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":288,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":288,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'options' is defined but never used.","line":288,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":288,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":320,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":320,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'options' is defined but never used.","line":320,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":320,"endColumn":12}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useEffect } from 'react';\nimport { DocumentAnalysis, DocumentUpload } from '@/types/document';\nimport { DocumentService } from '@/services/documentService';\nimport { DocumentAnalysisService } from '@/services/documentAnalysisService';\nimport { ParametersService } from '@/services/parametersService';\n\ninterface UseDocumentAnalysisOptions {\n  autoRefresh?: boolean;\n  refreshInterval?: number;\n  useCloudRun?: boolean;\n  enableRealTimeProgress?: boolean;\n}\n\ninterface AnalysisProgress {\n  stage: 'uploading' | 'extracting' | 'analyzing' | 'validating' | 'completing';\n  progress: number;\n  message: string;\n  estimated_time?: number;\n}\n\ninterface AnalysisStatistics {\n  totalAnalyses: number;\n  averageScore: number;\n  scoreDistribution: Record<string, number>;\n  commonProblems: Array<{ type: string; count: number }>;\n  processingTimes: { average: number; min: number; max: number };\n}\n\ninterface AnalysisState {\n  analyses: DocumentAnalysis[];\n  currentAnalysis: DocumentAnalysis | null;\n  isLoading: boolean;\n  isAnalyzing: boolean;\n  error: string | null;\n  progress: AnalysisProgress | null;\n  statistics: AnalysisStatistics | null;\n}\n\ninterface UseDocumentAnalysisReturn extends AnalysisState {\n  // A√ß√µes de an√°lise\n  startAnalysis: (documentId: string) => Promise<void>;\n  cancelAnalysis: (documentId: string) => Promise<void>;\n  retryAnalysis: (documentId: string) => Promise<void>;\n  \n  // Busca e carregamento\n  loadAnalysis: (analysisId: string) => Promise<void>;\n  loadAnalysesByDocument: (documentId: string) => Promise<void>;\n  loadAnalysesByPrefeitura: (prefeituraId: string) => Promise<void>;\n  \n  // Gerenciamento de estado\n  setCurrentAnalysis: (analysis: DocumentAnalysis | null) => void;\n  clearError: () => void;\n  refresh: () => Promise<void>;\n  \n  // Utilit√°rios\n  getAnalysisById: (id: string) => DocumentAnalysis | undefined;\n  getLatestAnalysis: (documentId: string) => DocumentAnalysis | undefined;\n  getAnalysisStats: () => {\n    total: number;\n    completed: number;\n    inProgress: number;\n    failed: number;\n    averageScore: number;\n  };\n  \n  // Funcionalidades de alta prioridade\n  analyzeDocumentWithFile: (file: File, options?: Record<string, unknown>) => Promise<DocumentAnalysis | null>;\n  analyzeBatch: (files: File[], options?: Record<string, unknown>) => Promise<DocumentAnalysis[]>;\n  reanalyzeDocument: (documentId: string) => Promise<DocumentAnalysis | null>;\n  getAnalysisStatus: (analysisId: string) => Promise<{ status: string; progress?: number; message?: string }>;\n  loadStatistics: () => Promise<void>;\n  clearCache: () => Promise<void>;\n}\n\nexport const useDocumentAnalysis = (\n  options: UseDocumentAnalysisOptions = {}\n): UseDocumentAnalysisReturn => {\n  const { autoRefresh = false, refreshInterval = 30000 } = options;\n  \n  const [state, setState] = useState<AnalysisState>({\n    analyses: [],\n    currentAnalysis: null,\n    isLoading: false,\n    isAnalyzing: false,\n    error: null,\n    progress: null,\n    statistics: null\n  });\n\n  // DocumentService √© uma classe com m√©todos est√°ticos\n\n  // Atualizar estado\n  const updateState = useCallback((updates: Partial<AnalysisState>) => {\n    setState(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  // Limpar erro\n  const clearError = useCallback(() => {\n    updateState({ error: null });\n  }, [updateState]);\n\n  // Definir an√°lise atual\n  const setCurrentAnalysis = useCallback((analysis: DocumentAnalysis | null) => {\n    updateState({ currentAnalysis: analysis });\n  }, [updateState]);\n\n  // Carregar an√°lise por ID\n  const loadAnalysis = useCallback(async (analysisId: string) => {\n    try {\n      updateState({ isLoading: true, error: null });\n      \n      const analysis = await DocumentService.getAnalysisById(analysisId);\n      \n      updateState({\n        currentAnalysis: analysis,\n        isLoading: false\n      });\n    } catch (error) {\n      console.error('Erro ao carregar an√°lise:', error);\n      updateState({\n        error: error instanceof Error ? error.message : 'Erro ao carregar an√°lise',\n        isLoading: false\n      });\n    }\n  }, [updateState]);\n\n  // Carregar an√°lises por documento\n  const loadAnalysesByDocument = useCallback(async (documentId: string) => {\n    try {\n      updateState({ isLoading: true, error: null });\n      \n      // Simular busca de an√°lises por documento\n      // Em uma implementa√ß√£o real, isso seria uma chamada para o servi√ßo\n      const analyses: DocumentAnalysis[] = [];\n      \n      updateState({\n        analyses,\n        isLoading: false\n      });\n    } catch (error) {\n      console.error('Erro ao carregar an√°lises do documento:', error);\n      updateState({\n        error: error instanceof Error ? error.message : 'Erro ao carregar an√°lises',\n        isLoading: false\n      });\n    }\n  }, [updateState]);\n\n  // Carregar an√°lises por prefeitura\n  const loadAnalysesByPrefeitura = useCallback(async (prefeituraId: string) => {\n    try {\n      updateState({ isLoading: true, error: null });\n      \n      // Simular busca de an√°lises por prefeitura\n      const analyses: DocumentAnalysis[] = [];\n      \n      updateState({\n        analyses,\n        isLoading: false\n      });\n    } catch (error) {\n      console.error('Erro ao carregar an√°lises da prefeitura:', error);\n      updateState({\n        error: error instanceof Error ? error.message : 'Erro ao carregar an√°lises',\n        isLoading: false\n      });\n    }\n  }, [updateState]);\n\n  // Iniciar an√°lise\n  const startAnalysis = useCallback(async (documentId: string) => {\n    try {\n      updateState({ isAnalyzing: true, error: null });\n      \n      // Simular in√≠cio da an√°lise\n      // Em uma implementa√ß√£o real, isso seria uma chamada para o servi√ßo de an√°lise\n      console.log('Iniciando an√°lise do documento:', documentId);\n      \n      // A an√°lise ser√° processada em background\n      // O progresso ser√° acompanhado pelo componente AnalysisProgress\n      \n    } catch (error) {\n      console.error('Erro ao iniciar an√°lise:', error);\n      updateState({\n        error: error instanceof Error ? error.message : 'Erro ao iniciar an√°lise',\n        isAnalyzing: false\n      });\n    }\n  }, [updateState]);\n\n  // Cancelar an√°lise\n  const cancelAnalysis = useCallback(async (documentId: string) => {\n    try {\n      // Simular cancelamento da an√°lise\n      console.log('Cancelando an√°lise do documento:', documentId);\n      \n      updateState({ isAnalyzing: false });\n    } catch (error) {\n      console.error('Erro ao cancelar an√°lise:', error);\n      updateState({\n        error: error instanceof Error ? error.message : 'Erro ao cancelar an√°lise'\n      });\n    }\n  }, [updateState]);\n\n  // Tentar novamente an√°lise\n  const retryAnalysis = useCallback(async (documentId: string) => {\n    await startAnalysis(documentId);\n  }, [startAnalysis]);\n\n  // Atualizar dados\n  const refresh = useCallback(async () => {\n    if (state.currentAnalysis) {\n      await loadAnalysis(state.currentAnalysis.id);\n    }\n  }, [state.currentAnalysis, loadAnalysis]);\n\n  // Buscar an√°lise por ID\n  const getAnalysisById = useCallback((id: string) => {\n    return state.analyses.find(analysis => analysis.id === id);\n  }, [state.analyses]);\n\n  // Buscar an√°lise mais recente de um documento\n  const getLatestAnalysis = useCallback((documentId: string) => {\n    const documentAnalyses = state.analyses\n      .filter(analysis => analysis.documentoId === documentId)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n    \n    return documentAnalyses[0];\n  }, [state.analyses]);\n\n  // Calcular estat√≠sticas\n  const getAnalysisStats = useCallback(() => {\n    const total = state.analyses.length;\n    const completed = state.analyses.length; // Todas as an√°lises retornadas est√£o completas\n    const inProgress = state.isAnalyzing ? 1 : 0;\n    const failed = 0; // An√°lises com falha n√£o s√£o retornadas na lista\n    \n    const averageScore = total > 0 \n      ? state.analyses.reduce((sum, analysis) => sum + analysis.scoreConformidade, 0) / total\n      : 0;\n    \n    return {\n      total,\n      completed,\n      inProgress,\n      failed,\n      averageScore\n    };\n  }, [state.analyses, state.isAnalyzing]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (!autoRefresh) return;\n\n    const interval = setInterval(() => {\n      refresh();\n    }, refreshInterval);\n\n    return () => clearInterval(interval);\n  }, [autoRefresh, refreshInterval, refresh]);\n\n  // Funcionalidades de alta prioridade\n  const parametersService = new ParametersService();\n\n  const createDocumentFromFile = useCallback((file: File): DocumentUpload => {\n    return {\n      id: `doc_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      prefeituraId: 'mock_prefeitura',\n      nome: file.name,\n      tipo: file.name.toLowerCase().endsWith('.pdf') ? 'PDF' : 'DOCX',\n      classification: {\n        tipoObjeto: 'aquisicao',\n        modalidadePrincipal: 'processo_licitatorio',\n        subtipo: 'processo_licitatorio',\n        tipoDocumento: 'edital'\n      },\n      tamanho: file.size,\n      urlStorage: '',\n      status: 'processando',\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n  }, []);\n\n  const analyzeDocumentWithFile = useCallback(async (\n    file: File, \n    options?: Record<string, unknown>\n  ): Promise<DocumentAnalysis | null> => {\n    try {\n      setState(prev => ({ ...prev, isAnalyzing: true, error: null, progress: { stage: 'uploading', progress: 0, message: 'Preparando an√°lise...' } }));\n\n      const extractionResult = await DocumentAnalysisService.extractTextFromFile(file);\n      const document = createDocumentFromFile(file);\n\n      const analysis = await DocumentAnalysisService.analyzeDocumentRealTime(\n        document,\n        extractionResult.text,\n        (progress) => setState(prev => ({ ...prev, progress }))\n      );\n\n      setState(prev => ({\n        ...prev,\n        currentAnalysis: analysis,\n        analyses: [analysis, ...prev.analyses],\n        isAnalyzing: false,\n        progress: null\n      }));\n      \n      return analysis;\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro na an√°lise';\n      setState(prev => ({ ...prev, error: errorMessage, isAnalyzing: false, progress: null }));\n      return null;\n    }\n  }, [createDocumentFromFile]);\n\n  const analyzeBatch = useCallback(async (\n    files: File[], \n    options?: Record<string, unknown>\n  ): Promise<DocumentAnalysis[]> => {\n    if (files.length === 0) return [];\n\n    try {\n      setState(prev => ({ ...prev, isAnalyzing: true, error: null, progress: { stage: 'uploading', progress: 0, message: 'Preparando an√°lise em lote...' } }));\n\n      const documentsToAnalyze = [];\n      \n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        setState(prev => ({ ...prev, progress: {\n          stage: 'extracting',\n          progress: Math.round((i / files.length) * 50),\n          message: `Extraindo texto: ${file.name}...`\n        }}));\n\n        const extractionResult = await DocumentAnalysisService.extractTextFromFile(file);\n        const document = createDocumentFromFile(file);\n\n        documentsToAnalyze.push({ document, extractedText: extractionResult.text });\n      }\n\n      setState(prev => ({ ...prev, progress: { stage: 'analyzing', progress: 50, message: 'Executando an√°lise em lote...' } }));\n\n      const batchResults = await DocumentAnalysisService.analyzeBatch(documentsToAnalyze);\n      \n      setState(prev => ({\n        ...prev,\n        analyses: [...batchResults, ...prev.analyses],\n        isAnalyzing: false,\n        progress: null\n      }));\n      \n      return batchResults;\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro na an√°lise em lote';\n      setState(prev => ({ ...prev, error: errorMessage, isAnalyzing: false, progress: null }));\n      return [];\n    }\n  }, [createDocumentFromFile]);\n\n  const reanalyzeDocument = useCallback(async (\n    documentId: string\n  ): Promise<DocumentAnalysis | null> => {\n    try {\n      setState(prev => ({ ...prev, isAnalyzing: true, error: null }));\n      \n      const newAnalysis = await DocumentAnalysisService.reanalyzeDocument(documentId);\n      \n      setState(prev => ({\n        ...prev,\n        analyses: prev.analyses.map(analysis => \n          analysis.documentoId === documentId ? newAnalysis : analysis\n        ),\n        currentAnalysis: prev.currentAnalysis?.documentoId === documentId ? newAnalysis : prev.currentAnalysis,\n        isAnalyzing: false\n      }));\n      \n      return newAnalysis;\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro ao reprocessar';\n      setState(prev => ({ ...prev, error: errorMessage, isAnalyzing: false }));\n      return null;\n    }\n  }, []);\n\n  const getAnalysisStatus = useCallback(async (analysisId: string) => {\n    try {\n      return await DocumentAnalysisService.getAnalysisStatus(analysisId);\n    } catch (err) {\n      setState(prev => ({ ...prev, error: err instanceof Error ? err.message : 'Erro ao obter status' }));\n      throw err;\n    }\n  }, []);\n\n  const loadStatistics = useCallback(async () => {\n    try {\n      const stats = await DocumentAnalysisService.getAnalysisStatistics();\n      setState(prev => ({ ...prev, statistics: stats }));\n    } catch (err) {\n      console.error('Erro ao carregar estat√≠sticas:', err);\n    }\n  }, []);\n\n  const clearCache = useCallback(async () => {\n    try {\n      await DocumentAnalysisService.clearAnalysisCache();\n      await loadStatistics();\n    } catch (err) {\n      setState(prev => ({ ...prev, error: err instanceof Error ? err.message : 'Erro ao limpar cache' }));\n    }\n  }, [loadStatistics]);\n\n  return {\n    ...state,\n    startAnalysis,\n    cancelAnalysis,\n    retryAnalysis,\n    loadAnalysis,\n    loadAnalysesByDocument,\n    loadAnalysesByPrefeitura,\n    setCurrentAnalysis,\n    clearError,\n    refresh,\n    getAnalysisById,\n    getLatestAnalysis,\n    getAnalysisStats,\n    analyzeDocumentWithFile,\n    analyzeBatch,\n    reanalyzeDocument,\n    getAnalysisStatus,\n    loadStatistics,\n    clearCache\n  };\n};\n\nexport default useDocumentAnalysis;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useDocumentUpload.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'document' is defined but never used.","line":17,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'errorMessage' is defined but never used.","line":18,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'file' is defined but never used.","line":18,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":52},{"ruleId":"no-unused-vars","severity":2,"message":"'uploadQueue' is assigned a value but never used.","line":30,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uploadQueue' is assigned a value but never used.","line":30,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'uploadPromises' is assigned a value but never used.","line":148,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":148,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uploadPromises' is assigned a value but never used.","line":148,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":148,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":160,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":160,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":160,"endColumn":44}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\nimport { DocumentService, UploadProgress } from '@/services/documentService';\nimport { DocumentClassification, DocumentUpload } from '@/types/document';\nimport { useToast } from '@/components/ui/use-toast';\n\nexport interface FileUploadState {\n  id: string;\n  file: File;\n  progress?: UploadProgress;\n  uploadedDocument?: DocumentUpload;\n  error?: string;\n  status: 'pending' | 'uploading' | 'completed' | 'error';\n}\n\nexport interface UseDocumentUploadOptions {\n  prefeituraId: string;\n  onUploadSuccess?: (document: DocumentUpload) => void;\n  onUploadError?: (errorMessage: string, file: File) => void;\n  maxConcurrentUploads?: number;\n}\n\nexport const useDocumentUpload = ({\n  prefeituraId,\n  onUploadSuccess,\n  onUploadError,\n  maxConcurrentUploads = 3\n}: UseDocumentUploadOptions) => {\n  const [files, setFiles] = useState<FileUploadState[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadQueue, setUploadQueue] = useState<string[]>([]);\n  const { toast } = useToast();\n\n  // Adicionar arquivos √† lista\n  const addFiles = useCallback((newFiles: File[]) => {\n    const fileStates: FileUploadState[] = newFiles.map(file => {\n      const validation = DocumentService.validateFile(file);\n      \n      return {\n        id: Math.random().toString(36).substr(2, 9),\n        file,\n        status: validation.valid ? 'pending' : 'error',\n        error: validation.valid ? undefined : validation.error\n      };\n    });\n\n    setFiles(prev => [...prev, ...fileStates]);\n    return fileStates;\n  }, []);\n\n  // Remover arquivo\n  const removeFile = useCallback((fileId: string) => {\n    setFiles(prev => prev.filter(f => f.id !== fileId));\n    setUploadQueue(prev => prev.filter(id => id !== fileId));\n  }, []);\n\n  // Limpar todos os arquivos\n  const clearFiles = useCallback(() => {\n    setFiles([]);\n    setUploadQueue([]);\n  }, []);\n\n  // Atualizar progresso do arquivo\n  const updateFileProgress = useCallback((fileId: string, progress: UploadProgress) => {\n    setFiles(prev => prev.map(f => \n      f.id === fileId \n        ? { ...f, progress, status: 'uploading' }\n        : f\n    ));\n  }, []);\n\n  // Marcar arquivo como conclu√≠do\n  const markFileCompleted = useCallback((fileId: string, document: DocumentUpload) => {\n    setFiles(prev => prev.map(f => \n      f.id === fileId \n        ? { ...f, uploadedDocument: document, status: 'completed', progress: undefined }\n        : f\n    ));\n  }, []);\n\n  // Marcar arquivo com erro\n  const markFileError = useCallback((fileId: string, error: string) => {\n    setFiles(prev => prev.map(f => \n      f.id === fileId \n        ? { ...f, error, status: 'error', progress: undefined }\n        : f\n    ));\n  }, []);\n\n  // Upload de um arquivo espec√≠fico\n  const uploadSingleFile = useCallback(async (\n    fileState: FileUploadState,\n    classification: DocumentClassification,\n    description?: string\n  ) => {\n    try {\n      const document = await DocumentService.uploadDocument(\n        fileState.file,\n        prefeituraId,\n        classification,\n        description,\n        (progress) => updateFileProgress(fileState.id, progress)\n      );\n\n      markFileCompleted(fileState.id, document);\n      onUploadSuccess?.(document);\n      \n      toast({\n        title: 'Sucesso',\n        description: `${fileState.file.name} enviado com sucesso!`\n      });\n\n      return document;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Erro desconhecido';\n      markFileError(fileState.id, errorMessage);\n      onUploadError?.(errorMessage, fileState.file);\n      \n      toast({\n        title: 'Erro no Upload',\n        description: `Falha ao enviar ${fileState.file.name}: ${errorMessage}`,\n        variant: 'destructive'\n      });\n      \n      throw error;\n    }\n  }, [prefeituraId, updateFileProgress, markFileCompleted, markFileError, onUploadSuccess, onUploadError, toast]);\n\n  // Upload de m√∫ltiplos arquivos com controle de concorr√™ncia\n  const uploadFiles = useCallback(async (\n    classification: DocumentClassification,\n    description?: string\n  ) => {\n    const pendingFiles = files.filter(f => f.status === 'pending');\n    \n    if (pendingFiles.length === 0) {\n      toast({\n        title: 'Aviso',\n        description: 'Nenhum arquivo pendente para upload',\n        variant: 'default'\n      });\n      return;\n    }\n\n    setIsUploading(true);\n    \n    try {\n      // Upload com controle de concorr√™ncia\n      const uploadPromises: Promise<DocumentUpload>[] = [];\n      const results: DocumentUpload[] = [];\n      \n      for (let i = 0; i < pendingFiles.length; i += maxConcurrentUploads) {\n        const batch = pendingFiles.slice(i, i + maxConcurrentUploads);\n        \n        const batchPromises = batch.map(fileState => \n          uploadSingleFile(fileState, classification, description)\n        );\n        \n        const batchResults = await Promise.allSettled(batchPromises);\n        \n        batchResults.forEach((result, index) => {\n          if (result.status === 'fulfilled') {\n            results.push(result.value);\n          }\n        });\n      }\n      \n      toast({\n        title: 'Upload Conclu√≠do',\n        description: `${results.length} de ${pendingFiles.length} arquivos enviados com sucesso`\n      });\n      \n      return results;\n    } finally {\n      setIsUploading(false);\n    }\n  }, [files, maxConcurrentUploads, uploadSingleFile, toast]);\n\n  // Retry upload de arquivo com erro\n  const retryUpload = useCallback(async (\n    fileId: string,\n    classification: DocumentClassification,\n    description?: string\n  ) => {\n    const fileState = files.find(f => f.id === fileId);\n    if (!fileState) return;\n\n    // Reset status\n    setFiles(prev => prev.map(f => \n      f.id === fileId \n        ? { ...f, status: 'pending', error: undefined, progress: undefined }\n        : f\n    ));\n\n    return uploadSingleFile(fileState, classification, description);\n  }, [files, uploadSingleFile]);\n\n  // Estat√≠sticas dos uploads\n  const stats = {\n    total: files.length,\n    pending: files.filter(f => f.status === 'pending').length,\n    uploading: files.filter(f => f.status === 'uploading').length,\n    completed: files.filter(f => f.status === 'completed').length,\n    errors: files.filter(f => f.status === 'error').length,\n    hasErrors: files.some(f => f.status === 'error'),\n    allCompleted: files.length > 0 && files.every(f => f.status === 'completed'),\n    canUpload: files.some(f => f.status === 'pending')\n  };\n\n  return {\n    files,\n    isUploading,\n    stats,\n    addFiles,\n    removeFile,\n    clearFiles,\n    uploadFiles,\n    uploadSingleFile,\n    retryUpload\n  };\n};\n\nexport default useDocumentUpload;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useErrorHandler.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":47,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback } from 'react';\nimport { useToast } from '@/hooks/use-toast';\nimport { monitoringService } from '@/services/monitoringService';\nimport { ErrorContext } from '@/types/error';\nimport { getErrorDisplayMessage } from '@/utils/errorUtils';\n\nexport function useErrorHandler() {\n  const { toast } = useToast();\n\n  const logError = useCallback((error: Error, context?: ErrorContext) => {\n    console.error('üö® Error logged via useErrorHandler:', error);\n    monitoringService.reportError(error, context);\n    \n    toast({\n      variant: \"destructive\",\n      title: \"Erro detectado\",\n      description: getErrorDisplayMessage(error),\n    });\n  }, [toast]);\n\n  const handleAsyncError = useCallback(<T>(\n    asyncOperation: () => Promise<T>,\n    context?: ErrorContext,\n    customErrorMessage?: string\n  ) => {\n    return async (): Promise<T | undefined> => {\n      try {\n        return await asyncOperation();\n      } catch (error) {\n        const errorInstance = error instanceof Error ? error : new Error(String(error));\n        \n        console.error('üö® Async error caught:', errorInstance);\n        monitoringService.reportError(errorInstance, context);\n        \n        toast({\n          variant: \"destructive\",\n          title: \"Erro na opera√ß√£o\",\n          description: customErrorMessage || getErrorDisplayMessage(errorInstance),\n        });\n        \n        return undefined;\n      }\n    };\n  }, [toast]);\n\n  const wrapAsync = useCallback(<TArgs extends unknown[], TReturn>(\n    fn: (...args: TArgs) => Promise<TReturn>,\n    context?: ErrorContext,\n    customErrorMessage?: string\n  ) => {\n    return async (...args: TArgs): Promise<TReturn | undefined> => {\n      try {\n        return await fn(...args);\n      } catch (error) {\n        const errorInstance = error instanceof Error ? error : new Error(String(error));\n        \n        console.error('üö® Wrapped async function error:', errorInstance);\n        monitoringService.reportError(errorInstance, {\n          ...context,\n          metadata: {\n            ...context?.metadata,\n            functionName: fn.name,\n            arguments: args,\n          },\n        });\n        \n        toast({\n          variant: \"destructive\",\n          title: \"Erro na opera√ß√£o\",\n          description: customErrorMessage || getErrorDisplayMessage(errorInstance),\n        });\n        \n        return undefined;\n      }\n    };\n  }, [toast]);\n\n  const reportManualError = useCallback((\n    message: string,\n    context?: ErrorContext,\n    severity: 'low' | 'medium' | 'high' | 'critical' = 'medium'\n  ) => {\n    const error = new Error(message);\n    error.name = 'ManualError';\n    \n    console.warn('üìù Manual error report:', { message, context, severity });\n    monitoringService.reportError(error, {\n      ...context,\n      metadata: {\n        ...context?.metadata,\n        isManual: true,\n        severity,\n      },\n    });\n    \n    toast({\n      variant: severity === 'critical' ? \"destructive\" : \"default\",\n      title: severity === 'critical' ? \"Erro cr√≠tico\" : \"Problema reportado\",\n      description: message,\n    });\n  }, [toast]);\n\n  return {\n    logError,\n    handleAsyncError,\n    wrapAsync,\n    reportManualError,\n  };\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useErrorReport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useMonitoring.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useSmartClassification.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ClassificationResult' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ClassificationResult' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[607,610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[607,610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[734,737],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[734,737],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'finalConfig' object makes the dependencies of useCallback Hook (at line 177) change on every render. To fix this, wrap the initialization of 'finalConfig' in its own useMemo() Hook.","line":75,"column":9,"nodeType":"VariableDeclarator","endLine":75,"endColumn":55},{"ruleId":"no-unused-vars","severity":2,"message":"'result' is defined but never used.","line":93,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":53},{"ruleId":"no-unused-vars","severity":2,"message":"'result' is defined but never used.","line":95,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":56},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4071,4074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4071,4074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\nimport { ClassificationResult } from '../types/document/classification';\nimport { DocumentType } from '../types/document/base';\n\n/**\n * Resultado da classifica√ß√£o inteligente\n */\nexport interface SmartClassificationResult {\n  /** Tipo de documento classificado */\n  documentType: DocumentType;\n  /** N√≠vel de confian√ßa da classifica√ß√£o (0-1) */\n  confidence: number;\n  /** Tipos alternativos sugeridos */\n  alternatives: Array<{\n    type: DocumentType;\n    confidence: number;\n  }>;\n  /** Features detectadas no documento */\n  featuresDetected: Record<string, any>;\n  /** Tempo de processamento em ms */\n  processingTime: number;\n  /** Metadados adicionais */\n  metadata: Record<string, any>;\n}\n\n/**\n * Estado do hook de classifica√ß√£o inteligente\n */\nexport interface SmartClassificationState {\n  /** Resultado da classifica√ß√£o */\n  result: SmartClassificationResult | null;\n  /** Indica se est√° processando */\n  isClassifying: boolean;\n  /** Erro durante a classifica√ß√£o */\n  error: string | null;\n  /** Indica se a classifica√ß√£o foi aplicada automaticamente */\n  autoApplied: boolean;\n}\n\n/**\n * Configura√ß√µes da classifica√ß√£o inteligente\n */\nexport interface SmartClassificationConfig {\n  /** Limite de confian√ßa para aplica√ß√£o autom√°tica */\n  autoApplyThreshold: number;\n  /** URL da API de classifica√ß√£o */\n  apiUrl: string;\n  /** Timeout da requisi√ß√£o em ms */\n  timeout: number;\n  /** Habilitar aplica√ß√£o autom√°tica */\n  enableAutoApply: boolean;\n}\n\n/**\n * Configura√ß√£o padr√£o\n */\nconst DEFAULT_CONFIG: SmartClassificationConfig = {\n  autoApplyThreshold: 0.8,\n  apiUrl: import.meta.env.VITE_DOCUMENT_ANALYZER_URL || 'http://localhost:8080',\n  timeout: 10000,\n  enableAutoApply: true,\n};\n\n/**\n * Hook para classifica√ß√£o inteligente de documentos\n * \n * Fornece funcionalidades para:\n * - Classifica√ß√£o autom√°tica baseada em ML\n * - Auto-sugest√£o de tipos de documento\n * - Indicador de confian√ßa\n * - Aplica√ß√£o autom√°tica para alta confian√ßa\n * - Override manual pelo usu√°rio\n */\nexport function useSmartClassification(config: Partial<SmartClassificationConfig> = {}) {\n  const finalConfig = { ...DEFAULT_CONFIG, ...config };\n  \n  const [state, setState] = useState<SmartClassificationState>({\n    result: null,\n    isClassifying: false,\n    error: null,\n    autoApplied: false,\n  });\n\n  /**\n   * Classifica um documento usando ML\n   */\n  const classifyDocument = useCallback(async (\n    content: string,\n    options: {\n      /** Aplicar automaticamente se confian√ßa for alta */\n      autoApply?: boolean;\n      /** Callback chamado quando classifica√ß√£o √© aplicada */\n      onApplied?: (result: SmartClassificationResult) => void;\n      /** Callback para override manual */\n      onSuggestion?: (result: SmartClassificationResult) => void;\n    } = {}\n  ): Promise<SmartClassificationResult | null> => {\n    const { autoApply = finalConfig.enableAutoApply, onApplied, onSuggestion } = options;\n    \n    setState(prev => ({\n      ...prev,\n      isClassifying: true,\n      error: null,\n      autoApplied: false,\n    }));\n\n    try {\n      // Fazer requisi√ß√£o para API de classifica√ß√£o\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), finalConfig.timeout);\n\n      const response = await fetch(`${finalConfig.apiUrl}/classify`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          content,\n          confidence_threshold: finalConfig.autoApplyThreshold,\n        }),\n        signal: controller.signal,\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        throw new Error(`Erro na classifica√ß√£o: ${response.status} ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      \n      // Mapear resposta da API para formato do hook\n      const result: SmartClassificationResult = {\n        documentType: data.document_type as DocumentType,\n        confidence: data.confidence,\n        alternatives: data.alternative_types?.map((alt: any) => ({\n          type: alt[0] as DocumentType,\n          confidence: alt[1],\n        })) || [],\n        featuresDetected: data.features_detected || {},\n        processingTime: data.processing_time * 1000, // Converter para ms\n        metadata: data.metadata || {},\n      };\n\n      // Verificar se deve aplicar automaticamente\n      const shouldAutoApply = autoApply && \n                             result.confidence >= finalConfig.autoApplyThreshold;\n\n      setState(prev => ({\n        ...prev,\n        result,\n        isClassifying: false,\n        autoApplied: shouldAutoApply,\n      }));\n\n      // Chamar callbacks apropriados\n      if (shouldAutoApply && onApplied) {\n        onApplied(result);\n      } else if (!shouldAutoApply && onSuggestion) {\n        onSuggestion(result);\n      }\n\n      return result;\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Erro desconhecido na classifica√ß√£o';\n      \n      setState(prev => ({\n        ...prev,\n        isClassifying: false,\n        error: errorMessage,\n      }));\n\n      console.error('Erro na classifica√ß√£o inteligente:', error);\n      return null;\n    }\n  }, [finalConfig]);\n\n  /**\n   * Classifica arquivo baseado no conte√∫do extra√≠do\n   */\n  const classifyFile = useCallback(async (\n    file: File,\n    extractedContent?: string,\n    options?: Parameters<typeof classifyDocument>[1]\n  ): Promise<SmartClassificationResult | null> => {\n    // Se n√£o tiver conte√∫do extra√≠do, tentar extrair do nome do arquivo\n    let content = extractedContent;\n    \n    if (!content) {\n      // Usar nome do arquivo e extens√£o como fallback\n      content = `${file.name} ${file.type}`;\n    }\n\n    return classifyDocument(content, options);\n  }, [classifyDocument]);\n\n  /**\n   * Aplica manualmente uma classifica√ß√£o\n   */\n  const applyClassification = useCallback((result: SmartClassificationResult) => {\n    setState(prev => ({\n      ...prev,\n      result,\n      autoApplied: false, // Manual application\n    }));\n  }, []);\n\n  /**\n   * Rejeita uma sugest√£o de classifica√ß√£o\n   */\n  const rejectSuggestion = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      result: null,\n      autoApplied: false,\n    }));\n  }, []);\n\n  /**\n   * Limpa o estado da classifica√ß√£o\n   */\n  const clearClassification = useCallback(() => {\n    setState({\n      result: null,\n      isClassifying: false,\n      error: null,\n      autoApplied: false,\n    });\n  }, []);\n\n  /**\n   * Verifica se a confian√ßa √© alta o suficiente para aplica√ß√£o autom√°tica\n   */\n  const isHighConfidence = useCallback((confidence: number) => {\n    return confidence >= finalConfig.autoApplyThreshold;\n  }, [finalConfig.autoApplyThreshold]);\n\n  /**\n   * Obt√©m cor do indicador de confian√ßa\n   */\n  const getConfidenceColor = useCallback((confidence: number) => {\n    if (confidence >= 0.8) return 'green';\n    if (confidence >= 0.6) return 'yellow';\n    if (confidence >= 0.4) return 'orange';\n    return 'red';\n  }, []);\n\n  /**\n   * Obt√©m texto descritivo da confian√ßa\n   */\n  const getConfidenceText = useCallback((confidence: number) => {\n    if (confidence >= 0.9) return 'Muito Alta';\n    if (confidence >= 0.8) return 'Alta';\n    if (confidence >= 0.6) return 'M√©dia';\n    if (confidence >= 0.4) return 'Baixa';\n    return 'Muito Baixa';\n  }, []);\n\n  return {\n    // Estado\n    ...state,\n    \n    // A√ß√µes\n    classifyDocument,\n    classifyFile,\n    applyClassification,\n    rejectSuggestion,\n    clearClassification,\n    \n    // Utilit√°rios\n    isHighConfidence,\n    getConfidenceColor,\n    getConfidenceText,\n    \n    // Configura√ß√£o\n    config: finalConfig,\n  };\n}\n\nexport default useSmartClassification;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useTemplateManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/hooks/useTranslation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/lib/firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/lib/supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/Comissoes.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'pagination' is assigned a value but never used.","line":32,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pagination' is assigned a value but never used.","line":32,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'updatedComissoes' is assigned a value but never used.","line":152,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":152,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updatedComissoes' is assigned a value but never used.","line":152,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":152,"endColumn":27}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Plus, Users, TrendingUp, Clock, CheckCircle } from 'lucide-react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '../components/ui/dialog';\nimport { Button } from '../components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';\nimport { Badge } from '../components/ui/badge';\nimport ComissoesTable from '../components/comissoes/ComissoesTable';\nimport ComissaoForm from '../components/comissoes/ComissaoForm';\nimport ComissaoDetails from '../components/comissoes/ComissaoDetails';\nimport { useComissoes } from '../hooks/useComissoes';\nimport {\n  Comissao,\n  ComissaoCreateRequest,\n  ComissaoUpdateRequest,\n  ComissaoFilters\n} from '../types/comissao';\nimport { useToast } from '../components/ui/use-toast';\n\n// Mock do organizationId - em um app real, isso viria do contexto de autentica√ß√£o\nconst ORGANIZATION_ID = 'org-123';\n\nconst Comissoes: React.FC = () => {\n  const {\n    comissoes,\n    loading,\n    error,\n    pagination,\n    filters,\n    setFilters,\n    fetchComissoes,\n    createComissao,\n    updateComissao,\n    deleteComissao\n  } = useComissoes(ORGANIZATION_ID);\n\n  const [showForm, setShowForm] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n  const [editingComissao, setEditingComissao] = useState<Comissao | null>(null);\n  const [selectedComissao, setSelectedComissao] = useState<Comissao | null>(null);\n  const { toast } = useToast();\n\n  // Carrega as comiss√µes na inicializa√ß√£o\n  useEffect(() => {\n    fetchComissoes();\n  }, [fetchComissoes]);\n\n  // Estat√≠sticas calculadas\n  const stats = {\n    total: comissoes.length,\n    ativas: comissoes.filter(c => c.status === 'Ativa').length,\n    temporarias: comissoes.filter(c => c.tipo === 'Temporaria').length,\n    membrosTotal: comissoes.reduce((acc, c) => acc + (c.membros?.filter(m => m.ativo).length || 0), 0)\n  };\n\n  const handleCreateComissao = async (data: ComissaoCreateRequest) => {\n    try {\n      await createComissao(data);\n      setShowForm(false);\n      toast({\n        title: \"Sucesso\",\n        description: \"Comiss√£o criada com sucesso\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao criar comiss√£o\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleUpdateComissao = async (data: ComissaoUpdateRequest) => {\n    if (!editingComissao) return;\n    \n    try {\n      const updated = await updateComissao(editingComissao.id, data);\n      setEditingComissao(null);\n      setShowForm(false);\n      \n      // Se a comiss√£o atualizada est√° sendo visualizada, atualiza os detalhes\n      if (selectedComissao && selectedComissao.id === editingComissao.id) {\n        setSelectedComissao(updated);\n      }\n      \n      toast({\n        title: \"Sucesso\",\n        description: \"Comiss√£o atualizada com sucesso\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao atualizar comiss√£o\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleDeleteComissao = async (id: string) => {\n    if (!confirm('Tem certeza que deseja excluir esta comiss√£o?')) {\n      return;\n    }\n    \n    try {\n      await deleteComissao(id);\n      \n      // Se a comiss√£o exclu√≠da estava sendo visualizada, fecha os detalhes\n      if (selectedComissao && selectedComissao.id === id) {\n        setSelectedComissao(null);\n        setShowDetails(false);\n      }\n      \n      toast({\n        title: \"Sucesso\",\n        description: \"Comiss√£o exclu√≠da com sucesso\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao excluir comiss√£o\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleViewComissao = (comissao: Comissao) => {\n    setSelectedComissao(comissao);\n    setShowDetails(true);\n  };\n\n  const handleEditComissao = (comissao: Comissao) => {\n    setEditingComissao(comissao);\n    setShowForm(true);\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingComissao(null);\n  };\n\n  const handleCloseDetails = () => {\n    setShowDetails(false);\n    setSelectedComissao(null);\n  };\n\n  const handleComissaoUpdate = (updatedComissao: Comissao) => {\n    // Atualiza a comiss√£o na lista local\n    const updatedComissoes = comissoes.map(c => \n      c.id === updatedComissao.id ? updatedComissao : c\n    );\n    // Note: Em um hook real, isso seria feito atrav√©s do estado do hook\n    // Aqui √© apenas para demonstrar a integra√ß√£o\n  };\n\n  const handleFiltersChange = (newFilters: ComissaoFilters) => {\n    setFilters(newFilters);\n  };\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-red-600\">Erro ao carregar comiss√µes</h1>\n          <p className=\"text-gray-600 mt-2\">{error}</p>\n          <Button onClick={fetchComissoes} className=\"mt-4\">\n            Tentar novamente\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Comiss√µes</h1>\n          <p className=\"text-gray-600 mt-2\">\n            Gerencie as comiss√µes da sua organiza√ß√£o\n          </p>\n        </div>\n        <Button onClick={() => setShowForm(true)}>\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Nova Comiss√£o\n        </Button>\n      </div>\n\n      {/* Estat√≠sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total de Comiss√µes</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.total}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Comiss√µes Ativas</CardTitle>\n            <CheckCircle className=\"h-4 w-4 text-green-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{stats.ativas}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Tempor√°rias</CardTitle>\n            <Clock className=\"h-4 w-4 text-purple-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-purple-600\">{stats.temporarias}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total de Membros</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-blue-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">{stats.membrosTotal}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Tabela de Comiss√µes */}\n      <ComissoesTable\n        comissoes={comissoes}\n        loading={loading}\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onView={handleViewComissao}\n        onEdit={handleEditComissao}\n        onDelete={handleDeleteComissao}\n      />\n\n      {/* Modal do Formul√°rio */}\n      <Dialog open={showForm} onOpenChange={handleCloseForm}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingComissao ? 'Editar Comiss√£o' : 'Nova Comiss√£o'}\n            </DialogTitle>\n          </DialogHeader>\n          <ComissaoForm\n            comissao={editingComissao}\n            onSubmit={editingComissao ? handleUpdateComissao : handleCreateComissao}\n            onCancel={handleCloseForm}\n          />\n        </DialogContent>\n      </Dialog>\n\n      {/* Modal de Detalhes */}\n      {showDetails && selectedComissao && (\n        <ComissaoDetails\n          comissao={selectedComissao}\n          organizationId={ORGANIZATION_ID}\n          onEdit={handleEditComissao}\n          onClose={handleCloseDetails}\n          onUpdate={handleComissaoUpdate}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Comissoes;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/ConfigurationPage.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loadConfig' is assigned a value but never used.","line":98,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadConfig' is assigned a value but never used.","line":98,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * P√°gina Principal de Configura√ß√£o - Fase 2 do Roadmap\n * \n * Esta p√°gina centraliza todas as configura√ß√µes avan√ßadas do sistema LicitaReview,\n * incluindo par√¢metros de an√°lise, regras personalizadas, templates e presets.\n * \n * Funcionalidades:\n * - Navega√ß√£o entre diferentes se√ß√µes de configura√ß√£o\n * - Indicadores de progresso e status\n * - Integra√ß√£o com motor de an√°lise adaptativo\n * - Gerenciamento de configura√ß√µes organizacionais\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { \n  Settings, \n  FileText, \n  Sliders, \n  Code, \n  Template, \n  Eye, \n  Save, \n  RefreshCw,\n  CheckCircle,\n  AlertCircle,\n  Info\n} from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\n// Importar componentes especializados (ser√£o criados nas pr√≥ximas etapas)\nimport { DocumentTypeSelector } from '@/components/configuration/DocumentTypeSelector';\nimport { ParameterWeights } from '@/components/configuration/ParameterWeights';\nimport { CustomRulesEditor } from '@/components/configuration/CustomRulesEditor';\nimport { TemplateManager } from '@/components/configuration/TemplateManager';\nimport { ValidationPreview } from '@/components/configuration/ValidationPreview';\nimport { ConfigurationSidebar } from '@/components/configuration/ConfigurationSidebar';\nimport { ParameterPresets } from '@/components/configuration/ParameterPresets';\n\n// Hooks personalizados (ser√£o criados nas pr√≥ximas etapas)\nimport { useAnalysisConfig } from '@/hooks/useAnalysisConfig';\nimport { useAdaptiveAnalysis } from '@/hooks/useAdaptiveAnalysis';\n\ninterface ConfigurationStatus {\n  documentTypes: boolean;\n  parameterWeights: boolean;\n  customRules: boolean;\n  templates: boolean;\n  validation: boolean;\n}\n\ninterface ConfigurationProgress {\n  overall: number;\n  sections: {\n    [key: string]: number;\n  };\n}\n\nexport const ConfigurationPage: React.FC = () => {\n  const { toast } = useToast();\n  \n  // Estados para controle da configura√ß√£o\n  const [activeTab, setActiveTab] = useState('document-types');\n  const [isSaving, setIsSaving] = useState(false);\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n  \n  // Status de configura√ß√£o de cada se√ß√£o\n  const [configStatus, setConfigStatus] = useState<ConfigurationStatus>({\n    documentTypes: false,\n    parameterWeights: false,\n    customRules: false,\n    templates: false,\n    validation: false\n  });\n  \n  // Progresso da configura√ß√£o\n  const [configProgress, setConfigProgress] = useState<ConfigurationProgress>({\n    overall: 0,\n    sections: {\n      'document-types': 0,\n      'parameter-weights': 0,\n      'custom-rules': 0,\n      'templates': 0,\n      'validation': 0\n    }\n  });\n  \n  // Hooks personalizados para configura√ß√£o e an√°lise adaptativa\n  const {\n    config,\n    updateConfig,\n    saveConfig,\n    loadConfig,\n    isLoading: configLoading\n  } = useAnalysisConfig();\n  \n  const {\n    analyzeConfiguration,\n    getAdaptiveRecommendations,\n    isAnalyzing\n  } = useAdaptiveAnalysis();\n  \n  // Calcular progresso geral\n  useEffect(() => {\n    const sectionValues = Object.values(configProgress.sections);\n    const overall = sectionValues.reduce((sum, value) => sum + value, 0) / sectionValues.length;\n    setConfigProgress(prev => ({ ...prev, overall }));\n  }, [configProgress.sections]);\n  \n  // Verificar status de configura√ß√£o\n  useEffect(() => {\n    const checkConfigurationStatus = () => {\n      const status = {\n        documentTypes: configProgress.sections['document-types'] >= 80,\n        parameterWeights: configProgress.sections['parameter-weights'] >= 80,\n        customRules: configProgress.sections['custom-rules'] >= 60,\n        templates: configProgress.sections['templates'] >= 60,\n        validation: configProgress.sections['validation'] >= 70\n      };\n      setConfigStatus(status);\n    };\n    \n    checkConfigurationStatus();\n  }, [configProgress]);\n  \n  // Fun√ß√£o para salvar configura√ß√µes\n  const handleSaveConfiguration = async () => {\n    setIsSaving(true);\n    try {\n      await saveConfig();\n      setHasUnsavedChanges(false);\n      toast({\n        title: \"Configura√ß√£o Salva\",\n        description: \"Todas as configura√ß√µes foram salvas com sucesso.\",\n        variant: \"default\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro ao Salvar\",\n        description: \"N√£o foi poss√≠vel salvar as configura√ß√µes. Tente novamente.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  \n  // Fun√ß√£o para analisar configura√ß√£o atual\n  const handleAnalyzeConfiguration = async () => {\n    try {\n      const analysis = await analyzeConfiguration(config);\n      const recommendations = await getAdaptiveRecommendations(analysis);\n      \n      toast({\n        title: \"An√°lise Conclu√≠da\",\n        description: `Encontradas ${recommendations.length} recomenda√ß√µes de otimiza√ß√£o.`,\n        variant: \"default\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro na An√°lise\",\n        description: \"N√£o foi poss√≠vel analisar a configura√ß√£o atual.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  // Fun√ß√£o para atualizar progresso de uma se√ß√£o\n  const updateSectionProgress = (section: string, progress: number) => {\n    setConfigProgress(prev => ({\n      ...prev,\n      sections: {\n        ...prev.sections,\n        [section]: progress\n      }\n    }));\n    setHasUnsavedChanges(true);\n  };\n  \n  // Configura√ß√£o das abas\n  const tabsConfig = [\n    {\n      id: 'document-types',\n      label: 'Tipos de Documento',\n      icon: FileText,\n      description: 'Configure os tipos de documentos e suas caracter√≠sticas',\n      component: DocumentTypeSelector,\n      status: configStatus.documentTypes\n    },\n    {\n      id: 'parameter-weights',\n      label: 'Pesos dos Par√¢metros',\n      icon: Sliders,\n      description: 'Ajuste os pesos e import√¢ncia de cada par√¢metro de an√°lise',\n      component: ParameterWeights,\n      status: configStatus.parameterWeights\n    },\n    {\n      id: 'custom-rules',\n      label: 'Regras Personalizadas',\n      icon: Code,\n      description: 'Crie e edite regras de an√°lise espec√≠ficas da organiza√ß√£o',\n      component: CustomRulesEditor,\n      status: configStatus.customRules\n    },\n    {\n      id: 'templates',\n      label: 'Templates',\n      icon: Template,\n      description: 'Gerencie templates de documentos e configura√ß√µes',\n      component: TemplateManager,\n      status: configStatus.templates\n    },\n    {\n      id: 'validation',\n      label: 'Preview & Valida√ß√£o',\n      icon: Eye,\n      description: 'Visualize e valide as configura√ß√µes antes de aplicar',\n      component: ValidationPreview,\n      status: configStatus.validation\n    }\n  ];\n  \n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header da P√°gina */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 flex items-center gap-3\">\n                <Settings className=\"h-8 w-8 text-blue-600\" />\n                Configura√ß√£o Avan√ßada\n              </h1>\n              <p className=\"text-gray-600 mt-2\">\n                Configure par√¢metros de an√°lise, regras personalizadas e templates para otimizar a an√°lise de documentos\n              </p>\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={handleAnalyzeConfiguration}\n                disabled={isAnalyzing || configProgress.overall < 50}\n                className=\"flex items-center gap-2\"\n              >\n                <RefreshCw className={`h-4 w-4 ${isAnalyzing ? 'animate-spin' : ''}`} />\n                Analisar Configura√ß√£o\n              </Button>\n              \n              <Button\n                onClick={handleSaveConfiguration}\n                disabled={isSaving || !hasUnsavedChanges}\n                className=\"flex items-center gap-2\"\n              >\n                <Save className={`h-4 w-4 ${isSaving ? 'animate-spin' : ''}`} />\n                {isSaving ? 'Salvando...' : 'Salvar Configura√ß√£o'}\n              </Button>\n            </div>\n          </div>\n          \n          {/* Indicadores de Progresso */}\n          <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium text-gray-600\">Progresso Geral</span>\n                  <span className=\"text-sm font-bold text-gray-900\">{Math.round(configProgress.overall)}%</span>\n                </div>\n                <Progress value={configProgress.overall} className=\"h-2\" />\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm font-medium text-gray-600\">Status</span>\n                  <Badge variant={configProgress.overall >= 80 ? 'default' : configProgress.overall >= 50 ? 'secondary' : 'destructive'}>\n                    {configProgress.overall >= 80 ? 'Completo' : configProgress.overall >= 50 ? 'Em Progresso' : 'Iniciando'}\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm font-medium text-gray-600\">Altera√ß√µes</span>\n                  <Badge variant={hasUnsavedChanges ? 'destructive' : 'default'}>\n                    {hasUnsavedChanges ? 'N√£o Salvas' : 'Salvas'}\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n        \n        {/* Alertas e Notifica√ß√µes */}\n        {configProgress.overall < 30 && (\n          <Alert className=\"mb-6\">\n            <Info className=\"h-4 w-4\" />\n            <AlertDescription>\n              Configure pelo menos os tipos de documento e pesos dos par√¢metros para come√ßar a usar o sistema de an√°lise adaptativo.\n            </AlertDescription>\n          </Alert>\n        )}\n        \n        {hasUnsavedChanges && (\n          <Alert className=\"mb-6\" variant=\"destructive\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              Voc√™ tem altera√ß√µes n√£o salvas. Lembre-se de salvar suas configura√ß√µes antes de sair da p√°gina.\n            </AlertDescription>\n          </Alert>\n        )}\n        \n        {/* Layout Principal */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n          {/* Sidebar de Configura√ß√£o */}\n          <div className=\"lg:col-span-1\">\n            <ConfigurationSidebar\n              activeTab={activeTab}\n              onTabChange={setActiveTab}\n              configStatus={configStatus}\n              configProgress={configProgress}\n            />\n          </div>\n          \n          {/* Conte√∫do Principal */}\n          <div className=\"lg:col-span-3\">\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-5\">\n                {tabsConfig.map((tab) => {\n                  const Icon = tab.icon;\n                  return (\n                    <TabsTrigger\n                      key={tab.id}\n                      value={tab.id}\n                      className=\"flex items-center gap-2 text-xs\"\n                    >\n                      <Icon className=\"h-4 w-4\" />\n                      <span className=\"hidden sm:inline\">{tab.label}</span>\n                      {tab.status && <CheckCircle className=\"h-3 w-3 text-green-500\" />}\n                    </TabsTrigger>\n                  );\n                })}\n              </TabsList>\n              \n              {tabsConfig.map((tab) => {\n                const Component = tab.component;\n                return (\n                  <TabsContent key={tab.id} value={tab.id} className=\"mt-6\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle className=\"flex items-center gap-2\">\n                          <tab.icon className=\"h-5 w-5\" />\n                          {tab.label}\n                          {tab.status && <CheckCircle className=\"h-4 w-4 text-green-500\" />}\n                        </CardTitle>\n                        <CardDescription>{tab.description}</CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        <Component\n                          config={config}\n                          onConfigChange={updateConfig}\n                          onProgressChange={(progress: number) => updateSectionProgress(tab.id, progress)}\n                          isLoading={configLoading}\n                        />\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n                );\n              })}\n            </Tabs>\n          </div>\n        </div>\n        \n        {/* Se√ß√£o de Presets */}\n        <div className=\"mt-8\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Presets de Configura√ß√£o</CardTitle>\n              <CardDescription>\n                Use presets predefinidos para configurar rapidamente o sistema para diferentes tipos de organiza√ß√£o\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <ParameterPresets\n                onPresetApply={(preset) => {\n                  updateConfig(preset);\n                  setHasUnsavedChanges(true);\n                  toast({\n                    title: \"Preset Aplicado\",\n                    description: `Configura√ß√£o \"${preset.name}\" foi aplicada com sucesso.`,\n                    variant: \"default\"\n                  });\n                }}\n              />\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConfigurationPage;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/DashboardPage.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":2,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":2,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'CardHeader' is defined but never used.","line":2,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":2,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":39},{"ruleId":"no-unused-vars","severity":2,"message":"'CardTitle' is defined but never used.","line":2,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":2,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":50},{"ruleId":"no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'Activity' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":11}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  BarChart3,\n  TrendingUp,\n  FileText,\n  AlertTriangle,\n  Activity,\n  RefreshCw\n} from 'lucide-react';\n\n// Importar componentes do dashboard\nimport { MetricsCards } from '@/components/dashboard/MetricsCards';\nimport { TrendsChart } from '@/components/dashboard/TrendsChart';\nimport { DocumentsTable } from '@/components/dashboard/DocumentsTable';\nimport { IssuesBreakdown } from '@/components/dashboard/IssuesBreakdown';\nimport { PerformanceMetrics } from '@/components/dashboard/PerformanceMetrics';\nimport { QuickActions } from '@/components/dashboard/QuickActions';\n\n// Tipos de dados\ninterface DashboardMetrics {\n  totalDocuments: number;\n  averageScore: number;\n  averageProcessingTime: number;\n  successRate: number;\n  trends: {\n    documents: number;\n    score: number;\n    processingTime: number;\n    successRate: number;\n  };\n}\n\ninterface Document {\n  id: string;\n  name: string;\n  type: string;\n  status: 'completed' | 'processing' | 'failed';\n  score: number;\n  createdAt: Date;\n  processingTime: number;\n}\n\ninterface Issue {\n  id: string;\n  type: 'critical' | 'warning' | 'info';\n  category: string;\n  title: string;\n  description: string;\n  count: number;\n  percentage: number;\n  trend: 'up' | 'down' | 'stable';\n  trendValue: number;\n}\n\ninterface PerformanceMetric {\n  id: string;\n  name: string;\n  value: number;\n  unit: string;\n  target?: number;\n  status: 'good' | 'warning' | 'critical';\n  trend: 'up' | 'down' | 'stable';\n  trendValue: number;\n  description: string;\n}\n\ninterface SystemHealth {\n  cpu: number;\n  memory: number;\n  disk: number;\n  network: number;\n  uptime: number;\n  responseTime: number;\n}\n\nconst DashboardPage: React.FC = () => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\n  const [activeTab, setActiveTab] = useState('overview');\n\n  // Dados mock - em produ√ß√£o, estes viriam de APIs\n  const [metrics] = useState<DashboardMetrics>({\n    totalDocuments: 1247,\n    averageScore: 87.3,\n    averageProcessingTime: 2.4,\n    successRate: 94.2,\n    trends: {\n      documents: 12.5,\n      score: 3.2,\n      processingTime: -8.1,\n      successRate: 1.8\n    }\n  });\n\n  const [documents] = useState<Document[]>([\n    {\n      id: '1',\n      name: 'Edital_Licitacao_001_2024.pdf',\n      type: 'pdf',\n      status: 'completed',\n      score: 92.5,\n      createdAt: new Date('2024-01-15T10:30:00'),\n      processingTime: 1.8\n    },\n    {\n      id: '2',\n      name: 'Contrato_Servicos_TI.docx',\n      type: 'docx',\n      status: 'completed',\n      score: 88.7,\n      createdAt: new Date('2024-01-15T09:15:00'),\n      processingTime: 2.1\n    },\n    {\n      id: '3',\n      name: 'Planilha_Orcamento_2024.xlsx',\n      type: 'xlsx',\n      status: 'processing',\n      score: 0,\n      createdAt: new Date('2024-01-15T11:45:00'),\n      processingTime: 0\n    },\n    {\n      id: '4',\n      name: 'Edital_Obras_Publicas.pdf',\n      type: 'pdf',\n      status: 'failed',\n      score: 0,\n      createdAt: new Date('2024-01-15T08:20:00'),\n      processingTime: 0\n    },\n    {\n      id: '5',\n      name: 'Termo_Referencia_Consultoria.pdf',\n      type: 'pdf',\n      status: 'completed',\n      score: 95.2,\n      createdAt: new Date('2024-01-14T16:30:00'),\n      processingTime: 1.5\n    }\n  ]);\n\n  const [issues] = useState<Issue[]>([\n    {\n      id: '1',\n      type: 'critical',\n      category: 'Conformidade',\n      title: 'Cl√°usulas Obrigat√≥rias Ausentes',\n      description: 'Documentos sem cl√°usulas obrigat√≥rias de sustentabilidade',\n      count: 23,\n      percentage: 18.4,\n      trend: 'down',\n      trendValue: 5.2\n    },\n    {\n      id: '2',\n      type: 'warning',\n      category: 'Prazos',\n      title: 'Prazos Inadequados',\n      description: 'Prazos de entrega muito curtos para o escopo',\n      count: 45,\n      percentage: 36.1,\n      trend: 'up',\n      trendValue: 2.8\n    },\n    {\n      id: '3',\n      type: 'warning',\n      category: 'Documenta√ß√£o',\n      title: 'Documentos Incompletos',\n      description: 'Faltam anexos ou documentos complementares',\n      count: 31,\n      percentage: 24.9,\n      trend: 'stable',\n      trendValue: 0\n    },\n    {\n      id: '4',\n      type: 'info',\n      category: 'Qualidade',\n      title: 'Crit√©rios de Avalia√ß√£o Vagos',\n      description: 'Crit√©rios de avalia√ß√£o pouco espec√≠ficos',\n      count: 67,\n      percentage: 53.7,\n      trend: 'down',\n      trendValue: 8.3\n    }\n  ]);\n\n  const [performanceMetrics] = useState<PerformanceMetric[]>([\n    {\n      id: '1',\n      name: 'Tempo de Processamento',\n      value: 2.4,\n      unit: 's',\n      target: 3.0,\n      status: 'good',\n      trend: 'down',\n      trendValue: 8.1,\n      description: 'Tempo m√©dio para processar um documento'\n    },\n    {\n      id: '2',\n      name: 'Taxa de Sucesso',\n      value: 94.2,\n      unit: '%',\n      target: 95.0,\n      status: 'warning',\n      trend: 'up',\n      trendValue: 1.8,\n      description: 'Percentual de documentos processados com sucesso'\n    },\n    {\n      id: '3',\n      name: 'Throughput',\n      value: 156,\n      unit: 'req/min',\n      target: 200,\n      status: 'good',\n      trend: 'up',\n      trendValue: 12.5,\n      description: 'Documentos processados por minuto'\n    },\n    {\n      id: '4',\n      name: 'Uso de Mem√≥ria',\n      value: 2.1,\n      unit: 'GB',\n      target: 4.0,\n      status: 'good',\n      trend: 'stable',\n      trendValue: 0,\n      description: 'Consumo m√©dio de mem√≥ria do sistema'\n    }\n  ]);\n\n  const [systemHealth] = useState<SystemHealth>({\n    cpu: 45.2,\n    memory: 67.8,\n    disk: 23.4,\n    network: 12.1,\n    uptime: 168.5,\n    responseTime: 89\n  });\n\n  // Dados para gr√°ficos de tend√™ncia\n  const trendsData = {\n    documents: [\n      { name: 'Jan', value: 1120, processed: 1050, failed: 70 },\n      { name: 'Fev', value: 1180, processed: 1125, failed: 55 },\n      { name: 'Mar', value: 1247, processed: 1175, failed: 72 },\n      { name: 'Abr', value: 1320, processed: 1248, failed: 72 },\n      { name: 'Mai', value: 1285, processed: 1210, failed: 75 },\n      { name: 'Jun', value: 1350, processed: 1275, failed: 75 }\n    ],\n    processing: [\n      { name: 'Jan', avgTime: 2.8, maxTime: 5.2, minTime: 1.1 },\n      { name: 'Fev', avgTime: 2.6, maxTime: 4.8, minTime: 1.0 },\n      { name: 'Mar', avgTime: 2.4, maxTime: 4.5, minTime: 0.9 },\n      { name: 'Abr', avgTime: 2.3, maxTime: 4.2, minTime: 0.8 },\n      { name: 'Mai', avgTime: 2.2, maxTime: 4.0, minTime: 0.8 },\n      { name: 'Jun', avgTime: 2.1, maxTime: 3.8, minTime: 0.7 }\n    ],\n    scores: [\n      { name: 'Jan', avgScore: 84.2, maxScore: 98.5, minScore: 65.3 },\n      { name: 'Fev', avgScore: 85.1, maxScore: 97.8, minScore: 68.2 },\n      { name: 'Mar', avgScore: 86.5, maxScore: 98.2, minScore: 70.1 },\n      { name: 'Abr', avgScore: 87.3, maxScore: 98.7, minScore: 72.4 },\n      { name: 'Mai', avgScore: 88.1, maxScore: 99.1, minScore: 74.2 },\n      { name: 'Jun', avgScore: 87.9, maxScore: 98.9, minScore: 73.8 }\n    ]\n  };\n\n  useEffect(() => {\n    // Simular carregamento inicial\n    const timer = setTimeout(() => {\n      setIsLoading(false);\n    }, 1500);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    // Simular atualiza√ß√£o de dados\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    setLastUpdated(new Date());\n    setIsRefreshing(false);\n  };\n\n  const handleUploadDocument = () => {\n    console.log('Upload documento');\n    // Implementar navega√ß√£o para upload\n  };\n\n  const handleViewReports = () => {\n    console.log('Ver relat√≥rios');\n    // Implementar navega√ß√£o para relat√≥rios\n  };\n\n  const handleViewDocument = (document: Document) => {\n    console.log('Visualizar documento:', document.id);\n    // Implementar visualiza√ß√£o de documento\n  };\n\n  const handleDownloadDocument = (document: Document) => {\n    console.log('Download documento:', document.id);\n    // Implementar download de documento\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Carregando Dashboard</h2>\n          <p className=\"text-gray-600\">Preparando suas m√©tricas e an√°lises...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <BarChart3 className=\"w-8 h-8 text-blue-600\" />\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Dashboard Analytics</h1>\n                <p className=\"text-sm text-gray-600\">\n                  √öltima atualiza√ß√£o: {lastUpdated.toLocaleString('pt-BR')}\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-3\">\n              <Badge variant=\"outline\" className=\"text-green-600 border-green-600\">\n                <div className=\"w-2 h-2 bg-green-600 rounded-full mr-2\"></div>\n                Sistema Online\n              </Badge>\n              \n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                onClick={handleRefresh}\n                disabled={isRefreshing}\n              >\n                <RefreshCw className={`w-4 h-4 mr-2 ${isRefreshing ? 'animate-spin' : ''}`} />\n                {isRefreshing ? 'Atualizando...' : 'Atualizar'}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"overview\">Vis√£o Geral</TabsTrigger>\n            <TabsTrigger value=\"documents\">Documentos</TabsTrigger>\n            <TabsTrigger value=\"issues\">Problemas</TabsTrigger>\n            <TabsTrigger value=\"performance\">Performance</TabsTrigger>\n          </TabsList>\n\n          {/* Vis√£o Geral */}\n          <TabsContent value=\"overview\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n              {/* M√©tricas Principais */}\n              <div className=\"lg:col-span-3\">\n                <MetricsCards metrics={metrics} />\n              </div>\n              \n              {/* A√ß√µes R√°pidas */}\n              <div className=\"lg:col-span-1\">\n                <QuickActions\n                  onUploadDocument={handleUploadDocument}\n                  onViewReports={handleViewReports}\n                  onRefreshData={handleRefresh}\n                  isRefreshing={isRefreshing}\n                  pendingNotifications={3}\n                />\n              </div>\n            </div>\n            \n            {/* Gr√°ficos de Tend√™ncia */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <TrendsChart\n                data={trendsData.documents}\n                type=\"documents\"\n                title=\"Documentos Processados\"\n                description=\"Evolu√ß√£o mensal do processamento de documentos\"\n              />\n              \n              <TrendsChart\n                data={trendsData.scores}\n                type=\"scores\"\n                title=\"Scores de Qualidade\"\n                description=\"Evolu√ß√£o da qualidade dos documentos analisados\"\n              />\n            </div>\n            \n            {/* Documentos Recentes */}\n            <DocumentsTable\n              documents={documents}\n              onViewDocument={handleViewDocument}\n              onDownloadDocument={handleDownloadDocument}\n            />\n          </TabsContent>\n\n          {/* Documentos */}\n          <TabsContent value=\"documents\" className=\"space-y-6\">\n            <DocumentsTable\n              documents={documents}\n              showAll={true}\n              onViewDocument={handleViewDocument}\n              onDownloadDocument={handleDownloadDocument}\n            />\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <TrendsChart\n                data={trendsData.documents}\n                type=\"documents\"\n                title=\"Hist√≥rico de Processamento\"\n                description=\"Documentos processados, bem-sucedidos e com falha\"\n              />\n              \n              <TrendsChart\n                data={trendsData.processing}\n                type=\"processing\"\n                title=\"Tempo de Processamento\"\n                description=\"Evolu√ß√£o dos tempos de processamento\"\n              />\n            </div>\n          </TabsContent>\n\n          {/* Problemas */}\n          <TabsContent value=\"issues\" className=\"space-y-6\">\n            <IssuesBreakdown\n              issues={issues}\n              totalDocuments={metrics.totalDocuments}\n            />\n          </TabsContent>\n\n          {/* Performance */}\n          <TabsContent value=\"performance\" className=\"space-y-6\">\n            <PerformanceMetrics\n              metrics={performanceMetrics}\n              systemHealth={systemHealth}\n            />\n            \n            <TrendsChart\n              data={trendsData.processing}\n              type=\"processing\"\n              title=\"Performance do Sistema\"\n              description=\"M√©tricas de performance ao longo do tempo\"\n            />\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};\n\nexport default DashboardPage;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/DocumentAnalysisDemo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/DocumentAnalysisPage.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'Share' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Share' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":8},{"ruleId":"no-unused-vars","severity":2,"message":"'files' is assigned a value but never used.","line":39,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'files' is assigned a value but never used.","line":39,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'isUploading' is assigned a value but never used.","line":40,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isUploading' is assigned a value but never used.","line":40,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'addFiles' is assigned a value but never used.","line":42,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addFiles' is assigned a value but never used.","line":42,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'removeFile' is assigned a value but never used.","line":43,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'removeFile' is assigned a value but never used.","line":43,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'clearFiles' is assigned a value but never used.","line":44,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clearFiles' is assigned a value but never used.","line":44,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'analyses' is assigned a value but never used.","line":53,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'analyses' is assigned a value but never used.","line":53,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'analysisState' is assigned a value but never used.","line":54,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'analysisState' is assigned a value but never used.","line":54,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":35},{"ruleId":"no-unused-vars","severity":2,"message":"'isLoadingAnalysis' is assigned a value but never used.","line":55,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoadingAnalysis' is assigned a value but never used.","line":55,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":33},{"ruleId":"no-unused-vars","severity":2,"message":"'handleDocumentSelect' is assigned a value but never used.","line":110,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":110,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDocumentSelect' is assigned a value but never used.","line":110,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":110,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'handleViewAnalysis' is assigned a value but never used.","line":114,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":114,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleViewAnalysis' is assigned a value but never used.","line":114,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":114,"endColumn":27}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport {\n  Upload,\n  FileText,\n  BarChart3,\n  Settings,\n  History,\n  Plus,\n  RefreshCw,\n  Download,\n  Share\n} from 'lucide-react';\nimport { DocumentUploader } from '@/components/upload/DocumentUploader';\n// import { DocumentDashboard } from '@/components/upload/DocumentDashboard'; // TODO: Implementar\nimport { AnalysisResults } from '@/components/analysis/AnalysisResults';\nimport { AnalysisProgress } from '@/components/analysis/AnalysisProgress';\nimport { useDocumentUpload } from '@/hooks/useDocumentUpload';\nimport { useDocumentAnalysis } from '@/hooks/useDocumentAnalysis';\nimport { DocumentUpload, DocumentAnalysis } from '@/types/document';\n\ninterface DocumentAnalysisPageProps {\n  prefeituraId?: string;\n}\n\nexport const DocumentAnalysisPage: React.FC<DocumentAnalysisPageProps> = ({\n  prefeituraId = 'default-prefeitura'\n}) => {\n  const [activeTab, setActiveTab] = useState('upload');\n  const [selectedDocument, setSelectedDocument] = useState<DocumentUpload | null>(null);\n  const [showAnalysisProgress, setShowAnalysisProgress] = useState(false);\n  const [currentAnalysis, setCurrentAnalysis] = useState<DocumentAnalysis | null>(null);\n\n  // Hooks para gerenciar upload e an√°lise\n  const {\n    files,\n    isUploading,\n    stats: uploadStats,\n    addFiles,\n    removeFile,\n    clearFiles\n  } = useDocumentUpload({\n    prefeituraId,\n    onUploadSuccess: (document) => {\n      console.log('Upload conclu√≠do:', document);\n    }\n  });\n\n  const {\n    analyses,\n    currentAnalysis: analysisState,\n    isLoading: isLoadingAnalysis,\n    isAnalyzing,\n    error: analysisError,\n    startAnalysis,\n    cancelAnalysis,\n    loadAnalysesByPrefeitura,\n    setCurrentAnalysis: setAnalysisState,\n    clearError: clearAnalysisError,\n    getAnalysisStats\n  } = useDocumentAnalysis({ autoRefresh: true });\n\n  // Carregar an√°lises da prefeitura ao montar o componente\n  useEffect(() => {\n    if (prefeituraId) {\n      loadAnalysesByPrefeitura(prefeituraId);\n    }\n  }, [prefeituraId, loadAnalysesByPrefeitura]);\n\n  // Handlers para upload\n  const handleUploadSuccess = async (document: DocumentUpload) => {\n    console.log('Upload conclu√≠do:', document);\n    \n    // Mudar para a aba de documentos ap√≥s upload\n    setActiveTab('documents');\n    \n    // Iniciar an√°lise automaticamente\n    setSelectedDocument(document);\n    await handleStartAnalysis(document.id);\n  };\n\n  // Handlers para an√°lise\n  const handleStartAnalysis = async (documentId: string) => {\n    try {\n      setShowAnalysisProgress(true);\n      setActiveTab('analysis');\n      await startAnalysis(documentId);\n    } catch (error) {\n      console.error('Erro ao iniciar an√°lise:', error);\n    }\n  };\n\n  const handleCancelAnalysis = async () => {\n    if (selectedDocument) {\n      await cancelAnalysis(selectedDocument.id);\n      setShowAnalysisProgress(false);\n    }\n  };\n\n  const handleAnalysisComplete = (analysis: DocumentAnalysis) => {\n    setCurrentAnalysis(analysis);\n    setAnalysisState(analysis);\n    setShowAnalysisProgress(false);\n    setActiveTab('results');\n  };\n\n  const handleDocumentSelect = (document: DocumentUpload) => {\n    setSelectedDocument(document);\n  };\n\n  const handleViewAnalysis = (analysis: DocumentAnalysis) => {\n    setCurrentAnalysis(analysis);\n    setAnalysisState(analysis);\n    setActiveTab('results');\n  };\n\n  // Handlers para exporta√ß√£o e compartilhamento\n  const handleExportReport = () => {\n    if (currentAnalysis) {\n      // Implementar exporta√ß√£o de relat√≥rio\n      console.log('Exportando relat√≥rio:', currentAnalysis.id);\n    }\n  };\n\n  const handleShareResults = () => {\n    if (currentAnalysis) {\n      // Implementar compartilhamento de resultados\n      console.log('Compartilhando resultados:', currentAnalysis.id);\n    }\n  };\n\n  // Estat√≠sticas\n  const analysisStats = getAnalysisStats();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">\n                An√°lise de Documentos\n              </h1>\n              <p className=\"text-gray-600 mt-1\">\n                Upload, an√°lise e revis√£o de editais e documentos licitat√≥rios\n              </p>\n            </div>\n            \n            <div className=\"flex items-center space-x-3\">\n              <Button variant=\"outline\" onClick={() => loadAnalysesByPrefeitura(prefeituraId)}>\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\n                Atualizar\n              </Button>\n              \n              <Button onClick={() => setActiveTab('upload')}>\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Novo Documento\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Estat√≠sticas R√°pidas */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-600\">Total de An√°lises</p>\n                  <p className=\"text-2xl font-bold\">{analysisStats.total}</p>\n                </div>\n                <FileText className=\"w-8 h-8 text-blue-600\" />\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-600\">Conclu√≠das</p>\n                  <p className=\"text-2xl font-bold text-green-600\">{analysisStats.completed}</p>\n                </div>\n                <BarChart3 className=\"w-8 h-8 text-green-600\" />\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-600\">Em Progresso</p>\n                  <p className=\"text-2xl font-bold text-blue-600\">{analysisStats.inProgress}</p>\n                </div>\n                <Settings className=\"w-8 h-8 text-blue-600\" />\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-600\">Score M√©dio</p>\n                  <p className=\"text-2xl font-bold\">{analysisStats.averageScore.toFixed(1)}%</p>\n                </div>\n                <History className=\"w-8 h-8 text-purple-600\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Alertas de Erro */}\n        {uploadStats.hasErrors && (\n          <Alert className=\"mb-6 border-red-200 bg-red-50\">\n            <AlertDescription className=\"text-red-800\">\n              <strong>Erro no Upload:</strong> Alguns arquivos falharam no upload\n            </AlertDescription>\n          </Alert>\n        )}\n        \n        {analysisError && (\n          <Alert className=\"mb-6 border-red-200 bg-red-50\">\n            <AlertDescription className=\"text-red-800\">\n              <strong>Erro na An√°lise:</strong> {analysisError}\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={clearAnalysisError}\n                className=\"ml-2\"\n              >\n                Fechar\n              </Button>\n            </AlertDescription>\n          </Alert>\n        )}\n\n        {/* Conte√∫do Principal */}\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"upload\" className=\"flex items-center space-x-2\">\n              <Upload className=\"w-4 h-4\" />\n              <span>Upload</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"documents\" className=\"flex items-center space-x-2\">\n              <FileText className=\"w-4 h-4\" />\n              <span>Documentos</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"analysis\" className=\"flex items-center space-x-2\">\n              <Settings className=\"w-4 h-4\" />\n              <span>An√°lise</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"results\" className=\"flex items-center space-x-2\">\n              <BarChart3 className=\"w-4 h-4\" />\n              <span>Resultados</span>\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"upload\" className=\"mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Upload de Documentos</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <DocumentUploader\n                  prefeituraId={prefeituraId}\n                  onUploadSuccess={handleUploadSuccess}\n                  maxFiles={5}\n                />\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"documents\" className=\"mt-6\">\n            <Card>\n              <CardContent className=\"p-12 text-center\">\n                <FileText className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                  Dashboard de Documentos\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Funcionalidade em desenvolvimento. Use a aba \"Upload\" para enviar documentos.\n                </p>\n                <Button onClick={() => setActiveTab('upload')}>\n                  Fazer Upload\n                </Button>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"analysis\" className=\"mt-6\">\n            {showAnalysisProgress && selectedDocument ? (\n              <AnalysisProgress\n                documentId={selectedDocument.id}\n                isAnalyzing={isAnalyzing}\n                onCancel={handleCancelAnalysis}\n                onComplete={handleAnalysisComplete}\n              />\n            ) : (\n              <Card>\n                <CardContent className=\"p-12 text-center\">\n                  <Settings className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                    Nenhuma an√°lise em progresso\n                  </h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    Selecione um documento na aba \"Documentos\" para iniciar uma an√°lise.\n                  </p>\n                  <Button onClick={() => setActiveTab('documents')}>\n                    Ver Documentos\n                  </Button>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"results\" className=\"mt-6\">\n            {currentAnalysis ? (\n              <AnalysisResults\n                analysis={currentAnalysis}\n                onExportReport={handleExportReport}\n                onShareResults={handleShareResults}\n              />\n            ) : (\n              <Card>\n                <CardContent className=\"p-12 text-center\">\n                  <BarChart3 className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                    Nenhum resultado dispon√≠vel\n                  </h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    Complete uma an√°lise para visualizar os resultados detalhados.\n                  </p>\n                  <Button onClick={() => setActiveTab('upload')}>\n                    Fazer Upload\n                  </Button>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentAnalysisPage;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/DocumentReview.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'formatDate' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'specificFields' is assigned a value but never used.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'specificFields' is assigned a value but never used.","line":26,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'setSpecificFields' is assigned a value but never used.","line":26,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSpecificFields' is assigned a value but never used.","line":26,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":43}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\nimport { formatDate, formatFileSize } from \"@/utils/formatters\";\nimport { Upload, FileText, CheckCircle, Clock } from \"lucide-react\";\nimport { DocumentService } from \"@/services/documentService\";\nimport { DocumentAnalysisService } from \"@/services/documentAnalysisService\";\nimport { DocumentUpload, DocumentAnalysis, DocumentClassification, DocumentSpecificFields } from \"@/types/document\";\nimport { HierarchicalClassification } from \"@/components/HierarchicalClassification\";\nimport { ErrorBoundary } from \"@/components/ui/ErrorBoundary\";\nimport AnalysisCharts from '@/components/documents/AnalysisCharts';\nimport ProblemsList from '@/components/documents/ProblemsList';\n\n// Dados de mock movidos para src/data/mockAnalysis.ts\n\nexport default function DocumentReview() {\n  const [uploadedDocument, setUploadedDocument] = useState<DocumentUpload | null>(null);\n  const [analysis, setAnalysis] = useState<DocumentAnalysis | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [classification, setClassification] = useState<Partial<DocumentClassification>>({});\n  const [isClassificationValid, setIsClassificationValid] = useState(false);\n  const [specificFields, setSpecificFields] = useState<DocumentSpecificFields>({});\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    \n    if (!file) return;\n    \n    // Validation\n    if (!isClassificationValid) {\n      toast({\n        title: t('common.error'),\n        description: t('documents.completeClassification'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    // Validar tipo de arquivo\n    const allowedTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];\n    if (!allowedTypes.includes(file.type)) {\n      toast({\n        title: t('common.error'),\n        description: t('documents.invalidFileType'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Validar tamanho (m√°ximo 10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      toast({\n        title: t('common.error'),\n        description: t('documents.fileTooBig'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      // Simular upload (em produ√ß√£o usaria DocumentService.uploadDocument)\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      const mockDocument: DocumentUpload = {\n        id: 'doc_' + Date.now(),\n        prefeituraId: 'mombaca_001',\n        nome: file.name,\n        tipo: file.type.includes('pdf') ? 'PDF' : 'DOCX',\n        tamanho: file.size,\n        urlStorage: 'mock-url',\n        status: 'concluido',\n        classification: classification as DocumentClassification,\n        descricao: `${file.name} - ${formatFileSize(file.size)}`,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      setUploadedFile(file);\n      setUploadedDocument(mockDocument);\n      \n      toast({\n        title: t('common.success'),\n        description: t('documents.uploadSuccess'),\n      });\n    } catch (error) {\n      toast({\n        title: t('common.error'),\n        description: t('documents.uploadError'),\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [toast, classification, isClassificationValid, t]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf'],\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx']\n    },\n    multiple: false,\n    disabled: !isClassificationValid || loading\n  });\n\n  const handleAnalyze = async () => {\n    if (!uploadedDocument || !uploadedFile) {\n      toast({\n        title: t('common.error'),\n        description: t('documents.uploadError'),\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    setAnalyzing(true);\n    \n    try {\n      // Extract text from document (arquivo real)\n      const textResult = await DocumentAnalysisService.extractTextFromFile(uploadedFile);\n      \n      // Analyze document\n      const analysisResult = await DocumentAnalysisService.analyzeDocument(uploadedDocument, textResult.text);\n      \n      setAnalysis(analysisResult);\n      \n      // Update document status\n      await DocumentService.updateDocumentStatus(uploadedDocument.id, 'concluido');\n      setUploadedDocument(prev => prev ? {\n        ...prev,\n        status: 'concluido'\n      } : null);\n      \n      toast({\n        title: t('common.success'),\n        description: `An√°lise conclu√≠da! Score: ${analysisResult.scoreConformidade}%`,\n      });\n    } catch (error) {\n      console.error('Erro na an√°lise:', error);\n      toast({\n        title: t('common.error'),\n        description: t('documents.analysisError'),\n        variant: \"destructive\",\n      });\n    } finally {\n      setAnalyzing(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-government-50 to-government-100 p-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n            {t('documents.title')}\n          </h1>\n          <p className=\"text-lg text-gray-600\">\n            {t('documents.subtitle')}\n          </p>\n        </div>\n\n        <div className=\"grid lg:grid-cols-1 gap-8\">\n          {/* Document Classification Section */}\n          <ErrorBoundary\n            onError={(error, errorInfo) => {\n              console.error('Error in HierarchicalClassification:', error, errorInfo);\n              // Opcional: Enviar erro para servi√ßo de monitoramento\n              // reportError('HierarchicalClassification', error, errorInfo);\n            }}\n          >\n            <HierarchicalClassification\n              classification={classification}\n              onClassificationChange={setClassification}\n              onValidationChange={setIsClassificationValid}\n            />\n          </ErrorBoundary>\n\n          <div className=\"grid lg:grid-cols-2 gap-8\">\n            {/* Upload Section */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Upload className=\"h-5 w-5\" />\n                  {t('documents.uploadArea')}\n                </CardTitle>\n                <CardDescription>\n                  {t('documents.supportedFormats')}\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div\n                  {...getRootProps()}\n                  className={`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${\n                    isDragActive \n                      ? 'border-government-500 bg-government-50' \n                      : !isClassificationValid\n                      ? 'border-gray-200 bg-gray-50 cursor-not-allowed' \n                      : 'border-gray-300 hover:border-government-400'\n                  }`}\n                >\n                  <input {...getInputProps()} />\n                  <div className=\"space-y-4\">\n                    <div className=\"mx-auto h-12 w-12 text-gray-400\">\n                      <FileText className=\"h-full w-full\" />\n                    </div>\n                    {loading ? (\n                      <div className=\"space-y-2\">\n                        <Clock className=\"h-6 w-6 mx-auto animate-spin text-government-500\" />\n                        <p className=\"text-government-600 font-medium\">{t('common.loading')}</p>\n                      </div>\n                    ) : !isClassificationValid ? (\n                      <div className=\"space-y-2\">\n                        <p className=\"text-lg font-medium text-gray-400\">\n                          {t('documents.uploadArea')}\n                        </p>\n                        <p className=\"text-sm text-gray-400\">\n                          Complete a classifica√ß√£o hier√°rquica do documento primeiro\n                        </p>\n                      </div>\n                    ) : (\n                      <div className=\"space-y-2\">\n                        <p className=\"text-lg font-medium text-gray-900\">\n                          {isDragActive ? 'Solte o arquivo aqui' : t('documents.uploadArea')}\n                        </p>\n                        <p className=\"text-sm text-gray-500\">\n                          {t('documents.supportedFormats')}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {uploadedDocument && (\n                  <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg\">\n                    <div className=\"flex items-center gap-2\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                      <div>\n                        <p className=\"font-medium text-green-800\">{uploadedDocument.nome}</p>\n                        <p className=\"text-sm text-green-600\">\n                          {uploadedDocument.tipo} ‚Ä¢ {formatFileSize(uploadedDocument.tamanho)}\n                        </p>\n                      </div>\n                    </div>\n                    <Button \n                      onClick={handleAnalyze}\n                      disabled={analyzing}\n                      className=\"w-full mt-3\"\n                    >\n                      {analyzing ? t('documents.analyzing') : t('documents.analyze')}\n                    </Button>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Analysis Results */}\n            {analysis && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    üìä {t('documents.analysisResults')}\n                  </CardTitle>\n                  <CardDescription>\n                    {t('documents.conformityScore')}: {analysis.scoreConformidade}%\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-6\">\n                    {/* Score Overview */}\n                    <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"text-3xl font-bold text-government-600 mb-1\">\n                        {analysis.scoreConformidade}%\n                      </div>\n                      <div className=\"text-sm text-gray-600\">Conformidade Geral</div>\n                    </div>\n                    \n<AnalysisCharts />\n\n<ProblemsList problems={analysis.problemasEncontrados} />\n\n                    {/* Recommendations */}\n                    <div>\n                      <h4 className=\"font-semibold mb-2\">Recomenda√ß√µes</h4>\n                      <ul className=\"space-y-1\">\n                        {analysis.recomendacoes.map((rec, index) => (\n                          <li key={index} className=\"flex items-start gap-2 text-sm\">\n                            <span className=\"text-government-500 mt-1\">‚Ä¢</span>\n                            <span>{rec}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          {/* Document History */}\n          <Card className=\"mt-8\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                üìã {t('documents.documentHistory')}\n              </CardTitle>\n              <CardDescription>\n                {t('documents.historyDesc')}\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-gray-500\">\n                Em breve voc√™ poder√° visualizar o hist√≥rico completo de documentos analisados.\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/Index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/LandingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/QAClassification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/pages/SignUp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/scripts/debugFirebaseConnection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/scripts/migrateClassificationData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/scripts/testClassificationComponent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/scripts/verifyMigrationData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/AnalysisConfigService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'API_TIMEOUT' is assigned a value but never used.","line":51,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'API_TIMEOUT' is assigned a value but never used.","line":51,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'RequestInit' is not defined.","line":56,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'RequestInit' is not defined.","line":60,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":38}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { \n  AnalysisParameter, \n  AnalysisRule, \n  OrganizationConfig, \n  ConfigTemplate, \n  AnalysisConfigFilters \n} from '@/hooks/useAnalysisConfig';\n\n// Tipos para valida√ß√£o\nexport interface CreateConfigRequest {\n  organizationId: string;\n  name: string;\n  description: string;\n  parameters: Omit<AnalysisParameter, 'id' | 'createdAt' | 'updatedAt'>[];\n  rules: Omit<AnalysisRule, 'id' | 'createdAt' | 'updatedAt'>[];\n  isDefault?: boolean;\n  isActive?: boolean;\n  version?: string;\n}\n\nexport interface UpdateConfigRequest {\n  name?: string;\n  description?: string;\n  parameters?: Partial<AnalysisParameter>[];\n  rules?: Partial<AnalysisRule>[];\n  isDefault?: boolean;\n  isActive?: boolean;\n  version?: string;\n}\n\nexport interface BatchUpdateRequest {\n  configIds: string[];\n  updates: Partial<UpdateConfigRequest>;\n}\n\nexport interface ConfigValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\nexport interface ConfigImpactAnalysis {\n  affectedDocuments: number;\n  estimatedScoreChange: number;\n  riskLevel: 'baixa' | 'media' | 'alta';\n  recommendations: string[];\n}\n\n// Configura√ß√£o da API\nconst API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\nconst API_TIMEOUT = 30000; // 30 segundos\n\nclass AnalysisConfigService {\n  private async makeRequest<T>(\n    endpoint: string, \n    options: RequestInit = {}\n  ): Promise<T> {\n    const url = `${API_BASE_URL}${endpoint}`;\n    \n    const defaultOptions: RequestInit = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    };\n\n    const response = await fetch(url, {\n      ...defaultOptions,\n      ...options,\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  // CRUD Operations para Configura√ß√µes\n  async getOrganizationConfigs(\n    organizationId: string, \n    filters?: AnalysisConfigFilters\n  ): Promise<OrganizationConfig[]> {\n    const queryParams = new URLSearchParams();\n    queryParams.append('organizationId', organizationId);\n    \n    if (filters) {\n      Object.entries(filters).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, String(value));\n        }\n      });\n    }\n\n    return this.makeRequest<OrganizationConfig[]>(`/analysis-configs?${queryParams}`);\n  }\n\n  async getConfigById(id: string): Promise<OrganizationConfig> {\n    return this.makeRequest<OrganizationConfig>(`/analysis-configs/${id}`);\n  }\n\n  async getActiveConfig(organizationId: string): Promise<OrganizationConfig | null> {\n    try {\n      return await this.makeRequest<OrganizationConfig>(`/analysis-configs/active/${organizationId}`);\n    } catch (error) {\n      if (error instanceof Error && error.message.includes('404')) {\n        return null;\n      }\n      throw error;\n    }\n  }\n\n  async createConfig(config: CreateConfigRequest): Promise<OrganizationConfig> {\n    // Valida√ß√£o client-side\n    const validation = this.validateConfig(config);\n    if (!validation.isValid) {\n      throw new Error(`Configura√ß√£o inv√°lida: ${validation.errors.join(', ')}`);\n    }\n\n    return this.makeRequest<OrganizationConfig>('/analysis-configs', {\n      method: 'POST',\n      body: JSON.stringify(config),\n    });\n  }\n\n  async updateConfig(id: string, updates: UpdateConfigRequest): Promise<OrganizationConfig> {\n    // Valida√ß√£o client-side\n    if (updates.parameters || updates.rules) {\n      const validation = this.validateConfig({ ...updates, organizationId: '' } as CreateConfigRequest);\n      if (!validation.isValid) {\n        throw new Error(`Atualiza√ß√µes inv√°lidas: ${validation.errors.join(', ')}`);\n      }\n    }\n\n    return this.makeRequest<OrganizationConfig>(`/analysis-configs/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(updates),\n    });\n  }\n\n  async deleteConfig(id: string): Promise<string> {\n    return this.makeRequest<{ deletedId: string }>(`/analysis-configs/${id}`, {\n      method: 'DELETE',\n    }).then(result => result.deletedId);\n  }\n\n  // Batch Operations\n  async batchUpdateConfigs(request: BatchUpdateRequest): Promise<OrganizationConfig[]> {\n    return this.makeRequest<OrganizationConfig[]>('/analysis-configs/batch', {\n      method: 'PATCH',\n      body: JSON.stringify(request),\n    });\n  }\n\n  async batchDeleteConfigs(configIds: string[]): Promise<string[]> {\n    return this.makeRequest<{ deletedIds: string[] }>('/analysis-configs/batch', {\n      method: 'DELETE',\n      body: JSON.stringify({ configIds }),\n    }).then(result => result.deletedIds);\n  }\n\n  async duplicateConfig(id: string): Promise<OrganizationConfig> {\n    return this.makeRequest<OrganizationConfig>(`/analysis-configs/${id}/duplicate`, {\n      method: 'POST',\n    });\n  }\n\n  // Template Operations\n  async getTemplates(category?: string): Promise<ConfigTemplate[]> {\n    const endpoint = category ? `/analysis-templates?category=${category}` : '/analysis-templates';\n    return this.makeRequest<ConfigTemplate[]>(endpoint);\n  }\n\n  async getTemplateById(id: string): Promise<ConfigTemplate> {\n    return this.makeRequest<ConfigTemplate>(`/analysis-templates/${id}`);\n  }\n\n  async applyTemplate(templateId: string, organizationId: string): Promise<OrganizationConfig> {\n    return this.makeRequest<OrganizationConfig>(`/analysis-templates/${templateId}/apply`, {\n      method: 'POST',\n      body: JSON.stringify({ organizationId }),\n    });\n  }\n\n  async createTemplate(template: Omit<ConfigTemplate, 'id' | 'createdAt' | 'updatedAt'>): Promise<ConfigTemplate> {\n    return this.makeRequest<ConfigTemplate>('/analysis-templates', {\n      method: 'POST',\n      body: JSON.stringify(template),\n    });\n  }\n\n  // Valida√ß√£o e An√°lise de Impacto\n  validateConfig(config: CreateConfigRequest | UpdateConfigRequest): ConfigValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    // Valida√ß√µes b√°sicas\n    if ('name' in config && (!config.name || config.name.trim().length < 3)) {\n      errors.push('Nome deve ter pelo menos 3 caracteres');\n    }\n\n    if ('description' in config && (!config.description || config.description.trim().length < 10)) {\n      errors.push('Descri√ß√£o deve ter pelo menos 10 caracteres');\n    }\n\n    // Valida√ß√£o de par√¢metros\n    if ('parameters' in config && config.parameters) {\n      config.parameters.forEach((param, index) => {\n        if (!param.name || param.name.trim().length === 0) {\n          errors.push(`Par√¢metro ${index + 1}: Nome √© obrigat√≥rio`);\n        }\n\n        if (param.weight < 0 || param.weight > 100) {\n          errors.push(`Par√¢metro ${param.name}: Peso deve estar entre 0 e 100`);\n        }\n\n        if (param.type === 'range') {\n          if (param.min !== undefined && param.max !== undefined && param.min >= param.max) {\n            errors.push(`Par√¢metro ${param.name}: Valor m√≠nimo deve ser menor que o m√°ximo`);\n          }\n        }\n\n        if (param.type === 'select' && (!param.options || param.options.length === 0)) {\n          errors.push(`Par√¢metro ${param.name}: Op√ß√µes s√£o obrigat√≥rias para tipo select`);\n        }\n      });\n    }\n\n    // Valida√ß√£o de regras\n    if ('rules' in config && config.rules) {\n      config.rules.forEach((rule, index) => {\n        if (!rule.name || rule.name.trim().length === 0) {\n          errors.push(`Regra ${index + 1}: Nome √© obrigat√≥rio`);\n        }\n\n        if (!rule.description || rule.description.trim().length === 0) {\n          errors.push(`Regra ${index + 1}: Descri√ß√£o √© obrigat√≥ria`);\n        }\n\n        if (rule.type === 'keyword_presence' && (!rule.keywordsAll || rule.keywordsAll.length === 0)) {\n          errors.push(`Regra ${rule.name}: Palavras-chave s√£o obrigat√≥rias para tipo keyword_presence`);\n        }\n\n        if (rule.type === 'keyword_any' && (!rule.keywordsAny || rule.keywordsAny.length === 0)) {\n          errors.push(`Regra ${rule.name}: Palavras-chave s√£o obrigat√≥rias para tipo keyword_any`);\n        }\n\n        if (rule.type === 'pattern' && (!rule.pattern || rule.pattern.trim().length === 0)) {\n          errors.push(`Regra ${rule.name}: Padr√£o regex √© obrigat√≥rio para tipo pattern`);\n        }\n\n        // Validar regex se for v√°lida\n        if (rule.type === 'pattern' && rule.pattern) {\n          try {\n            new RegExp(rule.pattern);\n          } catch {\n            errors.push(`Regra ${rule.name}: Padr√£o regex inv√°lido`);\n          }\n        }\n      });\n    }\n\n    // Warnings\n    if ('parameters' in config && config.parameters && config.parameters.length === 0) {\n      warnings.push('Nenhum par√¢metro configurado - an√°lise pode n√£o ser efetiva');\n    }\n\n    if ('rules' in config && config.rules && config.rules.length === 0) {\n      warnings.push('Nenhuma regra configurada - an√°lise pode n√£o ser efetiva');\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings\n    };\n  }\n\n  async analyzeConfigImpact(\n    configId: string, \n    organizationId: string\n  ): Promise<ConfigImpactAnalysis> {\n    return this.makeRequest<ConfigImpactAnalysis>(`/analysis-configs/${configId}/impact-analysis`, {\n      method: 'POST',\n      body: JSON.stringify({ organizationId }),\n    });\n  }\n\n  async previewConfigChanges(\n    configId: string, \n    changes: UpdateConfigRequest\n  ): Promise<{\n    currentScore: number;\n    projectedScore: number;\n    changes: string[];\n    risks: string[];\n  }> {\n    return this.makeRequest(`/analysis-configs/${configId}/preview`, {\n      method: 'POST',\n      body: JSON.stringify(changes),\n    });\n  }\n\n  // A/B Testing\n  async createABTest(\n    configA: string, \n    configB: string, \n    organizationId: string,\n    duration: number // dias\n  ): Promise<{\n    testId: string;\n    status: 'active' | 'completed' | 'cancelled';\n    startDate: Date;\n    endDate: Date;\n  }> {\n    return this.makeRequest('/analysis-configs/ab-test', {\n      method: 'POST',\n      body: JSON.stringify({ configA, configB, organizationId, duration }),\n    });\n  }\n\n  async getABTestResults(testId: string): Promise<{\n    configAScore: number;\n    configBScore: number;\n    winner: 'A' | 'B' | 'tie';\n    confidence: number;\n    sampleSize: number;\n  }> {\n    return this.makeRequest(`/analysis-configs/ab-test/${testId}/results`);\n  }\n\n  // Analytics e Performance\n  async getConfigPerformanceMetrics(\n    configId: string, \n    timeRange: 'day' | 'week' | 'month' | 'year' = 'month'\n  ): Promise<{\n    averageScore: number;\n    totalAnalyses: number;\n    successRate: number;\n    averageProcessingTime: number;\n    topIssues: Array<{ issue: string; count: number }>;\n  }> {\n    return this.makeRequest(`/analysis-configs/${configId}/performance?timeRange=${timeRange}`);\n  }\n\n  async getOrganizationAnalytics(\n    organizationId: string,\n    timeRange: 'day' | 'week' | 'month' | 'year' = 'month'\n  ): Promise<{\n    totalConfigs: number;\n    activeConfigs: number;\n    averageScore: number;\n    totalAnalyses: number;\n    configUsage: Array<{ configId: string; usageCount: number; averageScore: number }>;\n    performanceTrend: Array<{ date: string; score: number; count: number }>;\n  }> {\n    return this.makeRequest(`/analysis-configs/organization/${organizationId}/analytics?timeRange=${timeRange}`);\n  }\n\n  // Cache Management\n  async invalidateConfigCache(organizationId: string): Promise<void> {\n    await this.makeRequest(`/analysis-configs/cache/invalidate`, {\n      method: 'POST',\n      body: JSON.stringify({ organizationId }),\n    });\n  }\n\n  async getConfigCacheStats(organizationId: string): Promise<{\n    cacheSize: number;\n    hitRate: number;\n    missRate: number;\n    evictionCount: number;\n  }> {\n    return this.makeRequest(`/analysis-configs/cache/stats/${organizationId}`);\n  }\n\n  // Error Handling e Retry\n  private async retryRequest<T>(\n    requestFn: () => Promise<T>,\n    maxRetries: number = 3,\n    delay: number = 1000\n  ): Promise<T> {\n    let lastError: Error;\n    \n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        return await requestFn();\n      } catch (error) {\n        lastError = error as Error;\n        \n        if (attempt === maxRetries) {\n          throw lastError;\n        }\n        \n        // Backoff exponencial\n        await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, attempt - 1)));\n      }\n    }\n    \n    throw lastError!;\n  }\n\n  // M√©todos com retry autom√°tico\n  async createConfigWithRetry(config: CreateConfigRequest): Promise<OrganizationConfig> {\n    return this.retryRequest(() => this.createConfig(config));\n  }\n\n  async updateConfigWithRetry(id: string, updates: UpdateConfigRequest): Promise<OrganizationConfig> {\n    return this.retryRequest(() => this.updateConfig(id, updates));\n  }\n\n  async deleteConfigWithRetry(id: string): Promise<string> {\n    return this.retryRequest(() => this.deleteConfig(id));\n  }\n}\n\n// Exportar inst√¢ncia singleton\nexport const analysisConfigService = new AnalysisConfigService();\n\n// Exportar classe para casos onde √© necess√°rio m√∫ltiplas inst√¢ncias\nexport { AnalysisConfigService };\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/AnalysisOrchestrator.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AnalysisMetrics' is defined but never used.","line":1,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalysisMetrics' is defined but never used.","line":1,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[958,961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[958,961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2109,2112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2109,2112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7253,7256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7253,7256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":277,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8538,8541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8538,8541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":365,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":365,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11279,11282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11279,11282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":409,"column":108,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":409,"endColumn":111,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12571,12574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12571,12574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":420,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13037,13040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13037,13040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":431,"column":105,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":431,"endColumn":108,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13495,13498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13495,13498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":442,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":442,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13957,13960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13957,13960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DocumentClassification, Problem, AnalysisMetrics } from '@/types/document';\nimport { BaseAnalyzer, AnalysisContext, AnalysisResult } from './analyzers/BaseAnalyzer';\nimport { StructuralAnalyzer } from './analyzers/StructuralAnalyzer';\nimport { LegalAnalyzer } from './analyzers/LegalAnalyzer';\nimport { ClarityAnalyzer } from './analyzers/ClarityAnalyzer';\nimport { ABNTAnalyzer } from './analyzers/ABNTAnalyzer';\nimport { IntelligentCache } from './cache/IntelligentCache';\nimport { FallbackSystem } from './fallback/FallbackSystem';\n\nexport interface OrchestratorConfig {\n  enableCache: boolean;\n  enableFallback: boolean;\n  enableParallelProcessing: boolean;\n  maxConcurrentAnalyses: number;\n  timeout: number;\n  enableMetrics: boolean;\n  enableLogging: boolean;\n}\n\nexport interface ComprehensiveAnalysisResult {\n  overallScore: number;\n  overallConfidence: number;\n  totalProcessingTime: number;\n  problems: Problem[];\n  metrics: Record<string, any>;\n  categoryResults: {\n    structural: AnalysisResult;\n    legal: AnalysisResult;\n    clarity: AnalysisResult;\n    abnt: AnalysisResult;\n  };\n  cacheStats: {\n    hits: number;\n    misses: number;\n    hitRate: number;\n  };\n  fallbackStats: {\n    totalFallbacks: number;\n    successfulFallbacks: number;\n    failedFallbacks: number;\n  };\n}\n\nexport class AnalysisOrchestrator {\n  private analyzers: Map<string, BaseAnalyzer> = new Map();\n  private cache: IntelligentCache;\n  private fallbackSystem: FallbackSystem;\n  private config: OrchestratorConfig;\n  private activeAnalyses: Set<string> = new Set();\n\n  constructor(config: Partial<OrchestratorConfig> = {}) {\n    this.config = {\n      enableCache: true,\n      enableFallback: true,\n      enableParallelProcessing: true,\n      maxConcurrentAnalyses: 5,\n      timeout: 30000,\n      enableMetrics: true,\n      enableLogging: true,\n      ...config\n    };\n\n    this.initializeAnalyzers();\n    this.cache = new IntelligentCache();\n    this.fallbackSystem = new FallbackSystem();\n  }\n\n  async analyzeDocument(\n    text: string,\n    classification: DocumentClassification,\n    parameters: Record<string, any> = {}\n  ): Promise<ComprehensiveAnalysisResult> {\n    const analysisId = this.generateAnalysisId();\n    \n    try {\n      // Verificar limite de an√°lises concorrentes\n      if (this.activeAnalyses.size >= this.config.maxConcurrentAnalyses) {\n        throw new Error('Limite de an√°lises concorrentes atingido');\n      }\n\n      this.activeAnalyses.add(analysisId);\n      const startTime = Date.now();\n\n      // Criar contexto de an√°lise\n      const context: AnalysisContext = {\n        text,\n        classification,\n        parameters,\n        cacheEnabled: this.config.enableCache\n      };\n\n      // Verificar cache primeiro\n      let cachedResult: AnalysisResult | null = null;\n      if (this.config.enableCache) {\n        cachedResult = await this.cache.get(context);\n      }\n\n      if (cachedResult) {\n        // Retornar resultado do cache\n        const cacheStats = this.cache.getCacheStats();\n        return this.createComprehensiveResult(\n          cachedResult,\n          { structural: cachedResult, legal: cachedResult, clarity: cachedResult, abnt: cachedResult },\n          Date.now() - startTime,\n          cacheStats,\n          { totalFallbacks: 0, successfulFallbacks: 0, failedFallbacks: 0 }\n        );\n      }\n\n      // Executar an√°lises\n      let results: Record<string, AnalysisResult>;\n      \n      if (this.config.enableParallelProcessing) {\n        results = await this.executeParallelAnalysis(context);\n      } else {\n        results = await this.executeSequentialAnalysis(context);\n      }\n\n      // Calcular resultado geral\n      const overallResult = this.calculateOverallResult(results);\n\n      // Salvar no cache\n      if (this.config.enableCache) {\n        await this.cache.set(context, overallResult);\n      }\n\n      // Obter estat√≠sticas\n      const cacheStats = this.cache.getCacheStats();\n      const fallbackStats = this.fallbackSystem.getMetrics();\n\n      return this.createComprehensiveResult(\n        overallResult,\n        results,\n        Date.now() - startTime,\n        cacheStats,\n        fallbackStats\n      );\n\n    } catch (error) {\n      // Executar com fallback se habilitado\n      if (this.config.enableFallback) {\n        return await this.executeWithFallback(text, classification, parameters, error as Error);\n      }\n      \n      throw error;\n    } finally {\n      this.activeAnalyses.delete(analysisId);\n    }\n  }\n\n  private async executeParallelAnalysis(context: AnalysisContext): Promise<Record<string, AnalysisResult>> {\n    const analysisPromises = [\n      this.executeAnalyzerWithFallback('structural', context),\n      this.executeAnalyzerWithFallback('legal', context),\n      this.executeAnalyzerWithFallback('clarity', context),\n      this.executeAnalyzerWithFallback('abnt', context)\n    ];\n\n    const results = await Promise.allSettled(analysisPromises);\n    \n    return {\n      structural: this.handleAnalysisResult(results[0], 'structural'),\n      legal: this.handleAnalysisResult(results[1], 'legal'),\n      clarity: this.handleAnalysisResult(results[2], 'clarity'),\n      abnt: this.handleAnalysisResult(results[3], 'abnt')\n    };\n  }\n\n  private async executeSequentialAnalysis(context: AnalysisContext): Promise<Record<string, AnalysisResult>> {\n    const results: Record<string, AnalysisResult> = {};\n\n    results.structural = await this.executeAnalyzerWithFallback('structural', context);\n    results.legal = await this.executeAnalyzerWithFallback('legal', context);\n    results.clarity = await this.executeAnalyzerWithFallback('clarity', context);\n    results.abnt = await this.executeAnalyzerWithFallback('abnt', context);\n\n    return results;\n  }\n\n  private async executeAnalyzerWithFallback(\n    analyzerType: string,\n    context: AnalysisContext\n  ): Promise<AnalysisResult> {\n    const analyzer = this.analyzers.get(analyzerType);\n    if (!analyzer) {\n      throw new Error(`Analisador '${analyzerType}' n√£o encontrado`);\n    }\n\n    try {\n      return await analyzer.analyzeWithFallback(context);\n    } catch (error) {\n      if (this.config.enableFallback) {\n        return await this.fallbackSystem.executeWithFallback(\n          () => analyzer.analyzeWithFallback(context),\n          context,\n          error as Error\n        );\n      }\n      throw error;\n    }\n  }\n\n  private handleAnalysisResult(\n    result: PromiseSettledResult<AnalysisResult>,\n    analyzerType: string\n  ): AnalysisResult {\n    if (result.status === 'fulfilled') {\n      return result.value;\n    } else {\n      // Criar resultado de fallback para an√°lise falhada\n      return {\n        problems: [{\n          tipo: 'inconsistencia',\n          descricao: `An√°lise ${analyzerType} falhou: ${result.reason.message}`,\n          gravidade: 'baixa',\n          localizacao: `Analisador ${analyzerType}`,\n          sugestaoCorrecao: 'Verificar configura√ß√µes do analisador',\n          categoria: 'formal'\n        }],\n        metrics: { fallbackUsed: true, error: result.reason.message },\n        score: 50,\n        confidence: 20,\n        processingTime: 0\n      };\n    }\n  }\n\n  private async executeWithFallback(\n    text: string,\n    classification: DocumentClassification,\n    parameters: Record<string, any>,\n    error: Error\n  ): Promise<ComprehensiveAnalysisResult> {\n    const context: AnalysisContext = {\n      text,\n      classification,\n      parameters,\n      cacheEnabled: false\n    };\n\n    // Executar an√°lise b√°sica com fallback\n    const basicResult = await this.fallbackSystem.executeWithFallback(\n      async () => {\n        // Tentar an√°lise b√°sica\n        const structuralAnalyzer = this.analyzers.get('structural');\n        if (structuralAnalyzer) {\n          return await structuralAnalyzer.analyzeWithFallback(context);\n        }\n        throw new Error('Nenhum analisador dispon√≠vel');\n      },\n      context,\n      error\n    );\n\n    // Criar resultado b√°sico\n    const basicResults = {\n      structural: basicResult,\n      legal: basicResult,\n      clarity: basicResult,\n      abnt: basicResult\n    };\n\n    const overallResult = this.calculateOverallResult(basicResults);\n    const fallbackStats = this.fallbackSystem.getMetrics();\n\n    return this.createComprehensiveResult(\n      overallResult,\n      basicResults,\n      0,\n      { hits: 0, misses: 0, hitRate: 0 },\n      fallbackStats\n    );\n  }\n\n  private calculateOverallResult(results: Record<string, AnalysisResult>): AnalysisResult {\n    const allProblems: Problem[] = [];\n    const allMetrics: Record<string, any> = {};\n    let totalScore = 0;\n    let totalConfidence = 0;\n    let totalProcessingTime = 0;\n    let validResults = 0;\n\n    Object.values(results).forEach(result => {\n      if (result && result.problems) {\n        allProblems.push(...result.problems);\n        totalScore += result.score;\n        totalConfidence += result.confidence;\n        totalProcessingTime += result.processingTime;\n        validResults++;\n\n        // Mesclar m√©tricas\n        Object.assign(allMetrics, result.metrics);\n      }\n    });\n\n    if (validResults === 0) {\n      return {\n        problems: [{\n          tipo: 'inconsistencia',\n          descricao: 'Todas as an√°lises falharam',\n          gravidade: 'critica',\n          localizacao: 'Sistema de an√°lise',\n          sugestaoCorrecao: 'Verificar configura√ß√µes dos analisadores',\n          categoria: 'formal'\n        }],\n        metrics: { allAnalysesFailed: true },\n        score: 0,\n        confidence: 0,\n        processingTime: 0\n      };\n    }\n\n    // Calcular m√©dias\n    const avgScore = totalScore / validResults;\n    const avgConfidence = totalConfidence / validResults;\n\n    // Ajustar score baseado no n√∫mero de problemas\n    const adjustedScore = Math.max(0, avgScore - (allProblems.length * 2));\n\n    return {\n      problems: allProblems,\n      metrics: allMetrics,\n      score: adjustedScore,\n      confidence: avgConfidence,\n      processingTime: totalProcessingTime\n    };\n  }\n\n  private createComprehensiveResult(\n    overallResult: AnalysisResult,\n    categoryResults: Record<string, AnalysisResult>,\n    totalProcessingTime: number,\n    cacheStats: { hits: number; misses: number; hitRate: number },\n    fallbackStats: { totalFallbacks: number; successfulFallbacks: number; failedFallbacks: number }\n  ): ComprehensiveAnalysisResult {\n    return {\n      overallScore: overallResult.score,\n      overallConfidence: overallResult.confidence,\n      totalProcessingTime,\n      problems: overallResult.problems,\n      metrics: overallResult.metrics,\n      categoryResults: {\n        structural: categoryResults.structural,\n        legal: categoryResults.legal,\n        clarity: categoryResults.clarity,\n        abnt: categoryResults.abnt\n      },\n      cacheStats,\n      fallbackStats\n    };\n  }\n\n  private initializeAnalyzers(): void {\n    this.analyzers.set('structural', new StructuralAnalyzer());\n    this.analyzers.set('legal', new LegalAnalyzer());\n    this.analyzers.set('clarity', new ClarityAnalyzer());\n    this.analyzers.set('abnt', new ABNTAnalyzer());\n  }\n\n  private generateAnalysisId(): string {\n    return `analysis_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  // M√©todos de gerenciamento e monitoramento\n  async invalidateCache(parameters?: Record<string, any>): Promise<number> {\n    if (parameters) {\n      return await this.cache.invalidateByParameters(parameters);\n    }\n    \n    this.cache.clear();\n    return 0;\n  }\n\n  async invalidateCacheByClassification(classification: DocumentClassification): Promise<number> {\n    return await this.cache.invalidateByClassification(classification);\n  }\n\n  getCacheMetrics() {\n    return this.cache.getMetrics();\n  }\n\n  getFallbackMetrics() {\n    return this.fallbackSystem.getMetrics();\n  }\n\n  getFallbackLogs(limit: number = 100) {\n    return this.fallbackSystem.getLogs(limit);\n  }\n\n  getAnalyzerHealthStatus(): Record<string, { healthy: boolean; errorCount: number; lastError?: string }> {\n    const status: Record<string, { healthy: boolean; errorCount: number; lastError?: string }> = {};\n    \n    for (const [name, analyzer] of this.analyzers.entries()) {\n      status[name] = analyzer.getHealthStatus();\n    }\n    \n    return status;\n  }\n\n  updateConfig(newConfig: Partial<OrchestratorConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  getActiveAnalysesCount(): number {\n    return this.activeAnalyses.size;\n  }\n\n  // M√©todos para an√°lise espec√≠fica por categoria\n  async analyzeStructural(text: string, classification: DocumentClassification, parameters: Record<string, any> = {}): Promise<AnalysisResult> {\n    const context: AnalysisContext = { text, classification, parameters, cacheEnabled: this.config.enableCache };\n    const analyzer = this.analyzers.get('structural');\n    \n    if (!analyzer) {\n      throw new Error('Analisador estrutural n√£o encontrado');\n    }\n\n    return await analyzer.analyzeWithFallback(context);\n  }\n\n  async analyzeLegal(text: string, classification: DocumentClassification, parameters: Record<string, any> = {}): Promise<AnalysisResult> {\n    const context: AnalysisContext = { text, classification, parameters, cacheEnabled: this.config.enableCache };\n    const analyzer = this.analyzers.get('legal');\n    \n    if (!analyzer) {\n      throw new Error('Analisador legal n√£o encontrado');\n    }\n\n    return await analyzer.analyzeWithFallback(context);\n  }\n\n  async analyzeClarity(text: string, classification: DocumentClassification, parameters: Record<string, any> = {}): Promise<AnalysisResult> {\n    const context: AnalysisContext = { text, classification, parameters, cacheEnabled: this.config.enableCache };\n    const analyzer = this.analyzers.get('clarity');\n    \n    if (!analyzer) {\n      throw new Error('Analisador de clareza n√£o encontrado');\n    }\n\n    return await analyzer.analyzeWithFallback(context);\n  }\n\n  async analyzeABNT(text: string, classification: DocumentClassification, parameters: Record<string, any> = {}): Promise<AnalysisResult> {\n    const context: AnalysisContext = { text, classification, parameters, cacheEnabled: this.config.enableCache };\n    const analyzer = this.analyzers.get('abnt');\n    \n    if (!analyzer) {\n      throw new Error('Analisador ABNT n√£o encontrado');\n    }\n\n    return await analyzer.analyzeWithFallback(context);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/analyzers/ABNTAnalyzer.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"no-unused-vars","severity":2,"message":"'classification' is assigned a value but never used.","line":23,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'classification' is assigned a value but never used.","line":23,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[749,752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[749,752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4250,4253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4250,4253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":134,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4329,4332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4329,4332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":163,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5388,5391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5388,5391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":165,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5467,5470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5467,5470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":191,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6433,6436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6433,6436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":193,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6512,6515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6512,6515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7298,7301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7298,7301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7377,7380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7377,7380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":621,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":621,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20111,20114],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20111,20114],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":650,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":650,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20782,20785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20782,20785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":682,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":682,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":682,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":682,"endColumn":41}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BaseAnalyzer, AnalysisContext, AnalysisResult, AnalyzerConfig } from './BaseAnalyzer';\nimport { Problem } from '@/types/document';\n\nexport class ABNTAnalyzer extends BaseAnalyzer {\n  private abntRules: Map<string, ABNTRule[]> = new Map();\n  private formattingPatterns: FormattingPattern[] = [];\n\n  constructor() {\n    super({\n      name: 'ABNTAnalyzer',\n      version: '1.0.0',\n      enabled: true,\n      priority: 4,\n      timeout: 10000,\n      fallbackEnabled: true\n    });\n\n    this.initializeABNTRules();\n    this.initializeFormattingPatterns();\n  }\n\n  async analyze(context: AnalysisContext): Promise<AnalysisResult> {\n    const { text, classification } = context;\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // An√°lise de formata√ß√£o ABNT\n    const formattingAnalysis = this.analyzeABNTFormatting(text);\n    problems.push(...formattingAnalysis.problems);\n    Object.assign(metrics, formattingAnalysis.metrics);\n\n    // An√°lise de estrutura ABNT\n    const structureAnalysis = this.analyzeABNTStructure(text);\n    problems.push(...structureAnalysis.problems);\n    Object.assign(metrics, structureAnalysis.metrics);\n\n    // An√°lise de refer√™ncias bibliogr√°ficas\n    const referencesAnalysis = this.analyzeReferences(text);\n    problems.push(...referencesAnalysis.problems);\n    Object.assign(metrics, referencesAnalysis.metrics);\n\n    // An√°lise de numera√ß√£o e pagina√ß√£o\n    const numberingAnalysis = this.analyzeNumberingAndPagination(text);\n    problems.push(...numberingAnalysis.problems);\n    Object.assign(metrics, numberingAnalysis.metrics);\n\n    // Calcular score ABNT\n    const score = this.calculateABNTScore(problems, metrics);\n    const confidence = this.calculateConfidence(problems, metrics);\n\n    return {\n      problems,\n      metrics,\n      score,\n      confidence,\n      processingTime: 0\n    };\n  }\n\n  private initializeABNTRules(): void {\n    // Regras ABNT para documentos t√©cnicos\n    this.abntRules.set('tr', [\n      {\n        id: 'abnt_nbr_6023',\n        description: 'Refer√™ncias bibliogr√°ficas devem seguir NBR 6023',\n        keywords: ['refer√™ncia', 'bibliografia', 'cita√ß√£o'],\n        severity: 'alta',\n        category: 'tecnico',\n        suggestion: 'Formatar refer√™ncias conforme NBR 6023'\n      },\n      {\n        id: 'abnt_nbr_6024',\n        description: 'Numera√ß√£o de se√ß√µes deve seguir NBR 6024',\n        keywords: ['se√ß√£o', 'cap√≠tulo', 'numera√ß√£o'],\n        severity: 'media',\n        category: 'tecnico',\n        suggestion: 'Numerar se√ß√µes conforme NBR 6024'\n      }\n    ]);\n\n    // Regras ABNT para projetos b√°sicos\n    this.abntRules.set('projeto_basico', [\n      {\n        id: 'abnt_nbr_10007',\n        description: 'Projeto b√°sico deve seguir NBR 10007',\n        keywords: ['projeto b√°sico', 'memorial descritivo', 'planilha or√ßament√°ria'],\n        severity: 'alta',\n        category: 'tecnico',\n        suggestion: 'Estruturar projeto conforme NBR 10007'\n      }\n    ]);\n\n    // Regras ABNT para editais\n    this.abntRules.set('edital', [\n      {\n        id: 'abnt_nbr_6028',\n        description: 'Resumos devem seguir NBR 6028',\n        keywords: ['resumo', 'abstract'],\n        severity: 'media',\n        category: 'tecnico',\n        suggestion: 'Formatar resumo conforme NBR 6028'\n      }\n    ]);\n  }\n\n  private initializeFormattingPatterns(): void {\n    this.formattingPatterns = [\n      {\n        pattern: /^\\s*\\d+\\.\\s+[A-Z][^.]*\\./gm,\n        type: 'numeracao_secoes',\n        severity: 'media',\n        description: 'Se√ß√µes devem ser numeradas sequencialmente',\n        suggestion: 'Verificar numera√ß√£o sequencial das se√ß√µes'\n      },\n      {\n        pattern: /^\\s*[A-Z][a-z]+\\s*:\\s*[^.]*\\./gm,\n        type: 'titulos_secoes',\n        severity: 'baixa',\n        description: 'T√≠tulos de se√ß√µes devem estar em negrito',\n        suggestion: 'Destacar t√≠tulos de se√ß√µes em negrito'\n      },\n      {\n        pattern: /^\\s*\\d+\\.\\s*\\d+\\s+[^.]*\\./gm,\n        type: 'subsecoes',\n        severity: 'baixa',\n        description: 'Subse√ß√µes devem ser numeradas adequadamente',\n        suggestion: 'Verificar numera√ß√£o hier√°rquica das subse√ß√µes'\n      }\n    ];\n  }\n\n  private analyzeABNTFormatting(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    let formattingScore = 100;\n    const formattingIssues: string[] = [];\n\n    // Verificar margens e espa√ßamento\n    const marginIssues = this.checkMarginsAndSpacing(text);\n    problems.push(...marginIssues);\n    formattingIssues.push(...marginIssues.map(p => p.descricao));\n\n    // Verificar fontes e tamanhos\n    const fontIssues = this.checkFontsAndSizes(text);\n    problems.push(...fontIssues);\n    formattingIssues.push(...fontIssues.map(p => p.descricao));\n\n    // Verificar alinhamento de texto\n    const alignmentIssues = this.checkTextAlignment(text);\n    problems.push(...alignmentIssues);\n    formattingIssues.push(...alignmentIssues.map(p => p.descricao));\n\n    // Calcular score de formata√ß√£o\n    formattingScore -= problems.length * 10;\n    metrics.formattingScore = Math.max(0, formattingScore);\n    metrics.formattingIssues = formattingIssues;\n    metrics.totalFormattingIssues = problems.length;\n\n    return { problems, metrics };\n  }\n\n  private analyzeABNTStructure(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // Verificar elementos pr√©-textuais\n    const preTextualIssues = this.checkPreTextualElements(text);\n    problems.push(...preTextualIssues);\n\n    // Verificar elementos textuais\n    const textualIssues = this.checkTextualElements(text);\n    problems.push(...textualIssues);\n\n    // Verificar elementos p√≥s-textuais\n    const postTextualIssues = this.checkPostTextualElements(text);\n    problems.push(...postTextualIssues);\n\n    // Verificar estrutura hier√°rquica\n    const hierarchyIssues = this.checkHierarchicalStructure(text);\n    problems.push(...hierarchyIssues);\n\n    metrics.structureIssues = problems.length;\n    metrics.preTextualElements = this.countPreTextualElements(text);\n    metrics.textualElements = this.countTextualElements(text);\n    metrics.postTextualElements = this.countPostTextualElements(text);\n\n    return { problems, metrics };\n  }\n\n  private analyzeReferences(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // Verificar cita√ß√µes no texto\n    const citationIssues = this.checkCitations(text);\n    problems.push(...citationIssues);\n\n    // Verificar lista de refer√™ncias\n    const referenceListIssues = this.checkReferenceList(text);\n    problems.push(...referenceListIssues);\n\n    // Verificar formata√ß√£o de refer√™ncias\n    const referenceFormatIssues = this.checkReferenceFormatting(text);\n    problems.push(...referenceFormatIssues);\n\n    metrics.citationIssues = citationIssues.length;\n    metrics.referenceIssues = referenceListIssues.length + referenceFormatIssues.length;\n    metrics.totalReferences = this.countReferences(text);\n\n    return { problems, metrics };\n  }\n\n  private analyzeNumberingAndPagination(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // Verificar numera√ß√£o de p√°ginas\n    const paginationIssues = this.checkPagination(text);\n    problems.push(...paginationIssues);\n\n    // Verificar numera√ß√£o de figuras e tabelas\n    const figureTableIssues = this.checkFigureTableNumbering(text);\n    problems.push(...figureTableIssues);\n\n    // Verificar numera√ß√£o de equa√ß√µes\n    const equationIssues = this.checkEquationNumbering(text);\n    problems.push(...equationIssues);\n\n    metrics.paginationIssues = paginationIssues.length;\n    metrics.figureTableIssues = figureTableIssues.length;\n    metrics.equationIssues = equationIssues.length;\n\n    return { problems, metrics };\n  }\n\n  private checkMarginsAndSpacing(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar espa√ßamento entre par√°grafos\n    const paragraphs = text.split(/\\n\\s*\\n/);\n    const spacingIssues = paragraphs.filter(p => p.trim().length > 0).length;\n\n    if (spacingIssues > 0 && spacingIssues < paragraphs.length * 0.8) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: 'Espa√ßamento entre par√°grafos inconsistente',\n        gravidade: 'baixa',\n        localizacao: 'Formata√ß√£o de par√°grafos',\n        sugestaoCorrecao: 'Manter espa√ßamento consistente entre par√°grafos',\n        categoria: 'formal'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkFontsAndSizes(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar uso de mai√∫sculas excessivo\n    const upperCaseWords = text.match(/\\b[A-Z]{3,}\\b/g);\n    if (upperCaseWords && upperCaseWords.length > 15) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: 'Uso excessivo de palavras em mai√∫sculas',\n        gravidade: 'baixa',\n        localizacao: 'Formata√ß√£o de texto',\n        sugestaoCorrecao: 'Usar mai√∫sculas apenas para t√≠tulos e nomes pr√≥prios',\n        categoria: 'formal'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkTextAlignment(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar alinhamento de listas\n    const listItems = text.match(/^[-*‚Ä¢]\\s+.+$/gm);\n    if (listItems) {\n      const misalignedItems = listItems.filter(item => !item.startsWith('- ') && !item.startsWith('* ') && !item.startsWith('‚Ä¢ '));\n      \n      if (misalignedItems.length > 0) {\n        problems.push({\n          tipo: 'inconsistencia',\n          descricao: 'Alinhamento inconsistente em listas',\n          gravidade: 'baixa',\n          localizacao: 'Formata√ß√£o de listas',\n          sugestaoCorrecao: 'Alinhar itens de lista consistentemente',\n          categoria: 'formal'\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private checkPreTextualElements(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar elementos pr√©-textuais b√°sicos\n    const preTextualElements = ['capa', 'folha de rosto', 'sum√°rio', 'resumo'];\n    const missingElements = preTextualElements.filter(element => \n      !text.toLowerCase().includes(element)\n    );\n\n    if (missingElements.length > 0) {\n      problems.push({\n        tipo: 'clausula_faltante',\n        descricao: `Elementos pr√©-textuais ausentes: ${missingElements.join(', ')}`,\n        gravidade: 'media',\n        localizacao: 'Estrutura do documento',\n        sugestaoCorrecao: 'Incluir elementos pr√©-textuais obrigat√≥rios',\n        categoria: 'tecnico'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkTextualElements(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar introdu√ß√£o\n    if (!text.toLowerCase().includes('introdu√ß√£o') && !text.toLowerCase().includes('1. introdu√ß√£o')) {\n      problems.push({\n        tipo: 'clausula_faltante',\n        descricao: 'Se√ß√£o de introdu√ß√£o n√£o encontrada',\n        gravidade: 'media',\n        localizacao: 'Estrutura textual',\n        sugestaoCorrecao: 'Incluir se√ß√£o de introdu√ß√£o',\n        categoria: 'tecnico'\n      });\n    }\n\n    // Verificar desenvolvimento\n    if (!text.toLowerCase().includes('desenvolvimento') && !text.toLowerCase().includes('fundamenta√ß√£o')) {\n      problems.push({\n        tipo: 'clausula_faltante',\n        descricao: 'Se√ß√£o de desenvolvimento n√£o encontrada',\n        gravidade: 'alta',\n        localizacao: 'Estrutura textual',\n        sugestaoCorrecao: 'Incluir se√ß√£o de desenvolvimento ou fundamenta√ß√£o',\n        categoria: 'tecnico'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkPostTextualElements(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar elementos p√≥s-textuais b√°sicos\n    const postTextualElements = ['conclus√£o', 'refer√™ncias', 'ap√™ndice', 'anexo'];\n    const missingElements = postTextualElements.filter(element => \n      !text.toLowerCase().includes(element)\n    );\n\n    if (missingElements.length > 2) { // Pelo menos 2 elementos devem estar presentes\n      problems.push({\n        tipo: 'clausula_faltante',\n        descricao: `Elementos p√≥s-textuais insuficientes: ${missingElements.join(', ')}`,\n        gravidade: 'media',\n        localizacao: 'Estrutura do documento',\n        sugestaoCorrecao: 'Incluir mais elementos p√≥s-textuais',\n        categoria: 'tecnico'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkHierarchicalStructure(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar hierarquia de se√ß√µes\n    const sectionPatterns = [\n      /^(?:CAP√çTULO|CAPITULO)\\s*(\\d+)/gmi,\n      /^(?:SE√á√ÉO|SECAO)\\s*(\\d+)/gmi,\n      /^(\\d+\\.)\\s+/gm,\n      /^(\\d+\\.\\d+)\\s+/gm\n    ];\n\n    const sections: Array<{ level: number; number: string; line: string }> = [];\n\n    sectionPatterns.forEach((pattern, index) => {\n      const matches = text.matchAll(pattern);\n      for (const match of matches) {\n        sections.push({\n          level: index,\n          number: match[1] || match[0],\n          line: match[0]\n        });\n      }\n    });\n\n    // Verificar sequ√™ncia l√≥gica\n    for (let i = 1; i < sections.length; i++) {\n      const prev = sections[i - 1];\n      const curr = sections[i];\n      \n      if (curr.level < prev.level && curr.level !== 0) {\n        problems.push({\n          tipo: 'inconsistencia',\n          descricao: `Quebra na hierarquia de se√ß√µes: ${prev.line} ‚Üí ${curr.line}`,\n          gravidade: 'media',\n          localizacao: 'Estrutura hier√°rquica',\n          sugestaoCorrecao: 'Manter sequ√™ncia l√≥gica na hierarquia de se√ß√µes',\n          categoria: 'tecnico'\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private checkCitations(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar cita√ß√µes diretas\n    const directCitations = text.match(/\"[^\"]{20,}\"/g);\n    if (directCitations) {\n      directCitations.forEach(citation => {\n        if (citation.length > 100) {\n          problems.push({\n            tipo: 'inconsistencia',\n            descricao: 'Cita√ß√£o direta muito longa',\n            gravidade: 'baixa',\n            localizacao: 'Cita√ß√µes',\n            sugestaoCorrecao: 'Considerar resumir cita√ß√µes longas',\n            categoria: 'tecnico'\n          });\n        }\n      });\n    }\n\n    // Verificar cita√ß√µes indiretas\n    const indirectCitations = text.match(/\\b(?:segundo|conforme|de acordo com|conforme)\\b/gi);\n    if (indirectCitations && indirectCitations.length > 10) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: 'Muitas cita√ß√µes indiretas podem indicar falta de originalidade',\n        gravidade: 'baixa',\n        localizacao: 'Cita√ß√µes',\n        sugestaoCorrecao: 'Balancear cita√ß√µes com an√°lise pr√≥pria',\n        categoria: 'tecnico'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkReferenceList(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar se h√° lista de refer√™ncias\n    if (!text.toLowerCase().includes('refer√™ncias') && !text.toLowerCase().includes('bibliografia')) {\n      problems.push({\n        tipo: 'clausula_faltante',\n        descricao: 'Lista de refer√™ncias n√£o encontrada',\n        gravidade: 'alta',\n        localizacao: 'Refer√™ncias',\n        sugestaoCorrecao: 'Incluir lista de refer√™ncias bibliogr√°ficas',\n        categoria: 'tecnico'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkReferenceFormatting(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar formata√ß√£o b√°sica de refer√™ncias\n    const referencePatterns = [\n      /^[A-Z][a-z]+,\\s*[A-Z]\\.\\s*[^.]*\\./gm,\n      /^[A-Z][a-z]+\\s*\\([0-9]{4}\\)/gm\n    ];\n\n    const hasFormattedReferences = referencePatterns.some(pattern => \n      text.match(pattern)\n    );\n\n    if (!hasFormattedReferences) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: 'Refer√™ncias n√£o est√£o formatadas conforme ABNT',\n        gravidade: 'media',\n        localizacao: 'Formata√ß√£o de refer√™ncias',\n        sugestaoCorrecao: 'Formatar refer√™ncias conforme NBR 6023',\n        categoria: 'tecnico'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkPagination(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar numera√ß√£o de p√°ginas\n    const pageNumbers = text.match(/\\b(?:p√°gina|p√°g|pg)\\s*\\d+\\b/gi);\n    if (pageNumbers) {\n      const numbers = pageNumbers.map(p => {\n        const match = p.match(/\\d+/);\n        return match ? parseInt(match[0]) : 0;\n      });\n\n      // Verificar sequ√™ncia\n      for (let i = 1; i < numbers.length; i++) {\n        if (numbers[i] <= numbers[i - 1]) {\n          problems.push({\n            tipo: 'inconsistencia',\n            descricao: 'Numera√ß√£o de p√°ginas n√£o sequencial',\n            gravidade: 'baixa',\n            localizacao: 'Numera√ß√£o de p√°ginas',\n            sugestaoCorrecao: 'Verificar sequ√™ncia de numera√ß√£o de p√°ginas',\n            categoria: 'tecnico'\n          });\n          break;\n        }\n      }\n    }\n\n    return problems;\n  }\n\n  private checkFigureTableNumbering(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar numera√ß√£o de figuras\n    const figures = text.match(/\\b(?:figura|fig)\\s*\\d+/gi);\n    if (figures) {\n      const figureNumbers = figures.map(f => {\n        const match = f.match(/\\d+/);\n        return match ? parseInt(match[0]) : 0;\n      });\n\n      // Verificar sequ√™ncia\n      for (let i = 1; i < figureNumbers.length; i++) {\n        if (figureNumbers[i] !== figureNumbers[i - 1] + 1) {\n          problems.push({\n            tipo: 'inconsistencia',\n            descricao: 'Numera√ß√£o de figuras n√£o sequencial',\n            gravidade: 'baixa',\n            localizacao: 'Numera√ß√£o de figuras',\n            sugestaoCorrecao: 'Verificar sequ√™ncia de numera√ß√£o de figuras',\n            categoria: 'tecnico'\n          });\n          break;\n        }\n      }\n    }\n\n    return problems;\n  }\n\n  private checkEquationNumbering(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar numera√ß√£o de equa√ß√µes\n    const equations = text.match(/\\b(?:equa√ß√£o|eq)\\s*\\d+/gi);\n    if (equations) {\n      const equationNumbers = equations.map(e => {\n        const match = e.match(/\\d+/);\n        return match ? parseInt(match[0]) : 0;\n      });\n\n      // Verificar sequ√™ncia\n      for (let i = 1; i < equationNumbers.length; i++) {\n        if (equationNumbers[i] !== equationNumbers[i - 1] + 1) {\n          problems.push({\n            tipo: 'inconsistencia',\n            descricao: 'Numera√ß√£o de equa√ß√µes n√£o sequencial',\n            gravidade: 'baixa',\n            localizacao: 'Numera√ß√£o de equa√ß√µes',\n            sugestaoCorrecao: 'Verificar sequ√™ncia de numera√ß√£o de equa√ß√µes',\n            categoria: 'tecnico'\n          });\n          break;\n        }\n      }\n    }\n\n    return problems;\n  }\n\n  private countPreTextualElements(text: string): number {\n    const elements = ['capa', 'folha de rosto', 'sum√°rio', 'resumo', 'abstract'];\n    return elements.filter(element => text.toLowerCase().includes(element)).length;\n  }\n\n  private countTextualElements(text: string): number {\n    const elements = ['introdu√ß√£o', 'desenvolvimento', 'fundamenta√ß√£o', 'conclus√£o'];\n    return elements.filter(element => text.toLowerCase().includes(element)).length;\n  }\n\n  private countPostTextualElements(text: string): number {\n    const elements = ['conclus√£o', 'refer√™ncias', 'bibliografia', 'ap√™ndice', 'anexo'];\n    return elements.filter(element => text.toLowerCase().includes(element)).length;\n  }\n\n  private countReferences(text: string): number {\n    const referencePatterns = [\n      /^[A-Z][a-z]+,\\s*[A-Z]\\.\\s*[^.]*\\./gm,\n      /^[A-Z][a-z]+\\s*\\([0-9]{4}\\)/gm\n    ];\n\n    let count = 0;\n    referencePatterns.forEach(pattern => {\n      const matches = text.match(pattern);\n      if (matches) count += matches.length;\n    });\n\n    return count;\n  }\n\n  private calculateABNTScore(problems: Problem[], metrics: Record<string, any>): number {\n    let score = 100;\n    \n    // Reduzir score baseado nos problemas\n    problems.forEach(problem => {\n      switch (problem.gravidade) {\n        case 'critica':\n          score -= 30;\n          break;\n        case 'alta':\n          score -= 25;\n          break;\n        case 'media':\n          score -= 20;\n          break;\n        case 'baixa':\n          score -= 15;\n          break;\n      }\n    });\n\n    // Ajustar score baseado nas m√©tricas\n    if (metrics.formattingScore) {\n      score = Math.min(score, metrics.formattingScore);\n    }\n\n    return Math.max(0, score);\n  }\n\n  private calculateConfidence(problems: Problem[], metrics: Record<string, any>): number {\n    let confidence = 75; // Base m√©dia para an√°lises ABNT\n    \n    // Aumentar confian√ßa se h√° muitas m√©tricas calculadas\n    if (metrics.totalReferences && metrics.totalReferences > 5) {\n      confidence += 10;\n    }\n    \n    if (metrics.preTextualElements && metrics.preTextualElements > 2) {\n      confidence += 5;\n    }\n    \n    // Diminuir confian√ßa se h√° muitos problemas\n    if (problems.length > 5) {\n      confidence -= 20;\n    }\n\n    return Math.min(100, Math.max(0, confidence));\n  }\n\n  protected getCacheKey(context: AnalysisContext): string {\n    const { text, classification } = context;\n    const textHash = this.hashText(text.substring(0, 1000)); // Primeiros 1000 caracteres para an√°lise ABNT\n    return `abnt_${classification.tipoDocumento}_${textHash}`;\n  }\n\n  protected validateInput(context: AnalysisContext): boolean {\n    return context.text.length > 200 && \n           context.text.length < 1000000 && // M√°ximo 1MB para an√°lise ABNT\n           !!context.classification?.tipoDocumento;\n  }\n\n  protected createFallbackResult(context: AnalysisContext): AnalysisResult {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: 'An√°lise ABNT b√°sica devido a erro no analisador principal',\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise ABNT',\n        sugestaoCorrecao: 'Verificar configura√ß√µes do analisador ABNT',\n        categoria: 'tecnico'\n      }],\n      metrics: { \n        formattingScore: 65, \n        structureIssues: 1,\n        totalReferences: 0,\n        preTextualElements: 0\n      },\n      score: 65,\n      confidence: 25,\n      processingTime: 0\n    };\n  }\n\n  private hashText(text: string): string {\n    let hash = 0;\n    for (let i = 0; i < text.length; i++) {\n      const char = text.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return Math.abs(hash).toString(36);\n  }\n}\n\ninterface ABNTRule {\n  id: string;\n  description: string;\n  keywords: string[];\n  severity: 'baixa' | 'media' | 'alta' | 'critica';\n  category: 'juridico' | 'tecnico' | 'orcamentario' | 'formal';\n  suggestion: string;\n}\n\ninterface FormattingPattern {\n  pattern: RegExp;\n  type: string;\n  severity: 'baixa' | 'media' | 'alta' | 'critica';\n  description: string;\n  suggestion: string;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/analyzers/BaseAnalyzer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[391,394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[391,394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":38,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":44},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":40,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":58},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":42,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":60},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":44,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":67}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DocumentClassification, Problem, AnalysisMetrics } from '@/types/document';\n\nexport interface AnalysisResult {\n  problems: Problem[];\n  metrics: Partial<AnalysisMetrics>;\n  score: number;\n  confidence: number;\n  processingTime: number;\n  cacheKey?: string;\n}\n\nexport interface AnalysisContext {\n  text: string;\n  classification: DocumentClassification;\n  parameters: Record<string, any>;\n  cacheEnabled: boolean;\n}\n\nexport interface AnalyzerConfig {\n  name: string;\n  version: string;\n  enabled: boolean;\n  priority: number;\n  timeout: number;\n  fallbackEnabled: boolean;\n}\n\nexport abstract class BaseAnalyzer {\n  protected config: AnalyzerConfig;\n  protected cache: Map<string, AnalysisResult> = new Map();\n  protected errorCount: number = 0;\n  protected lastError?: Error;\n\n  constructor(config: AnalyzerConfig) {\n    this.config = config;\n  }\n\n  abstract analyze(context: AnalysisContext): Promise<AnalysisResult>;\n\n  protected abstract getCacheKey(context: AnalysisContext): string;\n\n  protected abstract validateInput(context: AnalysisContext): boolean;\n\n  protected abstract createFallbackResult(context: AnalysisContext): AnalysisResult;\n\n  async analyzeWithFallback(context: AnalysisContext): Promise<AnalysisResult> {\n    try {\n      // Verificar cache primeiro\n      if (context.cacheEnabled) {\n        const cached = this.getFromCache(context);\n        if (cached) {\n          return { ...cached, cacheKey: this.getCacheKey(context) };\n        }\n      }\n\n      // Validar entrada\n      if (!this.validateInput(context)) {\n        throw new Error(`Entrada inv√°lida para o analisador ${this.config.name}`);\n      }\n\n      // Executar an√°lise principal\n      const startTime = Date.now();\n      const result = await this.analyze(context);\n      const processingTime = Date.now() - startTime;\n\n      const finalResult: AnalysisResult = {\n        ...result,\n        processingTime,\n        cacheKey: this.getCacheKey(context)\n      };\n\n      // Salvar no cache\n      if (context.cacheEnabled) {\n        this.setCache(context, finalResult);\n      }\n\n      // Resetar contador de erros em caso de sucesso\n      this.errorCount = 0;\n      this.lastError = undefined;\n\n      return finalResult;\n\n    } catch (error) {\n      this.handleError(error as Error, context);\n      \n      // Retornar fallback se habilitado\n      if (this.config.fallbackEnabled) {\n        return this.createFallbackResult(context);\n      }\n      \n      throw error;\n    }\n  }\n\n  protected getFromCache(context: AnalysisContext): AnalysisResult | null {\n    const key = this.getCacheKey(context);\n    return this.cache.get(key) || null;\n  }\n\n  protected setCache(context: AnalysisContext, result: AnalysisResult): void {\n    const key = this.getCacheKey(context);\n    this.cache.set(key, result);\n    \n    // Limitar tamanho do cache (m√°ximo 100 entradas)\n    if (this.cache.size > 100) {\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n  }\n\n  protected handleError(error: Error, context: AnalysisContext): void {\n    this.errorCount++;\n    this.lastError = error;\n    \n    console.error(`Erro no analisador ${this.config.name}:`, {\n      error: error.message,\n      stack: error.stack,\n      context: {\n        classification: context.classification,\n        textLength: context.text.length,\n        parameters: context.parameters\n      },\n      errorCount: this.errorCount,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  clearCache(): void {\n    this.cache.clear();\n  }\n\n  getCacheStats(): { size: number; hitRate: number } {\n    return {\n      size: this.cache.size,\n      hitRate: 0 // TODO: Implementar c√°lculo de hit rate\n    };\n  }\n\n  getHealthStatus(): { healthy: boolean; errorCount: number; lastError?: string } {\n    return {\n      healthy: this.errorCount < 5,\n      errorCount: this.errorCount,\n      lastError: this.lastError?.message\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/analyzers/ClarityAnalyzer.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[759,762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[759,762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":126,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4427,4430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4427,4430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4506,4509],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4506,4509],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":160,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5625,5628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5625,5628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5704,5707],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5704,5707],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8497,8500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8497,8500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":117,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":120,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8550,8553],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8550,8553],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":233,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":233,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8629,8632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8629,8632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":256,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9436,9439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9436,9439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":258,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9515,9518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9515,9518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":407,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":407,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14605,14608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14605,14608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":440,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":440,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15389,15392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15389,15392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":472,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":472,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":472,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":472,"endColumn":41}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BaseAnalyzer, AnalysisContext, AnalysisResult, AnalyzerConfig } from './BaseAnalyzer';\nimport { Problem } from '@/types/document';\n\nexport class ClarityAnalyzer extends BaseAnalyzer {\n  private ambiguityPatterns: AmbiguityPattern[] = [];\n  private readabilityMetrics: ReadabilityMetric[] = [];\n\n  constructor() {\n    super({\n      name: 'ClarityAnalyzer',\n      version: '1.0.0',\n      enabled: true,\n      priority: 3,\n      timeout: 12000,\n      fallbackEnabled: true\n    });\n\n    this.initializeAmbiguityPatterns();\n    this.initializeReadabilityMetrics();\n  }\n\n  async analyze(context: AnalysisContext): Promise<AnalysisResult> {\n    const { text, classification } = context;\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // An√°lise de ambiguidade\n    const ambiguityAnalysis = this.analyzeAmbiguity(text);\n    problems.push(...ambiguityAnalysis.problems);\n    Object.assign(metrics, ambiguityAnalysis.metrics);\n\n    // An√°lise de legibilidade\n    const readabilityAnalysis = this.analyzeReadability(text);\n    problems.push(...readabilityAnalysis.problems);\n    Object.assign(metrics, readabilityAnalysis.metrics);\n\n    // An√°lise de clareza espec√≠fica por tipo de documento\n    const specificClarityAnalysis = this.analyzeSpecificClarity(text, classification);\n    problems.push(...specificClarityAnalysis.problems);\n    Object.assign(metrics, specificClarityAnalysis.metrics);\n\n    // An√°lise de consist√™ncia terminol√≥gica\n    const terminologyAnalysis = this.analyzeTerminologyConsistency(text);\n    problems.push(...terminologyAnalysis.problems);\n    Object.assign(metrics, terminologyAnalysis.metrics);\n\n    // Calcular score de clareza\n    const score = this.calculateClarityScore(problems, metrics);\n    const confidence = this.calculateConfidence(problems, metrics);\n\n    return {\n      problems,\n      metrics,\n      score,\n      confidence,\n      processingTime: 0\n    };\n  }\n\n  private initializeAmbiguityPatterns(): void {\n    this.ambiguityPatterns = [\n      {\n        pattern: /\\b(?:pode|poder√°|eventualmente|possivelmente)\\b/gi,\n        type: 'ambiguidade_modal',\n        severity: 'media',\n        description: 'Uso de verbos modais pode criar ambiguidade',\n        suggestion: 'Especificar condi√ß√µes e responsabilidades de forma clara'\n      },\n      {\n        pattern: /\\b(?:adequado|apropriado|suficiente|razo√°vel)\\b/gi,\n        type: 'ambiguidade_subjetiva',\n        severity: 'alta',\n        description: 'Termos subjetivos podem gerar interpreta√ß√µes divergentes',\n        suggestion: 'Substituir por crit√©rios objetivos e mensur√°veis'\n      },\n      {\n        pattern: /\\b(?:etc|e outros|e similares|e afins)\\b/gi,\n        type: 'ambiguidade_generalizacao',\n        severity: 'media',\n        description: 'Generaliza√ß√µes podem deixar escopo indefinido',\n        suggestion: 'Listar especificamente todos os itens necess√°rios'\n      },\n      {\n        pattern: /\\b(?:quando necess√°rio|se for o caso|conforme apropriado)\\b/gi,\n        type: 'ambiguidade_condicional',\n        severity: 'alta',\n        description: 'Condi√ß√µes vagas podem gerar incerteza',\n        suggestion: 'Definir crit√©rios objetivos para quando a√ß√µes s√£o necess√°rias'\n      },\n      {\n        pattern: /\\b(?:em tempo h√°bil|com anteced√™ncia|prontamente)\\b/gi,\n        type: 'ambiguidade_temporal',\n        severity: 'media',\n        description: 'Prazos vagos podem gerar interpreta√ß√µes divergentes',\n        suggestion: 'Especificar prazos em dias, horas ou minutos'\n      }\n    ];\n  }\n\n  private initializeReadabilityMetrics(): void {\n    this.readabilityMetrics = [\n      {\n        name: 'sentences_per_paragraph',\n        maxValue: 3,\n        severity: 'baixa',\n        description: 'Par√°grafos muito longos dificultam leitura',\n        suggestion: 'Dividir par√°grafos longos em par√°grafos menores'\n      },\n      {\n        name: 'words_per_sentence',\n        maxValue: 25,\n        severity: 'media',\n        description: 'Frases muito longas dificultam compreens√£o',\n        suggestion: 'Dividir frases longas em frases menores'\n      },\n      {\n        name: 'syllables_per_word',\n        maxValue: 3,\n        severity: 'baixa',\n        description: 'Palavras muito longas podem dificultar leitura',\n        suggestion: 'Usar sin√¥nimos mais simples quando poss√≠vel'\n      }\n    ];\n  }\n\n  private analyzeAmbiguity(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    let totalAmbiguities = 0;\n    const ambiguityTypes: Record<string, number> = {};\n\n    this.ambiguityPatterns.forEach(pattern => {\n      const matches = text.match(pattern.pattern);\n      if (matches) {\n        totalAmbiguities += matches.length;\n        ambiguityTypes[pattern.type] = (ambiguityTypes[pattern.type] || 0) + matches.length;\n\n        // Criar problema para cada tipo de ambiguidade encontrado\n        if (matches.length > 2) { // S√≥ criar problema se houver muitas ocorr√™ncias\n          problems.push({\n            tipo: 'inconsistencia',\n            descricao: pattern.description,\n            gravidade: pattern.severity,\n            localizacao: 'Clareza do texto',\n            sugestaoCorrecao: pattern.suggestion,\n            categoria: 'formal'\n          });\n        }\n      }\n    });\n\n    metrics.totalAmbiguities = totalAmbiguities;\n    metrics.ambiguityTypes = ambiguityTypes;\n    metrics.ambiguityScore = Math.max(0, 100 - (totalAmbiguities * 5));\n\n    return { problems, metrics };\n  }\n\n  private analyzeReadability(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // An√°lise de par√°grafos\n    const paragraphs = text.split(/\\n\\s*\\n/).filter(p => p.trim().length > 0);\n    const sentencesPerParagraph = paragraphs.map(p => {\n      const sentences = p.split(/[.!?]+/).filter(s => s.trim().length > 0);\n      return sentences.length;\n    });\n\n    const avgSentencesPerParagraph = sentencesPerParagraph.reduce((a, b) => a + b, 0) / sentencesPerParagraph.length;\n    metrics.avgSentencesPerParagraph = avgSentencesPerParagraph;\n\n    if (avgSentencesPerParagraph > 3) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: `M√©dia de ${avgSentencesPerParagraph.toFixed(1)} frases por par√°grafo (recomendado: m√°ximo 3)`,\n        gravidade: 'baixa',\n        localizacao: 'Legibilidade do texto',\n        sugestaoCorrecao: 'Dividir par√°grafos longos em par√°grafos menores',\n        categoria: 'formal'\n      });\n    }\n\n    // An√°lise de frases\n    const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);\n    const wordsPerSentence = sentences.map(s => {\n      const words = s.trim().split(/\\s+/).filter(w => w.length > 0);\n      return words.length;\n    });\n\n    const avgWordsPerSentence = wordsPerSentence.reduce((a, b) => a + b, 0) / wordsPerSentence.length;\n    metrics.avgWordsPerSentence = avgWordsPerSentence;\n\n    if (avgWordsPerSentence > 25) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: `M√©dia de ${avgWordsPerSentence.toFixed(1)} palavras por frase (recomendado: m√°ximo 25)`,\n        gravidade: 'media',\n        localizacao: 'Legibilidade do texto',\n        sugestaoCorrecao: 'Dividir frases longas em frases menores',\n        categoria: 'formal'\n      });\n    }\n\n    // An√°lise de palavras\n    const words = text.toLowerCase().match(/\\b[a-z√†√°√¢√£√§√•√¶√ß√®√©√™√´√¨√≠√Æ√Ø√∞√±√≤√≥√¥√µ√∂√∏√π√∫√ª√º√Ω√æ√ø]+\\b/g) || [];\n    const syllablesPerWord = words.map(w => this.countSyllables(w));\n    const avgSyllablesPerWord = syllablesPerWord.reduce((a, b) => a + b, 0) / syllablesPerWord.length;\n    metrics.avgSyllablesPerWord = avgSyllablesPerWord;\n\n    if (avgSyllablesPerWord > 3) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: `M√©dia de ${avgSyllablesPerWord.toFixed(1)} s√≠labas por palavra (recomendado: m√°ximo 3)`,\n        gravidade: 'baixa',\n        localizacao: 'Legibilidade do texto',\n        sugestaoCorrecao: 'Usar sin√¥nimos mais simples quando poss√≠vel',\n        categoria: 'formal'\n      });\n    }\n\n    // Calcular √≠ndice de legibilidade Flesch-Kincaid\n    const fleschScore = this.calculateFleschKincaid(avgWordsPerSentence, avgSyllablesPerWord);\n    metrics.fleschKincaidScore = fleschScore;\n    metrics.readabilityLevel = this.getReadabilityLevel(fleschScore);\n\n    return { problems, metrics };\n  }\n\n  private analyzeSpecificClarity(text: string, classification: any): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // An√°lise espec√≠fica para editais\n    if (classification.tipoDocumento === 'edital') {\n      const editalClarityIssues = this.checkEditalClarity(text);\n      problems.push(...editalClarityIssues);\n    }\n\n    // An√°lise espec√≠fica para termos de refer√™ncia\n    if (classification.tipoDocumento === 'tr') {\n      const trClarityIssues = this.checkTermoReferenciaClarity(text);\n      problems.push(...trClarityIssues);\n    }\n\n    // An√°lise espec√≠fica para contratos\n    if (classification.tipoDocumento === 'minuta_contrato') {\n      const contratoClarityIssues = this.checkContratoClarity(text);\n      problems.push(...contratoClarityIssues);\n    }\n\n    return { problems, metrics };\n  }\n\n  private analyzeTerminologyConsistency(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // Verificar consist√™ncia de termos t√©cnicos\n    const technicalTerms = [\n      'licita√ß√£o', 'edital', 'proposta', 'contrato', 'execu√ß√£o', 'vig√™ncia',\n      'prazo', 'valor', 'especifica√ß√£o', 'quantitativo', 'qualitativo'\n    ];\n\n    const termVariations: Record<string, string[]> = {};\n    let inconsistencyCount = 0;\n\n    technicalTerms.forEach(term => {\n      const variations = text.match(new RegExp(`\\\\b${term}s?\\\\b`, 'gi')) || [];\n      if (variations.length > 1) {\n        const uniqueVariations = [...new Set(variations.map(v => v.toLowerCase()))];\n        if (uniqueVariations.length > 1) {\n          termVariations[term] = uniqueVariations;\n          inconsistencyCount++;\n        }\n      }\n    });\n\n    if (inconsistencyCount > 0) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: `${inconsistencyCount} termo(s) t√©cnico(s) com varia√ß√µes inconsistentes`,\n        gravidade: 'media',\n        localizacao: 'Consist√™ncia terminol√≥gica',\n        sugestaoCorrecao: 'Padronizar uso de termos t√©cnicos em todo o documento',\n        categoria: 'formal'\n      });\n    }\n\n    metrics.terminologyInconsistencies = inconsistencyCount;\n    metrics.termVariations = termVariations;\n\n    return { problems, metrics };\n  }\n\n  private checkEditalClarity(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar clareza de crit√©rios de habilita√ß√£o\n    if (text.includes('crit√©rio') && text.includes('habilita√ß√£o')) {\n      const hasClearCriteria = /\\d+\\.\\s+[^.]*habilita√ß√£o[^.]*\\./i.test(text);\n      if (!hasClearCriteria) {\n        problems.push({\n          tipo: 'especificacao_incompleta',\n          descricao: 'Crit√©rios de habilita√ß√£o n√£o est√£o claramente numerados',\n          gravidade: 'alta',\n          localizacao: 'Crit√©rios de habilita√ß√£o',\n          sugestaoCorrecao: 'Numerar claramente cada crit√©rio de habilita√ß√£o',\n          categoria: 'formal'\n        });\n      }\n    }\n\n    // Verificar clareza de crit√©rios de julgamento\n    if (text.includes('crit√©rio') && text.includes('julgamento')) {\n      const hasClearJudgmentCriteria = /\\d+\\.\\s+[^.]*julgamento[^.]*\\./i.test(text);\n      if (!hasClearJudgmentCriteria) {\n        problems.push({\n          tipo: 'especificacao_incompleta',\n          descricao: 'Crit√©rios de julgamento n√£o est√£o claramente numerados',\n          gravidade: 'alta',\n          localizacao: 'Crit√©rios de julgamento',\n          sugestaoCorrecao: 'Numerar claramente cada crit√©rio de julgamento',\n          categoria: 'formal'\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private checkTermoReferenciaClarity(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar clareza de especifica√ß√µes t√©cnicas\n    if (text.includes('especifica√ß√£o') && text.includes('t√©cnica')) {\n      const hasNumberedSpecs = /\\d+\\.\\s+[^.]*especifica√ß√£o[^.]*\\./i.test(text);\n      if (!hasNumberedSpecs) {\n        problems.push({\n          tipo: 'especificacao_incompleta',\n          descricao: 'Especifica√ß√µes t√©cnicas n√£o est√£o claramente numeradas',\n          gravidade: 'alta',\n          localizacao: 'Especifica√ß√µes t√©cnicas',\n          sugestaoCorrecao: 'Numerar claramente cada especifica√ß√£o t√©cnica',\n          categoria: 'tecnico'\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private checkContratoClarity(text: string): Problem[] {\n    const problems: Problem[] = [];\n\n    // Verificar clareza de cl√°usulas contratuais\n    if (text.includes('cl√°usula')) {\n      const hasNumberedClauses = /\\d+\\.\\s+[^.]*cl√°usula[^.]*\\./i.test(text);\n      if (!hasNumberedClauses) {\n        problems.push({\n          tipo: 'inconsistencia',\n          descricao: 'Cl√°usulas contratuais n√£o est√£o claramente numeradas',\n          gravidade: 'media',\n          localizacao: 'Cl√°usulas contratuais',\n          sugestaoCorrecao: 'Numerar claramente cada cl√°usula contratual',\n          categoria: 'formal'\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private countSyllables(word: string): number {\n    // Algoritmo simples para contar s√≠labas em portugu√™s\n    const vowels = 'aeiou√†√°√¢√£√§√•√¶√ß√®√©√™√´√¨√≠√Æ√Ø√∞√±√≤√≥√¥√µ√∂√∏√π√∫√ª√º√Ω√æ√ø';\n    let count = 0;\n    let prevIsVowel = false;\n\n    for (let i = 0; i < word.length; i++) {\n      const isVowel = vowels.includes(word[i].toLowerCase());\n      if (isVowel && !prevIsVowel) {\n        count++;\n      }\n      prevIsVowel = isVowel;\n    }\n\n    return Math.max(1, count);\n  }\n\n  private calculateFleschKincaid(avgWordsPerSentence: number, avgSyllablesPerWord: number): number {\n    // F√≥rmula Flesch-Kincaid para portugu√™s (adaptada)\n    return 248.835 - (1.015 * avgWordsPerSentence) - (84.6 * avgSyllablesPerWord);\n  }\n\n  private getReadabilityLevel(score: number): string {\n    if (score >= 90) return 'Muito f√°cil';\n    if (score >= 80) return 'F√°cil';\n    if (score >= 70) return 'Razoavelmente f√°cil';\n    if (score >= 60) return 'Padr√£o';\n    if (score >= 50) return 'Razoavelmente dif√≠cil';\n    if (score >= 30) return 'Dif√≠cil';\n    return 'Muito dif√≠cil';\n  }\n\n  private calculateClarityScore(problems: Problem[], metrics: Record<string, any>): number {\n    let score = 100;\n    \n    // Reduzir score baseado nos problemas\n    problems.forEach(problem => {\n      switch (problem.gravidade) {\n        case 'critica':\n          score -= 25;\n          break;\n        case 'alta':\n          score -= 20;\n          break;\n        case 'media':\n          score -= 15;\n          break;\n        case 'baixa':\n          score -= 10;\n          break;\n      }\n    });\n\n    // Ajustar score baseado nas m√©tricas de legibilidade\n    if (metrics.ambiguityScore) {\n      score = Math.min(score, metrics.ambiguityScore);\n    }\n\n    if (metrics.fleschKincaidScore && metrics.fleschKincaidScore < 60) {\n      score -= 10;\n    }\n\n    return Math.max(0, score);\n  }\n\n  private calculateConfidence(problems: Problem[], metrics: Record<string, any>): number {\n    let confidence = 80;\n    \n    // Aumentar confian√ßa se h√° muitas m√©tricas calculadas\n    if (metrics.fleschKincaidScore !== undefined) {\n      confidence += 10;\n    }\n    \n    if (metrics.avgWordsPerSentence !== undefined) {\n      confidence += 5;\n    }\n    \n    // Diminuir confian√ßa se h√° muitos problemas\n    if (problems.length > 5) {\n      confidence -= 15;\n    }\n\n    return Math.min(100, Math.max(0, confidence));\n  }\n\n  protected getCacheKey(context: AnalysisContext): string {\n    const { text, classification } = context;\n    const textHash = this.hashText(text.substring(0, 1500)); // Primeiros 1500 caracteres para an√°lise de clareza\n    return `clarity_${classification.tipoDocumento}_${textHash}`;\n  }\n\n  protected validateInput(context: AnalysisContext): boolean {\n    return context.text.length > 100 && \n           context.text.length < 1500000 && // M√°ximo 1.5MB para an√°lise de clareza\n           !!context.classification?.tipoDocumento;\n  }\n\n  protected createFallbackResult(context: AnalysisContext): AnalysisResult {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: 'An√°lise de clareza b√°sica devido a erro no analisador principal',\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise de clareza',\n        sugestaoCorrecao: 'Verificar configura√ß√µes do analisador de clareza',\n        categoria: 'formal'\n      }],\n      metrics: { \n        ambiguityScore: 70, \n        fleschKincaidScore: 60,\n        avgWordsPerSentence: 20,\n        avgSentencesPerParagraph: 2\n      },\n      score: 70,\n      confidence: 30,\n      processingTime: 0\n    };\n  }\n\n  private hashText(text: string): string {\n    let hash = 0;\n    for (let i = 0; i < text.length; i++) {\n      const char = text.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return Math.abs(hash).toString(36);\n  }\n}\n\ninterface AmbiguityPattern {\n  pattern: RegExp;\n  type: string;\n  severity: 'baixa' | 'media' | 'alta' | 'critica';\n  description: string;\n  suggestion: string;\n}\n\ninterface ReadabilityMetric {\n  name: string;\n  maxValue: number;\n  severity: 'baixa' | 'media' | 'alta' | 'critica';\n  description: string;\n  suggestion: string;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/analyzers/LegalAnalyzer.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[760,763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[760,763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":155,"column":136,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":139,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5494,5497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5494,5497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":157,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5573,5576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5573,5576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'classification' is defined but never used.","line":199,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":199,"endColumn":81},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'classification' is defined but never used.","line":199,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":199,"column":131,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":134,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6799,6802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6799,6802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6878,6881],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6878,6881],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":212,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7178,7181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7178,7181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":242,"column":137,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":140,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8035,8038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8035,8038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":244,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8114,8117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8114,8117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":273,"column":138,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":273,"endColumn":141,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9168,9171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9168,9171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9247,9250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9247,9250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'classification' is defined but never used.","line":351,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":351,"endColumn":111},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'classification' is defined but never used.","line":351,"column":73,"nodeType":null,"messageId":"unusedVar","endLine":351,"endColumn":87},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":396,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":396,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13766,13769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13766,13769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":430,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":430,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":430,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":430,"endColumn":41}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BaseAnalyzer, AnalysisContext, AnalysisResult, AnalyzerConfig } from './BaseAnalyzer';\nimport { Problem, DocumentClassification } from '@/types/document';\n\nexport class LegalAnalyzer extends BaseAnalyzer {\n  private legalRules: Map<string, LegalRule[]> = new Map();\n  private riskPatterns: RiskPattern[] = [];\n\n  constructor() {\n    super({\n      name: 'LegalAnalyzer',\n      version: '1.0.0',\n      enabled: true,\n      priority: 2,\n      timeout: 15000,\n      fallbackEnabled: true\n    });\n\n    this.initializeLegalRules();\n    this.initializeRiskPatterns();\n  }\n\n  async analyze(context: AnalysisContext): Promise<AnalysisResult> {\n    const { text, classification } = context;\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // An√°lise de conformidade legal\n    const complianceAnalysis = this.analyzeLegalCompliance(text, classification);\n    problems.push(...complianceAnalysis.problems);\n    Object.assign(metrics, complianceAnalysis.metrics);\n\n    // An√°lise de riscos legais\n    const riskAnalysis = this.analyzeLegalRisks(text, classification);\n    problems.push(...riskAnalysis.problems);\n    Object.assign(metrics, riskAnalysis.metrics);\n\n    // An√°lise de cl√°usulas obrigat√≥rias\n    const mandatoryClausesAnalysis = this.analyzeMandatoryClauses(text, classification);\n    problems.push(...mandatoryClausesAnalysis.problems);\n    Object.assign(metrics, mandatoryClausesAnalysis.metrics);\n\n    // An√°lise de prazos e vencimentos\n    const deadlineAnalysis = this.analyzeDeadlinesAndTerms(text, classification);\n    problems.push(...deadlineAnalysis.problems);\n    Object.assign(metrics, deadlineAnalysis.metrics);\n\n    // Calcular score legal\n    const score = this.calculateLegalScore(problems);\n    const confidence = this.calculateConfidence(problems, metrics);\n\n    return {\n      problems,\n      metrics,\n      score,\n      confidence,\n      processingTime: 0\n    };\n  }\n\n  private initializeLegalRules(): void {\n    // Regras para editais\n    this.legalRules.set('edital', [\n      {\n        id: 'lei_8666_art40',\n        description: 'Objeto da licita√ß√£o deve estar claramente definido',\n        keywords: ['objeto', 'finalidade', 'escopo'],\n        severity: 'alta',\n        category: 'juridico',\n        suggestion: 'Definir claramente o objeto conforme art. 40, I da Lei 8.666/93'\n      },\n      {\n        id: 'lei_8666_art45',\n        description: 'Crit√©rio de julgamento deve ser especificado',\n        keywords: ['crit√©rio de julgamento', 'menor pre√ßo', 'melhor t√©cnica'],\n        severity: 'alta',\n        category: 'juridico',\n        suggestion: 'Especificar crit√©rio de julgamento conforme art. 45 da Lei 8.666/93'\n      },\n      {\n        id: 'lei_8666_art37',\n        description: 'Prazo para entrega de propostas deve ser adequado',\n        keywords: ['prazo', 'entrega', 'proposta'],\n        severity: 'media',\n        category: 'juridico',\n        suggestion: 'Estabelecer prazo adequado para entrega de propostas'\n      }\n    ]);\n\n    // Regras para contratos\n    this.legalRules.set('minuta_contrato', [\n      {\n        id: 'lei_8666_art55',\n        description: 'Cl√°usula de vig√™ncia deve estar presente',\n        keywords: ['vig√™ncia', 'dura√ß√£o', 'prazo de vig√™ncia'],\n        severity: 'alta',\n        category: 'juridico',\n        suggestion: 'Incluir cl√°usula de vig√™ncia do contrato'\n      },\n      {\n        id: 'lei_8666_art57',\n        description: 'Cl√°usula de rescis√£o deve estar presente',\n        keywords: ['rescis√£o', 'termino', 'extin√ß√£o'],\n        severity: 'alta',\n        category: 'juridico',\n        suggestion: 'Incluir cl√°usula de rescis√£o contratual'\n      }\n    ]);\n\n    // Regras para termos de refer√™ncia\n    this.legalRules.set('tr', [\n      {\n        id: 'lei_8666_art7',\n        description: 'Justificativa para contrata√ß√£o deve estar fundamentada',\n        keywords: ['justificativa', 'fundamenta√ß√£o', 'motivo'],\n        severity: 'media',\n        category: 'juridico',\n        suggestion: 'Fundamentar adequadamente a justificativa para contrata√ß√£o'\n      }\n    ]);\n  }\n\n  private initializeRiskPatterns(): void {\n    this.riskPatterns = [\n      {\n        pattern: /prazo\\s+(?:de\\s+)?(?:entrega|execu√ß√£o|conclus√£o)\\s*:\\s*(\\d+)\\s*(?:dias?|meses?)/i,\n        riskType: 'prazo_inadequado',\n        severity: 'media',\n        description: 'Prazo pode ser inadequado para execu√ß√£o',\n        suggestion: 'Verificar adequa√ß√£o do prazo estabelecido'\n      },\n      {\n        pattern: /valor\\s+(?:estimado|m√°ximo|limite)\\s*:\\s*R?\\$?\\s*([\\d.,]+)/i,\n        riskType: 'valor_inadequado',\n        severity: 'baixa',\n        description: 'Valor pode estar inadequado',\n        suggestion: 'Verificar adequa√ß√£o do valor estabelecido'\n      },\n      {\n        pattern: /(?:dispensa|inexigibilidade)\\s+(?:de\\s+)?licita√ß√£o/i,\n        riskType: 'dispensa_licitacao',\n        severity: 'alta',\n        description: 'Dispensa de licita√ß√£o requer justificativa robusta',\n        suggestion: 'Verificar se justificativa atende requisitos legais'\n      },\n      {\n        pattern: /(?:penalidade|multa)\\s+(?:por\\s+)?(?:atraso|descumprimento)/i,\n        riskType: 'penalidades',\n        severity: 'media',\n        description: 'Penalidades devem estar adequadamente definidas',\n        suggestion: 'Verificar adequa√ß√£o das penalidades estabelecidas'\n      }\n    ];\n  }\n\n  private analyzeLegalCompliance(text: string, classification: DocumentClassification): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    const rules = this.legalRules.get(classification.tipoDocumento) || [];\n    let complianceScore = 100;\n\n    rules.forEach(rule => {\n      const hasKeywords = rule.keywords.some(keyword => \n        text.toLowerCase().includes(keyword.toLowerCase())\n      );\n\n      if (!hasKeywords) {\n        problems.push({\n          tipo: 'clausula_faltante',\n          descricao: rule.description,\n          gravidade: rule.severity,\n          localizacao: 'Conformidade legal',\n          sugestaoCorrecao: rule.suggestion,\n          categoria: rule.category\n        });\n\n        // Reduzir score de conformidade\n        switch (rule.severity) {\n          case 'alta':\n            complianceScore -= 25;\n            break;\n          case 'media':\n            complianceScore -= 15;\n            break;\n          case 'baixa':\n            complianceScore -= 10;\n            break;\n        }\n      }\n    });\n\n    metrics.legalComplianceScore = Math.max(0, complianceScore);\n    metrics.rulesChecked = rules.length;\n    metrics.rulesFailed = problems.length;\n\n    return { problems, metrics };\n  }\n\n  private analyzeLegalRisks(text: string, classification: DocumentClassification): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    let riskScore = 0;\n    const foundRisks: string[] = [];\n\n    this.riskPatterns.forEach(pattern => {\n      const matches = text.match(pattern.pattern);\n      if (matches) {\n        foundRisks.push(pattern.riskType);\n        \n        problems.push({\n          tipo: pattern.riskType as any,\n          descricao: pattern.description,\n          gravidade: pattern.severity,\n          localizacao: 'An√°lise de riscos',\n          sugestaoCorrecao: pattern.suggestion,\n          categoria: 'juridico'\n        });\n\n        // Aumentar score de risco\n        switch (pattern.severity) {\n          case 'alta':\n            riskScore += 30;\n            break;\n          case 'media':\n            riskScore += 20;\n            break;\n          case 'baixa':\n            riskScore += 10;\n            break;\n        }\n      }\n    });\n\n    metrics.riskScore = Math.min(100, riskScore);\n    metrics.risksFound = foundRisks;\n    metrics.totalRiskPatterns = this.riskPatterns.length;\n\n    return { problems, metrics };\n  }\n\n  private analyzeMandatoryClauses(text: string, classification: DocumentClassification): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    const mandatoryClauses = this.getMandatoryClauses(classification);\n    const foundClauses: string[] = [];\n    const missingClauses: string[] = [];\n\n    mandatoryClauses.forEach(clause => {\n      if (text.toLowerCase().includes(clause.keyword.toLowerCase())) {\n        foundClauses.push(clause.name);\n      } else {\n        missingClauses.push(clause.name);\n        problems.push({\n          tipo: 'clausula_faltante',\n          descricao: `Cl√°usula obrigat√≥ria ausente: ${clause.name}`,\n          gravidade: clause.severity,\n          localizacao: 'Cl√°usulas obrigat√≥rias',\n          sugestaoCorrecao: clause.suggestion,\n          categoria: 'juridico'\n        });\n      }\n    });\n\n    metrics.mandatoryClausesFound = foundClauses.length;\n    metrics.mandatoryClausesMissing = missingClauses.length;\n    metrics.mandatoryClausesTotal = mandatoryClauses.length;\n\n    return { problems, metrics };\n  }\n\n  private analyzeDeadlinesAndTerms(text: string, classification: DocumentClassification): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // Extrair prazos do texto\n    const deadlinePatterns = [\n      /prazo\\s+(?:de\\s+)?(?:entrega|execu√ß√£o|conclus√£o)\\s*:\\s*(\\d+)\\s*(dias?|meses?|anos?)/gi,\n      /vig√™ncia\\s*:\\s*(\\d+)\\s*(dias?|meses?|anos?)/gi,\n      /dura√ß√£o\\s*:\\s*(\\d+)\\s*(dias?|meses?|anos?)/gi\n    ];\n\n    const deadlines: Array<{ value: number; unit: string; context: string }> = [];\n\n    deadlinePatterns.forEach(pattern => {\n      const matches = text.matchAll(pattern);\n      for (const match of matches) {\n        const value = parseInt(match[1]);\n        const unit = match[2];\n        const context = match[0];\n        \n        deadlines.push({ value, unit, context });\n      }\n    });\n\n    // Analisar adequa√ß√£o dos prazos\n    deadlines.forEach(deadline => {\n      const isAdequate = this.isDeadlineAdequate(deadline, classification);\n      \n      if (!isAdequate) {\n        problems.push({\n          tipo: 'prazo_inadequado',\n          descricao: `Prazo pode ser inadequado: ${deadline.value} ${deadline.unit}`,\n          gravidade: 'media',\n          localizacao: deadline.context,\n          sugestaoCorrecao: 'Verificar adequa√ß√£o do prazo estabelecido',\n          categoria: 'juridico'\n        });\n      }\n    });\n\n    metrics.deadlinesFound = deadlines.length;\n    metrics.inadequateDeadlines = problems.filter(p => p.tipo === 'prazo_inadequado').length;\n\n    return { problems, metrics };\n  }\n\n  private getMandatoryClauses(classification: DocumentClassification): Array<{ name: string; keyword: string; severity: 'baixa' | 'media' | 'alta' | 'critica'; suggestion: string }> {\n    const clauses = [];\n\n    if (classification.tipoDocumento === 'edital') {\n      clauses.push(\n        { name: 'Objeto da licita√ß√£o', keyword: 'objeto', severity: 'alta', suggestion: 'Definir claramente o objeto da licita√ß√£o' },\n        { name: 'Crit√©rio de julgamento', keyword: 'crit√©rio de julgamento', severity: 'alta', suggestion: 'Especificar crit√©rio de julgamento' },\n        { name: 'Prazo para entrega', keyword: 'prazo para entrega', severity: 'media', suggestion: 'Estabelecer prazo adequado' },\n        { name: 'Local de entrega', keyword: 'local de entrega', severity: 'media', suggestion: 'Especificar local de entrega' }\n      );\n    }\n\n    if (classification.tipoDocumento === 'minuta_contrato') {\n      clauses.push(\n        { name: 'Objeto do contrato', keyword: 'objeto do contrato', severity: 'alta', suggestion: 'Definir objeto do contrato' },\n        { name: 'Vig√™ncia', keyword: 'vig√™ncia', severity: 'alta', suggestion: 'Estabelecer vig√™ncia do contrato' },\n        { name: 'Valor', keyword: 'valor', severity: 'alta', suggestion: 'Definir valor contratual' },\n        { name: 'Forma de pagamento', keyword: 'forma de pagamento', severity: 'media', suggestion: 'Especificar forma de pagamento' }\n      );\n    }\n\n    if (classification.tipoDocumento === 'tr') {\n      clauses.push(\n        { name: 'Especifica√ß√µes t√©cnicas', keyword: 'especifica√ß√µes t√©cnicas', severity: 'alta', suggestion: 'Detalhar especifica√ß√µes t√©cnicas' },\n        { name: 'Quantitativos', keyword: 'quantitativos', severity: 'media', suggestion: 'Especificar quantitativos' },\n        { name: 'Justificativa', keyword: 'justificativa', severity: 'media', suggestion: 'Fundamentar justificativa' }\n      );\n    }\n\n    return clauses;\n  }\n\n  private isDeadlineAdequate(deadline: { value: number; unit: string }, classification: DocumentClassification): boolean {\n    // L√≥gica b√°sica para verificar adequa√ß√£o de prazos\n    // Em produ√ß√£o, isso seria mais sofisticado\n    \n    if (deadline.unit.includes('dia')) {\n      if (deadline.value < 1) return false;\n      if (deadline.value > 365) return false;\n    }\n    \n    if (deadline.unit.includes('mes')) {\n      if (deadline.value < 1) return false;\n      if (deadline.value > 60) return false;\n    }\n    \n    if (deadline.unit.includes('ano')) {\n      if (deadline.value < 1) return false;\n      if (deadline.value > 10) return false;\n    }\n\n    return true;\n  }\n\n  private calculateLegalScore(problems: Problem[]): number {\n    let score = 100;\n    \n    problems.forEach(problem => {\n      switch (problem.gravidade) {\n        case 'critica':\n          score -= 30;\n          break;\n        case 'alta':\n          score -= 20;\n          break;\n        case 'media':\n          score -= 15;\n          break;\n        case 'baixa':\n          score -= 10;\n          break;\n      }\n    });\n\n    return Math.max(0, score);\n  }\n\n  private calculateConfidence(problems: Problem[], metrics: Record<string, any>): number {\n    let confidence = 85; // Base alta para an√°lises legais\n    \n    // Aumentar confian√ßa se muitas regras foram verificadas\n    if (metrics.rulesChecked && metrics.rulesChecked > 5) {\n      confidence += 10;\n    }\n    \n    // Diminuir confian√ßa se h√° muitos problemas\n    if (problems.length > 3) {\n      confidence -= 15;\n    }\n    \n    // Aumentar confian√ßa se score de conformidade √© alto\n    if (metrics.legalComplianceScore && metrics.legalComplianceScore > 80) {\n      confidence += 5;\n    }\n\n    return Math.min(100, Math.max(0, confidence));\n  }\n\n  protected getCacheKey(context: AnalysisContext): string {\n    const { text, classification } = context;\n    const textHash = this.hashText(text.substring(0, 2000)); // Primeiros 2000 caracteres para an√°lise legal\n    return `legal_${classification.tipoDocumento}_${classification.modalidadePrincipal}_${textHash}`;\n  }\n\n  protected validateInput(context: AnalysisContext): boolean {\n    return context.text.length > 200 && \n           context.text.length < 2000000 && // M√°ximo 2MB para an√°lise legal\n           !!context.classification?.tipoDocumento &&\n           !!context.classification?.modalidadePrincipal;\n  }\n\n  protected createFallbackResult(context: AnalysisContext): AnalysisResult {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: 'An√°lise legal b√°sica devido a erro no analisador principal',\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise legal',\n        sugestaoCorrecao: 'Verificar configura√ß√µes do analisador legal',\n        categoria: 'juridico'\n      }],\n      metrics: { \n        legalComplianceScore: 60, \n        riskScore: 50,\n        rulesChecked: 0,\n        rulesFailed: 1\n      },\n      score: 60,\n      confidence: 25,\n      processingTime: 0\n    };\n  }\n\n  private hashText(text: string): string {\n    let hash = 0;\n    for (let i = 0; i < text.length; i++) {\n      const char = text.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return Math.abs(hash).toString(36);\n  }\n}\n\ninterface LegalRule {\n  id: string;\n  description: string;\n  keywords: string[];\n  severity: 'baixa' | 'media' | 'alta' | 'critica';\n  category: 'juridico' | 'tecnico' | 'orcamentario' | 'formal';\n  suggestion: string;\n}\n\ninterface RiskPattern {\n  pattern: RegExp;\n  riskType: string;\n  severity: 'baixa' | 'media' | 'alta' | 'critica';\n  description: string;\n  suggestion: string;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/analyzers/StructuralAnalyzer.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyzerConfig' is defined but never used.","line":1,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[572,575],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[572,575],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1650,1653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1650,1653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1729,1732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1729,1732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2940,2943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2940,2943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3019,3022],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3019,3022],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3729,3732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3729,3732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":119,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":122,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3782,3785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3782,3785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3861,3864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3861,3864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":430,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":430,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13191,13194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13191,13194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":459,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":459,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":459,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":459,"endColumn":41}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BaseAnalyzer, AnalysisContext, AnalysisResult, AnalyzerConfig } from './BaseAnalyzer';\nimport { Problem } from '@/types/document';\n\nexport class StructuralAnalyzer extends BaseAnalyzer {\n  constructor() {\n    super({\n      name: 'StructuralAnalyzer',\n      version: '1.0.0',\n      enabled: true,\n      priority: 1,\n      timeout: 10000,\n      fallbackEnabled: true\n    });\n  }\n\n  async analyze(context: AnalysisContext): Promise<AnalysisResult> {\n    const { text, classification } = context;\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // An√°lise de estrutura b√°sica\n    const structureAnalysis = this.analyzeDocumentStructure(text);\n    problems.push(...structureAnalysis.problems);\n    Object.assign(metrics, structureAnalysis.metrics);\n\n    // An√°lise de formata√ß√£o\n    const formattingAnalysis = this.analyzeFormatting(text);\n    problems.push(...formattingAnalysis.problems);\n    Object.assign(metrics, formattingAnalysis.metrics);\n\n    // An√°lise espec√≠fica por tipo de documento\n    const specificAnalysis = this.analyzeSpecificStructure(text, classification);\n    problems.push(...specificAnalysis.problems);\n    Object.assign(metrics, specificAnalysis.metrics);\n\n    // Calcular score baseado nos problemas encontrados\n    const score = this.calculateStructuralScore(problems);\n    const confidence = this.calculateConfidence(problems, metrics);\n\n    return {\n      problems,\n      metrics,\n      score,\n      confidence,\n      processingTime: 0 // Ser√° definido pelo m√©todo base\n    };\n  }\n\n  private analyzeDocumentStructure(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // Contar se√ß√µes principais\n    const sections = this.extractSections(text);\n    metrics.totalSections = sections.length;\n    metrics.sectionNames = sections.map(s => s.name);\n\n    // Verificar se√ß√µes obrigat√≥rias\n    const requiredSections = ['objeto', 'prazo', 'crit√©rio', 'especifica√ß√£o'];\n    const missingSections = requiredSections.filter(req => \n      !sections.some(s => s.name.toLowerCase().includes(req))\n    );\n\n    if (missingSections.length > 0) {\n      problems.push({\n        tipo: 'clausula_faltante',\n        descricao: `Se√ß√µes obrigat√≥rias ausentes: ${missingSections.join(', ')}`,\n        gravidade: 'alta',\n        localizacao: 'Estrutura do documento',\n        sugestaoCorrecao: `Incluir se√ß√µes: ${missingSections.join(', ')}`,\n        categoria: 'formal'\n      });\n    }\n\n    // Verificar hierarquia de se√ß√µes\n    const hierarchyIssues = this.checkSectionHierarchy(sections);\n    problems.push(...hierarchyIssues);\n\n    // Verificar tamanho das se√ß√µes\n    const sizeIssues = this.checkSectionSizes(sections);\n    problems.push(...sizeIssues);\n\n    return { problems, metrics };\n  }\n\n  private analyzeFormatting(text: string): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // Verificar formata√ß√£o de listas\n    const listIssues = this.checkListFormatting(text);\n    problems.push(...listIssues);\n\n    // Verificar numera√ß√£o de itens\n    const numberingIssues = this.checkItemNumbering(text);\n    problems.push(...numberingIssues);\n\n    // Verificar espa√ßamento e par√°grafos\n    const spacingIssues = this.checkSpacingAndParagraphs(text);\n    problems.push(...spacingIssues);\n\n    // Verificar uso de negrito e it√°lico\n    const emphasisIssues = this.checkTextEmphasis(text);\n    problems.push(...emphasisIssues);\n\n    metrics.formattingIssues = problems.length;\n\n    return { problems, metrics };\n  }\n\n  private analyzeSpecificStructure(text: string, classification: any): { problems: Problem[]; metrics: Record<string, any> } {\n    const problems: Problem[] = [];\n    const metrics: Record<string, any> = {};\n\n    // An√°lise espec√≠fica para editais\n    if (classification.tipoDocumento === 'edital') {\n      const editalIssues = this.checkEditalStructure(text);\n      problems.push(...editalIssues);\n    }\n\n    // An√°lise espec√≠fica para termos de refer√™ncia\n    if (classification.tipoDocumento === 'tr') {\n      const trIssues = this.checkTermoReferenciaStructure(text);\n      problems.push(...trIssues);\n    }\n\n    // An√°lise espec√≠fica para minutas de contrato\n    if (classification.tipoDocumento === 'minuta_contrato') {\n      const contratoIssues = this.checkContratoStructure(text);\n      problems.push(...contratoIssues);\n    }\n\n    return { problems, metrics };\n  }\n\n  private extractSections(text: string): Array<{ name: string; content: string; level: number }> {\n    const sections: Array<{ name: string; content: string; level: number }> = [];\n    \n    // Padr√µes comuns de se√ß√µes\n    const sectionPatterns = [\n      /^(?:CAP√çTULO|CAPITULO)\\s*(\\d+)[:\\s]+(.+)$/gmi,\n      /^(?:SE√á√ÉO|SECAO)\\s*(\\d+)[:\\s]+(.+)$/gmi,\n      /^(\\d+\\.)\\s*(.+)$/gm,\n      /^([A-Z][A-Z\\s]+):/gm\n    ];\n\n    const lines = text.split('\\n');\n    let currentSection: { name: string; content: string; level: number } | null = null;\n\n    for (const line of lines) {\n      let matched = false;\n      \n      for (const pattern of sectionPatterns) {\n        const match = pattern.exec(line);\n        if (match) {\n          if (currentSection) {\n            sections.push(currentSection);\n          }\n          \n          const level = this.determineSectionLevel(line);\n          currentSection = {\n            name: match[2] || match[1] || line.trim(),\n            content: line,\n            level\n          };\n          matched = true;\n          break;\n        }\n      }\n\n      if (!matched && currentSection) {\n        currentSection.content += '\\n' + line;\n      }\n    }\n\n    if (currentSection) {\n      sections.push(currentSection);\n    }\n\n    return sections;\n  }\n\n  private determineSectionLevel(line: string): number {\n    if (line.match(/^(?:CAP√çTULO|CAPITULO)/)) return 1;\n    if (line.match(/^(?:SE√á√ÉO|SECAO)/)) return 2;\n    if (line.match(/^\\d+\\./)) return 3;\n    if (line.match(/^[A-Z][A-Z\\s]+:/)) return 4;\n    return 5;\n  }\n\n  private checkSectionHierarchy(sections: Array<{ name: string; content: string; level: number }>): Problem[] {\n    const problems: Problem[] = [];\n    \n    for (let i = 1; i < sections.length; i++) {\n      const prevLevel = sections[i - 1].level;\n      const currLevel = sections[i].level;\n      \n      // Verificar se h√° saltos muito grandes no n√≠vel\n      if (currLevel - prevLevel > 2) {\n        problems.push({\n          tipo: 'inconsistencia',\n          descricao: `Quebra na hierarquia de se√ß√µes: ${sections[i - 1].name} ‚Üí ${sections[i].name}`,\n          gravidade: 'media',\n          localizacao: 'Estrutura hier√°rquica',\n          sugestaoCorrecao: 'Reorganizar se√ß√µes para manter hierarquia l√≥gica',\n          categoria: 'formal'\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private checkSectionSizes(sections: Array<{ name: string; content: string; level: number }>): Problem[] {\n    const problems: Problem[] = [];\n    \n    sections.forEach(section => {\n      const contentLength = section.content.length;\n      \n      if (contentLength < 50) {\n        problems.push({\n          tipo: 'especificacao_incompleta',\n          descricao: `Se√ß√£o \"${section.name}\" muito pequena (${contentLength} caracteres)`,\n          gravidade: 'media',\n          localizacao: section.name,\n          sugestaoCorrecao: 'Expandir conte√∫do da se√ß√£o com mais detalhes',\n          categoria: 'formal'\n        });\n      }\n    });\n\n    return problems;\n  }\n\n  private checkListFormatting(text: string): Problem[] {\n    const problems: Problem[] = [];\n    \n    // Verificar listas n√£o numeradas\n    const unnumberedLists = text.match(/^[-*‚Ä¢]\\s+.+$/gm);\n    if (unnumberedLists && unnumberedLists.length > 5) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: 'Muitas listas n√£o numeradas podem dificultar refer√™ncias',\n        gravidade: 'baixa',\n        localizacao: 'Formata√ß√£o de listas',\n        sugestaoCorrecao: 'Considerar numera√ß√£o para listas longas',\n        categoria: 'formal'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkItemNumbering(text: string): Problem[] {\n    const problems: Problem[] = [];\n    \n    // Verificar sequ√™ncia de numera√ß√£o\n    const numberedItems = text.match(/^\\d+\\.\\s+.+$/gm);\n    if (numberedItems) {\n      const numbers = numberedItems.map(item => {\n        const match = item.match(/^(\\d+)\\./);\n        return match ? parseInt(match[1]) : 0;\n      });\n\n      // Verificar se h√° n√∫meros faltando\n      for (let i = 1; i <= Math.max(...numbers); i++) {\n        if (!numbers.includes(i)) {\n          problems.push({\n            tipo: 'inconsistencia',\n            descricao: `Item ${i} est√° faltando na numera√ß√£o`,\n            gravidade: 'media',\n            localizacao: 'Numera√ß√£o de itens',\n            sugestaoCorrecao: 'Verificar e corrigir sequ√™ncia de numera√ß√£o',\n            categoria: 'formal'\n          });\n        }\n      }\n    }\n\n    return problems;\n  }\n\n  private checkSpacingAndParagraphs(text: string): Problem[] {\n    const problems: Problem[] = [];\n    \n    // Verificar par√°grafos muito longos\n    const paragraphs = text.split(/\\n\\s*\\n/);\n    const longParagraphs = paragraphs.filter(p => p.length > 500);\n    \n    if (longParagraphs.length > 0) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: `${longParagraphs.length} par√°grafo(s) muito longo(s) podem dificultar leitura`,\n        gravidade: 'baixa',\n        localizacao: 'Formata√ß√£o de par√°grafos',\n        sugestaoCorrecao: 'Dividir par√°grafos longos em par√°grafos menores',\n        categoria: 'formal'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkTextEmphasis(text: string): Problem[] {\n    const problems: Problem[] = [];\n    \n    // Verificar uso excessivo de mai√∫sculas\n    const upperCaseWords = text.match(/\\b[A-Z]{3,}\\b/g);\n    if (upperCaseWords && upperCaseWords.length > 20) {\n      problems.push({\n        tipo: 'inconsistencia',\n        descricao: 'Uso excessivo de palavras em mai√∫sculas pode dificultar leitura',\n        gravidade: 'baixa',\n        localizacao: 'Formata√ß√£o de texto',\n        sugestaoCorrecao: 'Usar mai√∫sculas apenas para t√≠tulos e nomes pr√≥prios',\n        categoria: 'formal'\n      });\n    }\n\n    return problems;\n  }\n\n  private checkEditalStructure(text: string): Problem[] {\n    const problems: Problem[] = [];\n    \n    // Verificar se√ß√µes espec√≠ficas de editais\n    const requiredEditalSections = [\n      'objeto da licita√ß√£o',\n      'crit√©rio de julgamento',\n      'prazo para entrega',\n      'local de entrega',\n      'documenta√ß√£o necess√°ria'\n    ];\n\n    requiredEditalSections.forEach(section => {\n      if (!text.toLowerCase().includes(section)) {\n        problems.push({\n          tipo: 'clausula_faltante',\n          descricao: `Se√ß√£o \"${section}\" n√£o encontrada no edital`,\n          gravidade: 'alta',\n          localizacao: 'Estrutura do edital',\n          sugestaoCorrecao: `Incluir se√ß√£o sobre ${section}`,\n          categoria: 'juridico'\n        });\n      }\n    });\n\n    return problems;\n  }\n\n  private checkTermoReferenciaStructure(text: string): Problem[] {\n    const problems: Problem[] = [];\n    \n    // Verificar se√ß√µes espec√≠ficas de TR\n    const requiredTRSections = [\n      'especifica√ß√µes t√©cnicas',\n      'quantitativos',\n      'cronograma',\n      'crit√©rios de aceita√ß√£o'\n    ];\n\n    requiredTRSections.forEach(section => {\n      if (!text.toLowerCase().includes(section)) {\n        problems.push({\n          tipo: 'especificacao_incompleta',\n          descricao: `Se√ß√£o \"${section}\" n√£o encontrada no termo de refer√™ncia`,\n          gravidade: 'alta',\n          localizacao: 'Estrutura do TR',\n          sugestaoCorrecao: `Incluir se√ß√£o sobre ${section}`,\n          categoria: 'tecnico'\n        });\n      }\n    });\n\n    return problems;\n  }\n\n  private checkContratoStructure(text: string): Problem[] {\n    const problems: Problem[] = [];\n    \n    // Verificar cl√°usulas obrigat√≥rias de contratos\n    const requiredContractClauses = [\n      'objeto do contrato',\n      'vig√™ncia',\n      'valor',\n      'forma de pagamento',\n      'penalidades',\n      'rescis√£o'\n    ];\n\n    requiredContractClauses.forEach(clause => {\n      if (!text.toLowerCase().includes(clause)) {\n        problems.push({\n          tipo: 'clausula_faltante',\n          descricao: `Cl√°usula \"${clause}\" n√£o encontrada no contrato`,\n          gravidade: 'alta',\n          localizacao: 'Estrutura do contrato',\n          sugestaoCorrecao: `Incluir cl√°usula sobre ${clause}`,\n          categoria: 'juridico'\n        });\n      }\n    });\n\n    return problems;\n  }\n\n  private calculateStructuralScore(problems: Problem[]): number {\n    let score = 100;\n    \n    problems.forEach(problem => {\n      switch (problem.gravidade) {\n        case 'critica':\n          score -= 25;\n          break;\n        case 'alta':\n          score -= 15;\n          break;\n        case 'media':\n          score -= 10;\n          break;\n        case 'baixa':\n          score -= 5;\n          break;\n      }\n    });\n\n    return Math.max(0, score);\n  }\n\n  private calculateConfidence(problems: Problem[], metrics: Record<string, any>): number {\n    // Base de confian√ßa de 80%\n    let confidence = 80;\n    \n    // Aumentar confian√ßa se h√° muitas se√ß√µes bem estruturadas\n    if (metrics.totalSections && metrics.totalSections > 5) {\n      confidence += 10;\n    }\n    \n    // Diminuir confian√ßa se h√° muitos problemas\n    if (problems.length > 5) {\n      confidence -= 20;\n    }\n    \n    return Math.min(100, Math.max(0, confidence));\n  }\n\n  protected getCacheKey(context: AnalysisContext): string {\n    const { text, classification } = context;\n    const textHash = this.hashText(text.substring(0, 1000)); // Primeiros 1000 caracteres\n    return `structural_${classification.tipoDocumento}_${textHash}`;\n  }\n\n  protected validateInput(context: AnalysisContext): boolean {\n    return context.text.length > 100 && \n           context.text.length < 1000000 && // M√°ximo 1MB de texto\n           !!context.classification?.tipoDocumento;\n  }\n\n  protected createFallbackResult(context: AnalysisContext): AnalysisResult {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: 'An√°lise estrutural b√°sica devido a erro no analisador principal',\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise',\n        sugestaoCorrecao: 'Verificar configura√ß√µes do analisador estrutural',\n        categoria: 'formal'\n      }],\n      metrics: { totalSections: 0, formattingIssues: 1 },\n      score: 70,\n      confidence: 30,\n      processingTime: 0\n    };\n  }\n\n  private hashText(text: string): string {\n    // Hash simples para cache key\n    let hash = 0;\n    for (let i = 0; i < text.length; i++) {\n      const char = text.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return Math.abs(hash).toString(36);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/cache/IntelligentCache.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[184,187],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[184,187],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3177,3180],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3177,3180],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3832,3835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3832,3835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_' is assigned a value but never used.","line":242,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":242,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":242,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":242,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":289,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8345,8348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8345,8348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":289,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8375,8378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8375,8378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":311,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":311,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9101,9104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9101,9104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":311,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":311,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9133,9136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9133,9136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_' is assigned a value but never used.","line":388,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":388,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":388,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":388,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":415,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":415,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12411,12414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12411,12414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":419,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":419,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12541,12544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12541,12544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AnalysisContext, AnalysisResult } from '../analyzers/BaseAnalyzer';\n\nexport interface CacheEntry {\n  result: AnalysisResult;\n  timestamp: number;\n  parameters: Record<string, any>;\n  textHash: string;\n  classificationHash: string;\n  accessCount: number;\n  lastAccessed: number;\n  size: number;\n}\n\nexport interface CacheConfig {\n  maxSize: number; // MB\n  maxEntries: number;\n  ttl: number; // Time to live em milissegundos\n  similarityThreshold: number; // Threshold para considerar an√°lises similares\n  enableCompression: boolean;\n  enableMetrics: boolean;\n}\n\nexport interface CacheMetrics {\n  totalHits: number;\n  totalMisses: number;\n  totalRequests: number;\n  cacheSize: number;\n  entryCount: number;\n  averageHitRate: number;\n  compressionRatio: number;\n  evictionCount: number;\n}\n\nexport class IntelligentCache {\n  private cache: Map<string, CacheEntry> = new Map();\n  private config: CacheConfig;\n  private metrics: CacheMetrics;\n  private similarityIndex: Map<string, string[]> = new Map(); // textHash -> similar hashes\n\n  constructor(config: Partial<CacheConfig> = {}) {\n    this.config = {\n      maxSize: 100, // 100MB\n      maxEntries: 1000,\n      ttl: 24 * 60 * 60 * 1000, // 24 horas\n      similarityThreshold: 0.85,\n      enableCompression: true,\n      enableMetrics: true,\n      ...config\n    };\n\n    this.metrics = {\n      totalHits: 0,\n      totalMisses: 0,\n      totalRequests: 0,\n      cacheSize: 0,\n      entryCount: 0,\n      averageHitRate: 0,\n      compressionRatio: 1.0,\n      evictionCount: 0\n    };\n\n    // Iniciar limpeza peri√≥dica\n    this.startPeriodicCleanup();\n  }\n\n  async get(context: AnalysisContext): Promise<AnalysisResult | null> {\n    this.metrics.totalRequests++;\n    \n    const cacheKey = this.generateCacheKey(context);\n    \n    // Tentar cache direto primeiro\n    const directHit = this.cache.get(cacheKey);\n    if (directHit && this.isValid(directHit)) {\n      this.updateAccessMetrics(directHit);\n      this.metrics.totalHits++;\n      return directHit.result;\n    }\n\n    // Tentar cache por similaridade\n    const similarHit = await this.findSimilarAnalysis(context);\n    if (similarHit) {\n      this.metrics.totalHits++;\n      return similarHit;\n    }\n\n    this.metrics.totalMisses++;\n    return null;\n  }\n\n  async set(context: AnalysisContext, result: AnalysisResult): Promise<void> {\n    const cacheKey = this.generateCacheKey(context);\n    const textHash = this.hashText(context.text);\n    const classificationHash = this.hashClassification(context.classification);\n    \n    const entry: CacheEntry = {\n      result,\n      timestamp: Date.now(),\n      parameters: context.parameters,\n      textHash,\n      classificationHash,\n      accessCount: 1,\n      lastAccessed: Date.now(),\n      size: this.calculateEntrySize(result)\n    };\n\n    // Verificar se h√° espa√ßo suficiente\n    await this.ensureCacheSpace(entry.size);\n\n    // Adicionar ao cache\n    this.cache.set(cacheKey, entry);\n    \n    // Atualizar √≠ndice de similaridade\n    this.updateSimilarityIndex(textHash, classificationHash);\n\n    // Atualizar m√©tricas\n    this.updateCacheMetrics(entry.size);\n  }\n\n  async invalidateByParameters(parameters: Record<string, any>): Promise<number> {\n    let invalidatedCount = 0;\n    const keysToRemove: string[] = [];\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (this.hasParameterChanges(entry.parameters, parameters)) {\n        keysToRemove.push(key);\n        invalidatedCount++;\n      }\n    }\n\n    // Remover entradas invalidadas\n    keysToRemove.forEach(key => {\n      const entry = this.cache.get(key);\n      if (entry) {\n        this.updateCacheMetrics(-entry.size);\n        this.cache.delete(key);\n      }\n    });\n\n    this.metrics.evictionCount += invalidatedCount;\n    return invalidatedCount;\n  }\n\n  async invalidateByClassification(classification: any): Promise<number> {\n    let invalidatedCount = 0;\n    const classificationHash = this.hashClassification(classification);\n    const keysToRemove: string[] = [];\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (entry.classificationHash === classificationHash) {\n        keysToRemove.push(key);\n        invalidatedCount++;\n      }\n    }\n\n    // Remover entradas invalidadas\n    keysToRemove.forEach(key => {\n      const entry = this.cache.get(key);\n      if (entry) {\n        this.updateCacheMetrics(-entry.size);\n        this.cache.delete(key);\n      }\n    });\n\n    this.metrics.evictionCount += invalidatedCount;\n    return invalidatedCount;\n  }\n\n  async invalidateByTextSimilarity(text: string, threshold: number = 0.9): Promise<number> {\n    let invalidatedCount = 0;\n    const textHash = this.hashText(text);\n    const keysToRemove: string[] = [];\n\n    for (const [key, entry] of this.cache.entries()) {\n      const similarity = this.calculateTextSimilarity(textHash, entry.textHash);\n      if (similarity >= threshold) {\n        keysToRemove.push(key);\n        invalidatedCount++;\n      }\n    }\n\n    // Remover entradas invalidadas\n    keysToRemove.forEach(key => {\n      const entry = this.cache.get(key);\n      if (entry) {\n        this.updateCacheMetrics(-entry.size);\n        this.cache.delete(key);\n      }\n    });\n\n    this.metrics.evictionCount += invalidatedCount;\n    return invalidatedCount;\n  }\n\n  clear(): void {\n    this.cache.clear();\n    this.similarityIndex.clear();\n    this.metrics = {\n      totalHits: 0,\n      totalMisses: 0,\n      totalRequests: 0,\n      cacheSize: 0,\n      entryCount: 0,\n      averageHitRate: 0,\n      compressionRatio: 1.0,\n      evictionCount: 0\n    };\n  }\n\n  getMetrics(): CacheMetrics {\n    if (this.metrics.totalRequests > 0) {\n      this.metrics.averageHitRate = this.metrics.totalHits / this.metrics.totalRequests;\n    }\n    \n    return { ...this.metrics };\n  }\n\n  getCacheStats(): { size: number; entryCount: number; hitRate: number } {\n    return {\n      size: this.metrics.cacheSize,\n      entryCount: this.metrics.entryCount,\n      hitRate: this.metrics.averageHitRate\n    };\n  }\n\n  private generateCacheKey(context: AnalysisContext): string {\n    const { text, classification, parameters } = context;\n    \n    // Criar hash composto\n    const textHash = this.hashText(text.substring(0, 500)); // Primeiros 500 caracteres\n    const classificationHash = this.hashClassification(classification);\n    const parametersHash = this.hashParameters(parameters);\n    \n    return `${classificationHash}_${textHash}_${parametersHash}`;\n  }\n\n  private async findSimilarAnalysis(context: AnalysisContext): Promise<AnalysisResult | null> {\n    const textHash = this.hashText(context.text);\n    const classificationHash = this.hashClassification(context.classification);\n    \n    let bestMatch: { entry: CacheEntry; similarity: number } | null = null;\n\n    for (const [_, entry] of this.cache.entries()) {\n      if (!this.isValid(entry)) continue;\n\n      // Verificar similaridade de classifica√ß√£o\n      if (entry.classificationHash !== classificationHash) continue;\n\n      // Calcular similaridade de texto\n      const textSimilarity = this.calculateTextSimilarity(textHash, entry.textHash);\n      \n      // Calcular similaridade de par√¢metros\n      const parameterSimilarity = this.calculateParameterSimilarity(context.parameters, entry.parameters);\n      \n      // Similaridade combinada\n      const combinedSimilarity = (textSimilarity * 0.7) + (parameterSimilarity * 0.3);\n\n      if (combinedSimilarity >= this.config.similarityThreshold) {\n        if (!bestMatch || combinedSimilarity > bestMatch.similarity) {\n          bestMatch = { entry, similarity: combinedSimilarity };\n        }\n      }\n    }\n\n    if (bestMatch) {\n      this.updateAccessMetrics(bestMatch.entry);\n      return bestMatch.entry.result;\n    }\n\n    return null;\n  }\n\n  private calculateTextSimilarity(hash1: string, hash2: string): number {\n    // Implementa√ß√£o simples de similaridade baseada em hash\n    // Em produ√ß√£o, usar algoritmos mais sofisticados como Jaccard, Cosine, etc.\n    \n    if (hash1 === hash2) return 1.0;\n    \n    // Calcular dist√¢ncia de Hamming simples\n    const maxLength = Math.max(hash1.length, hash2.length);\n    let differences = 0;\n    \n    for (let i = 0; i < maxLength; i++) {\n      if (hash1[i] !== hash2[i]) differences++;\n    }\n    \n    return 1 - (differences / maxLength);\n  }\n\n  private calculateParameterSimilarity(params1: Record<string, any>, params2: Record<string, any>): number {\n    const keys1 = Object.keys(params1);\n    const keys2 = Object.keys(params2);\n    \n    if (keys1.length === 0 && keys2.length === 0) return 1.0;\n    if (keys1.length === 0 || keys2.length === 0) return 0.0;\n    \n    const commonKeys = keys1.filter(key => keys2.includes(key));\n    const totalKeys = new Set([...keys1, ...keys2]).size;\n    \n    if (commonKeys.length === 0) return 0.0;\n    \n    let matchingValues = 0;\n    commonKeys.forEach(key => {\n      if (JSON.stringify(params1[key]) === JSON.stringify(params2[key])) {\n        matchingValues++;\n      }\n    });\n    \n    return (matchingValues / totalKeys) * (commonKeys.length / totalKeys);\n  }\n\n  private hasParameterChanges(oldParams: Record<string, any>, newParams: Record<string, any>): boolean {\n    const keys = new Set([...Object.keys(oldParams), ...Object.keys(newParams)]);\n    \n    for (const key of keys) {\n      const oldValue = oldParams[key];\n      const newValue = newParams[key];\n      \n      if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {\n        return true;\n      }\n    }\n    \n    return false;\n  }\n\n  private async ensureCacheSpace(requiredSize: number): Promise<void> {\n    while (this.metrics.cacheSize + requiredSize > this.config.maxSize * 1024 * 1024 || \n           this.metrics.entryCount >= this.config.maxEntries) {\n      \n      // Encontrar entrada para remover (LRU + LFU)\n      const entryToRemove = this.findEntryToEvict();\n      if (entryToRemove) {\n        this.cache.delete(entryToRemove);\n        const entry = this.cache.get(entryToRemove);\n        if (entry) {\n          this.updateCacheMetrics(-entry.size);\n        }\n        this.metrics.evictionCount++;\n      } else {\n        break; // N√£o foi poss√≠vel remover mais entradas\n      }\n    }\n  }\n\n  private findEntryToEvict(): string | null {\n    let worstEntry: { key: string; score: number } | null = null;\n    \n    for (const [key, entry] of this.cache.entries()) {\n      if (!this.isValid(entry)) {\n        return key; // Remover entradas expiradas primeiro\n      }\n      \n      // Calcular score de evi√ß√£o (LRU + LFU)\n      const timeScore = (Date.now() - entry.lastAccessed) / (1000 * 60 * 60); // Horas\n      const accessScore = 1 / (entry.accessCount + 1);\n      const evictionScore = timeScore * 0.7 + accessScore * 0.3;\n      \n      if (!worstEntry || evictionScore > worstEntry.score) {\n        worstEntry = { key, score: evictionScore };\n      }\n    }\n    \n    return worstEntry?.key || null;\n  }\n\n  private isValid(entry: CacheEntry): boolean {\n    return Date.now() - entry.timestamp < this.config.ttl;\n  }\n\n  private updateAccessMetrics(entry: CacheEntry): void {\n    entry.accessCount++;\n    entry.lastAccessed = Date.now();\n  }\n\n  private updateCacheMetrics(sizeChange: number): void {\n    this.metrics.cacheSize = Math.max(0, this.metrics.cacheSize + sizeChange);\n    this.metrics.entryCount = this.cache.size;\n  }\n\n  private updateSimilarityIndex(textHash: string, classificationHash: string): void {\n    const key = `${classificationHash}_${textHash}`;\n    \n    if (!this.similarityIndex.has(key)) {\n      this.similarityIndex.set(key, []);\n    }\n    \n    // Adicionar hashes similares\n    for (const [existingKey, _] of this.cache.entries()) {\n      if (existingKey !== key) {\n        const existingHashes = this.similarityIndex.get(existingKey);\n        if (existingHashes && !existingHashes.includes(key)) {\n          existingHashes.push(key);\n        }\n      }\n    }\n  }\n\n  private calculateEntrySize(result: AnalysisResult): number {\n    // Estimativa simples do tamanho da entrada\n    const resultSize = JSON.stringify(result).length;\n    const overhead = 200; // Overhead de metadados\n    return resultSize + overhead;\n  }\n\n  private hashText(text: string): string {\n    let hash = 0;\n    for (let i = 0; i < text.length; i++) {\n      const char = text.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return Math.abs(hash).toString(36);\n  }\n\n  private hashClassification(classification: any): string {\n    return this.hashText(JSON.stringify(classification));\n  }\n\n  private hashParameters(parameters: Record<string, any>): string {\n    return this.hashText(JSON.stringify(parameters));\n  }\n\n  private startPeriodicCleanup(): void {\n    setInterval(() => {\n      this.cleanupExpiredEntries();\n    }, 5 * 60 * 1000); // A cada 5 minutos\n  }\n\n  private cleanupExpiredEntries(): void {\n    const now = Date.now();\n    const keysToRemove: string[] = [];\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (now - entry.timestamp > this.config.ttl) {\n        keysToRemove.push(key);\n      }\n    }\n\n    keysToRemove.forEach(key => {\n      const entry = this.cache.get(key);\n      if (entry) {\n        this.updateCacheMetrics(-entry.size);\n        this.cache.delete(key);\n      }\n    });\n\n    this.metrics.evictionCount += keysToRemove.length;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/fallback/FallbackSystem.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Problem' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Problem' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'lastError' is assigned a value but never used.","line":101,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":101,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lastError' is assigned a value but never used.","line":101,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":16},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":147,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":147,"endColumn":54},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":148,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":148,"endColumn":61},{"ruleId":"no-unused-vars","severity":2,"message":"'condition' is defined but never used.","line":180,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'condition' is defined but never used.","line":180,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":180,"endColumn":44},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":180,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":89},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":180,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":180,"endColumn":72},{"ruleId":"no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":180,"column":91,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":104},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":180,"column":91,"nodeType":null,"messageId":"unusedVar","endLine":180,"endColumn":97},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":233,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":233,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7449,7452],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7449,7452],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":244,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":244,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":244,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":244,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":244,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":244,"endColumn":90},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'config' is defined but never used.","line":244,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":244,"endColumn":65},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":250,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":250,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'config' is defined but never used.","line":250,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":250,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":250,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":250,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8052,8055],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8052,8055],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'action' is defined but never used.","line":267,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":267,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'action' is defined but never used.","line":267,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":267,"endColumn":43},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":267,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":267,"endColumn":85},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":267,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":267,"endColumn":68},{"ruleId":"no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":267,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":267,"endColumn":100},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":267,"column":87,"nodeType":null,"messageId":"unusedVar","endLine":267,"endColumn":93},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":412,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":412,"endColumn":44},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":416,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":416,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":416,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":416,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":435,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":435,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":435,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":435,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":454,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":454,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used.","line":454,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":454,"endColumn":24}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AnalysisContext, AnalysisResult } from '../analyzers/BaseAnalyzer';\nimport { Problem } from '@/types/document';\n\nexport interface FallbackConfig {\n  enabled: boolean;\n  maxRetries: number;\n  retryDelay: number; // milissegundos\n  enableBasicAnalysis: boolean;\n  enableLogging: boolean;\n  enableMetrics: boolean;\n  fallbackStrategies: FallbackStrategy[];\n}\n\nexport interface FallbackStrategy {\n  name: string;\n  priority: number;\n  enabled: boolean;\n  conditions: FallbackCondition[];\n  actions: FallbackAction[];\n}\n\nexport interface FallbackCondition {\n  type: 'error_type' | 'error_count' | 'timeout' | 'performance' | 'custom';\n  value: string | number | boolean;\n  operator: 'equals' | 'greater_than' | 'less_than' | 'contains' | 'regex';\n}\n\nexport interface FallbackAction {\n  type: 'retry' | 'use_basic_analyzer' | 'use_cached_result' | 'return_error' | 'custom';\n  config: Record<string, unknown>;\n}\n\nexport interface FallbackMetrics {\n  totalFallbacks: number;\n  successfulFallbacks: number;\n  failedFallbacks: number;\n  averageFallbackTime: number;\n  fallbackReasons: Record<string, number>;\n  strategyUsage: Record<string, number>;\n}\n\nexport interface FallbackLogEntry {\n  timestamp: Date;\n  context: string;\n  error: Error;\n  strategy: string;\n  action: string;\n  result: 'success' | 'failure';\n  duration: number;\n  metadata: Record<string, unknown>;\n}\n\nexport class FallbackSystem {\n  private config: FallbackConfig;\n  private metrics: FallbackMetrics;\n  private logs: FallbackLogEntry[] = [];\n  private errorCounts: Map<string, number> = new Map();\n  private basicAnalyzers: Map<string, BasicAnalyzer> = new Map();\n\n  constructor(config: Partial<FallbackConfig> = {}) {\n    this.config = {\n      enabled: true,\n      maxRetries: 3,\n      retryDelay: 1000,\n      enableBasicAnalysis: true,\n      enableLogging: true,\n      enableMetrics: true,\n      fallbackStrategies: this.getDefaultStrategies(),\n      ...config\n    };\n\n    this.metrics = {\n      totalFallbacks: 0,\n      successfulFallbacks: 0,\n      failedFallbacks: 0,\n      averageFallbackTime: 0,\n      fallbackReasons: {},\n      strategyUsage: {}\n    };\n\n    this.initializeBasicAnalyzers();\n  }\n\n  async executeWithFallback<T>(\n    operation: () => Promise<T>,\n    context: AnalysisContext,\n    error?: Error\n  ): Promise<T> {\n    if (!this.config.enabled) {\n      if (error) throw error;\n      return await operation();\n    }\n\n    const startTime = Date.now();\n    let lastError = error;\n\n    try {\n      // Tentar opera√ß√£o principal\n      return await operation();\n    } catch (error) {\n      lastError = error as Error;\n      this.recordError(error as Error, context);\n      \n      // Executar estrat√©gias de fallback\n      const fallbackResult = await this.executeFallbackStrategies(context, error as Error);\n      \n      if (fallbackResult) {\n        this.recordSuccessfulFallback(context, fallbackResult.strategy, Date.now() - startTime);\n        return fallbackResult.result as T;\n      }\n      \n      // Se nenhum fallback funcionou, registrar falha\n      this.recordFailedFallback(context, error as Error, Date.now() - startTime);\n      throw error;\n    }\n  }\n\n  async executeFallbackStrategies(context: AnalysisContext, error: Error): Promise<{ result: unknown; strategy: string } | null> {\n    // Ordenar estrat√©gias por prioridade\n    const sortedStrategies = [...this.config.fallbackStrategies]\n      .filter(s => s.enabled)\n      .sort((a, b) => a.priority - b.priority);\n\n    for (const strategy of sortedStrategies) {\n      if (this.shouldExecuteStrategy(strategy, context, error)) {\n        try {\n          const result = await this.executeStrategy(strategy, context, error);\n          if (result) {\n            this.updateStrategyUsage(strategy.name);\n            return { result, strategy: strategy.name };\n          }\n        } catch (strategyError) {\n          this.logFallbackError(strategy.name, strategyError, context);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  private shouldExecuteStrategy(strategy: FallbackStrategy, context: AnalysisContext, error: Error): boolean {\n    return strategy.conditions.every(condition => {\n      switch (condition.type) {\n        case 'error_type':\n          return this.evaluateCondition(error.constructor.name, condition);\n        case 'error_count':\n          const errorKey = this.getErrorKey(context);\n          const count = this.errorCounts.get(errorKey) || 0;\n          return this.evaluateCondition(count, condition);\n        case 'timeout':\n          return error.message.includes('timeout') && this.evaluateCondition(true, condition);\n        case 'performance':\n          // Implementar l√≥gica de performance se necess√°rio\n          return true;\n        case 'custom':\n          return this.evaluateCustomCondition(condition, context, error);\n        default:\n          return true;\n      }\n    });\n  }\n\n  private evaluateCondition(value: string | number | boolean, condition: FallbackCondition): boolean {\n    switch (condition.operator) {\n      case 'equals':\n        return value === condition.value;\n      case 'greater_than':\n        return value > condition.value;\n      case 'less_than':\n        return value < condition.value;\n      case 'contains':\n        return String(value).includes(condition.value);\n      case 'regex':\n        return new RegExp(condition.value).test(String(value));\n      default:\n        return true;\n    }\n  }\n\n  private evaluateCustomCondition(condition: FallbackCondition, context: AnalysisContext, _error: Error): boolean {\n    // Implementar l√≥gica customizada se necess√°rio\n    return true;\n  }\n\n  private async executeStrategy(strategy: FallbackStrategy, context: AnalysisContext, error: Error): Promise<unknown> {\n    for (const action of strategy.actions) {\n      try {\n        const result = await this.executeAction(action, context, error);\n        if (result) return result;\n      } catch (actionError) {\n        this.logFallbackError(`${strategy.name}:${action.type}`, actionError, context);\n      }\n    }\n    return null;\n  }\n\n  private async executeAction(action: FallbackAction, context: AnalysisContext, error: Error): Promise<unknown> {\n    switch (action.type) {\n      case 'retry':\n        return await this.retryOperation(context, action.config);\n      case 'use_basic_analyzer':\n        return await this.useBasicAnalyzer(context, action.config);\n      case 'use_cached_result':\n        return await this.useCachedResult(context, action.config);\n      case 'return_error':\n        return this.createErrorResult(error, action.config);\n      case 'custom':\n        return await this.executeCustomAction(action, context, error);\n      default:\n        return null;\n    }\n  }\n\n  private async retryOperation(context: AnalysisContext, config: Record<string, unknown>): Promise<unknown> {\n    const maxRetries = config.maxRetries || this.config.maxRetries;\n    const delay = config.delay || this.config.retryDelay;\n    \n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        await this.delay(delay * attempt); // Backoff exponencial\n        // Aqui voc√™ implementaria a retry da opera√ß√£o original\n        // Por enquanto, retornamos null para indicar que n√£o foi poss√≠vel\n        return null;\n      } catch (retryError) {\n        if (attempt === maxRetries) {\n          throw retryError;\n        }\n      }\n    }\n    return null;\n  }\n\n  private async useBasicAnalyzer(context: AnalysisContext, config: Record<string, any>): Promise<AnalysisResult> {\n    const analyzerType = config.analyzerType || 'general';\n    const analyzer = this.basicAnalyzers.get(analyzerType);\n    \n    if (!analyzer) {\n      throw new Error(`Analisador b√°sico '${analyzerType}' n√£o encontrado`);\n    }\n\n    return await analyzer.analyze(context);\n  }\n\n  private async useCachedResult(context: AnalysisContext, config: Record<string, unknown>): Promise<unknown> {\n    // Implementar l√≥gica para buscar resultado em cache\n    // Por enquanto, retornamos null\n    return null;\n  }\n\n  private createErrorResult(error: Error, config: Record<string, any>): AnalysisResult {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: `Erro na an√°lise: ${error.message}`,\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise',\n        sugestaoCorrecao: 'Verificar configura√ß√µes e tentar novamente',\n        categoria: 'formal'\n      }],\n      metrics: {},\n      score: 50,\n      confidence: 20,\n      processingTime: 0\n    };\n  }\n\n  private async executeCustomAction(action: FallbackAction, context: AnalysisContext, _error: Error): Promise<unknown> {\n    // Implementar a√ß√µes customizadas se necess√°rio\n    return null;\n  }\n\n  private initializeBasicAnalyzers(): void {\n    this.basicAnalyzers.set('general', new GeneralBasicAnalyzer());\n    this.basicAnalyzers.set('structural', new StructuralBasicAnalyzer());\n    this.basicAnalyzers.set('legal', new LegalBasicAnalyzer());\n  }\n\n  private recordError(error: Error, context: AnalysisContext): void {\n    const errorKey = this.getErrorKey(context);\n    const currentCount = this.errorCounts.get(errorKey) || 0;\n    this.errorCounts.set(errorKey, currentCount + 1);\n  }\n\n  private recordSuccessfulFallback(context: AnalysisContext, strategy: string, duration: number): void {\n    this.metrics.totalFallbacks++;\n    this.metrics.successfulFallbacks++;\n    this.metrics.averageFallbackTime = \n      (this.metrics.averageFallbackTime * (this.metrics.totalFallbacks - 1) + duration) / this.metrics.totalFallbacks;\n    \n    if (this.config.enableLogging) {\n      this.logs.push({\n        timestamp: new Date(),\n        context: this.getContextSummary(context),\n        error: new Error('Fallback successful'),\n        strategy,\n        action: 'success',\n        result: 'success',\n        duration,\n        metadata: { strategy, context: this.getContextSummary(context) }\n      });\n    }\n  }\n\n  private recordFailedFallback(context: AnalysisContext, error: Error, duration: number): void {\n    this.metrics.totalFallbacks++;\n    this.metrics.failedFallbacks++;\n    this.metrics.averageFallbackTime = \n      (this.metrics.averageFallbackTime * (this.metrics.totalFallbacks - 1) + duration) / this.metrics.totalFallbacks;\n    \n    if (this.config.enableLogging) {\n      this.logs.push({\n        timestamp: new Date(),\n        context: this.getContextSummary(context),\n        error,\n        strategy: 'none',\n        action: 'failed',\n        result: 'failure',\n        duration,\n        metadata: { error: error.message, context: this.getContextSummary(context) }\n      });\n    }\n  }\n\n  private updateStrategyUsage(strategyName: string): void {\n    this.metrics.strategyUsage[strategyName] = (this.metrics.strategyUsage[strategyName] || 0) + 1;\n  }\n\n  private logFallbackError(strategy: string, error: Error, context: AnalysisContext): void {\n    if (this.config.enableLogging) {\n      this.logs.push({\n        timestamp: new Date(),\n        context: this.getContextSummary(context),\n        error,\n        strategy,\n        action: 'error',\n        result: 'failure',\n        duration: 0,\n        metadata: { strategy, error: error.message }\n      });\n    }\n  }\n\n  private getErrorKey(context: AnalysisContext): string {\n    return `${context.classification.tipoDocumento}_${context.classification.modalidadePrincipal}`;\n  }\n\n  private getContextSummary(context: AnalysisContext): string {\n    return `${context.classification.tipoDocumento} (${context.text.length} chars)`;\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  private getDefaultStrategies(): FallbackStrategy[] {\n    return [\n      {\n        name: 'retry_strategy',\n        priority: 1,\n        enabled: true,\n        conditions: [\n          { type: 'error_count', value: 1, operator: 'less_than' }\n        ],\n        actions: [\n          { type: 'retry', config: { maxRetries: 2, delay: 1000 } }\n        ]\n      },\n      {\n        name: 'basic_analysis_strategy',\n        priority: 2,\n        enabled: true,\n        conditions: [\n          { type: 'error_count', value: 2, operator: 'greater_than' }\n        ],\n        actions: [\n          { type: 'use_basic_analyzer', config: { analyzerType: 'general' } }\n        ]\n      },\n      {\n        name: 'error_result_strategy',\n        priority: 3,\n        enabled: true,\n        conditions: [\n          { type: 'error_count', value: 5, operator: 'greater_than' }\n        ],\n        actions: [\n          { type: 'return_error', config: { includeDetails: false } }\n        ]\n      }\n    ];\n  }\n\n  getMetrics(): FallbackMetrics {\n    return { ...this.metrics };\n  }\n\n  getLogs(limit: number = 100): FallbackLogEntry[] {\n    return this.logs.slice(-limit);\n  }\n\n  clearLogs(): void {\n    this.logs = [];\n  }\n\n  updateConfig(newConfig: Partial<FallbackConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n}\n\n// Analisadores b√°sicos para fallback\nabstract class BasicAnalyzer {\n  abstract analyze(context: AnalysisContext): Promise<AnalysisResult>;\n}\n\nclass GeneralBasicAnalyzer extends BasicAnalyzer {\n  async analyze(context: AnalysisContext): Promise<AnalysisResult> {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: 'An√°lise b√°sica executada devido a falha no analisador principal',\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise',\n        sugestaoCorrecao: 'Verificar configura√ß√µes e tentar novamente',\n        categoria: 'formal'\n      }],\n      metrics: {},\n      score: 60,\n      confidence: 40,\n      processingTime: 0\n    };\n  }\n}\n\nclass StructuralBasicAnalyzer extends BasicAnalyzer {\n  async analyze(context: AnalysisContext): Promise<AnalysisResult> {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: 'An√°lise estrutural b√°sica executada devido a falha no analisador principal',\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise estrutural',\n        sugestaoCorrecao: 'Verificar configura√ß√µes do analisador estrutural',\n        categoria: 'formal'\n      }],\n      metrics: {},\n      score: 65,\n      confidence: 35,\n      processingTime: 0\n    };\n  }\n}\n\nclass LegalBasicAnalyzer extends BasicAnalyzer {\n  async analyze(context: AnalysisContext): Promise<AnalysisResult> {\n    return {\n      problems: [{\n        tipo: 'inconsistencia',\n        descricao: 'An√°lise legal b√°sica executada devido a falha no analisador principal',\n        gravidade: 'baixa',\n        localizacao: 'Sistema de an√°lise legal',\n        sugestaoCorrecao: 'Verificar configura√ß√µes do analisador legal',\n        categoria: 'juridico'\n      }],\n      metrics: {},\n      score: 55,\n      confidence: 30,\n      processingTime: 0\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysis/parametersService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'warnings' is defined but never used.","line":543,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":543,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'warnings' is defined but never used.","line":543,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":543,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'warnings' is defined but never used.","line":581,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":581,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'warnings' is defined but never used.","line":581,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":581,"endColumn":13}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo de Par√¢metros de An√°lise\n * \n * Gerencia par√¢metros personaliz√°veis para an√°lise de documentos,\n * incluindo pesos por categoria, configura√ß√µes espec√≠ficas e templates.\n */\n\nimport { apiClient } from '../core/api';\nimport { globalCache } from '../core/cache';\nimport { loggingService } from '../core/logging';\nimport { validationService } from '../core/validation';\nimport { errorService } from '../core/error';\n\n// Types\nexport interface AnalysisWeights {\n  structural: number;\n  legal: number;\n  clarity: number;\n  abnt: number;\n}\n\nexport interface AnalysisParameters {\n  weights: AnalysisWeights;\n  enableOcr: boolean;\n  enableConformityCheck: boolean;\n  language: 'pt' | 'en';\n  documentType?: string;\n  customRules?: CustomRule[];\n  thresholds?: AnalysisThresholds;\n  features?: FeatureFlags;\n}\n\nexport interface CustomRule {\n  id: string;\n  category: 'structural' | 'legal' | 'clarity' | 'abnt';\n  name: string;\n  description: string;\n  pattern?: string;\n  weight: number;\n  enabled: boolean;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n}\n\nexport interface AnalysisThresholds {\n  structural: {\n    minSections: number;\n    minNumberingScore: number;\n    requireIndex: boolean;\n  };\n  legal: {\n    minLegalReferences: number;\n    minClauses: number;\n    minDeadlineScore: number;\n  };\n  clarity: {\n    minReadabilityScore: number;\n    maxJargonScore: number;\n    minConsistencyScore: number;\n  };\n  abnt: {\n    minCitationScore: number;\n    minFormattingScore: number;\n    requirePageNumbers: boolean;\n  };\n}\n\nexport interface FeatureFlags {\n  advancedOcr: boolean;\n  mlClassification: boolean;\n  conformityCheck: boolean;\n  batchProcessing: boolean;\n  webhookNotifications: boolean;\n}\n\nexport interface ParameterTemplate {\n  id: string;\n  name: string;\n  description: string;\n  documentType: string;\n  parameters: AnalysisParameters;\n  isDefault: boolean;\n  createdAt: string;\n  updatedAt: string;\n  createdBy: string;\n}\n\nexport interface ParameterValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\nclass ParametersService {\n  private readonly logger = loggingService.createLogger('parameters');\n  private readonly cache = globalCache;\n  private readonly api = apiClient;\n  private readonly validator = validationService;\n  private readonly errorService = errorService;\n\n  private readonly CACHE_KEYS = {\n    TEMPLATES: 'analysis_parameter_templates',\n    DEFAULT_PARAMS: 'default_analysis_parameters',\n    CUSTOM_RULES: 'custom_analysis_rules'\n  } as const;\n\n  private readonly CACHE_TTL = 30 * 60 * 1000; // 30 minutos\n\n  /**\n   * Obter par√¢metros padr√£o para um tipo de documento\n   */\n  async getDefaultParameters(documentType: string): Promise<AnalysisParameters> {\n    try {\n      const cacheKey = `${this.CACHE_KEYS.DEFAULT_PARAMS}_${documentType}`;\n      \n      // Verificar cache\n      const cached = this.cache.get<AnalysisParameters>(cacheKey);\n      if (cached) {\n        this.logger.debug('Par√¢metros padr√£o obtidos do cache', { documentType });\n        return cached;\n      }\n\n      // Buscar do backend\n      const response = await this.api.get<AnalysisParameters>(\n        `/analysis/parameters/default/${documentType}`\n      );\n\n      // Cache do resultado\n      this.cache.set(cacheKey, response.data, this.CACHE_TTL);\n      \n      this.logger.info('Par√¢metros padr√£o carregados', { documentType });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao obter par√¢metros padr√£o', { documentType, error });\n      \n      // Fallback para par√¢metros hardcoded\n      return this.getFallbackParameters(documentType);\n    }\n  }\n\n  /**\n   * Salvar par√¢metros personalizados\n   */\n  async saveCustomParameters(\n    parameters: AnalysisParameters,\n    templateName?: string\n  ): Promise<ParameterTemplate> {\n    try {\n      // Validar par√¢metros\n      const validation = this.validateParameters(parameters);\n      if (!validation.isValid) {\n        throw new Error(`Par√¢metros inv√°lidos: ${validation.errors.join(', ')}`);\n      }\n\n      const payload = {\n        parameters,\n        templateName,\n        timestamp: new Date().toISOString()\n      };\n\n      const response = await this.api.post<ParameterTemplate>(\n        '/analysis/parameters/custom',\n        payload\n      );\n\n      // Invalidar cache de templates\n      this.cache.delete(this.CACHE_KEYS.TEMPLATES);\n      \n      this.logger.info('Par√¢metros personalizados salvos', { templateName });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao salvar par√¢metros personalizados', { error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Listar templates de par√¢metros\n   */\n  async getParameterTemplates(documentType?: string): Promise<ParameterTemplate[]> {\n    try {\n      const cacheKey = documentType \n        ? `${this.CACHE_KEYS.TEMPLATES}_${documentType}`\n        : this.CACHE_KEYS.TEMPLATES;\n      \n      // Verificar cache\n      const cached = this.cache.get<ParameterTemplate[]>(cacheKey);\n      if (cached) {\n        this.logger.debug('Templates obtidos do cache', { documentType });\n        return cached;\n      }\n\n      // Buscar do backend\n      const url = documentType \n        ? `/analysis/parameters/templates?documentType=${documentType}`\n        : '/analysis/parameters/templates';\n      \n      const response = await this.api.get<ParameterTemplate[]>(url);\n\n      // Cache do resultado\n      this.cache.set(cacheKey, response.data, this.CACHE_TTL);\n      \n      this.logger.info('Templates de par√¢metros carregados', { \n        count: response.data.length,\n        documentType \n      });\n      \n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao obter templates de par√¢metros', { error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Obter template espec√≠fico\n   */\n  async getParameterTemplate(templateId: string): Promise<ParameterTemplate> {\n    try {\n      const response = await this.api.get<ParameterTemplate>(\n        `/analysis/parameters/templates/${templateId}`\n      );\n\n      this.logger.info('Template de par√¢metros obtido', { templateId });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao obter template de par√¢metros', { templateId, error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Atualizar template de par√¢metros\n   */\n  async updateParameterTemplate(\n    templateId: string,\n    updates: Partial<ParameterTemplate>\n  ): Promise<ParameterTemplate> {\n    try {\n      // Validar par√¢metros se fornecidos\n      if (updates.parameters) {\n        const validation = this.validateParameters(updates.parameters);\n        if (!validation.isValid) {\n          throw new Error(`Par√¢metros inv√°lidos: ${validation.errors.join(', ')}`);\n        }\n      }\n\n      const response = await this.api.put<ParameterTemplate>(\n        `/analysis/parameters/templates/${templateId}`,\n        updates\n      );\n\n      // Invalidar cache\n      this.cache.delete(this.CACHE_KEYS.TEMPLATES);\n      \n      this.logger.info('Template de par√¢metros atualizado', { templateId });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao atualizar template de par√¢metros', { templateId, error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Deletar template de par√¢metros\n   */\n  async deleteParameterTemplate(templateId: string): Promise<void> {\n    try {\n      await this.api.delete(`/analysis/parameters/templates/${templateId}`);\n\n      // Invalidar cache\n      this.cache.delete(this.CACHE_KEYS.TEMPLATES);\n      \n      this.logger.info('Template de par√¢metros deletado', { templateId });\n\n    } catch (error) {\n      this.logger.error('Erro ao deletar template de par√¢metros', { templateId, error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Validar par√¢metros de an√°lise\n   */\n  validateParameters(parameters: AnalysisParameters): ParameterValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    try {\n      // Validar pesos\n      const { weights } = parameters;\n      const totalWeight = weights.structural + weights.legal + weights.clarity + weights.abnt;\n      \n      if (Math.abs(totalWeight - 1.0) > 0.01) {\n        errors.push('A soma dos pesos deve ser igual a 1.0');\n      }\n\n      // Validar cada peso individualmente\n      Object.entries(weights).forEach(([category, weight]) => {\n        if (weight < 0 || weight > 1) {\n          errors.push(`Peso da categoria ${category} deve estar entre 0 e 1`);\n        }\n        if (weight === 0) {\n          warnings.push(`Categoria ${category} com peso zero ser√° ignorada`);\n        }\n      });\n\n      // Validar thresholds se fornecidos\n      if (parameters.thresholds) {\n        this.validateThresholds(parameters.thresholds, errors, warnings);\n      }\n\n      // Validar regras customizadas\n      if (parameters.customRules) {\n        this.validateCustomRules(parameters.customRules, errors, warnings);\n      }\n\n      // Validar idioma\n      if (!['pt', 'en'].includes(parameters.language)) {\n        errors.push('Idioma deve ser \"pt\" ou \"en\"');\n      }\n\n      return {\n        isValid: errors.length === 0,\n        errors,\n        warnings\n      };\n\n    } catch (error) {\n      this.logger.error('Erro na valida√ß√£o de par√¢metros', { error });\n      return {\n        isValid: false,\n        errors: ['Erro interno na valida√ß√£o'],\n        warnings: []\n      };\n    }\n  }\n\n  /**\n   * Obter regras customizadas\n   */\n  async getCustomRules(category?: string): Promise<CustomRule[]> {\n    try {\n      const cacheKey = category \n        ? `${this.CACHE_KEYS.CUSTOM_RULES}_${category}`\n        : this.CACHE_KEYS.CUSTOM_RULES;\n      \n      // Verificar cache\n      const cached = this.cache.get<CustomRule[]>(cacheKey);\n      if (cached) {\n        return cached;\n      }\n\n      // Buscar do backend\n      const url = category \n        ? `/analysis/parameters/rules?category=${category}`\n        : '/analysis/parameters/rules';\n      \n      const response = await this.api.get<CustomRule[]>(url);\n\n      // Cache do resultado\n      this.cache.set(cacheKey, response.data, this.CACHE_TTL);\n      \n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao obter regras customizadas', { error });\n      return [];\n    }\n  }\n\n  /**\n   * Criar regra customizada\n   */\n  async createCustomRule(rule: Omit<CustomRule, 'id'>): Promise<CustomRule> {\n    try {\n      const response = await this.api.post<CustomRule>(\n        '/analysis/parameters/rules',\n        rule\n      );\n\n      // Invalidar cache\n      this.cache.delete(this.CACHE_KEYS.CUSTOM_RULES);\n      \n      this.logger.info('Regra customizada criada', { ruleName: rule.name });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao criar regra customizada', { error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Atualizar regra customizada\n   */\n  async updateCustomRule(\n    ruleId: string,\n    updates: Partial<CustomRule>\n  ): Promise<CustomRule> {\n    try {\n      const response = await this.api.put<CustomRule>(\n        `/analysis/parameters/rules/${ruleId}`,\n        updates\n      );\n\n      // Invalidar cache\n      this.cache.delete(this.CACHE_KEYS.CUSTOM_RULES);\n      \n      this.logger.info('Regra customizada atualizada', { ruleId });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao atualizar regra customizada', { ruleId, error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Deletar regra customizada\n   */\n  async deleteCustomRule(ruleId: string): Promise<void> {\n    try {\n      await this.api.delete(`/analysis/parameters/rules/${ruleId}`);\n\n      // Invalidar cache\n      this.cache.delete(this.CACHE_KEYS.CUSTOM_RULES);\n      \n      this.logger.info('Regra customizada deletada', { ruleId });\n\n    } catch (error) {\n      this.logger.error('Erro ao deletar regra customizada', { ruleId, error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Exportar configura√ß√£o de par√¢metros\n   */\n  async exportParameters(templateId: string): Promise<Blob> {\n    try {\n      const response = await this.api.get(\n        `/analysis/parameters/templates/${templateId}/export`,\n        { responseType: 'blob' }\n      );\n\n      this.logger.info('Par√¢metros exportados', { templateId });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao exportar par√¢metros', { templateId, error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Importar configura√ß√£o de par√¢metros\n   */\n  async importParameters(file: File): Promise<ParameterTemplate> {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await this.api.post<ParameterTemplate>(\n        '/analysis/parameters/import',\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n      );\n\n      // Invalidar cache\n      this.cache.delete(this.CACHE_KEYS.TEMPLATES);\n      \n      this.logger.info('Par√¢metros importados', { fileName: file.name });\n      return response.data;\n\n    } catch (error) {\n      this.logger.error('Erro ao importar par√¢metros', { error });\n      throw this.errorService.handleError(error);\n    }\n  }\n\n  /**\n   * Obter par√¢metros de fallback\n   */\n  private getFallbackParameters(documentType: string): AnalysisParameters {\n    const baseParams: AnalysisParameters = {\n      weights: {\n        structural: 0.3,\n        legal: 0.4,\n        clarity: 0.2,\n        abnt: 0.1\n      },\n      enableOcr: true,\n      enableConformityCheck: true,\n      language: 'pt'\n    };\n\n    // Ajustar pesos baseado no tipo de documento\n    switch (documentType) {\n      case 'edital_licitacao':\n        baseParams.weights = {\n          structural: 0.25,\n          legal: 0.45,\n          clarity: 0.25,\n          abnt: 0.05\n        };\n        break;\n      case 'contrato':\n        baseParams.weights = {\n          structural: 0.2,\n          legal: 0.5,\n          clarity: 0.25,\n          abnt: 0.05\n        };\n        break;\n      case 'termo_referencia':\n        baseParams.weights = {\n          structural: 0.35,\n          legal: 0.3,\n          clarity: 0.25,\n          abnt: 0.1\n        };\n        break;\n    }\n\n    return baseParams;\n  }\n\n  /**\n   * Validar thresholds\n   */\n  private validateThresholds(\n    thresholds: AnalysisThresholds,\n    errors: string[],\n    warnings: string[]\n  ): void {\n    // Validar thresholds estruturais\n    if (thresholds.structural.minSections < 0) {\n      errors.push('N√∫mero m√≠nimo de se√ß√µes deve ser positivo');\n    }\n    if (thresholds.structural.minNumberingScore < 0 || thresholds.structural.minNumberingScore > 1) {\n      errors.push('Score m√≠nimo de numera√ß√£o deve estar entre 0 e 1');\n    }\n\n    // Validar thresholds legais\n    if (thresholds.legal.minLegalReferences < 0) {\n      errors.push('N√∫mero m√≠nimo de refer√™ncias legais deve ser positivo');\n    }\n    if (thresholds.legal.minDeadlineScore < 0 || thresholds.legal.minDeadlineScore > 1) {\n      errors.push('Score m√≠nimo de prazos deve estar entre 0 e 1');\n    }\n\n    // Validar thresholds de clareza\n    if (thresholds.clarity.minReadabilityScore < 0 || thresholds.clarity.minReadabilityScore > 1) {\n      errors.push('Score m√≠nimo de legibilidade deve estar entre 0 e 1');\n    }\n    if (thresholds.clarity.maxJargonScore < 0 || thresholds.clarity.maxJargonScore > 1) {\n      errors.push('Score m√°ximo de jarg√£o deve estar entre 0 e 1');\n    }\n\n    // Validar thresholds ABNT\n    if (thresholds.abnt.minCitationScore < 0 || thresholds.abnt.minCitationScore > 1) {\n      errors.push('Score m√≠nimo de cita√ß√µes deve estar entre 0 e 1');\n    }\n  }\n\n  /**\n   * Validar regras customizadas\n   */\n  private validateCustomRules(\n    rules: CustomRule[],\n    errors: string[],\n    warnings: string[]\n  ): void {\n    rules.forEach((rule, index) => {\n      if (!rule.name || rule.name.trim().length === 0) {\n        errors.push(`Regra ${index + 1}: Nome √© obrigat√≥rio`);\n      }\n      if (rule.weight < 0 || rule.weight > 1) {\n        errors.push(`Regra ${index + 1}: Peso deve estar entre 0 e 1`);\n      }\n      if (!['structural', 'legal', 'clarity', 'abnt'].includes(rule.category)) {\n        errors.push(`Regra ${index + 1}: Categoria inv√°lida`);\n      }\n      if (!['low', 'medium', 'high', 'critical'].includes(rule.severity)) {\n        errors.push(`Regra ${index + 1}: Severidade inv√°lida`);\n      }\n    });\n  }\n}\n\nexport const parametersService = new ParametersService();\nexport default parametersService;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/analysisEngine.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AnalysisMetrics' is defined but never used.","line":1,"column":117,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":132},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalysisMetrics' is defined but never used.","line":1,"column":117,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":132},{"ruleId":"no-unused-vars","severity":2,"message":"'classification' is defined but never used.","line":37,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":81},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'classification' is defined but never used.","line":37,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":57}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DocumentUpload, DocumentAnalysis, DocumentClassification, DocumentClassificationSpecificAnalysis, Problem, AnalysisMetrics } from '@/types/document';\n\n// Mock analysis engine to simulate document analysis based on classification\nexport class AnalysisEngine {\n  static async analyzeDocument(document: DocumentUpload): Promise<DocumentAnalysis> {\n    const classification = document.classification;\n    \n    // Simulate processing time\n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    // Generate analysis based on document classification\n    const specificAnalysis = this.generateSpecificAnalysis(classification);\n    const problems = this.generateProblems(classification);\n    const score = this.calculateConformityScore(problems);\n    const recommendations = this.generateRecommendations(classification, problems);\n\n    return {\n      id: `analysis_${Date.now()}`,\n      documentoId: document.id,\n      classification: document.classification,\n      textoExtraido: 'Texto extra√≠do simulado do documento...',\n      scoreConformidade: score,\n      problemasEncontrados: problems,\n      recomendacoes: recommendations,\n      metricas: {\n        totalClauses: 45,\n        validClauses: 35,\n        missingClauses: 5,\n        inconsistencies: 5,\n        processingTime: 2.5\n      },\n      specificAnalysis,\n      createdAt: new Date()\n    };\n  }\n\n  private static generateSpecificAnalysis(classification: DocumentClassification): DocumentClassificationSpecificAnalysis {\n    return {};\n  }\n\n  private static generateProblems(classification: DocumentClassification): Problem[] {\n    const problems: Problem[] = [];\n\n    if (classification.tipoDocumento === 'edital') {\n      if (Math.random() > 0.6) {\n        problems.push({\n          tipo: 'prazo_inadequado',\n          descricao: 'Prazo para entrega de propostas muito curto',\n          gravidade: 'alta',\n          localizacao: 'Cl√°usula 4.1',\n          sugestaoCorrecao: 'Aumentar prazo para no m√≠nimo 8 dias √∫teis',\n          classification,\n          categoria: 'juridico'\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private static calculateConformityScore(problems: Problem[]): number {\n    let score = 100;\n    \n    problems.forEach(problem => {\n      switch (problem.gravidade) {\n        case 'critica':\n          score -= 20;\n          break;\n        case 'alta':\n          score -= 15;\n          break;\n        case 'media':\n          score -= 10;\n          break;\n        case 'baixa':\n          score -= 5;\n          break;\n      }\n    });\n\n    return Math.max(0, score);\n  }\n\n  private static generateRecommendations(classification: DocumentClassification, problems: Problem[]): string[] {\n    const recommendations: string[] = [];\n    \n    problems.forEach(problem => {\n      if (problem.sugestaoCorrecao) {\n        recommendations.push(problem.sugestaoCorrecao);\n      }\n    });\n\n    return [...new Set(recommendations)];\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/classificationFirebase.ts","messages":[{"ruleId":"no-inner-declarations","severity":2,"message":"Move function declaration to function body root.","line":61,"column":5,"nodeType":"FunctionDeclaration","messageId":"moveDeclToRoot","endLine":78,"endColumn":6}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '@/lib/firebase';\nimport { collection, getDocs, doc, getDoc } from 'firebase/firestore';\nimport type { ClassificationNode } from '@/types/document';\n\nconst COLLECTION_NAME = 'classifications';\n\ninterface FirebaseClassificationNode {\n  nivel: number;\n  nome: string;\n  key: string;\n  parentPath: string | null;\n  hasChildren: boolean;\n  childrenKeys: string[];\n}\n\nexport async function fetchClassificationTree(): Promise<ClassificationNode[]> {\n  try {\n    // Verificar se a migra√ß√£o foi conclu√≠da\n    const migrationDoc = await getDoc(doc(db, 'migration-control', 'classification-v1'));\n    if (!migrationDoc.exists()) {\n      throw new Error('Classification data not migrated to Firebase yet');\n    }\n\n    const col = collection(db, COLLECTION_NAME);\n    const snap = await getDocs(col);\n    \n    if (snap.empty) {\n      throw new Error('No classification data found in Firebase');\n    }\n\n    // Mapear documentos por path para facilitar a constru√ß√£o da √°rvore\n    const nodeMap = new Map<string, FirebaseClassificationNode>();\n    \n    snap.docs.forEach(doc => {\n      const data = doc.data();\n      \n      // Validar se o documento tem os campos necess√°rios\n      if (\n        typeof data.nivel === 'number' &&\n        typeof data.nome === 'string' &&\n        typeof data.key === 'string' &&\n        (data.parentPath === null || typeof data.parentPath === 'string') &&\n        typeof data.hasChildren === 'boolean' &&\n        Array.isArray(data.childrenKeys)\n      ) {\n        const validNode: FirebaseClassificationNode = {\n          nivel: data.nivel,\n          nome: data.nome,\n          key: data.key,\n          parentPath: data.parentPath,\n          hasChildren: data.hasChildren,\n          childrenKeys: data.childrenKeys\n        };\n        nodeMap.set(doc.id, validNode);\n      } else {\n        console.warn(`Skipping invalid document: ${doc.id}`, data);\n      }\n    });\n\n    // Construir √°rvore hier√°rquica recursivamente\n    function buildHierarchy(parentPath: string | null = null): ClassificationNode[] {\n      const children: ClassificationNode[] = [];\n      \n      for (const [docId, nodeData] of nodeMap.entries()) {\n        if (nodeData.parentPath === parentPath) {\n          const node: ClassificationNode = {\n            nivel: nodeData.nivel,\n            nome: nodeData.nome,\n            key: nodeData.key,\n            filhos: nodeData.hasChildren ? buildHierarchy(docId) : []\n          };\n          children.push(node);\n        }\n      }\n      \n      // Ordenar por nome para consist√™ncia\n      return children.sort((a, b) => a.nome.localeCompare(b.nome));\n    }\n\n    const tree = buildHierarchy();\n    \n    if (import.meta.env.DEV) {\n      console.log(`‚úÖ Firebase: Built classification tree with ${tree.length} root nodes`);\n      console.log('Root nodes:', tree.map(n => ({ key: n.key, nome: n.nome, filhos: n.filhos.length })));\n    }\n    \n    if (tree.length === 0) {\n      throw new Error('Failed to build classification tree from Firebase data');\n    }\n\n    return tree;\n    \n  } catch (error) {\n    console.error('Error fetching classification tree from Firebase:', error);\n    throw error;\n  }\n}\n\n// Manter compatibilidade com c√≥digo existente\nexport async function fetchTiposObjeto(): Promise<ClassificationNode[]> {\n  const fullTree = await fetchClassificationTree();\n  return fullTree; // Retorna a √°rvore completa (n√≠vel 1 j√° s√£o os tipos de objeto)\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/comissoesService.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'RequestInit' is not defined.","line":20,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'RequestInit' is not defined.","line":27,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4345,4348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4345,4348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":160,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4529,4532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4529,4532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Comissao,\n  ComissoesResponse,\n  CreateComissaoRequest,\n  UpdateComissaoRequest,\n  AddMembroRequest,\n  UpdateMembroRequest,\n  ComissaoStats,\n  HistoricoComissao,\n  ServidorDisponivel,\n  ComissaoFilters\n} from '../types/comissao';\n\n// URL base da API - ajustar conforme configura√ß√£o do projeto\nconst API_BASE_URL = import.meta.env.VITE_API_URL || 'https://us-central1-revisor-editais.cloudfunctions.net';\n\nclass ComissoesService {\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<T> {\n    const url = `${API_BASE_URL}/comissoesApi${endpoint}`;\n    \n    // Obter token de autentica√ß√£o (ajustar conforme sistema de auth do projeto)\n    const token = localStorage.getItem('authToken') || sessionStorage.getItem('authToken');\n    \n    const config: RequestInit = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...(token && { Authorization: `Bearer ${token}` }),\n        ...options.headers,\n      },\n      ...options,\n    };\n\n    try {\n      const response = await fetch(url, config);\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error(`Erro na requisi√ß√£o para ${endpoint}:`, error);\n      throw error;\n    }\n  }\n\n  // Listar comiss√µes\n  async list(\n    organizationId: string,\n    filters?: ComissaoFilters,\n    page = 1,\n    limit = 20\n  ): Promise<ComissoesResponse> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString(),\n      ...(filters?.search && { search: filters.search }),\n      ...(filters?.tipo && filters.tipo !== 'all' && { tipo: filters.tipo }),\n      ...(filters?.status && filters.status !== 'all' && { status: filters.status }),\n      ...(filters?.sortBy && { sortBy: filters.sortBy }),\n      ...(filters?.sortOrder && { sortOrder: filters.sortOrder }),\n    });\n\n    return this.request<ComissoesResponse>(`/${organizationId}/comissoes?${params}`);\n  }\n\n  // Obter comiss√£o por ID\n  async getById(organizationId: string, comissaoId: string): Promise<Comissao> {\n    return this.request<Comissao>(`/${organizationId}/comissoes/${comissaoId}`);\n  }\n\n  // Criar nova comiss√£o\n  async create(organizationId: string, data: CreateComissaoRequest): Promise<Comissao> {\n    return this.request<Comissao>(`/${organizationId}/comissoes`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Atualizar comiss√£o\n  async update(\n    organizationId: string,\n    comissaoId: string,\n    data: UpdateComissaoRequest\n  ): Promise<Comissao> {\n    return this.request<Comissao>(`/${organizationId}/comissoes/${comissaoId}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Deletar comiss√£o\n  async delete(organizationId: string, comissaoId: string): Promise<void> {\n    return this.request<void>(`/${organizationId}/comissoes/${comissaoId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // Gerenciamento de membros\n  async addMembro(\n    organizationId: string,\n    comissaoId: string,\n    data: AddMembroRequest\n  ): Promise<void> {\n    return this.request<void>(`/${organizationId}/comissoes/${comissaoId}/membros`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  async updateMembro(\n    organizationId: string,\n    comissaoId: string,\n    servidorId: string,\n    data: UpdateMembroRequest\n  ): Promise<void> {\n    return this.request<void>(\n      `/${organizationId}/comissoes/${comissaoId}/membros/${servidorId}`,\n      {\n        method: 'PUT',\n        body: JSON.stringify(data),\n      }\n    );\n  }\n\n  async removeMembro(\n    organizationId: string,\n    comissaoId: string,\n    servidorId: string\n  ): Promise<void> {\n    return this.request<void>(\n      `/${organizationId}/comissoes/${comissaoId}/membros/${servidorId}`,\n      {\n        method: 'DELETE',\n      }\n    );\n  }\n\n  // Estat√≠sticas\n  async getStats(organizationId: string): Promise<ComissaoStats> {\n    return this.request<ComissaoStats>(`/${organizationId}/comissoes/stats`);\n  }\n\n  // Hist√≥rico\n  async getHistorico(\n    organizationId: string,\n    comissaoId: string,\n    page = 1,\n    limit = 20\n  ): Promise<{ data: HistoricoComissao[]; pagination: any }> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString(),\n    });\n\n    return this.request<{ data: HistoricoComissao[]; pagination: any }>(\n      `/${organizationId}/comissoes/${comissaoId}/historico?${params}`\n    );\n  }\n\n  // Servidores dispon√≠veis\n  async getServidoresDisponiveis(organizationId: string): Promise<ServidorDisponivel[]> {\n    return this.request<ServidorDisponivel[]>(`/${organizationId}/servidores`);\n  }\n}\n\n// Inst√¢ncia singleton do servi√ßo\nexport const comissoesService = new ComissoesService();\nexport default comissoesService;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/core/api.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'HttpMethod' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HttpMethod' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'ServiceError' is defined but never used.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ServiceError' is defined but never used.","line":15,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'requestId' is assigned a value but never used.","line":199,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":199,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'requestId' is assigned a value but never used.","line":199,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'RequestInit' is not defined.","line":258,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":258,"endColumn":37},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":424,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":424,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'config' is defined but never used.","line":424,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":424,"endColumn":48}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo de API para gerenciar requisi√ß√µes HTTP\n */\n\nimport { \n  ApiResponse, \n  RequestConfig, \n  HttpMethod, \n  HttpStatusCode,\n  RequestInterceptor,\n  ResponseInterceptor\n} from '../../types/core/api';\nimport { NetworkError as INetworkError } from '../../types/core/errors';\nimport { Severity } from '../../types/core/common';\nimport { ServiceError } from './base';\n\n/** Classe de erro de rede */\nexport class NetworkError extends Error implements INetworkError {\n  public readonly code: string;\n  public readonly severity: Severity;\n  public readonly timestamp: Date;\n  public readonly context?: Record<string, unknown>;\n  public readonly status?: number;\n  public readonly url?: string;\n  public readonly method?: string;\n  public readonly headers?: Record<string, string>;\n  public readonly responseBody?: unknown;\n\n  constructor(\n    message: string,\n    code: string,\n    context?: Record<string, unknown>\n  ) {\n    super(message);\n    this.name = 'NetworkError';\n    this.code = code;\n    this.severity = 'error';\n    this.timestamp = new Date();\n    this.context = context;\n    \n    if (context) {\n      this.status = context.status as number;\n      this.url = context.url as string;\n      this.method = context.method as string;\n      this.headers = context.headers as Record<string, string>;\n      this.responseBody = context.responseBody;\n    }\n  }\n}\n\n/** Configura√ß√£o do cliente API */\nexport interface ApiClientConfig {\n  /** URL base */\n  baseUrl: string;\n  /** Timeout padr√£o */\n  timeout: number;\n  /** Headers padr√£o */\n  defaultHeaders: Record<string, string>;\n  /** Interceptors de requisi√ß√£o */\n  requestInterceptors: RequestInterceptor[];\n  /** Interceptors de resposta */\n  responseInterceptors: ResponseInterceptor[];\n  /** Se deve fazer retry autom√°tico */\n  enableRetry: boolean;\n  /** N√∫mero m√°ximo de tentativas */\n  maxRetries: number;\n  /** Delay entre tentativas */\n  retryDelay: number;\n  /** Se deve logar requisi√ß√µes */\n  enableLogging: boolean;\n}\n\n/** Cliente API */\nexport class ApiClient {\n  private config: ApiClientConfig;\n  private abortControllers = new Map<string, AbortController>();\n\n  constructor(config: Partial<ApiClientConfig> = {}) {\n    this.config = {\n      baseUrl: '',\n      timeout: 30000,\n      defaultHeaders: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      requestInterceptors: [],\n      responseInterceptors: [],\n      enableRetry: true,\n      maxRetries: 3,\n      retryDelay: 1000,\n      enableLogging: false,\n      ...config\n    };\n  }\n\n  /** Adiciona interceptor de requisi√ß√£o */\n  addRequestInterceptor(interceptor: RequestInterceptor): void {\n    this.config.requestInterceptors.push(interceptor);\n  }\n\n  /** Adiciona interceptor de resposta */\n  addResponseInterceptor(interceptor: ResponseInterceptor): void {\n    this.config.responseInterceptors.push(interceptor);\n  }\n\n  /** Remove interceptor de requisi√ß√£o */\n  removeRequestInterceptor(interceptor: RequestInterceptor): void {\n    const index = this.config.requestInterceptors.indexOf(interceptor);\n    if (index > -1) {\n      this.config.requestInterceptors.splice(index, 1);\n    }\n  }\n\n  /** Remove interceptor de resposta */\n  removeResponseInterceptor(interceptor: ResponseInterceptor): void {\n    const index = this.config.responseInterceptors.indexOf(interceptor);\n    if (index > -1) {\n      this.config.responseInterceptors.splice(index, 1);\n    }\n  }\n\n  /** Executa requisi√ß√£o GET */\n  async get<T = unknown>(\n    url: string, \n    config?: Partial<RequestConfig>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>({ ...config, method: 'GET', url });\n  }\n\n  /** Executa requisi√ß√£o POST */\n  async post<T = unknown>(\n    url: string, \n    data?: unknown, \n    config?: Partial<RequestConfig>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>({ ...config, method: 'POST', url, body: data });\n  }\n\n  /** Executa requisi√ß√£o PUT */\n  async put<T = unknown>(\n    url: string, \n    data?: unknown, \n    config?: Partial<RequestConfig>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>({ ...config, method: 'PUT', url, body: data });\n  }\n\n  /** Executa requisi√ß√£o PATCH */\n  async patch<T = unknown>(\n    url: string, \n    data?: unknown, \n    config?: Partial<RequestConfig>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>({ ...config, method: 'PATCH', url, body: data });\n  }\n\n  /** Executa requisi√ß√£o DELETE */\n  async delete<T = unknown>(\n    url: string, \n    config?: Partial<RequestConfig>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>({ ...config, method: 'DELETE', url });\n  }\n\n  /** Executa requisi√ß√£o gen√©rica */\n  async request<T = unknown>(config: RequestConfig): Promise<ApiResponse<T>> {\n    const requestId = this.generateRequestId();\n    \n    try {\n      // Aplica interceptors de requisi√ß√£o\n      let processedConfig = await this.applyRequestInterceptors(config);\n      \n      // Executa requisi√ß√£o com retry\n      const response = await this.executeWithRetry(processedConfig, requestId);\n      \n      // Aplica interceptors de resposta\n      const processedResponse = await this.applyResponseInterceptors(response);\n      \n      return processedResponse as ApiResponse<T>;\n    } catch (error) {\n      this.log('error', `Erro na requisi√ß√£o ${requestId}`, error);\n      throw this.createApiError(error, config);\n    } finally {\n      this.abortControllers.delete(requestId);\n    }\n  }\n\n  /** Cancela requisi√ß√£o */\n  cancelRequest(requestId: string): void {\n    const controller = this.abortControllers.get(requestId);\n    if (controller) {\n      controller.abort();\n      this.abortControllers.delete(requestId);\n    }\n  }\n\n  /** Cancela todas as requisi√ß√µes */\n  cancelAllRequests(): void {\n    for (const [requestId, controller] of this.abortControllers) {\n      controller.abort();\n    }\n    this.abortControllers.clear();\n  }\n\n  /** Executa requisi√ß√£o com retry */\n  private async executeWithRetry<T>(\n    config: RequestConfig, \n    requestId: string\n  ): Promise<ApiResponse<T>> {\n    let lastError: unknown;\n    const maxAttempts = this.config.enableRetry ? this.config.maxRetries + 1 : 1;\n    \n    for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n      try {\n        this.log('info', `Executando requisi√ß√£o ${requestId} (tentativa ${attempt}/${maxAttempts})`);\n        \n        const response = await this.executeRequest<T>(config, requestId);\n        \n        if (attempt > 1) {\n          this.log('info', `Requisi√ß√£o ${requestId} bem-sucedida ap√≥s ${attempt} tentativas`);\n        }\n        \n        return response;\n      } catch (error) {\n        lastError = error;\n        \n        if (attempt === maxAttempts || !this.shouldRetry(error)) {\n          break;\n        }\n        \n        const delay = this.config.retryDelay * Math.pow(2, attempt - 1);\n        this.log('warn', `Requisi√ß√£o ${requestId} falhou na tentativa ${attempt}, tentando novamente em ${delay}ms`);\n        \n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n    }\n    \n    throw lastError;\n  }\n\n  /** Executa requisi√ß√£o individual */\n  private async executeRequest<T>(\n    config: RequestConfig, \n    requestId: string\n  ): Promise<ApiResponse<T>> {\n    const abortController = new AbortController();\n    this.abortControllers.set(requestId, abortController);\n    \n    // Timeout\n    const timeoutId = setTimeout(() => {\n      abortController.abort();\n    }, config.timeout || this.config.timeout);\n    \n    try {\n      const url = this.buildUrl(config.url);\n      const headers = this.buildHeaders(config.headers);\n      \n      const fetchConfig: RequestInit = {\n        method: config.method,\n        headers,\n        signal: abortController.signal\n      };\n      \n      if (config.body && ['POST', 'PUT', 'PATCH'].includes(config.method)) {\n        fetchConfig.body = this.serializeData(config.body, headers['Content-Type']);\n      }\n      \n      this.log('info', `Enviando requisi√ß√£o ${config.method} para ${url}`);\n      \n      const response = await fetch(url, fetchConfig);\n      \n      clearTimeout(timeoutId);\n      \n      return await this.processResponse<T>(response, requestId);\n    } catch (error) {\n      clearTimeout(timeoutId);\n      throw error;\n    }\n  }\n\n  /** Processa resposta */\n  private async processResponse<T>(\n    response: Response, \n    requestId: string\n  ): Promise<ApiResponse<T>> {\n    const headers: Record<string, string> = {};\n    response.headers.forEach((value, key) => {\n      headers[key] = value;\n    });\n    \n    let data: T;\n    const contentType = headers['content-type'] || '';\n    \n    try {\n      if (contentType.includes('application/json')) {\n        data = await response.json();\n      } else if (contentType.includes('text/')) {\n        data = await response.text() as unknown as T;\n      } else {\n        data = await response.blob() as unknown as T;\n      }\n    } catch (error) {\n      this.log('warn', `Erro ao processar corpo da resposta ${requestId}`, error);\n      data = null as unknown as T;\n    }\n    \n    const apiResponse: ApiResponse<T> = {\n      data,\n      status: response.status as HttpStatusCode,\n      statusText: response.statusText,\n      headers,\n      config: {} as RequestConfig // Ser√° preenchido pelos interceptors\n    };\n    \n    if (!response.ok) {\n      throw new NetworkError(\n        `Requisi√ß√£o falhou com status ${response.status}`,\n        'API_ERROR',\n        { status: response.status, response: apiResponse }\n      );\n    }\n    \n    this.log('info', `Requisi√ß√£o ${requestId} conclu√≠da com sucesso`);\n    \n    return apiResponse;\n  }\n\n  /** Aplica interceptors de requisi√ß√£o */\n  private async applyRequestInterceptors(config: RequestConfig): Promise<RequestConfig> {\n    let processedConfig = { ...config };\n    \n    for (const interceptor of this.config.requestInterceptors) {\n      try {\n        processedConfig = await interceptor(processedConfig);\n      } catch (error) {\n        this.log('error', 'Erro em interceptor de requisi√ß√£o', error);\n        throw error;\n      }\n    }\n    \n    return processedConfig;\n  }\n\n  /** Aplica interceptors de resposta */\n  private async applyResponseInterceptors<T>(\n    response: ApiResponse<T>\n  ): Promise<ApiResponse<T>> {\n    let processedResponse = { ...response };\n    \n    for (const interceptor of this.config.responseInterceptors) {\n      try {\n        if (interceptor.onSuccess) {\n          processedResponse = await interceptor.onSuccess(processedResponse);\n        }\n      } catch (error) {\n        this.log('error', 'Erro em interceptor de resposta', error);\n        if (interceptor.onError && error instanceof NetworkError) {\n          throw await interceptor.onError(error);\n        }\n        throw error;\n      }\n    }\n    \n    return processedResponse;\n  }\n\n  /** Constr√≥i URL completa */\n  private buildUrl(path: string): string {\n    if (path.startsWith('http://') || path.startsWith('https://')) {\n      return path;\n    }\n    \n    const baseUrl = this.config.baseUrl.endsWith('/') \n      ? this.config.baseUrl.slice(0, -1) \n      : this.config.baseUrl;\n    const cleanPath = path.startsWith('/') ? path : `/${path}`;\n    \n    return `${baseUrl}${cleanPath}`;\n  }\n\n  /** Constr√≥i headers */\n  private buildHeaders(customHeaders?: Record<string, string>): Record<string, string> {\n    return {\n      ...this.config.defaultHeaders,\n      ...customHeaders\n    };\n  }\n\n  /** Serializa dados */\n  private serializeData(data: unknown, contentType: string): string | FormData | Blob {\n    if (data instanceof FormData || data instanceof Blob) {\n      return data;\n    }\n    \n    if (contentType.includes('application/json')) {\n      return JSON.stringify(data);\n    }\n    \n    if (contentType.includes('application/x-www-form-urlencoded')) {\n      const params = new URLSearchParams();\n      if (typeof data === 'object' && data !== null) {\n        Object.entries(data).forEach(([key, value]) => {\n          params.append(key, String(value));\n        });\n      }\n      return params.toString();\n    }\n    \n    return String(data);\n  }\n\n  /** Verifica se deve fazer retry */\n  private shouldRetry(error: unknown): boolean {\n    if (error instanceof NetworkError) {\n      // N√£o faz retry para erros de cliente (4xx)\n      return !error.status || error.status >= 500;\n    }\n    \n    // Faz retry para erros de rede\n    return true;\n  }\n\n  /** Cria erro de API */\n  private createApiError(error: unknown, config: RequestConfig): NetworkError {\n    if (error instanceof NetworkError) {\n      return error;\n    }\n    \n    if (error instanceof Error) {\n      if (error.name === 'AbortError') {\n        return new NetworkError('Requisi√ß√£o cancelada', 'REQUEST_CANCELLED', { originalError: error });\n      }\n      \n      return new NetworkError(\n        `Erro de rede: ${error.message}`,\n        'NETWORK_ERROR',\n        { originalError: error }\n      );\n    }\n    \n    return new NetworkError('Erro desconhecido', 'UNKNOWN_ERROR', { originalError: error });\n  }\n\n  /** Gera ID √∫nico para requisi√ß√£o */\n  private generateRequestId(): string {\n    return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /** Log */\n  private log(level: 'info' | 'warn' | 'error', message: string, data?: unknown): void {\n    if (!this.config.enableLogging) return;\n    \n    console[level]('[ApiClient]', message, data);\n  }\n\n  /** Atualiza configura√ß√£o */\n  updateConfig(newConfig: Partial<ApiClientConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  /** Obt√©m configura√ß√£o atual */\n  getConfig(): ApiClientConfig {\n    return { ...this.config };\n  }\n}\n\n/** Inst√¢ncia global do cliente API */\nexport const apiClient = new ApiClient();\n\n/** Interceptor para adicionar token de autentica√ß√£o */\nexport const authInterceptor: RequestInterceptor = async (config) => {\n  const token = localStorage.getItem('auth_token');\n  if (token) {\n    config.headers = {\n      ...config.headers,\n      Authorization: `Bearer ${token}`\n    };\n  }\n  return config;\n};\n\n/** Interceptor para tratar erros de autentica√ß√£o */\nexport const authErrorInterceptor: ResponseInterceptor = {\n  onSuccess: async (response) => {\n    if (response.status === 401) {\n      // Remove token inv√°lido\n      localStorage.removeItem('auth_token');\n      \n      // Redireciona para login (se estiver no browser)\n      if (typeof window !== 'undefined') {\n        window.location.href = '/login';\n      }\n    }\n    \n    return response;\n  }\n};\n\n/** Interceptor para logging */\nexport const loggingInterceptor: ResponseInterceptor = {\n  onSuccess: async (response) => {\n    console.log(`[API] ${response.config?.method} ${response.config?.url} - ${response.status}`);\n    return response;\n  }\n};\n\n/** Configura√ß√£o padr√£o para desenvolvimento */\nexport const developmentConfig: Partial<ApiClientConfig> = {\n  enableLogging: true,\n  enableRetry: true,\n  maxRetries: 2,\n  timeout: 10000\n};\n\n/** Configura√ß√£o padr√£o para produ√ß√£o */\nexport const productionConfig: Partial<ApiClientConfig> = {\n  enableLogging: false,\n  enableRetry: true,\n  maxRetries: 3,\n  timeout: 30000\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/core/base.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ApiResponse' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ApiResponse' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'RequestConfig' is defined but never used.","line":6,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RequestConfig' is defined but never used.","line":6,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'entity' is defined but never used.","line":51,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":49},{"ruleId":"no-unused-vars","severity":2,"message":"'entity' is defined but never used.","line":54,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":56},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":57,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":52},{"ruleId":"no-unused-vars","severity":2,"message":"'entity' is defined but never used.","line":191,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":59},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":194,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":194,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":197,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":197,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":200,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":200,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":200,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":200,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":203,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":203,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":206,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":206,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'entity' is defined but never used.","line":246,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":246,"endColumn":68},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":247,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":247,"endColumn":31},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":248,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":248,"endColumn":49},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":249,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":249,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":249,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":249,"endColumn":50},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":250,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":250,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":251,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":251,"endColumn":51},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":329,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":329,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":332,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":332,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":332,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":332,"endColumn":31},{"ruleId":"no-unused-vars","severity":2,"message":"'ttl' is defined but never used.","line":332,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":332,"endColumn":45},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":335,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":335,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":341,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":341,"endColumn":18}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo base para todos os servi√ßos da aplica√ß√£o\n */\n\nimport { BaseEntity } from '../../types/core/base';\nimport { ApiResponse, RequestConfig } from '../../types/core/api';\nimport { ValidationResult } from '../../types/core/common';\n\n/** Configura√ß√£o base para servi√ßos */\nexport interface ServiceConfig {\n  /** URL base da API */\n  baseUrl?: string;\n  /** Timeout padr√£o em ms */\n  timeout?: number;\n  /** Headers padr√£o */\n  defaultHeaders?: Record<string, string>;\n  /** Se deve fazer retry autom√°tico */\n  enableRetry?: boolean;\n  /** N√∫mero m√°ximo de tentativas */\n  maxRetries?: number;\n  /** Se deve usar cache */\n  enableCache?: boolean;\n  /** TTL do cache em ms */\n  cacheTtl?: number;\n  /** Se deve validar dados */\n  enableValidation?: boolean;\n  /** Se deve logar opera√ß√µes */\n  enableLogging?: boolean;\n}\n\n/** Interface base para todos os servi√ßos */\nexport abstract class BaseService<T extends BaseEntity = BaseEntity> {\n  protected config: ServiceConfig;\n  protected serviceName: string;\n\n  constructor(serviceName: string, config: Partial<ServiceConfig> = {}) {\n    this.serviceName = serviceName;\n    this.config = {\n      timeout: 30000,\n      enableRetry: true,\n      maxRetries: 3,\n      enableCache: false,\n      cacheTtl: 300000, // 5 minutos\n      enableValidation: true,\n      enableLogging: true,\n      ...config\n    };\n  }\n\n  /** Valida uma entidade */\n  protected abstract validate(entity: Partial<T>): ValidationResult;\n\n  /** Transforma dados antes de enviar para API */\n  protected abstract transformForApi(entity: Partial<T>): unknown;\n\n  /** Transforma dados recebidos da API */\n  protected abstract transformFromApi(data: unknown): T;\n\n  /** Gera chave de cache */\n  protected generateCacheKey(operation: string, params?: Record<string, unknown>): string {\n    const baseKey = `${this.serviceName}:${operation}`;\n    if (!params) return baseKey;\n    \n    const paramString = Object.entries(params)\n      .sort(([a], [b]) => a.localeCompare(b))\n      .map(([key, value]) => `${key}=${JSON.stringify(value)}`)\n      .join('&');\n    \n    return `${baseKey}:${paramString}`;\n  }\n\n  /** Loga opera√ß√£o */\n  protected log(level: 'info' | 'warn' | 'error', message: string, data?: unknown): void {\n    if (!this.config.enableLogging) return;\n    \n    const logData = {\n      service: this.serviceName,\n      timestamp: new Date().toISOString(),\n      message,\n      data\n    };\n    \n    console[level](`[${this.serviceName}]`, logData);\n  }\n\n  /** Trata erros de forma padronizada */\n  protected handleError(error: unknown, operation: string): never {\n    const errorMessage = error instanceof Error ? error.message : 'Erro desconhecido';\n    this.log('error', `Erro na opera√ß√£o ${operation}`, { error: errorMessage });\n    \n    throw new ServiceError(\n      `Erro no servi√ßo ${this.serviceName} durante ${operation}: ${errorMessage}`,\n      operation,\n      error\n    );\n  }\n\n  /** Executa opera√ß√£o com retry */\n  protected async executeWithRetry<R>(\n    operation: () => Promise<R>,\n    operationName: string\n  ): Promise<R> {\n    let lastError: unknown;\n    const maxAttempts = this.config.enableRetry ? this.config.maxRetries! + 1 : 1;\n    \n    for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n      try {\n        this.log('info', `Executando ${operationName} (tentativa ${attempt}/${maxAttempts})`);\n        const result = await operation();\n        \n        if (attempt > 1) {\n          this.log('info', `${operationName} bem-sucedido ap√≥s ${attempt} tentativas`);\n        }\n        \n        return result;\n      } catch (error) {\n        lastError = error;\n        \n        if (attempt === maxAttempts) {\n          this.log('error', `${operationName} falhou ap√≥s ${maxAttempts} tentativas`, error);\n          break;\n        }\n        \n        const delay = Math.min(1000 * Math.pow(2, attempt - 1), 10000); // Backoff exponencial\n        this.log('warn', `${operationName} falhou na tentativa ${attempt}, tentando novamente em ${delay}ms`, error);\n        \n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n    }\n    \n    throw lastError;\n  }\n\n  /** Valida dados se a valida√ß√£o estiver habilitada */\n  protected validateIfEnabled(entity: Partial<T>, operation: string): void {\n    if (!this.config.enableValidation) return;\n    \n    const validation = this.validate(entity);\n    if (!validation.isValid) {\n      const errors = validation.errors?.map(e => e.message).join(', ') || 'Dados inv√°lidos';\n      throw new ValidationError(`Valida√ß√£o falhou para ${operation}: ${errors}`, validation.errors);\n    }\n  }\n\n  /** Atualiza configura√ß√£o do servi√ßo */\n  public updateConfig(newConfig: Partial<ServiceConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    this.log('info', 'Configura√ß√£o do servi√ßo atualizada', newConfig);\n  }\n\n  /** Obt√©m configura√ß√£o atual */\n  public getConfig(): ServiceConfig {\n    return { ...this.config };\n  }\n\n  /** Obt√©m nome do servi√ßo */\n  public getServiceName(): string {\n    return this.serviceName;\n  }\n}\n\n/** Erro espec√≠fico de servi√ßo */\nexport class ServiceError extends Error {\n  public readonly operation: string;\n  public readonly originalError: unknown;\n  public readonly timestamp: Date;\n\n  constructor(message: string, operation: string, originalError?: unknown) {\n    super(message);\n    this.name = 'ServiceError';\n    this.operation = operation;\n    this.originalError = originalError;\n    this.timestamp = new Date();\n  }\n}\n\n/** Erro de valida√ß√£o */\nexport class ValidationError extends Error {\n  public readonly validationErrors: Array<{ field: string; message: string }>;\n\n  constructor(message: string, errors?: Array<{ field: string; message: string }>) {\n    super(message);\n    this.name = 'ValidationError';\n    this.validationErrors = errors || [];\n  }\n}\n\n/** Interface para opera√ß√µes CRUD b√°sicas */\nexport interface CrudService<T extends BaseEntity> {\n  /** Cria uma nova entidade */\n  create(entity: Omit<T, 'id' | 'createdAt' | 'updatedAt'>): Promise<T>;\n  \n  /** Busca entidade por ID */\n  findById(id: string): Promise<T | null>;\n  \n  /** Busca m√∫ltiplas entidades */\n  findMany(options?: FindManyOptions<T>): Promise<T[]>;\n  \n  /** Atualiza entidade */\n  update(id: string, updates: Partial<T>): Promise<T>;\n  \n  /** Remove entidade */\n  delete(id: string): Promise<void>;\n  \n  /** Conta entidades */\n  count(filters?: Record<string, unknown>): Promise<number>;\n}\n\n/** Op√ß√µes para busca de m√∫ltiplas entidades */\nexport interface FindManyOptions<T> {\n  /** Filtros */\n  where?: Partial<T>;\n  /** Ordena√ß√£o */\n  orderBy?: Array<{ field: keyof T; direction: 'asc' | 'desc' }>;\n  /** Pagina√ß√£o */\n  skip?: number;\n  /** Limite */\n  take?: number;\n  /** Campos a incluir */\n  select?: Array<keyof T>;\n  /** Relacionamentos a incluir */\n  include?: string[];\n}\n\n/** Resultado paginado */\nexport interface PaginatedResult<T> {\n  /** Dados */\n  data: T[];\n  /** Total de registros */\n  total: number;\n  /** P√°gina atual */\n  page: number;\n  /** Tamanho da p√°gina */\n  pageSize: number;\n  /** Total de p√°ginas */\n  totalPages: number;\n  /** Se h√° pr√≥xima p√°gina */\n  hasNext: boolean;\n  /** Se h√° p√°gina anterior */\n  hasPrevious: boolean;\n}\n\n/** Implementa√ß√£o base para servi√ßos CRUD */\nexport abstract class BaseCrudService<T extends BaseEntity> extends BaseService<T> implements CrudService<T> {\n  \n  abstract create(entity: Omit<T, 'id' | 'createdAt' | 'updatedAt'>): Promise<T>;\n  abstract findById(id: string): Promise<T | null>;\n  abstract findMany(options?: FindManyOptions<T>): Promise<T[]>;\n  abstract update(id: string, updates: Partial<T>): Promise<T>;\n  abstract delete(id: string): Promise<void>;\n  abstract count(filters?: Record<string, unknown>): Promise<number>;\n\n  /** Busca com pagina√ß√£o */\n  async findPaginated(options: {\n    page: number;\n    pageSize: number;\n    where?: Partial<T>;\n    orderBy?: Array<{ field: keyof T; direction: 'asc' | 'desc' }>;\n  }): Promise<PaginatedResult<T>> {\n    const { page, pageSize, where, orderBy } = options;\n    const skip = (page - 1) * pageSize;\n    \n    const [data, total] = await Promise.all([\n      this.findMany({ where, orderBy, skip, take: pageSize }),\n      this.count(where as Record<string, unknown>)\n    ]);\n    \n    const totalPages = Math.ceil(total / pageSize);\n    \n    return {\n      data,\n      total,\n      page,\n      pageSize,\n      totalPages,\n      hasNext: page < totalPages,\n      hasPrevious: page > 1\n    };\n  }\n\n  /** Busca ou cria entidade */\n  async findOrCreate(\n    where: Partial<T>,\n    create: Omit<T, 'id' | 'createdAt' | 'updatedAt'>\n  ): Promise<{ entity: T; created: boolean }> {\n    const existing = await this.findMany({ where, take: 1 });\n    \n    if (existing.length > 0) {\n      return { entity: existing[0], created: false };\n    }\n    \n    const newEntity = await this.create(create);\n    return { entity: newEntity, created: true };\n  }\n\n  /** Atualiza ou cria entidade */\n  async upsert(\n    where: Partial<T>,\n    update: Partial<T>,\n    create: Omit<T, 'id' | 'createdAt' | 'updatedAt'>\n  ): Promise<{ entity: T; created: boolean }> {\n    const existing = await this.findMany({ where, take: 1 });\n    \n    if (existing.length > 0) {\n      const updated = await this.update(existing[0].id, update);\n      return { entity: updated, created: false };\n    }\n    \n    const newEntity = await this.create(create);\n    return { entity: newEntity, created: true };\n  }\n}\n\n/** Configura√ß√£o de cache */\nexport interface CacheConfig {\n  /** Se o cache est√° habilitado */\n  enabled: boolean;\n  /** TTL padr√£o em ms */\n  defaultTtl: number;\n  /** Tamanho m√°ximo do cache */\n  maxSize: number;\n  /** Estrat√©gia de limpeza */\n  evictionStrategy: 'lru' | 'fifo' | 'ttl';\n}\n\n/** Interface para cache */\nexport interface CacheProvider {\n  /** Obt√©m valor do cache */\n  get<T>(key: string): Promise<T | null>;\n  \n  /** Define valor no cache */\n  set<T>(key: string, value: T, ttl?: number): Promise<void>;\n  \n  /** Remove valor do cache */\n  delete(key: string): Promise<void>;\n  \n  /** Limpa todo o cache */\n  clear(): Promise<void>;\n  \n  /** Verifica se chave existe */\n  has(key: string): Promise<boolean>;\n  \n  /** Obt√©m estat√≠sticas do cache */\n  getStats(): Promise<CacheStats>;\n}\n\n/** Estat√≠sticas do cache */\nexport interface CacheStats {\n  /** N√∫mero de hits */\n  hits: number;\n  /** N√∫mero de misses */\n  misses: number;\n  /** Taxa de hit */\n  hitRate: number;\n  /** N√∫mero de entradas */\n  size: number;\n  /** Mem√≥ria usada */\n  memoryUsage: number;\n}\n\n/** Classe base com suporte a cache */\nexport abstract class CachedService<T extends BaseEntity = BaseEntity> extends BaseService<T> {\n  protected cache?: CacheProvider;\n\n  constructor(serviceName: string, config: Partial<ServiceConfig> = {}, cacheProvider?: CacheProvider) {\n    super(serviceName, config);\n    this.cache = cacheProvider;\n  }\n\n  /** Executa opera√ß√£o com cache */\n  protected async executeWithCache<R>(\n    key: string,\n    operation: () => Promise<R>,\n    ttl?: number\n  ): Promise<R> {\n    if (!this.config.enableCache || !this.cache) {\n      return operation();\n    }\n\n    // Tenta buscar no cache\n    const cached = await this.cache.get<R>(key);\n    if (cached !== null) {\n      this.log('info', `Cache hit para chave: ${key}`);\n      return cached;\n    }\n\n    // Executa opera√ß√£o e armazena no cache\n    this.log('info', `Cache miss para chave: ${key}`);\n    const result = await operation();\n    await this.cache.set(key, result, ttl || this.config.cacheTtl);\n    \n    return result;\n  }\n\n  /** Invalida cache */\n  protected async invalidateCache(pattern?: string): Promise<void> {\n    if (!this.cache) return;\n    \n    if (pattern) {\n      // Implementa√ß√£o espec√≠fica dependeria do provider de cache\n      this.log('info', `Invalidando cache com padr√£o: ${pattern}`);\n    } else {\n      await this.cache.clear();\n      this.log('info', 'Cache completamente invalidado');\n    }\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/core/cache.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":48,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo de cache para otimiza√ß√£o de performance\n */\n\nimport { CacheProvider, CacheStats } from './base';\n\n/** Configura√ß√£o do cache em mem√≥ria */\nexport interface MemoryCacheConfig {\n  /** Tamanho m√°ximo do cache */\n  maxSize: number;\n  /** TTL padr√£o em ms */\n  defaultTtl: number;\n  /** Estrat√©gia de limpeza */\n  evictionStrategy: 'lru' | 'fifo' | 'ttl';\n  /** Intervalo de limpeza em ms */\n  cleanupInterval: number;\n  /** Se deve logar opera√ß√µes */\n  enableLogging: boolean;\n}\n\n/** Item do cache */\ninterface CacheItem<T> {\n  /** Valor armazenado */\n  value: T;\n  /** Timestamp de cria√ß√£o */\n  createdAt: number;\n  /** Timestamp de expira√ß√£o */\n  expiresAt: number;\n  /** Timestamp do √∫ltimo acesso */\n  lastAccessed: number;\n  /** N√∫mero de acessos */\n  accessCount: number;\n  /** Tamanho estimado em bytes */\n  size: number;\n}\n\n/** Implementa√ß√£o de cache em mem√≥ria */\nexport class MemoryCache implements CacheProvider {\n  private cache = new Map<string, CacheItem<unknown>>();\n  private config: MemoryCacheConfig;\n  private stats = {\n    hits: 0,\n    misses: 0,\n    sets: 0,\n    deletes: 0,\n    evictions: 0\n  };\n  private cleanupTimer?: NodeJS.Timeout;\n\n  constructor(config: Partial<MemoryCacheConfig> = {}) {\n    this.config = {\n      maxSize: 1000,\n      defaultTtl: 300000, // 5 minutos\n      evictionStrategy: 'lru',\n      cleanupInterval: 60000, // 1 minuto\n      enableLogging: false,\n      ...config\n    };\n\n    this.startCleanupTimer();\n  }\n\n  /** Obt√©m valor do cache */\n  async get<T>(key: string): Promise<T | null> {\n    const item = this.cache.get(key) as CacheItem<T> | undefined;\n    \n    if (!item) {\n      this.stats.misses++;\n      this.log('debug', `Cache miss para chave: ${key}`);\n      return null;\n    }\n\n    // Verifica se expirou\n    if (Date.now() > item.expiresAt) {\n      this.cache.delete(key);\n      this.stats.misses++;\n      this.log('debug', `Cache miss (expirado) para chave: ${key}`);\n      return null;\n    }\n\n    // Atualiza estat√≠sticas de acesso\n    item.lastAccessed = Date.now();\n    item.accessCount++;\n    this.stats.hits++;\n    \n    this.log('debug', `Cache hit para chave: ${key}`);\n    return item.value;\n  }\n\n  /** Define valor no cache */\n  async set<T>(key: string, value: T, ttl?: number): Promise<void> {\n    const now = Date.now();\n    const effectiveTtl = ttl || this.config.defaultTtl;\n    const size = this.estimateSize(value);\n\n    const item: CacheItem<T> = {\n      value,\n      createdAt: now,\n      expiresAt: now + effectiveTtl,\n      lastAccessed: now,\n      accessCount: 0,\n      size\n    };\n\n    // Verifica se precisa fazer limpeza antes de adicionar\n    if (this.cache.size >= this.config.maxSize) {\n      this.evictItems(1);\n    }\n\n    this.cache.set(key, item as CacheItem<unknown>);\n    this.stats.sets++;\n    \n    this.log('debug', `Valor armazenado no cache para chave: ${key}`);\n  }\n\n  /** Remove valor do cache */\n  async delete(key: string): Promise<void> {\n    const deleted = this.cache.delete(key);\n    if (deleted) {\n      this.stats.deletes++;\n      this.log('debug', `Valor removido do cache para chave: ${key}`);\n    }\n  }\n\n  /** Limpa todo o cache */\n  async clear(): Promise<void> {\n    const size = this.cache.size;\n    this.cache.clear();\n    this.log('info', `Cache limpo: ${size} itens removidos`);\n  }\n\n  /** Verifica se chave existe */\n  async has(key: string): Promise<boolean> {\n    const item = this.cache.get(key);\n    if (!item) return false;\n    \n    // Verifica se expirou\n    if (Date.now() > item.expiresAt) {\n      this.cache.delete(key);\n      return false;\n    }\n    \n    return true;\n  }\n\n  /** Obt√©m estat√≠sticas do cache */\n  async getStats(): Promise<CacheStats> {\n    const totalRequests = this.stats.hits + this.stats.misses;\n    const hitRate = totalRequests > 0 ? this.stats.hits / totalRequests : 0;\n    \n    let memoryUsage = 0;\n    for (const item of this.cache.values()) {\n      memoryUsage += item.size;\n    }\n\n    return {\n      hits: this.stats.hits,\n      misses: this.stats.misses,\n      hitRate,\n      size: this.cache.size,\n      memoryUsage\n    };\n  }\n\n  /** Remove itens expirados */\n  private cleanup(): void {\n    const now = Date.now();\n    let removedCount = 0;\n\n    for (const [key, item] of this.cache.entries()) {\n      if (now > item.expiresAt) {\n        this.cache.delete(key);\n        removedCount++;\n      }\n    }\n\n    if (removedCount > 0) {\n      this.log('debug', `Limpeza autom√°tica: ${removedCount} itens expirados removidos`);\n    }\n  }\n\n  /** Remove itens baseado na estrat√©gia de limpeza */\n  private evictItems(count: number): void {\n    const keysToRemove: string[] = [];\n    \n    switch (this.config.evictionStrategy) {\n      case 'lru':\n        keysToRemove.push(...this.getLRUKeys(count));\n        break;\n      case 'fifo':\n        keysToRemove.push(...this.getFIFOKeys(count));\n        break;\n      case 'ttl':\n        keysToRemove.push(...this.getTTLKeys(count));\n        break;\n    }\n\n    for (const key of keysToRemove) {\n      this.cache.delete(key);\n      this.stats.evictions++;\n    }\n\n    if (keysToRemove.length > 0) {\n      this.log('debug', `Eviction: ${keysToRemove.length} itens removidos (${this.config.evictionStrategy})`);\n    }\n  }\n\n  /** Obt√©m chaves para remo√ß√£o LRU */\n  private getLRUKeys(count: number): string[] {\n    const entries = Array.from(this.cache.entries())\n      .sort(([, a], [, b]) => a.lastAccessed - b.lastAccessed)\n      .slice(0, count);\n    \n    return entries.map(([key]) => key);\n  }\n\n  /** Obt√©m chaves para remo√ß√£o FIFO */\n  private getFIFOKeys(count: number): string[] {\n    const entries = Array.from(this.cache.entries())\n      .sort(([, a], [, b]) => a.createdAt - b.createdAt)\n      .slice(0, count);\n    \n    return entries.map(([key]) => key);\n  }\n\n  /** Obt√©m chaves para remo√ß√£o TTL */\n  private getTTLKeys(count: number): string[] {\n    const entries = Array.from(this.cache.entries())\n      .sort(([, a], [, b]) => a.expiresAt - b.expiresAt)\n      .slice(0, count);\n    \n    return entries.map(([key]) => key);\n  }\n\n  /** Estima tamanho de um valor */\n  private estimateSize(value: unknown): number {\n    if (value === null || value === undefined) return 8;\n    \n    if (typeof value === 'string') {\n      return value.length * 2; // UTF-16\n    }\n    \n    if (typeof value === 'number') {\n      return 8;\n    }\n    \n    if (typeof value === 'boolean') {\n      return 4;\n    }\n    \n    if (typeof value === 'object') {\n      try {\n        return JSON.stringify(value).length * 2;\n      } catch {\n        return 1024; // Estimativa padr√£o\n      }\n    }\n    \n    return 64; // Estimativa padr√£o\n  }\n\n  /** Inicia timer de limpeza */\n  private startCleanupTimer(): void {\n    this.cleanupTimer = setInterval(() => {\n      this.cleanup();\n    }, this.config.cleanupInterval);\n  }\n\n  /** Para timer de limpeza */\n  private stopCleanupTimer(): void {\n    if (this.cleanupTimer) {\n      clearInterval(this.cleanupTimer);\n      this.cleanupTimer = undefined;\n    }\n  }\n\n  /** Log */\n  private log(level: 'debug' | 'info' | 'warn' | 'error', message: string): void {\n    if (!this.config.enableLogging) return;\n    \n    console[level === 'debug' ? 'log' : level](`[MemoryCache] ${message}`);\n  }\n\n  /** Destr√≥i o cache */\n  destroy(): void {\n    this.stopCleanupTimer();\n    this.cache.clear();\n    this.log('info', 'Cache destru√≠do');\n  }\n\n  /** Obt√©m informa√ß√µes detalhadas */\n  getDetailedInfo(): {\n    config: MemoryCacheConfig;\n    stats: typeof this.stats;\n    items: Array<{ key: string; size: number; age: number; accessCount: number }>;\n  } {\n    const now = Date.now();\n    const items = Array.from(this.cache.entries()).map(([key, item]) => ({\n      key,\n      size: item.size,\n      age: now - item.createdAt,\n      accessCount: item.accessCount\n    }));\n\n    return {\n      config: this.config,\n      stats: { ...this.stats },\n      items\n    };\n  }\n}\n\n/** Cache que persiste no localStorage */\nexport class LocalStorageCache implements CacheProvider {\n  private prefix: string;\n  private defaultTtl: number;\n\n  constructor(prefix = 'cache_', defaultTtl = 300000) {\n    this.prefix = prefix;\n    this.defaultTtl = defaultTtl;\n  }\n\n  async get<T>(key: string): Promise<T | null> {\n    try {\n      const item = localStorage.getItem(this.prefix + key);\n      if (!item) return null;\n\n      const parsed = JSON.parse(item);\n      if (Date.now() > parsed.expiresAt) {\n        localStorage.removeItem(this.prefix + key);\n        return null;\n      }\n\n      return parsed.value;\n    } catch {\n      return null;\n    }\n  }\n\n  async set<T>(key: string, value: T, ttl?: number): Promise<void> {\n    try {\n      const item = {\n        value,\n        expiresAt: Date.now() + (ttl || this.defaultTtl)\n      };\n      localStorage.setItem(this.prefix + key, JSON.stringify(item));\n    } catch {\n      // Ignora erros de quota\n    }\n  }\n\n  async delete(key: string): Promise<void> {\n    localStorage.removeItem(this.prefix + key);\n  }\n\n  async clear(): Promise<void> {\n    const keys = Object.keys(localStorage).filter(key => key.startsWith(this.prefix));\n    keys.forEach(key => localStorage.removeItem(key));\n  }\n\n  async has(key: string): Promise<boolean> {\n    const value = await this.get(key);\n    return value !== null;\n  }\n\n  async getStats(): Promise<CacheStats> {\n    const keys = Object.keys(localStorage).filter(key => key.startsWith(this.prefix));\n    return {\n      hits: 0,\n      misses: 0,\n      hitRate: 0,\n      size: keys.length,\n      memoryUsage: 0\n    };\n  }\n}\n\n/** Cache composto que usa m√∫ltiplos providers */\nexport class MultiLevelCache implements CacheProvider {\n  private providers: CacheProvider[];\n\n  constructor(providers: CacheProvider[]) {\n    this.providers = providers;\n  }\n\n  async get<T>(key: string): Promise<T | null> {\n    for (let i = 0; i < this.providers.length; i++) {\n      const value = await this.providers[i].get<T>(key);\n      if (value !== null) {\n        // Propaga para n√≠veis superiores\n        for (let j = 0; j < i; j++) {\n          await this.providers[j].set(key, value);\n        }\n        return value;\n      }\n    }\n    return null;\n  }\n\n  async set<T>(key: string, value: T, ttl?: number): Promise<void> {\n    await Promise.all(\n      this.providers.map(provider => provider.set(key, value, ttl))\n    );\n  }\n\n  async delete(key: string): Promise<void> {\n    await Promise.all(\n      this.providers.map(provider => provider.delete(key))\n    );\n  }\n\n  async clear(): Promise<void> {\n    await Promise.all(\n      this.providers.map(provider => provider.clear())\n    );\n  }\n\n  async has(key: string): Promise<boolean> {\n    for (const provider of this.providers) {\n      if (await provider.has(key)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  async getStats(): Promise<CacheStats> {\n    const stats = await Promise.all(\n      this.providers.map(provider => provider.getStats())\n    );\n\n    return stats.reduce((acc, stat) => ({\n      hits: acc.hits + stat.hits,\n      misses: acc.misses + stat.misses,\n      hitRate: (acc.hits + stat.hits) / (acc.hits + stat.hits + acc.misses + stat.misses),\n      size: acc.size + stat.size,\n      memoryUsage: acc.memoryUsage + stat.memoryUsage\n    }), {\n      hits: 0,\n      misses: 0,\n      hitRate: 0,\n      size: 0,\n      memoryUsage: 0\n    });\n  }\n}\n\n/** Inst√¢ncia global de cache */\nexport const globalCache = new MemoryCache({\n  maxSize: 1000,\n  defaultTtl: 300000,\n  evictionStrategy: 'lru',\n  enableLogging: false\n});\n\n/** Cache para desenvolvimento */\nexport const devCache = new MemoryCache({\n  maxSize: 100,\n  defaultTtl: 60000,\n  evictionStrategy: 'lru',\n  enableLogging: true\n});\n\n/** Cache h√≠brido (mem√≥ria + localStorage) */\nexport const hybridCache = new MultiLevelCache([\n  new MemoryCache({ maxSize: 500, defaultTtl: 300000 }),\n  new LocalStorageCache('app_cache_', 3600000)\n]);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/core/error.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_args' is defined but never used.","line":612,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":612,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":612,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":612,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16387,16390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16387,16390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":612,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":612,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16397,16400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16397,16400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":636,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":636,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17010,17013],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17010,17013],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo de tratamento de erros\n */\n\nimport { \n  BaseError, \n  ValidationError as IValidationError,\n  NetworkError as INetworkError,\n  AuthenticationError,\n  AuthorizationError,\n  BusinessError,\n  BusinessErrorCategory,\n  SystemError,\n  FileError,\n  FileErrorType,\n  AppError,\n  ErrorHandlingConfig\n} from '../../types/core/errors';\nimport { Severity } from '../../types/core/common';\n\n/** Configura√ß√£o do servi√ßo de erros */\nexport interface ErrorServiceConfig extends ErrorHandlingConfig {\n  /** Se deve reportar erros automaticamente */\n  autoReport: boolean;\n  /** URL do servi√ßo de relat√≥rios */\n  reportingUrl?: string;\n  /** Chave da API de relat√≥rios */\n  apiKey?: string;\n  /** M√°ximo de tentativas */\n  maxRetries: number;\n  /** Delay entre tentativas */\n  retryDelay: number;\n  /** Filtros de erro */\n  filters: {\n    /** Severidades a ignorar */\n    ignoreSeverities: Severity[];\n    /** C√≥digos de erro a ignorar */\n    ignoreCodes: string[];\n    /** Padr√µes de mensagem a ignorar */\n    ignorePatterns: RegExp[];\n  };\n}\n\n/** Implementa√ß√£o de erro base */\nexport class AppErrorImpl extends Error implements BaseError {\n  public readonly code: string;\n  public readonly severity: Severity;\n  public readonly timestamp: Date;\n  public readonly context?: Record<string, unknown>;\n  public readonly cause?: Error;\n\n  constructor(\n    message: string,\n    code: string,\n    severity: Severity = 'error',\n    context?: Record<string, unknown>,\n    cause?: Error\n  ) {\n    super(message);\n    this.name = this.constructor.name;\n    this.code = code;\n    this.severity = severity;\n    this.timestamp = new Date();\n    this.context = context;\n    this.cause = cause;\n\n    // Mant√©m stack trace\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n\n  /** Converte para objeto serializ√°vel */\n  toJSON(): Record<string, unknown> {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      severity: this.severity,\n      timestamp: this.timestamp.toISOString(),\n      context: this.context,\n      stack: this.stack,\n      cause: this.cause ? {\n        name: this.cause.name,\n        message: this.cause.message,\n        stack: this.cause.stack\n      } : undefined\n    };\n  }\n\n  /** Cria uma c√≥pia com contexto adicional */\n  withContext(additionalContext: Record<string, unknown>): AppErrorImpl {\n    return new AppErrorImpl(\n      this.message,\n      this.code,\n      this.severity,\n      { ...this.context, ...additionalContext },\n      this.cause\n    );\n  }\n}\n\n/** Erro de valida√ß√£o */\nexport class ValidationError extends AppErrorImpl implements IValidationError {\n  public readonly field: string;\n  public readonly value?: unknown;\n  public readonly rule?: string;\n\n  constructor(\n    message: string,\n    field: string,\n    value?: unknown,\n    rule?: string,\n    context?: Record<string, unknown>\n  ) {\n    super(message, 'VALIDATION_ERROR', 'warning', context);\n    this.field = field;\n    this.value = value;\n    this.rule = rule;\n  }\n}\n\n/** Erro de rede */\nexport class NetworkError extends AppErrorImpl implements INetworkError {\n  public readonly status?: number;\n  public readonly url?: string;\n  public readonly method?: string;\n  public readonly headers?: Record<string, string>;\n  public readonly responseBody?: unknown;\n\n  constructor(\n    message: string,\n    status?: number,\n    url?: string,\n    method?: string,\n    headers?: Record<string, string>,\n    responseBody?: unknown,\n    context?: Record<string, unknown>\n  ) {\n    super(message, 'NETWORK_ERROR', 'error', context);\n    this.status = status;\n    this.url = url;\n    this.method = method;\n    this.headers = headers;\n    this.responseBody = responseBody;\n  }\n}\n\n/** Erro de autentica√ß√£o */\nexport class AuthError extends AppErrorImpl implements AuthenticationError {\n  public readonly authType: 'login' | 'token' | 'permission' | 'session';\n  public readonly requiresReauth: boolean;\n\n  constructor(\n    message: string,\n    authType: 'login' | 'token' | 'permission' | 'session' = 'token',\n    requiresReauth = false,\n    context?: Record<string, unknown>\n  ) {\n    super(message, 'AUTH_ERROR', 'error', context);\n    this.authType = authType;\n    this.requiresReauth = requiresReauth;\n  }\n}\n\n/** Erro de autoriza√ß√£o */\nexport class AuthzError extends AppErrorImpl implements AuthorizationError {\n  public readonly resource: string;\n  public readonly action: string;\n  public readonly requiredPermissions: string[];\n  public readonly userPermissions: string[];\n\n  constructor(\n    message: string,\n    resource: string,\n    action: string,\n    requiredPermissions: string[] = [],\n    userPermissions: string[] = [],\n    context?: Record<string, unknown>\n  ) {\n    super(message, 'AUTHZ_ERROR', 'error', context);\n    this.resource = resource;\n    this.action = action;\n    this.requiredPermissions = requiredPermissions;\n    this.userPermissions = userPermissions;\n  }\n}\n\n/** Erro de neg√≥cio */\nexport class BizError extends AppErrorImpl implements BusinessError {\n  public readonly category: BusinessErrorCategory;\n  public readonly userResolvable: boolean;\n  public readonly suggestedActions?: string[];\n\n  constructor(\n    message: string,\n    category: BusinessErrorCategory,\n    userResolvable = true,\n    suggestedActions?: string[],\n    context?: Record<string, unknown>\n  ) {\n    super(message, 'BUSINESS_ERROR', 'warning', context);\n    this.category = category;\n    this.userResolvable = userResolvable;\n    this.suggestedActions = suggestedActions;\n  }\n}\n\n/** Erro de sistema */\nexport class SysError extends AppErrorImpl implements SystemError {\n  public readonly component: string;\n  public readonly operation: string;\n  public readonly recoverable: boolean;\n  public readonly sessionId?: string;\n\n  constructor(\n    message: string,\n    component: string,\n    operation: string,\n    recoverable = false,\n    sessionId?: string,\n    context?: Record<string, unknown>\n  ) {\n    super(message, 'SYSTEM_ERROR', 'critical', context);\n    this.component = component;\n    this.operation = operation;\n    this.recoverable = recoverable;\n    this.sessionId = sessionId;\n  }\n}\n\n/** Erro de arquivo */\nexport class FileErrorImpl extends AppErrorImpl implements FileError {\n  public readonly fileName: string;\n  public readonly fileSize?: number;\n  public readonly mimeType?: string;\n  public readonly fileErrorType: FileErrorType;\n\n  constructor(\n    message: string,\n    fileName: string,\n    fileErrorType: FileErrorType,\n    fileSize?: number,\n    mimeType?: string,\n    context?: Record<string, unknown>\n  ) {\n    super(message, 'FILE_ERROR', 'error', context);\n    this.fileName = fileName;\n    this.fileErrorType = fileErrorType;\n    this.fileSize = fileSize;\n    this.mimeType = mimeType;\n  }\n}\n\n/** Servi√ßo de tratamento de erros */\nexport class ErrorService {\n  private config: ErrorServiceConfig;\n  private errorQueue: AppError[] = [];\n  private reportingTimer?: ReturnType<typeof setTimeout>;\n\n  constructor(config: Partial<ErrorServiceConfig> = {}) {\n    this.config = {\n      autoLog: true,\n      showNotification: false,\n      autoRecover: false,\n      maxRetries: 3,\n      retryDelay: 1000,\n      autoReport: false,\n      filters: {\n        ignoreSeverities: [],\n        ignoreCodes: [],\n        ignorePatterns: []\n      },\n      ...config\n    };\n\n    // Configura handler global de erros n√£o capturados\n    this.setupGlobalHandlers();\n\n    // Inicia timer de relat√≥rios se habilitado\n    if (this.config.autoReport) {\n      this.startReportingTimer();\n    }\n  }\n\n  /** Trata um erro */\n  handle(error: Error | AppError, context?: Record<string, unknown>): AppError {\n    let appError: AppError;\n\n    // Converte para AppError se necess√°rio\n    if (error instanceof AppErrorImpl) {\n      appError = context ? error.withContext(context) : error;\n    } else {\n      appError = new AppErrorImpl(\n        error.message,\n        'UNKNOWN_ERROR',\n        'error',\n        context,\n        error instanceof Error ? error : undefined\n      );\n    }\n\n    // Aplica filtros\n    if (this.shouldIgnoreError(appError)) {\n      return appError;\n    }\n\n    // Log do erro\n    if (this.config.autoLog) {\n      this.logError(appError);\n    }\n\n    // Adiciona √† fila de relat√≥rios\n    if (this.config.showNotification) {\n      this.queueForReporting(appError);\n    }\n\n    return appError;\n  }\n\n  /** Cria erro de valida√ß√£o */\n  createValidationError(\n    message: string,\n    field: string,\n    value?: unknown,\n    rule?: string,\n    context?: Record<string, unknown>\n  ): ValidationError {\n    return new ValidationError(message, field, value, rule, context);\n  }\n\n  /** Cria erro de rede */\n  createNetworkError(\n    message: string,\n    status?: number,\n    url?: string,\n    method?: string,\n    headers?: Record<string, string>,\n    responseBody?: unknown,\n    context?: Record<string, unknown>\n  ): NetworkError {\n    return new NetworkError(message, status, url, method, headers, responseBody, context);\n  }\n\n  /** Cria erro de autentica√ß√£o */\n  createAuthError(\n    message: string,\n    authType: 'login' | 'token' | 'permission' | 'session' = 'token',\n    requiresReauth = false,\n    context?: Record<string, unknown>\n  ): AuthError {\n    return new AuthError(message, authType, requiresReauth, context);\n  }\n\n  /** Cria erro de autoriza√ß√£o */\n  createAuthzError(\n    message: string,\n    resource: string,\n    action: string,\n    requiredPermissions: string[] = [],\n    userPermissions: string[] = [],\n    context?: Record<string, unknown>\n  ): AuthzError {\n    return new AuthzError(message, resource, action, requiredPermissions, userPermissions, context);\n  }\n\n  /** Cria erro de neg√≥cio */\n  createBusinessError(\n    message: string,\n    category: BusinessErrorCategory,\n    userResolvable = true,\n    suggestedActions?: string[],\n    context?: Record<string, unknown>\n  ): BizError {\n    return new BizError(message, category, userResolvable, suggestedActions, context);\n  }\n\n  /** Cria erro de sistema */\n  createSystemError(\n    message: string,\n    component: string,\n    operation: string,\n    recoverable = false,\n    sessionId?: string,\n    context?: Record<string, unknown>\n  ): SysError {\n    return new SysError(message, component, operation, recoverable, sessionId, context);\n  }\n\n  /** Cria erro de arquivo */\n  createFileError(\n    message: string,\n    fileName: string,\n    fileErrorType: FileErrorType,\n    fileSize?: number,\n    mimeType?: string,\n    context?: Record<string, unknown>\n  ): FileErrorImpl {\n    return new FileErrorImpl(message, fileName, fileErrorType, fileSize, mimeType, context);\n  }\n\n  /** Verifica se deve ignorar o erro */\n  private shouldIgnoreError(error: AppError): boolean {\n    const { filters } = this.config;\n\n    // Verifica severidade\n    if (filters.ignoreSeverities.includes(error.severity)) {\n      return true;\n    }\n\n    // Verifica c√≥digo\n    if (filters.ignoreCodes.includes(error.code)) {\n      return true;\n    }\n\n    // Verifica padr√µes de mensagem\n    for (const pattern of filters.ignorePatterns) {\n      if (pattern.test(error.message)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /** Faz log do erro */\n  private logError(error: AppError): void {\n    const logLevel = this.getLogLevel(error.severity);\n    const logMessage = `[${error.code}] ${error.message}`;\n    const logData = {\n      error: error instanceof AppErrorImpl ? error.toJSON() : {\n        code: error.code,\n        message: error.message,\n        severity: error.severity,\n        timestamp: error.timestamp.toISOString()\n      },\n      timestamp: error.timestamp.toISOString()\n    };\n\n    console[logLevel](logMessage, logData);\n  }\n\n  /** Obt√©m n√≠vel de log baseado na severidade */\n  private getLogLevel(severity: Severity): 'log' | 'warn' | 'error' {\n    switch (severity) {\n      case 'info':\n        return 'log';\n      case 'warning':\n        return 'warn';\n      case 'error':\n      case 'critical':\n        return 'error';\n      default:\n        return 'log';\n    }\n  }\n\n  /** Adiciona erro √† fila de relat√≥rios */\n  private queueForReporting(error: AppError): void {\n    this.errorQueue.push(error);\n\n    // Se n√£o est√° em modo auto-report, envia imediatamente\n    if (!this.config.autoReport) {\n      this.sendErrorReports();\n    }\n  }\n\n  /** Envia relat√≥rios de erro */\n  private async sendErrorReports(): Promise<void> {\n    if (this.errorQueue.length === 0 || !this.config.reportingUrl) {\n      return;\n    }\n\n    const errors = [...this.errorQueue];\n    this.errorQueue = [];\n\n    try {\n      const report = {\n        errors: errors.map(error => ({\n          error: error instanceof AppErrorImpl ? error.toJSON() : {\n            code: error.code,\n            message: error.message,\n            severity: error.severity,\n            timestamp: error.timestamp.toISOString()\n          },\n          context: {\n            userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'Node.js',\n            currentUrl: typeof window !== 'undefined' ? window.location.href : 'N/A',\n            userId: this.getUserId()\n          },\n          userConsent: true\n        }))\n      };\n\n      await fetch(this.config.reportingUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(this.config.apiKey && { 'Authorization': `Bearer ${this.config.apiKey}` })\n        },\n        body: JSON.stringify(report)\n      });\n\n      console.log(`Relat√≥rio de ${errors.length} erro(s) enviado com sucesso`);\n    } catch (reportError) {\n      console.error('Falha ao enviar relat√≥rio de erros:', reportError);\n      // Recoloca os erros na fila para tentar novamente\n      this.errorQueue.unshift(...errors);\n    }\n  }\n\n  /** Obt√©m ID do usu√°rio para relat√≥rios */\n  private getUserId(): string | undefined {\n    // Implementar l√≥gica para obter ID do usu√°rio\n    // Por exemplo, do localStorage, contexto de autentica√ß√£o, etc.\n    return undefined;\n  }\n\n  /** Configura handlers globais */\n  private setupGlobalHandlers(): void {\n    // Handler para erros n√£o capturados\n    if (typeof window !== 'undefined') {\n      window.addEventListener('error', (event) => {\n        this.handle(new Error(event.message), {\n          component: 'global',\n          operation: 'window.error',\n          metadata: {\n            filename: event.filename,\n            lineno: event.lineno,\n            colno: event.colno\n          }\n        });\n      });\n\n      // Handler para promises rejeitadas\n      window.addEventListener('unhandledrejection', (event) => {\n        this.handle(new Error(String(event.reason)), {\n          component: 'global',\n          operation: 'unhandledrejection'\n        });\n      });\n    } else {\n      // Node.js\n      process.on('uncaughtException', (error) => {\n        this.handle(error, {\n          component: 'global',\n          operation: 'uncaughtException'\n        });\n      });\n\n      process.on('unhandledRejection', (reason) => {\n        this.handle(new Error(String(reason)), {\n          component: 'global',\n          operation: 'unhandledRejection'\n        });\n      });\n    }\n  }\n\n  /** Inicia timer de relat√≥rios */\n  private startReportingTimer(): void {\n    this.reportingTimer = setInterval(() => {\n      this.sendErrorReports();\n    }, 30000); // 30 segundos\n  }\n\n  /** Para timer de relat√≥rios */\n  private stopReportingTimer(): void {\n    if (this.reportingTimer) {\n      clearInterval(this.reportingTimer);\n      this.reportingTimer = undefined;\n    }\n  }\n\n  /** Obt√©m estat√≠sticas de erros */\n  getStats(): {\n    queueSize: number;\n    config: ErrorServiceConfig;\n  } {\n    return {\n      queueSize: this.errorQueue.length,\n      config: this.config\n    };\n  }\n\n  /** Limpa fila de erros */\n  clearQueue(): void {\n    this.errorQueue = [];\n  }\n\n  /** Destr√≥i o servi√ßo */\n  destroy(): void {\n    this.stopReportingTimer();\n    this.clearQueue();\n  }\n}\n\n/** Inst√¢ncia global do servi√ßo de erros */\nexport const errorService = new ErrorService({\n  autoLog: true,\n  showNotification: false,\n  autoRecover: false,\n  autoReport: false\n});\n\n/** Fun√ß√£o utilit√°ria para tratar erros */\nexport function handleError(error: Error | AppError, context?: Record<string, unknown>): AppError {\n  return errorService.handle(error, context);\n}\n\n/** Fun√ß√£o utilit√°ria para criar wrapper de fun√ß√£o com tratamento de erro */\nexport function withErrorHandling<T extends (..._args: any[]) => any>(\n  fn: T,\n  context?: Record<string, unknown>\n): T {\n  return ((..._args: Parameters<T>) => {\n    try {\n      const result = fn(..._args);\n      \n      // Se retorna Promise, trata erros ass√≠ncronos\n      if (result instanceof Promise) {\n        return result.catch(error => {\n          throw handleError(error, context);\n        });\n      }\n      \n      return result;\n    } catch (error) {\n      throw handleError(error as Error, context);\n    }\n  }) as T;\n}\n\n/** Decorator para m√©todos com tratamento de erro */\nexport function ErrorHandler(context?: Record<string, unknown>) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    \n    descriptor.value = withErrorHandling(originalMethod, {\n      component: target.constructor.name,\n      operation: propertyKey,\n      ...context\n    });\n    \n    return descriptor;\n  };\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/core/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/core/logging.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Severity' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Severity' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'entry' is defined but never used.","line":81,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":184,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":184,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":250,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":250,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'service' is defined but never used.","line":495,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":495,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'category' is defined but never used.","line":496,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":496,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":566,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":566,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14616,14619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14616,14619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":569,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":569,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14770,14773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14770,14773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'DEBUG' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'INFO' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'WARN' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ERROR' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CRITICAL' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":6,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo de logging para a aplica√ß√£o\n */\n\nimport { Severity } from '../../types/core/common';\n\n/** N√≠veis de log */\n/* eslint-disable no-unused-vars */\nexport enum LogLevel {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n  CRITICAL = 4\n}\n/* eslint-enable no-unused-vars */\n\n/** Entrada de log */\nexport interface LogEntry {\n  /** Timestamp do log */\n  timestamp: Date;\n  /** N√≠vel do log */\n  level: LogLevel;\n  /** Mensagem do log */\n  message: string;\n  /** Contexto adicional */\n  context?: Record<string, unknown>;\n  /** Categoria/m√≥dulo */\n  category?: string;\n  /** ID da sess√£o */\n  sessionId?: string;\n  /** ID do usu√°rio */\n  userId?: string;\n  /** Erro associado */\n  error?: Error;\n  /** Metadados adicionais */\n  metadata?: Record<string, unknown>;\n}\n\n/** Configura√ß√£o do logger */\nexport interface LoggerConfig {\n  /** N√≠vel m√≠nimo de log */\n  level: LogLevel;\n  /** Se deve incluir timestamp */\n  includeTimestamp: boolean;\n  /** Se deve incluir stack trace para erros */\n  includeStackTrace: boolean;\n  /** Formato de sa√≠da */\n  format: 'json' | 'text';\n  /** Tamanho m√°ximo do buffer */\n  maxBufferSize: number;\n  /** Intervalo de flush em ms */\n  flushInterval: number;\n  /** Se deve fazer log no console */\n  console: boolean;\n  /** Se deve persistir logs */\n  persist: boolean;\n  /** Filtros de categoria */\n  categoryFilters?: string[];\n  /** Configura√ß√µes de transporte */\n  transports?: LogTransportConfig[];\n}\n\n/** Configura√ß√£o de transporte de log */\nexport interface LogTransportConfig {\n  /** Tipo do transporte */\n  type: 'console' | 'file' | 'remote' | 'storage';\n  /** N√≠vel m√≠nimo para este transporte */\n  level?: LogLevel;\n  /** Configura√ß√µes espec√≠ficas */\n  options?: Record<string, unknown>;\n}\n\n/** Interface para transporte de logs */\nexport interface LogTransport {\n  /** Nome do transporte */\n  name: string;\n  /** N√≠vel m√≠nimo */\n  level: LogLevel;\n  /** Envia log */\n  send(entry: LogEntry): Promise<void> | void;\n  /** Limpa recursos */\n  cleanup?(): Promise<void> | void;\n}\n\n/** Transporte para console */\nexport class ConsoleTransport implements LogTransport {\n  name = 'console';\n  level: LogLevel;\n\n  constructor(level: LogLevel = LogLevel.INFO) {\n    this.level = level;\n  }\n\n  send(entry: LogEntry): void {\n    if (entry.level < this.level) return;\n\n    const timestamp = entry.timestamp.toISOString();\n    const levelName = LogLevel[entry.level];\n    const category = entry.category ? `[${entry.category}]` : '';\n    const message = `${timestamp} ${levelName} ${category} ${entry.message}`;\n\n    switch (entry.level) {\n      case LogLevel.DEBUG:\n        console.debug(message, entry.context);\n        break;\n      case LogLevel.INFO:\n        console.info(message, entry.context);\n        break;\n      case LogLevel.WARN:\n        console.warn(message, entry.context);\n        break;\n      case LogLevel.ERROR:\n      case LogLevel.CRITICAL:\n        console.error(message, entry.context, entry.error);\n        break;\n    }\n  }\n}\n\n/** Transporte para localStorage */\nexport class StorageTransport implements LogTransport {\n  name = 'storage';\n  level: LogLevel;\n  private storageKey: string;\n  private maxEntries: number;\n\n  constructor(\n    level: LogLevel = LogLevel.WARN,\n    storageKey = 'app_logs',\n    maxEntries = 1000\n  ) {\n    this.level = level;\n    this.storageKey = storageKey;\n    this.maxEntries = maxEntries;\n  }\n\n  send(entry: LogEntry): void {\n    if (entry.level < this.level) return;\n\n    try {\n      const logs = this.getLogs();\n      logs.push({\n        ...entry,\n        timestamp: entry.timestamp.toISOString()\n      });\n\n      // Mant√©m apenas as √∫ltimas entradas\n      if (logs.length > this.maxEntries) {\n        logs.splice(0, logs.length - this.maxEntries);\n      }\n\n      localStorage.setItem(this.storageKey, JSON.stringify(logs));\n    } catch (error) {\n      console.error('Erro ao salvar log no storage:', error);\n    }\n  }\n\n  getLogs(): Array<Omit<LogEntry, 'timestamp'> & { timestamp: string }> {\n    try {\n      const stored = localStorage.getItem(this.storageKey);\n      return stored ? JSON.parse(stored) : [];\n    } catch {\n      return [];\n    }\n  }\n\n  clearLogs(): void {\n    localStorage.removeItem(this.storageKey);\n  }\n\n  cleanup(): void {\n    this.clearLogs();\n  }\n}\n\n/** Transporte remoto */\nexport class RemoteTransport implements LogTransport {\n  name = 'remote';\n  level: LogLevel;\n  private endpoint: string;\n  private apiKey?: string;\n  private buffer: LogEntry[] = [];\n  private flushTimer?: NodeJS.Timeout;\n\n  constructor(\n    endpoint: string,\n    level: LogLevel = LogLevel.ERROR,\n    apiKey?: string\n  ) {\n    this.level = level;\n    this.endpoint = endpoint;\n    this.apiKey = apiKey;\n\n    // Flush autom√°tico a cada 30 segundos\n    this.flushTimer = setInterval(() => this.flush(), 30000);\n  }\n\n  send(entry: LogEntry): void {\n    if (entry.level < this.level) return;\n\n    this.buffer.push(entry);\n\n    // Flush imediato para erros cr√≠ticos\n    if (entry.level >= LogLevel.CRITICAL) {\n      this.flush();\n    }\n  }\n\n  private async flush(): Promise<void> {\n    if (this.buffer.length === 0) return;\n\n    const logs = [...this.buffer];\n    this.buffer = [];\n\n    try {\n      const headers: Record<string, string> = {\n        'Content-Type': 'application/json'\n      };\n\n      if (this.apiKey) {\n        headers['Authorization'] = `Bearer ${this.apiKey}`;\n      }\n\n      await fetch(this.endpoint, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({ logs })\n      });\n    } catch (error) {\n      console.error('Erro ao enviar logs remotos:', error);\n      // Recoloca logs no buffer para tentar novamente\n      this.buffer.unshift(...logs);\n    }\n  }\n\n  cleanup(): void {\n    if (this.flushTimer) {\n      clearInterval(this.flushTimer);\n    }\n    this.flush();\n  }\n}\n\n/** Servi√ßo de logging */\nexport class LoggingService {\n  private config: LoggerConfig;\n  private transports: LogTransport[] = [];\n  private buffer: LogEntry[] = [];\n  private flushTimer?: NodeJS.Timeout;\n\n  constructor(config: Partial<LoggerConfig> = {}) {\n    this.config = {\n      level: LogLevel.INFO,\n      includeTimestamp: true,\n      includeStackTrace: true,\n      format: 'text',\n      maxBufferSize: 100,\n      flushInterval: 5000,\n      console: true,\n      persist: false,\n      ...config\n    };\n\n    this.setupDefaultTransports();\n    this.startFlushTimer();\n  }\n\n  private setupDefaultTransports(): void {\n    if (this.config.console) {\n      this.addTransport(new ConsoleTransport(this.config.level));\n    }\n\n    if (this.config.persist) {\n      this.addTransport(new StorageTransport(LogLevel.WARN));\n    }\n\n    // Configura transportes customizados\n    if (this.config.transports) {\n      for (const transportConfig of this.config.transports) {\n        this.addTransportFromConfig(transportConfig);\n      }\n    }\n  }\n\n  private addTransportFromConfig(config: LogTransportConfig): void {\n    const level = config.level || this.config.level;\n\n    switch (config.type) {\n      case 'console':\n        this.addTransport(new ConsoleTransport(level));\n        break;\n      case 'storage':\n        this.addTransport(new StorageTransport(\n          level,\n          config.options?.storageKey as string,\n          config.options?.maxEntries as number\n        ));\n        break;\n      case 'remote':\n        this.addTransport(new RemoteTransport(\n          config.options?.endpoint as string,\n          level,\n          config.options?.apiKey as string\n        ));\n        break;\n    }\n  }\n\n  private startFlushTimer(): void {\n    this.flushTimer = setInterval(() => {\n      this.flushBuffer();\n    }, this.config.flushInterval);\n  }\n\n  /** Adiciona um transporte */\n  addTransport(transport: LogTransport): void {\n    this.transports.push(transport);\n  }\n\n  /** Remove um transporte */\n  removeTransport(name: string): boolean {\n    const index = this.transports.findIndex(t => t.name === name);\n    if (index >= 0) {\n      this.transports.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  /** Cria uma entrada de log */\n  private createLogEntry(\n    level: LogLevel,\n    message: string,\n    context?: Record<string, unknown>,\n    category?: string,\n    error?: Error\n  ): LogEntry {\n    return {\n      timestamp: new Date(),\n      level,\n      message,\n      context,\n      category,\n      error,\n      sessionId: this.getSessionId(),\n      userId: this.getUserId(),\n      metadata: {\n        userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : undefined,\n        url: typeof window !== 'undefined' ? window.location.href : undefined\n      }\n    };\n  }\n\n  private getSessionId(): string | undefined {\n    // Implementar l√≥gica de sess√£o\n    return typeof window !== 'undefined' ? \n      sessionStorage.getItem('sessionId') || undefined : undefined;\n  }\n\n  private getUserId(): string | undefined {\n    // Implementar l√≥gica de usu√°rio\n    return typeof localStorage !== 'undefined' ? \n      localStorage.getItem('userId') || undefined : undefined;\n  }\n\n  /** Faz log de uma entrada */\n  private log(entry: LogEntry): void {\n    // Verifica n√≠vel m√≠nimo\n    if (entry.level < this.config.level) return;\n\n    // Verifica filtros de categoria\n    if (this.config.categoryFilters && entry.category) {\n      if (!this.config.categoryFilters.includes(entry.category)) {\n        return;\n      }\n    }\n\n    // Adiciona ao buffer\n    this.buffer.push(entry);\n\n    // Flush imediato para erros cr√≠ticos\n    if (entry.level >= LogLevel.CRITICAL) {\n      this.flushBuffer();\n    }\n\n    // Flush se buffer estiver cheio\n    if (this.buffer.length >= this.config.maxBufferSize) {\n      this.flushBuffer();\n    }\n  }\n\n  /** Flush do buffer */\n  private flushBuffer(): void {\n    if (this.buffer.length === 0) return;\n\n    const entries = [...this.buffer];\n    this.buffer = [];\n\n    for (const entry of entries) {\n      for (const transport of this.transports) {\n        try {\n          transport.send(entry);\n        } catch (error) {\n          console.error(`Erro no transporte ${transport.name}:`, error);\n        }\n      }\n    }\n  }\n\n  /** Log de debug */\n  debug(message: string, context?: Record<string, unknown>, category?: string): void {\n    const entry = this.createLogEntry(LogLevel.DEBUG, message, context, category);\n    this.log(entry);\n  }\n\n  /** Log de informa√ß√£o */\n  info(message: string, context?: Record<string, unknown>, category?: string): void {\n    const entry = this.createLogEntry(LogLevel.INFO, message, context, category);\n    this.log(entry);\n  }\n\n  /** Log de aviso */\n  warn(message: string, context?: Record<string, unknown>, category?: string): void {\n    const entry = this.createLogEntry(LogLevel.WARN, message, context, category);\n    this.log(entry);\n  }\n\n  /** Log de erro */\n  error(message: string, error?: Error, context?: Record<string, unknown>, category?: string): void {\n    const entry = this.createLogEntry(LogLevel.ERROR, message, context, category, error);\n    this.log(entry);\n  }\n\n  /** Log cr√≠tico */\n  critical(message: string, error?: Error, context?: Record<string, unknown>, category?: string): void {\n    const entry = this.createLogEntry(LogLevel.CRITICAL, message, context, category, error);\n    this.log(entry);\n  }\n\n  /** Cria um logger com categoria */\n  createLogger(category: string): CategoryLogger {\n    return new CategoryLogger(this, category);\n  }\n\n  /** Obt√©m configura√ß√£o atual */\n  getConfig(): LoggerConfig {\n    return { ...this.config };\n  }\n\n  /** Atualiza configura√ß√£o */\n  updateConfig(config: Partial<LoggerConfig>): void {\n    this.config = { ...this.config, ...config };\n  }\n\n  /** Obt√©m logs do storage */\n  getStoredLogs(): Array<Omit<LogEntry, 'timestamp'> & { timestamp: string }> {\n    const storageTransport = this.transports.find(\n      t => t instanceof StorageTransport\n    ) as StorageTransport;\n    \n    return storageTransport ? storageTransport.getLogs() : [];\n  }\n\n  /** Limpa logs armazenados */\n  clearStoredLogs(): void {\n    const storageTransport = this.transports.find(\n      t => t instanceof StorageTransport\n    ) as StorageTransport;\n    \n    if (storageTransport) {\n      storageTransport.clearLogs();\n    }\n  }\n\n  /** Limpa recursos */\n  cleanup(): void {\n    if (this.flushTimer) {\n      clearInterval(this.flushTimer);\n    }\n\n    this.flushBuffer();\n\n    for (const transport of this.transports) {\n      if (transport.cleanup) {\n        transport.cleanup();\n      }\n    }\n  }\n}\n\n/** Logger com categoria */\nexport class CategoryLogger {\n  constructor(\n    private service: LoggingService,\n    private category: string\n  ) {}\n\n  debug(message: string, context?: Record<string, unknown>): void {\n    this.service.debug(message, context, this.category);\n  }\n\n  info(message: string, context?: Record<string, unknown>): void {\n    this.service.info(message, context, this.category);\n  }\n\n  warn(message: string, context?: Record<string, unknown>): void {\n    this.service.warn(message, context, this.category);\n  }\n\n  error(message: string, error?: Error, context?: Record<string, unknown>): void {\n    this.service.error(message, error, context, this.category);\n  }\n\n  critical(message: string, error?: Error, context?: Record<string, unknown>): void {\n    this.service.critical(message, error, context, this.category);\n  }\n}\n\n/** Inst√¢ncia global do servi√ßo de logging */\nexport const loggingService = new LoggingService({\n  level: import.meta.env.DEV ? LogLevel.DEBUG : LogLevel.INFO,\n  console: true,\n  persist: true,\n  includeStackTrace: true\n});\n\n/** Loggers por categoria */\nexport const loggers = {\n  api: loggingService.createLogger('api'),\n  auth: loggingService.createLogger('auth'),\n  ui: loggingService.createLogger('ui'),\n  validation: loggingService.createLogger('validation'),\n  cache: loggingService.createLogger('cache'),\n  error: loggingService.createLogger('error')\n};\n\n/** Fun√ß√£o utilit√°ria para log */\nexport function log(\n  level: LogLevel,\n  message: string,\n  context?: Record<string, unknown>,\n  category?: string\n): void {\n  switch (level) {\n    case LogLevel.DEBUG:\n      loggingService.debug(message, context, category);\n      break;\n    case LogLevel.INFO:\n      loggingService.info(message, context, category);\n      break;\n    case LogLevel.WARN:\n      loggingService.warn(message, context, category);\n      break;\n    case LogLevel.ERROR:\n      loggingService.error(message, undefined, context, category);\n      break;\n    case LogLevel.CRITICAL:\n      loggingService.critical(message, undefined, context, category);\n      break;\n  }\n}\n\n/** Decorator para log autom√°tico */\nexport function LogMethod(category?: string) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = async function (...args: any[]) {\n      const logger = category ? loggingService.createLogger(category) : loggingService;\n      const methodName = `${target.constructor.name}.${propertyKey}`;\n      \n      logger.debug(`Iniciando ${methodName}`, { args });\n      \n      try {\n        const result = await originalMethod.apply(this, args);\n        logger.debug(`${methodName} conclu√≠do com sucesso`);\n        return result;\n      } catch (error) {\n        logger.error(`Erro em ${methodName}`, error as Error, { args });\n        throw error;\n      }\n    };\n\n    return descriptor;\n  };\n}\n\n/** Fun√ß√£o para capturar erros n√£o tratados */\nexport function setupGlobalErrorLogging(): void {\n  if (typeof window !== 'undefined') {\n    window.addEventListener('error', (event) => {\n      loggingService.error(\n        'Erro JavaScript n√£o tratado',\n        new Error(event.message),\n        {\n          filename: event.filename,\n          lineno: event.lineno,\n          colno: event.colno\n        },\n        'global'\n      );\n    });\n\n    window.addEventListener('unhandledrejection', (event) => {\n      loggingService.error(\n        'Promise rejeitada n√£o tratada',\n        event.reason instanceof Error ? event.reason : new Error(String(event.reason)),\n        {},\n        'global'\n      );\n    });\n  }\n}\n\n// Configura logging global automaticamente\nif (typeof window !== 'undefined') {\n  setupGlobalErrorLogging();\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/core/validation.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Severity' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Severity' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":49,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":65,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":48},{"ruleId":"no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":551,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":551,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":551,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":551,"endColumn":50}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo de valida√ß√£o para dados e formul√°rios\n */\n\nimport { ValidationError } from './error';\nimport { Severity } from '../../types/core/common';\n\n/** Resultado de valida√ß√£o */\nexport interface ValidationResult {\n  /** Se a valida√ß√£o passou */\n  isValid: boolean;\n  /** Erros encontrados */\n  errors: ValidationError[];\n  /** Avisos (n√£o impedem a valida√ß√£o) */\n  warnings: ValidationError[];\n  /** Dados validados e transformados */\n  data?: unknown;\n}\n\n/** Contexto de valida√ß√£o */\nexport interface ValidationContext {\n  /** Campo sendo validado */\n  field?: string;\n  /** Valor sendo validado */\n  value?: unknown;\n  /** Dados completos do objeto */\n  data?: Record<string, unknown>;\n  /** Configura√ß√µes adicionais */\n  options?: Record<string, unknown>;\n}\n\n/** Fun√ß√£o de valida√ß√£o */\nexport type ValidatorFunction<T = unknown> = (\n  value: T,\n  context?: ValidationContext\n) => ValidationResult | Promise<ValidationResult>;\n\n/** Regra de valida√ß√£o */\nexport interface ValidationRule {\n  /** Nome da regra */\n  name: string;\n  /** Fun√ß√£o de valida√ß√£o */\n  validator: ValidatorFunction;\n  /** Mensagem de erro personalizada */\n  message?: string;\n  /** Se √© obrigat√≥ria (erro) ou opcional (aviso) */\n  required?: boolean;\n  /** Condi√ß√£o para aplicar a regra */\n  condition?: (context: ValidationContext) => boolean;\n}\n\n/** Schema de valida√ß√£o */\nexport interface ValidationSchema {\n  /** Regras por campo */\n  fields: Record<string, ValidationRule[]>;\n  /** Regras globais do objeto */\n  global?: ValidationRule[];\n  /** Configura√ß√µes do schema */\n  options?: {\n    /** Se deve parar na primeira falha */\n    stopOnFirstError?: boolean;\n    /** Se deve incluir avisos */\n    includeWarnings?: boolean;\n    /** Transforma√ß√µes a aplicar */\n    transforms?: Record<string, (value: unknown) => unknown>;\n  };\n}\n\n/** Validadores b√°sicos */\nexport class Validators {\n  /** Valida se valor √© obrigat√≥rio */\n  static required(message = 'Campo obrigat√≥rio'): ValidationRule {\n    return {\n      name: 'required',\n      message,\n      required: true,\n      validator: (value) => {\n        const isEmpty = value === null || \n                       value === undefined || \n                       value === '' || \n                       (Array.isArray(value) && value.length === 0);\n        \n        return {\n          isValid: !isEmpty,\n          errors: isEmpty ? [new ValidationError(message, 'value', value, 'required')] : [],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida comprimento m√≠nimo */\n  static minLength(min: number, message?: string): ValidationRule {\n    const defaultMessage = `Deve ter pelo menos ${min} caracteres`;\n    \n    return {\n      name: 'minLength',\n      message: message || defaultMessage,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined) {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const length = String(value).length;\n        const isValid = length >= min;\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message || defaultMessage, \n            'value', \n            value, \n            'minLength'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida comprimento m√°ximo */\n  static maxLength(max: number, message?: string): ValidationRule {\n    const defaultMessage = `Deve ter no m√°ximo ${max} caracteres`;\n    \n    return {\n      name: 'maxLength',\n      message: message || defaultMessage,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined) {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const length = String(value).length;\n        const isValid = length <= max;\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message || defaultMessage, \n            'value', \n            value, \n            'maxLength'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida padr√£o regex */\n  static pattern(regex: RegExp, message?: string): ValidationRule {\n    const defaultMessage = 'Formato inv√°lido';\n    \n    return {\n      name: 'pattern',\n      message: message || defaultMessage,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined || value === '') {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const isValid = regex.test(String(value));\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message || defaultMessage, \n            'value', \n            value, \n            'pattern'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida email */\n  static email(message = 'Email inv√°lido'): ValidationRule {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return this.pattern(emailRegex, message);\n  }\n\n  /** Valida n√∫mero */\n  static number(message = 'Deve ser um n√∫mero'): ValidationRule {\n    return {\n      name: 'number',\n      message,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined || value === '') {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const isValid = !isNaN(Number(value));\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message, \n            'value', \n            value, \n            'number'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida valor m√≠nimo */\n  static min(minValue: number, message?: string): ValidationRule {\n    const defaultMessage = `Deve ser maior ou igual a ${minValue}`;\n    \n    return {\n      name: 'min',\n      message: message || defaultMessage,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined || value === '') {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const numValue = Number(value);\n        const isValid = !isNaN(numValue) && numValue >= minValue;\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message || defaultMessage, \n            'value', \n            value, \n            'min'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida valor m√°ximo */\n  static max(maxValue: number, message?: string): ValidationRule {\n    const defaultMessage = `Deve ser menor ou igual a ${maxValue}`;\n    \n    return {\n      name: 'max',\n      message: message || defaultMessage,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined || value === '') {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const numValue = Number(value);\n        const isValid = !isNaN(numValue) && numValue <= maxValue;\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message || defaultMessage, \n            'value', \n            value, \n            'max'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida se valor est√° em lista */\n  static oneOf(values: unknown[], message?: string): ValidationRule {\n    const defaultMessage = `Deve ser um dos valores: ${values.join(', ')}`;\n    \n    return {\n      name: 'oneOf',\n      message: message || defaultMessage,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined) {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const isValid = values.includes(value);\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message || defaultMessage, \n            'value', \n            value, \n            'oneOf'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida data */\n  static date(message = 'Data inv√°lida'): ValidationRule {\n    return {\n      name: 'date',\n      message,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined || value === '') {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        const date = new Date(value as string);\n        const isValid = !isNaN(date.getTime());\n        \n        return {\n          isValid,\n          errors: isValid ? [] : [new ValidationError(\n            message, \n            'value', \n            value, \n            'date'\n          )],\n          warnings: []\n        };\n      }\n    };\n  }\n\n  /** Valida URL */\n  static url(message = 'URL inv√°lida'): ValidationRule {\n    return {\n      name: 'url',\n      message,\n      required: true,\n      validator: (value) => {\n        if (value === null || value === undefined || value === '') {\n          return { isValid: true, errors: [], warnings: [] };\n        }\n        \n        try {\n          new URL(String(value));\n          return { isValid: true, errors: [], warnings: [] };\n        } catch {\n          return {\n            isValid: false,\n            errors: [new ValidationError(\n              message, \n              'value', \n              value, \n              'url'\n            )],\n            warnings: []\n          };\n        }\n      }\n    };\n  }\n\n  /** Valida√ß√£o customizada */\n  static custom(\n    validator: ValidatorFunction,\n    name = 'custom',\n    message = 'Valor inv√°lido'\n  ): ValidationRule {\n    return {\n      name,\n      message,\n      required: true,\n      validator\n    };\n  }\n}\n\n/** Servi√ßo de valida√ß√£o */\nexport class ValidationService {\n  private schemas = new Map<string, ValidationSchema>();\n\n  /** Registra um schema de valida√ß√£o */\n  registerSchema(name: string, schema: ValidationSchema): void {\n    this.schemas.set(name, schema);\n  }\n\n  /** Obt√©m um schema registrado */\n  getSchema(name: string): ValidationSchema | undefined {\n    return this.schemas.get(name);\n  }\n\n  /** Valida um valor usando regras */\n  async validateValue(\n    value: unknown,\n    rules: ValidationRule[],\n    context?: ValidationContext\n  ): Promise<ValidationResult> {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationError[] = [];\n    let transformedValue = value;\n\n    for (const rule of rules) {\n      // Verifica condi√ß√£o se existir\n      if (rule.condition && !rule.condition(context || {})) {\n        continue;\n      }\n\n      try {\n        const result = await rule.validator(transformedValue, context);\n        \n        if (!result.isValid) {\n          if (rule.required) {\n            errors.push(...result.errors);\n          } else {\n            warnings.push(...result.errors);\n          }\n        }\n        \n        warnings.push(...result.warnings);\n        \n        // Aplica transforma√ß√£o se houver\n        if (result.data !== undefined) {\n          transformedValue = result.data;\n        }\n      } catch (error) {\n        const validationError = new ValidationError(\n          `Erro na valida√ß√£o: ${error instanceof Error ? error.message : 'Erro desconhecido'}`,\n          context?.field || 'unknown',\n          value,\n          rule.name\n        );\n        \n        if (rule.required) {\n          errors.push(validationError);\n        } else {\n          warnings.push(validationError);\n        }\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      data: transformedValue\n    };\n  }\n\n  /** Valida um objeto usando schema */\n  async validateObject(\n    data: Record<string, unknown>,\n    schema: ValidationSchema\n  ): Promise<ValidationResult> {\n    const allErrors: ValidationError[] = [];\n    const allWarnings: ValidationError[] = [];\n    const transformedData: Record<string, unknown> = { ...data };\n    const options = schema.options || {};\n\n    // Valida campos individuais\n    for (const [fieldName, rules] of Object.entries(schema.fields)) {\n      const fieldValue = data[fieldName];\n      const context: ValidationContext = {\n        field: fieldName,\n        value: fieldValue,\n        data,\n        options: options\n      };\n\n      const result = await this.validateValue(fieldValue, rules, context);\n      \n      allErrors.push(...result.errors);\n      if (options.includeWarnings) {\n        allWarnings.push(...result.warnings);\n      }\n      \n      // Aplica transforma√ß√£o\n      if (result.data !== undefined) {\n        transformedData[fieldName] = result.data;\n      }\n      \n      // Para na primeira falha se configurado\n      if (options.stopOnFirstError && result.errors.length > 0) {\n        break;\n      }\n    }\n\n    // Aplica transforma√ß√µes globais\n    if (options.transforms) {\n      for (const [fieldName, transform] of Object.entries(options.transforms)) {\n        if (transformedData[fieldName] !== undefined) {\n          try {\n            transformedData[fieldName] = transform(transformedData[fieldName]);\n          } catch (error) {\n            allErrors.push(new ValidationError(\n              `Erro na transforma√ß√£o do campo ${fieldName}: ${error instanceof Error ? error.message : 'Erro desconhecido'}`,\n              fieldName,\n              transformedData[fieldName],\n              'transform'\n            ));\n          }\n        }\n      }\n    }\n\n    // Valida regras globais\n    if (schema.global) {\n      const globalContext: ValidationContext = {\n        data: transformedData,\n        options: options\n      };\n      \n      const globalResult = await this.validateValue(\n        transformedData, \n        schema.global, \n        globalContext\n      );\n      \n      allErrors.push(...globalResult.errors);\n      if (options.includeWarnings) {\n        allWarnings.push(...globalResult.warnings);\n      }\n    }\n\n    return {\n      isValid: allErrors.length === 0,\n      errors: allErrors,\n      warnings: allWarnings,\n      data: transformedData\n    };\n  }\n\n  /** Valida usando schema registrado */\n  async validateWithSchema(\n    data: Record<string, unknown>,\n    schemaName: string\n  ): Promise<ValidationResult> {\n    const schema = this.getSchema(schemaName);\n    if (!schema) {\n      throw new ValidationError(\n        `Schema '${schemaName}' n√£o encontrado`,\n        'schema',\n        schemaName,\n        'notFound'\n      );\n    }\n    \n    return this.validateObject(data, schema);\n  }\n\n  /** Cria um validador para um campo espec√≠fico */\n  createFieldValidator(\n    rules: ValidationRule[]\n  ): (value: unknown, context?: ValidationContext) => Promise<ValidationResult> {\n    return (value, context) => this.validateValue(value, rules, context);\n  }\n\n  /** Lista schemas registrados */\n  listSchemas(): string[] {\n    return Array.from(this.schemas.keys());\n  }\n\n  /** Remove um schema */\n  removeSchema(name: string): boolean {\n    return this.schemas.delete(name);\n  }\n\n  /** Limpa todos os schemas */\n  clearSchemas(): void {\n    this.schemas.clear();\n  }\n}\n\n/** Inst√¢ncia global do servi√ßo de valida√ß√£o */\nexport const validationService = new ValidationService();\n\n/** Schemas comuns */\nexport const commonSchemas = {\n  /** Schema para email */\n  email: {\n    fields: {\n      email: [Validators.required(), Validators.email()]\n    }\n  } as ValidationSchema,\n\n  /** Schema para senha */\n  password: {\n    fields: {\n      password: [\n        Validators.required(),\n        Validators.minLength(8, 'Senha deve ter pelo menos 8 caracteres'),\n        Validators.pattern(\n          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/,\n          'Senha deve conter pelo menos uma letra min√∫scula, uma mai√∫scula e um n√∫mero'\n        )\n      ]\n    }\n  } as ValidationSchema,\n\n  /** Schema para usu√°rio */\n  user: {\n    fields: {\n      name: [Validators.required(), Validators.minLength(2)],\n      email: [Validators.required(), Validators.email()],\n      age: [Validators.number(), Validators.min(0), Validators.max(120)]\n    },\n    options: {\n      includeWarnings: true\n    }\n  } as ValidationSchema\n};\n\n// Registra schemas comuns\nObject.entries(commonSchemas).forEach(([name, schema]) => {\n  validationService.registerSchema(name, schema);\n});\n\n/** Fun√ß√£o utilit√°ria para valida√ß√£o r√°pida */\nexport async function validate(\n  data: Record<string, unknown>,\n  schema: ValidationSchema | string\n): Promise<ValidationResult> {\n  if (typeof schema === 'string') {\n    return validationService.validateWithSchema(data, schema);\n  }\n  return validationService.validateObject(data, schema);\n}\n\n/** Fun√ß√£o utilit√°ria para valida√ß√£o de campo */\nexport async function validateField(\n  value: unknown,\n  rules: ValidationRule[],\n  context?: ValidationContext\n): Promise<ValidationResult> {\n  return validationService.validateValue(value, rules, context);\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/documentAnalysisService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is defined but never used.","line":182,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":45},{"ruleId":"no-unused-vars","severity":2,"message":"'classification' is defined but never used.","line":243,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":243,"endColumn":84},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'classification' is defined but never used.","line":243,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":243,"endColumn":60},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":491,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":491,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16242,16245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16242,16245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DocumentUpload, DocumentAnalysis, DocumentClassification, Problem } from '@/types/document';\nimport supabase from '@/lib/supabase';\nimport mammoth from 'mammoth';\nimport { getRulesForClassification } from '@/data/analysisRules';\nimport { apiClient } from '@/services/core/api';\nimport { globalCache } from '@/services/core/cache';\nimport { loggingService } from '@/services/core/logging';\nimport { ParametersService } from '@/services/parametersService';\n\n// Interfaces para integra√ß√£o com Cloud Run\ninterface CloudRunAnalysisRequest {\n  document_content: string;\n  document_type: string;\n  classification: DocumentClassification;\n  parameters?: AnalysisParameters;\n  options?: AnalysisOptions;\n}\n\ninterface CloudRunAnalysisResponse {\n  analysis_id: string;\n  status: 'processing' | 'completed' | 'failed';\n  results?: {\n    conformity_score: number;\n    problems: Problem[];\n    recommendations: string[];\n    metrics: AnalysisMetrics;\n    categories: CategoryResults;\n  };\n  error?: string;\n  processing_time?: number;\n}\n\ninterface AnalysisParameters {\n  weights: {\n    structural: number;\n    legal: number;\n    clarity: number;\n    abnt: number;\n  };\n  thresholds: {\n    critical: number;\n    high: number;\n    medium: number;\n    low: number;\n  };\n  features: {\n    deep_analysis: boolean;\n    ai_suggestions: boolean;\n    compliance_check: boolean;\n    risk_assessment: boolean;\n  };\n}\n\ninterface AnalysisOptions {\n  priority: 'low' | 'normal' | 'high' | 'urgent';\n  include_suggestions: boolean;\n  detailed_metrics: boolean;\n  cache_results: boolean;\n  webhook_url?: string;\n}\n\ninterface CategoryResults {\n  structural: CategoryAnalysis;\n  legal: CategoryAnalysis;\n  clarity: CategoryAnalysis;\n  abnt: CategoryAnalysis;\n}\n\ninterface CategoryAnalysis {\n  score: number;\n  problems: Problem[];\n  recommendations: string[];\n  compliance_level: 'excellent' | 'good' | 'fair' | 'poor';\n}\n\ninterface AnalysisMetrics {\n  totalClauses: number;\n  validClauses: number;\n  missingClauses: number;\n  inconsistencies: number;\n  processingTime: number;\n  confidence_score?: number;\n  risk_level?: 'low' | 'medium' | 'high' | 'critical';\n}\n\ninterface AnalysisProgress {\n  stage: 'uploading' | 'extracting' | 'analyzing' | 'validating' | 'completing';\n  progress: number;\n  message: string;\n  estimated_time?: number;\n}\n\ninterface TextExtractionResult {\n  text: string;\n  pages?: number;\n  metadata?: {\n    file_size: number;\n    extraction_method: string;\n    confidence: number;\n  };\n}\n\nexport class DocumentAnalysisService {\n  private static readonly CLOUD_RUN_BASE_URL = import.meta.env.VITE_DOCUMENT_ANALYZER_URL || 'http://localhost:8080';\n  private static readonly CACHE_TTL = 3600; // 1 hora\n  private static readonly MAX_RETRIES = 3;\n  private static parametersService = new ParametersService();\n\n  // M√©todo principal para an√°lise com Cloud Run\n  static async analyzeDocumentWithCloudRun(\n    document: DocumentUpload, \n    extractedText: string,\n    options: Partial<AnalysisOptions> = {}\n  ): Promise<DocumentAnalysis> {\n    const startTime = Date.now();\n    const cacheKey = `analysis_${document.id}_${this.hashContent(extractedText)}`;\n\n    try {\n      // Verificar cache primeiro\n      if (options.cache_results !== false) {\n        const cachedResult = await globalCache.get<DocumentAnalysis>(cacheKey);\n        if (cachedResult) {\n          loggingService.info('An√°lise recuperada do cache', { documentId: document.id });\n          return cachedResult;\n        }\n      }\n\n      // Obter par√¢metros de an√°lise\n      const parameters = await this.getAnalysisParameters(document.classification);\n      \n      // Preparar requisi√ß√£o para Cloud Run\n      const request: CloudRunAnalysisRequest = {\n        document_content: extractedText,\n        document_type: document.classification.tipoDocumento,\n        classification: document.classification,\n        parameters,\n        options: {\n          priority: 'high',\n          include_suggestions: true,\n          detailed_metrics: true,\n          cache_results: true,\n          ...options\n        }\n      };\n\n      // Enviar para Cloud Run\n      const response = await this.sendToCloudRun(request);\n      \n      // Processar resposta\n      const analysis = await this.processCloudRunResponse(response, document, extractedText);\n      \n      // Salvar no cache e banco\n      if (options.cache_results !== false) {\n        await globalCache.set(cacheKey, analysis, this.CACHE_TTL);\n      }\n      await this.saveAnalysis(analysis);\n\n      const processingTime = (Date.now() - startTime) / 1000;\n      loggingService.info('An√°lise conclu√≠da com sucesso', {\n        documentId: document.id,\n        processingTime,\n        score: analysis.scoreConformidade\n      });\n\n      return analysis;\n    } catch (error) {\n      const processingTime = (Date.now() - startTime) / 1000;\n      loggingService.error('Erro na an√°lise do documento', error, {\n        documentId: document.id,\n        processingTime\n      });\n      \n      // Fallback para an√°lise local\n      return this.analyzeDocumentLocally(document, extractedText);\n    }\n  }\n\n  // M√©todo para an√°lise em tempo real (streaming)\n  static async analyzeDocumentRealTime(\n    document: DocumentUpload,\n    extractedText: string,\n    onProgress?: (progress: AnalysisProgress) => void\n  ): Promise<DocumentAnalysis> {\n    const analysisId = `realtime_${Date.now()}`;\n    \n    try {\n      // Simular progresso em tempo real\n      const stages: AnalysisProgress[] = [\n        { stage: 'uploading', progress: 10, message: 'Enviando documento para an√°lise...' },\n        { stage: 'extracting', progress: 30, message: 'Extraindo e processando conte√∫do...' },\n        { stage: 'analyzing', progress: 60, message: 'Analisando conformidade e regras...' },\n        { stage: 'validating', progress: 85, message: 'Validando resultados...' },\n        { stage: 'completing', progress: 100, message: 'An√°lise conclu√≠da!' }\n      ];\n\n      for (const stage of stages) {\n        onProgress?.(stage);\n        await new Promise(resolve => setTimeout(resolve, 500)); // Simular processamento\n      }\n\n      return this.analyzeDocumentWithCloudRun(document, extractedText, { priority: 'urgent' });\n    } catch (error) {\n      loggingService.error('Erro na an√°lise em tempo real', error, { analysisId });\n      throw error;\n    }\n  }\n\n  // M√©todo para obter status de an√°lise\n  static async getAnalysisStatus(analysisId: string): Promise<CloudRunAnalysisResponse | null> {\n    try {\n      const response = await apiClient.get(`${this.CLOUD_RUN_BASE_URL}/analysis/${analysisId}/status`);\n      return response.data as CloudRunAnalysisResponse;\n    } catch (error) {\n      loggingService.error('Erro ao obter status da an√°lise', error, { analysisId });\n      return null;\n    }\n  }\n\n  // M√©todo para cancelar an√°lise\n  static async cancelAnalysis(analysisId: string): Promise<boolean> {\n    try {\n      await apiClient.delete(`${this.CLOUD_RUN_BASE_URL}/analysis/${analysisId}`);\n      loggingService.info('An√°lise cancelada', { analysisId });\n      return true;\n    } catch (error) {\n      loggingService.error('Erro ao cancelar an√°lise', error, { analysisId });\n      return false;\n    }\n  }\n\n  // M√©todos auxiliares privados\n  private static hashContent(content: string): string {\n    // Simples hash para cache key\n    let hash = 0;\n    for (let i = 0; i < content.length; i++) {\n      const char = content.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return Math.abs(hash).toString(36);\n  }\n\n  private static async getAnalysisParameters(classification: DocumentClassification): Promise<AnalysisParameters> {\n    try {\n      const params = await this.parametersService.getDefaultParameters();\n      return {\n        weights: params.weights,\n        thresholds: {\n          critical: params.thresholds.categories.structural,\n          high: params.thresholds.categories.legal,\n          medium: params.thresholds.categories.clarity,\n          low: params.thresholds.categories.abnt\n        },\n        features: {\n          deep_analysis: params.features.complexityAnalysis,\n          ai_suggestions: params.features.autoSuggestions,\n          compliance_check: params.features.inconsistencyDetection,\n          risk_assessment: params.features.sentimentAnalysis\n        }\n      };\n    } catch (error) {\n      loggingService.error('Erro ao obter par√¢metros de an√°lise', error);\n      // Retornar par√¢metros padr√£o\n      return {\n        weights: { structural: 0.25, legal: 0.35, clarity: 0.25, abnt: 0.15 },\n        thresholds: { critical: 90, high: 70, medium: 50, low: 30 },\n        features: { deep_analysis: true, ai_suggestions: true, compliance_check: true, risk_assessment: true }\n      };\n    }\n  }\n\n  private static async sendToCloudRun(request: CloudRunAnalysisRequest): Promise<CloudRunAnalysisResponse> {\n    let lastError: Error | null = null;\n    \n    for (let attempt = 1; attempt <= this.MAX_RETRIES; attempt++) {\n      try {\n        const response = await apiClient.post(`${this.CLOUD_RUN_BASE_URL}/analyze`, request, {\n           timeout: 30000, // 30 segundos\n           headers: {\n             'Content-Type': 'application/json',\n             'X-Analysis-Priority': request.options?.priority || 'normal'\n           }\n         });\n         \n         return response.data as CloudRunAnalysisResponse;\n      } catch (error) {\n        lastError = error as Error;\n        loggingService.warn(`Tentativa ${attempt} falhou`, { error: lastError.message, attempt });\n        \n        if (attempt < this.MAX_RETRIES) {\n          await new Promise(resolve => setTimeout(resolve, 1000 * attempt)); // Backoff exponencial\n        }\n      }\n    }\n    \n    throw lastError || new Error('Falha na comunica√ß√£o com Cloud Run ap√≥s m√∫ltiplas tentativas');\n  }\n\n  private static async processCloudRunResponse(\n    response: CloudRunAnalysisResponse,\n    document: DocumentUpload,\n    extractedText: string\n  ): Promise<DocumentAnalysis> {\n    if (response.status === 'failed') {\n      throw new Error(response.error || 'An√°lise falhou no Cloud Run');\n    }\n\n    if (response.status === 'processing') {\n      // Aguardar conclus√£o\n      return this.waitForAnalysisCompletion(response.analysis_id, document, extractedText);\n    }\n\n    if (!response.results) {\n      throw new Error('Resposta inv√°lida do Cloud Run');\n    }\n\n    const analysis: DocumentAnalysis = {\n      id: response.analysis_id,\n      documentoId: document.id,\n      classification: document.classification,\n      textoExtraido: extractedText,\n      scoreConformidade: response.results.conformity_score,\n      problemasEncontrados: response.results.problems,\n      recomendacoes: response.results.recommendations,\n      metricas: response.results.metrics,\n      specificAnalysis: {\n        customMetrics: {\n          categories_data: JSON.stringify(response.results.categories),\n          processing_time: response.processing_time || 0,\n          cloud_run_analysis: true\n        }\n      },\n      createdAt: new Date()\n    };\n\n    return analysis;\n  }\n\n  private static async waitForAnalysisCompletion(\n    analysisId: string,\n    document: DocumentUpload,\n    extractedText: string\n  ): Promise<DocumentAnalysis> {\n    const maxWaitTime = 60000; // 1 minuto\n    const pollInterval = 2000; // 2 segundos\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < maxWaitTime) {\n      const status = await this.getAnalysisStatus(analysisId);\n      \n      if (status?.status === 'completed') {\n        return this.processCloudRunResponse(status, document, extractedText);\n      }\n      \n      if (status?.status === 'failed') {\n        throw new Error(status.error || 'An√°lise falhou');\n      }\n\n      await new Promise(resolve => setTimeout(resolve, pollInterval));\n    }\n\n    throw new Error('Timeout na an√°lise do documento');\n  }\n\n  private static async analyzeDocumentLocally(\n    document: DocumentUpload,\n    extractedText: string\n  ): Promise<DocumentAnalysis> {\n    loggingService.info('Executando an√°lise local como fallback', { documentId: document.id });\n    return this.analyzeDocument(document, extractedText);\n  }\n\n  // M√©todos adicionais para funcionalidades avan√ßadas\n  \n  // An√°lise em lote de m√∫ltiplos documentos\n  static async analyzeBatch(\n    documents: Array<{ document: DocumentUpload; extractedText: string }>,\n    options: Partial<AnalysisOptions> = {}\n  ): Promise<DocumentAnalysis[]> {\n    const results: DocumentAnalysis[] = [];\n    const batchSize = 5; // Processar 5 documentos por vez\n    \n    loggingService.info('Iniciando an√°lise em lote', { \n      totalDocuments: documents.length,\n      batchSize \n    });\n\n    for (let i = 0; i < documents.length; i += batchSize) {\n      const batch = documents.slice(i, i + batchSize);\n      \n      const batchPromises = batch.map(async ({ document, extractedText }) => {\n        try {\n          return await this.analyzeDocumentWithCloudRun(document, extractedText, {\n            ...options,\n            priority: 'normal' // Prioridade normal para lotes\n          });\n        } catch (error) {\n          loggingService.error('Erro na an√°lise de documento do lote', error, {\n            documentId: document.id\n          });\n          // Retornar an√°lise local como fallback\n          return this.analyzeDocumentLocally(document, extractedText);\n        }\n      });\n\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n      \n      // Pequena pausa entre lotes para n√£o sobrecarregar o sistema\n      if (i + batchSize < documents.length) {\n        await new Promise(resolve => setTimeout(resolve, 1000));\n      }\n    }\n\n    loggingService.info('An√°lise em lote conclu√≠da', {\n      totalProcessed: results.length,\n      successRate: (results.length / documents.length) * 100\n    });\n\n    return results;\n  }\n\n  // Obter estat√≠sticas de an√°lises\n  static async getAnalysisStatistics(timeRange?: { start: Date; end: Date }): Promise<{\n    totalAnalyses: number;\n    averageScore: number;\n    scoreDistribution: Record<string, number>;\n    commonProblems: Array<{ type: string; count: number }>;\n    processingTimes: { average: number; min: number; max: number };\n  }> {\n    try {\n       const cacheKey = `analysis_stats_${timeRange ? `${timeRange.start.getTime()}_${timeRange.end.getTime()}` : 'all'}`;\n       const cached = await globalCache.get<{\n         totalAnalyses: number;\n         averageScore: number;\n         scoreDistribution: Record<string, number>;\n         commonProblems: Array<{ type: string; count: number }>;\n         processingTimes: { average: number; min: number; max: number };\n       }>(cacheKey);\n       \n       if (cached) {\n         return cached;\n       }\n\n      // Buscar dados do Supabase\n      let query = supabase\n        .from('document_analyses')\n        .select('conformity_score, problems, metrics, created_at');\n\n      if (timeRange) {\n        query = query\n          .gte('created_at', timeRange.start.toISOString())\n          .lte('created_at', timeRange.end.toISOString());\n      }\n\n      const { data, error } = await query;\n      \n      if (error) {\n        throw error;\n      }\n\n      const analyses = data || [];\n      const totalAnalyses = analyses.length;\n      \n      if (totalAnalyses === 0) {\n        return {\n          totalAnalyses: 0,\n          averageScore: 0,\n          scoreDistribution: {},\n          commonProblems: [],\n          processingTimes: { average: 0, min: 0, max: 0 }\n        };\n      }\n\n      // Calcular estat√≠sticas\n      const scores = analyses.map(a => a.conformity_score);\n      const averageScore = scores.reduce((sum, score) => sum + score, 0) / scores.length;\n      \n      // Distribui√ß√£o de scores\n      const scoreDistribution = {\n        'Excelente (90-100)': scores.filter(s => s >= 90).length,\n        'Bom (70-89)': scores.filter(s => s >= 70 && s < 90).length,\n        'Regular (50-69)': scores.filter(s => s >= 50 && s < 70).length,\n        'Ruim (0-49)': scores.filter(s => s < 50).length\n      };\n\n      // Problemas mais comuns\n      const problemCounts: Record<string, number> = {};\n      analyses.forEach(analysis => {\n        if (analysis.problems) {\n          analysis.problems.forEach((problem: any) => {\n            problemCounts[problem.tipo] = (problemCounts[problem.tipo] || 0) + 1;\n          });\n        }\n      });\n\n      const commonProblems = Object.entries(problemCounts)\n        .map(([type, count]) => ({ type, count }))\n        .sort((a, b) => b.count - a.count)\n        .slice(0, 10);\n\n      // Tempos de processamento\n      const processingTimes = analyses\n        .map(a => a.metrics?.processingTime)\n        .filter(time => time !== undefined && time !== null);\n      \n      const avgProcessingTime = processingTimes.length > 0 \n        ? processingTimes.reduce((sum, time) => sum + time, 0) / processingTimes.length\n        : 0;\n\n      const stats = {\n        totalAnalyses,\n        averageScore: Math.round(averageScore * 100) / 100,\n        scoreDistribution,\n        commonProblems,\n        processingTimes: {\n          average: Math.round(avgProcessingTime * 100) / 100,\n          min: processingTimes.length > 0 ? Math.min(...processingTimes) : 0,\n          max: processingTimes.length > 0 ? Math.max(...processingTimes) : 0\n        }\n      };\n\n      // Cache por 1 hora\n      await globalCache.set(cacheKey, stats, 3600);\n      \n      return stats;\n    } catch (error) {\n      loggingService.error('Erro ao obter estat√≠sticas de an√°lise', error);\n      throw error;\n    }\n  }\n\n  // Reprocessar an√°lise com novos par√¢metros\n  static async reanalyzeDocument(\n    documentId: string,\n    newParameters?: Partial<AnalysisParameters>\n  ): Promise<DocumentAnalysis> {\n    try {\n      // Buscar documento original\n      const { data: documentData, error: docError } = await supabase\n        .from('documents')\n        .select('*')\n        .eq('id', documentId)\n        .single();\n\n      if (docError || !documentData) {\n        throw new Error('Documento n√£o encontrado');\n      }\n\n      // Buscar an√°lise anterior para obter texto extra√≠do\n      const previousAnalysis = await this.getAnalysisById(documentId);\n      if (!previousAnalysis) {\n        throw new Error('An√°lise anterior n√£o encontrada');\n      }\n\n      const document: DocumentUpload = {\n        id: documentData.id,\n        prefeituraId: documentData.prefeitura_id,\n        nome: documentData.nome,\n        tipo: documentData.tipo,\n        classification: documentData.classification,\n        tamanho: documentData.tamanho,\n        urlStorage: documentData.url_storage,\n        status: documentData.status,\n        specificFields: documentData.specific_fields,\n        descricao: documentData.descricao,\n        createdAt: new Date(documentData.created_at),\n        updatedAt: new Date(documentData.updated_at)\n      };\n\n      // Aplicar novos par√¢metros se fornecidos\n      if (newParameters) {\n        // Temporariamente substituir par√¢metros do servi√ßo\n        const originalGetParams = this.getAnalysisParameters;\n        this.getAnalysisParameters = async () => ({\n          weights: newParameters.weights || { structural: 0.25, legal: 0.35, clarity: 0.25, abnt: 0.15 },\n          thresholds: newParameters.thresholds || { critical: 90, high: 70, medium: 50, low: 30 },\n          features: newParameters.features || { deep_analysis: true, ai_suggestions: true, compliance_check: true, risk_assessment: true }\n        });\n\n        try {\n          const newAnalysis = await this.analyzeDocumentWithCloudRun(\n            document,\n            previousAnalysis.textoExtraido,\n            { cache_results: false } // N√£o usar cache para reprocessamento\n          );\n          \n          // Restaurar m√©todo original\n          this.getAnalysisParameters = originalGetParams;\n          \n          return newAnalysis;\n        } catch (error) {\n          // Restaurar m√©todo original em caso de erro\n          this.getAnalysisParameters = originalGetParams;\n          throw error;\n        }\n      }\n\n      // Reprocessar com par√¢metros padr√£o\n      return this.analyzeDocumentWithCloudRun(\n        document,\n        previousAnalysis.textoExtraido,\n        { cache_results: false }\n      );\n    } catch (error) {\n      loggingService.error('Erro ao reprocessar documento', error, { documentId });\n      throw error;\n    }\n  }\n\n  // Limpar cache de an√°lises\n  static async clearAnalysisCache(pattern?: string): Promise<void> {\n    try {\n      if (pattern) {\n        // Limpar cache espec√≠fico\n        await globalCache.delete(`analysis_${pattern}`);\n      } else {\n        // Limpar todo cache de an√°lises (implementa√ß√£o dependente do cache)\n        loggingService.info('Limpando cache completo de an√°lises');\n        // Nota: implementa√ß√£o espec√≠fica dependeria do tipo de cache usado\n      }\n    } catch (error) {\n      loggingService.error('Erro ao limpar cache de an√°lises', error);\n      throw error;\n    }\n  }\n\n  static async extractTextFromFile(file: File): Promise<TextExtractionResult> {\n    const fileType = file.type || '';\n    const fileName = file.name ? String(file.name).toLowerCase() : '';\n    \n    if (fileType === 'application/pdf' || fileName.endsWith('.pdf')) {\n      return await this.extractTextFromPDF(file);\n    } else if (\n      fileType === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ||\n      fileName.endsWith('.docx')\n    ) {\n      return await this.extractTextFromWord(file);\n    } else {\n      throw new Error('Formato n√£o suportado. Envie PDF ou DOCX (.docx).');\n    }\n  }\n\n  private static async extractTextFromPDF(file: File): Promise<TextExtractionResult> {\n    try {\n      // For now, simulate PDF text extraction\n      // In production, you would use a proper PDF parser\n      const text = `Texto extra√≠do do PDF: ${file.name}\n      \n      Este √© um documento de exemplo para demonstrar a extra√ß√£o de texto.\n      O documento cont√©m informa√ß√µes sobre licita√ß√£o e processos de compra.\n      \n      Cl√°usulas importantes:\n      - Prazo para entrega: 30 dias\n      - Modalidade: Preg√£o Eletr√¥nico\n      - Crit√©rio de julgamento: Menor pre√ßo\n      - Valor estimado: R$ 100.000,00\n      \n      Condi√ß√µes de participa√ß√£o:\n      - Empresas regularmente constitu√≠das\n      - Certificado de regularidade fiscal\n      - Atestado de capacidade t√©cnica`;\n      \n      return { text, pages: 5 };\n    } catch (error) {\n      console.error('Erro na extra√ß√£o de texto do PDF:', error);\n      throw new Error('Falha ao extrair texto do PDF');\n    }\n  }\n\n  private static async extractTextFromWord(file: File): Promise<TextExtractionResult> {\n    try {\n      const arrayBuffer = await file.arrayBuffer();\n      const result = await mammoth.extractRawText({ arrayBuffer });\n      return { text: result.value };\n    } catch (error: unknown) {\n      console.error('Erro na extra√ß√£o de texto do Word:', error);\n      const message = error instanceof Error ? error.message : '';\n      if (message.includes('central directory') || message.includes('zip file')) {\n        throw new Error('Arquivo .docx inv√°lido ou corrompido. Certifique-se de enviar um .docx v√°lido (n√£o .doc).');\n      }\n      throw new Error('Falha ao extrair texto do documento Word');\n    }\n  }\n\n  static async analyzeDocument(document: DocumentUpload, extractedText: string): Promise<DocumentAnalysis> {\n    const classification = document.classification;\n    \n    // Analyze based on document classification\n    const problems = await this.analyzeConformity(extractedText, classification);\n    const score = this.calculateConformityScore(problems);\n    const recommendations = this.generateRecommendations(problems, classification);\n\n    const analysis: DocumentAnalysis = {\n      id: `analysis_${Date.now()}`,\n      documentoId: document.id,\n      classification: document.classification,\n      textoExtraido: extractedText,\n      scoreConformidade: score,\n      problemasEncontrados: problems,\n      recomendacoes: recommendations,\n      metricas: {\n        totalClauses: this.countClauses(extractedText),\n        validClauses: this.countValidClauses(extractedText, problems),\n        missingClauses: problems.filter(p => p.tipo === 'clausula_faltante').length,\n        inconsistencies: problems.filter(p => p.tipo === 'inconsistencia').length,\n        processingTime: 2.5\n      },\n      specificAnalysis: {},\n      createdAt: new Date()\n    };\n\n    // Save analysis to Supabase\n    await this.saveAnalysis(analysis);\n    \n    return analysis;\n  }\n\nprivate static async analyzeConformity(text: string, classification: DocumentClassification): Promise<Problem[]> {\n  const textLower = text.toLowerCase();\n\n  // 1) Executa regras centralizadas\n  let problems: Problem[] = await this.evaluateRules(textLower, classification);\n\n  // 2) Regras espec√≠ficas existentes (mantidas como hooks adicionais)\n  if (classification.tipoDocumento === 'edital') {\n    await this.validateEdital(textLower, problems, classification);\n  } else if (classification.tipoDocumento === 'tr') {\n    await this.validateTermoReferencia(textLower, problems, classification);\n  }\n\n  if (classification.modalidadePrincipal === 'processo_licitatorio') {\n    await this.validateProcessoLicitatorio(textLower, problems, classification);\n  }\n\n  // 3) Deduplica√ß√£o b√°sica por (tipo|descri√ß√£o)\n  const seen = new Set<string>();\n  problems = problems.filter((p) => {\n    const key = `${p.tipo}|${p.descricao}`;\n    if (seen.has(key)) return false;\n    seen.add(key);\n    return true;\n  });\n\n  return problems;\n}\n\n  private static async validateEdital(text: string, problems: Problem[], classification: DocumentClassification): Promise<void> {\n    if (!text.includes('objeto') && !text.includes('finalidade')) {\n      problems.push({\n        tipo: 'clausula_faltante',\n        descricao: 'Objeto da licita√ß√£o n√£o est√° claramente definido',\n        gravidade: 'critica',\n        localizacao: 'Cl√°usula de objeto',\n        sugestaoCorrecao: 'Definir claramente o objeto da licita√ß√£o conforme art. 40, I da Lei 8.666/93',\n        classification,\n        categoria: 'juridico'\n      });\n    }\n\n    if (!text.includes('crit√©rio') && !text.includes('julgamento')) {\n      problems.push({\n        tipo: 'criterio_irregular',\n        descricao: 'Crit√©rio de julgamento n√£o especificado',\n        gravidade: 'alta',\n        localizacao: 'Cl√°usula de julgamento',\n        sugestaoCorrecao: 'Especificar o crit√©rio de julgamento (menor pre√ßo, melhor t√©cnica, etc.)',\n        classification,\n        categoria: 'juridico'\n      });\n    }\n  }\n\n  private static async validateTermoReferencia(text: string, problems: Problem[], classification: DocumentClassification): Promise<void> {\n    if (!text.includes('especifica√ß√£o') && !text.includes('detalhamento')) {\n      problems.push({\n        tipo: 'especificacao_incompleta',\n        descricao: 'Especifica√ß√µes t√©cnicas insuficientes ou ausentes',\n        gravidade: 'alta',\n        localizacao: 'Especifica√ß√µes t√©cnicas',\n        sugestaoCorrecao: 'Detalhar especifica√ß√µes t√©cnicas conforme necessidades da Administra√ß√£o',\n        classification,\n        categoria: 'tecnico'\n      });\n    }\n  }\n\n  private static async validateProcessoLicitatorio(text: string, problems: Problem[], classification: DocumentClassification): Promise<void> {\n    if (!text.includes('sistema') && !text.includes('eletr√¥nico')) {\n      problems.push({\n        tipo: 'modalidade_incorreta',\n        descricao: 'Documento n√£o menciona utiliza√ß√£o de sistema eletr√¥nico',\n        gravidade: 'media',\n        localizacao: 'Disposi√ß√µes gerais',\n        sugestaoCorrecao: 'Especificar o sistema eletr√¥nico a ser utilizado para o preg√£o',\n        classification,\n        categoria: 'formal'\n      });\n    }\n  }\n\n  private static async evaluateRules(textLower: string, classification: DocumentClassification): Promise<Problem[]> {\n    const rules = getRulesForClassification(classification);\n    const problems: Problem[] = [];\n\n    for (const rule of rules) {\n      let failed = false;\n\n      if (rule.type === 'keyword_presence') {\n        const list = rule.keywordsAll ?? [];\n        if (list.length > 0) {\n          failed = list.some((kw) => !textLower.includes(kw.toLowerCase()));\n        }\n      } else if (rule.type === 'keyword_any') {\n        const list = rule.keywordsAny ?? [];\n        if (list.length > 0) {\n          failed = !list.some((kw) => textLower.includes(kw.toLowerCase()));\n        }\n      } else if (rule.type === 'pattern') {\n        if (rule.pattern) {\n          try {\n            const regex = new RegExp(rule.pattern, 'i');\n            failed = !regex.test(textLower);\n          } catch (e) {\n            // Se regex inv√°lida, ignora a regra\n            failed = false;\n          }\n        }\n      }\n\n      if (failed) {\n        problems.push({\n          tipo: rule.problemType ?? 'inconsistencia',\n          descricao: rule.description,\n          gravidade: rule.severity,\n          localizacao: 'Documento geral',\n          sugestaoCorrecao: rule.suggestion,\n          classification,\n          categoria: rule.category,\n        });\n      }\n    }\n\n    return problems;\n  }\n\n  private static calculateConformityScore(problems: Problem[]): number {\n    let score = 100;\n    \n    problems.forEach(problem => {\n      switch (problem.gravidade) {\n        case 'critica':\n          score -= 25;\n          break;\n        case 'alta':\n          score -= 15;\n          break;\n        case 'media':\n          score -= 10;\n          break;\n        case 'baixa':\n          score -= 5;\n          break;\n      }\n    });\n\n    return Math.max(0, score);\n  }\n\n  private static generateRecommendations(problems: Problem[], classification: DocumentClassification): string[] {\n    const recommendations = new Set<string>();\n    \n    problems.forEach(problem => {\n      if (problem.sugestaoCorrecao) {\n        recommendations.add(problem.sugestaoCorrecao);\n      }\n    });\n\n    // Add general recommendations based on classification\n    if (classification.tipoDocumento === 'edital') {\n      recommendations.add('Revisar conformidade com Lei 8.666/93 e Lei 10.520/02');\n      recommendations.add('Verificar adequa√ß√£o √†s normas do TCU');\n    }\n\n    return Array.from(recommendations);\n  }\n\n  private static countClauses(text: string): number {\n    // Simple clause counting based on patterns\n    const clausePatterns = /cl√°usula|artigo|item|par√°grafo/gi;\n    const matches = text.match(clausePatterns);\n    return matches ? matches.length : 0;\n  }\n\n  private static countValidClauses(text: string, problems: Problem[]): number {\n    const totalClauses = this.countClauses(text);\n    const invalidClauses = problems.filter(p => \n      p.tipo === 'clausula_faltante' || p.tipo === 'especificacao_incompleta'\n    ).length;\n    return Math.max(0, totalClauses - invalidClauses);\n  }\n\n  private static async saveAnalysis(analysis: DocumentAnalysis): Promise<void> {\n    try {\n      const { error } = await supabase\n        .from('document_analyses')\n        .insert([{\n          id: analysis.id,\n          document_id: analysis.documentoId,\n          classification: analysis.classification,\n          extracted_text: analysis.textoExtraido,\n          conformity_score: analysis.scoreConformidade,\n          problems: analysis.problemasEncontrados,\n          recommendations: analysis.recomendacoes,\n          metrics: analysis.metricas,\n          specific_analysis: analysis.specificAnalysis,\n          created_at: analysis.createdAt.toISOString()\n        }]);\n\n      if (error) {\n        console.error('Erro ao salvar an√°lise:', error);\n        // Don't throw error - analysis can still work without persistence\n      }\n    } catch (error) {\n      console.error('Erro ao conectar com Supabase:', error);\n      // Don't throw error - analysis can still work without persistence\n    }\n  }\n\n  static async getAnalysisById(documentId: string): Promise<DocumentAnalysis | null> {\n    try {\n      const { data, error } = await supabase\n        .from('document_analyses')\n        .select('*')\n        .eq('document_id', documentId)\n        .single();\n\n      if (error || !data) {\n        return null;\n      }\n\n      return {\n        id: data.id,\n        documentoId: data.document_id,\n        classification: data.classification,\n        textoExtraido: data.extracted_text,\n        scoreConformidade: data.conformity_score,\n        problemasEncontrados: data.problems,\n        recomendacoes: data.recommendations,\n        metricas: data.metrics,\n        specificAnalysis: data.specific_analysis,\n        createdAt: new Date(data.created_at)\n      };\n    } catch (error) {\n      console.error('Erro ao buscar an√°lise:', error);\n      return null;\n    }\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/documentService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is defined but never used.","line":24,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ref, uploadBytesResumable, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { collection, addDoc, getDocs, doc, updateDoc, getDoc, query, where, orderBy } from 'firebase/firestore';\nimport { storage, db } from '@/lib/firebase';\nimport { DocumentUpload, DocumentAnalysis, DocumentClassification } from '@/types/document';\n\nexport interface UploadProgress {\n  stage: 'uploading' | 'processing' | 'complete' | 'error';\n  percentage: number;\n  message: string;\n  bytesTransferred?: number;\n  totalBytes?: number;\n}\n\nexport class DocumentService {\n  \n  /**\n   * Upload de documento com progresso em tempo real\n   */\n  static async uploadDocument(\n    file: File, \n    prefeituraId: string, \n    classification: DocumentClassification, \n    descricao?: string,\n    onProgress?: (progress: UploadProgress) => void\n  ): Promise<DocumentUpload> {\n    try {\n      const timestamp = Date.now();\n      const fileName = `documents/${prefeituraId}/${timestamp}_${file.name}`;\n      \n      // Criar refer√™ncia no Firebase Storage\n      const storageRef = ref(storage, fileName);\n      \n      // Configurar upload com progresso\n      const uploadTask = uploadBytesResumable(storageRef, file);\n      \n      return new Promise((resolve, reject) => {\n        uploadTask.on('state_changed',\n          (snapshot) => {\n            // Progresso do upload\n            const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            onProgress?.({\n              stage: 'uploading',\n              percentage: Math.round(progress),\n              message: `Enviando arquivo... ${Math.round(progress)}%`,\n              bytesTransferred: snapshot.bytesTransferred,\n              totalBytes: snapshot.totalBytes\n            });\n          },\n          (error) => {\n            console.error('Erro no upload:', error);\n            onProgress?.({\n              stage: 'error',\n              percentage: 0,\n              message: 'Erro no upload do arquivo'\n            });\n            reject(new Error('Falha ao fazer upload do documento'));\n          },\n          async () => {\n            try {\n              // Upload conclu√≠do, obter URL de download\n              const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\n              \n              onProgress?.({\n                stage: 'processing',\n                percentage: 100,\n                message: 'Processando documento...'\n              });\n              \n              // Salvar metadados no Firestore\n              const documentData = {\n                prefeitura_id: prefeituraId,\n                nome: file.name,\n                tipo: file.type.includes('pdf') ? 'PDF' as const : 'DOCX' as const,\n                classification,\n                tamanho: file.size,\n                url_storage: downloadURL,\n                storage_path: fileName,\n                status: 'pendente' as const,\n                descricao: descricao || '',\n                created_at: new Date(),\n                updated_at: new Date()\n              };\n              \n              const docRef = await addDoc(collection(db, 'documents'), documentData);\n              \n              onProgress?.({\n                stage: 'complete',\n                percentage: 100,\n                message: 'Upload conclu√≠do com sucesso!'\n              });\n              \n              resolve({\n                id: docRef.id,\n                prefeituraId: documentData.prefeitura_id,\n                nome: documentData.nome,\n                tipo: documentData.tipo,\n                classification: documentData.classification,\n                tamanho: documentData.tamanho,\n                urlStorage: documentData.url_storage,\n                status: documentData.status,\n                descricao: documentData.descricao,\n                createdAt: documentData.created_at,\n                updatedAt: documentData.updated_at\n              });\n            } catch (error) {\n              console.error('Erro ao salvar metadados:', error);\n              onProgress?.({\n                stage: 'error',\n                percentage: 0,\n                message: 'Erro ao processar documento'\n              });\n              reject(new Error('Falha ao processar documento'));\n            }\n          }\n        );\n      });\n    } catch (error) {\n      console.error('Error uploading document:', error);\n      throw new Error('Falha ao fazer upload do documento');\n    }\n  }\n\n  /**\n   * Buscar documentos por prefeitura\n   */\n  static async getDocumentosByPrefeitura(prefeituraId: string): Promise<DocumentUpload[]> {\n    try {\n      const q = query(\n        collection(db, 'documents'),\n        where('prefeitura_id', '==', prefeituraId),\n        orderBy('created_at', 'desc')\n      );\n      \n      const querySnapshot = await getDocs(q);\n      \n      return querySnapshot.docs.map(doc => {\n        const data = doc.data();\n        return {\n          id: doc.id,\n          prefeituraId: data.prefeitura_id,\n          nome: data.nome,\n          tipo: data.tipo,\n          classification: data.classification,\n          tamanho: data.tamanho,\n          urlStorage: data.url_storage,\n          status: data.status,\n          descricao: data.descricao,\n          createdAt: data.created_at.toDate(),\n          updatedAt: data.updated_at.toDate()\n        };\n      });\n    } catch (error) {\n      console.error('Error fetching documents:', error);\n      throw new Error('Falha ao buscar documentos');\n    }\n  }\n\n  /**\n   * Atualizar status do documento\n   */\n  static async updateDocumentStatus(documentId: string, status: DocumentUpload['status']): Promise<void> {\n    try {\n      const docRef = doc(db, 'documents', documentId);\n      await updateDoc(docRef, { \n        status, \n        updated_at: new Date()\n      });\n    } catch (error) {\n      console.error('Error updating document status:', error);\n      throw new Error('Falha ao atualizar status do documento');\n    }\n  }\n\n  /**\n   * Buscar an√°lise por ID do documento\n   */\n  static async getAnalysisById(documentId: string): Promise<DocumentAnalysis | null> {\n    try {\n      const q = query(\n        collection(db, 'document_analyses'),\n        where('documento_id', '==', documentId)\n      );\n      \n      const querySnapshot = await getDocs(q);\n      \n      if (querySnapshot.empty) {\n        return null;\n      }\n      \n      const data = querySnapshot.docs[0].data();\n      \n      return {\n        id: querySnapshot.docs[0].id,\n        documentoId: data.documento_id,\n        classification: data.classification,\n        textoExtraido: data.extracted_text,\n        scoreConformidade: data.conformity_score,\n        problemasEncontrados: data.problems,\n        recomendacoes: data.recommendations,\n        metricas: data.metrics,\n        specificAnalysis: data.specific_analysis,\n        createdAt: data.created_at.toDate()\n      };\n    } catch (error) {\n      console.error('Error fetching analysis:', error);\n      throw new Error('Falha ao buscar an√°lise');\n    }\n  }\n\n  /**\n   * Deletar documento (arquivo e metadados)\n   */\n  static async deleteDocument(documentId: string): Promise<void> {\n    try {\n      // Buscar documento para obter o caminho do storage\n      const docRef = doc(db, 'documents', documentId);\n      const docSnap = await getDoc(docRef);\n      \n      if (!docSnap.exists()) {\n        throw new Error('Documento n√£o encontrado');\n      }\n      \n      const data = docSnap.data();\n      \n      // Deletar arquivo do storage\n      if (data.storage_path) {\n        const fileRef = ref(storage, data.storage_path);\n        await deleteObject(fileRef);\n      }\n      \n      // Deletar metadados do Firestore\n      await updateDoc(docRef, {\n        status: 'deletado',\n        updated_at: new Date()\n      });\n    } catch (error) {\n      console.error('Error deleting document:', error);\n      throw new Error('Falha ao deletar documento');\n    }\n  }\n\n  /**\n   * Obter documento por ID\n   */\n  static async getDocumentById(documentId: string): Promise<DocumentUpload | null> {\n    try {\n      const docRef = doc(db, 'documents', documentId);\n      const docSnap = await getDoc(docRef);\n      \n      if (!docSnap.exists()) {\n        return null;\n      }\n      \n      const data = docSnap.data();\n      \n      return {\n        id: docSnap.id,\n        prefeituraId: data.prefeitura_id,\n        nome: data.nome,\n        tipo: data.tipo,\n        classification: data.classification,\n        tamanho: data.tamanho,\n        urlStorage: data.url_storage,\n        status: data.status,\n        descricao: data.descricao,\n        createdAt: data.created_at.toDate(),\n        updatedAt: data.updated_at.toDate()\n      };\n    } catch (error) {\n      console.error('Error fetching document:', error);\n      throw new Error('Falha ao buscar documento');\n    }\n  }\n\n  /**\n   * Validar arquivo antes do upload\n   */\n  static validateFile(file: File): { valid: boolean; error?: string } {\n    const maxSize = 10 * 1024 * 1024; // 10MB\n    const allowedTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];\n    \n    if (file.size > maxSize) {\n      return { valid: false, error: 'Arquivo muito grande. Tamanho m√°ximo: 10MB' };\n    }\n    \n    if (!allowedTypes.includes(file.type)) {\n      return { valid: false, error: 'Tipo de arquivo n√£o suportado. Use PDF ou DOCX' };\n    }\n    \n    return { valid: true };\n  }\n\n  /**\n   * Obter estat√≠sticas de documentos\n   */\n  static async getDocumentStats(prefeituraId: string): Promise<{\n    total: number;\n    pendentes: number;\n    processando: number;\n    concluidos: number;\n    erros: number;\n  }> {\n    try {\n      const q = query(\n        collection(db, 'documents'),\n        where('prefeitura_id', '==', prefeituraId)\n      );\n      \n      const querySnapshot = await getDocs(q);\n      \n      const stats = {\n        total: 0,\n        pendentes: 0,\n        processando: 0,\n        concluidos: 0,\n        erros: 0\n      };\n      \n      querySnapshot.docs.forEach(doc => {\n        const data = doc.data();\n        stats.total++;\n        \n        switch (data.status) {\n          case 'pendente':\n            stats.pendentes++;\n            break;\n          case 'processando':\n            stats.processando++;\n            break;\n          case 'concluido':\n            stats.concluidos++;\n            break;\n          case 'erro':\n            stats.erros++;\n            break;\n        }\n      });\n      \n      return stats;\n    } catch (error) {\n      console.error('Error fetching document stats:', error);\n      throw new Error('Falha ao buscar estat√≠sticas');\n    }\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/monitoringService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_errorRecord' is defined but never used.","line":74,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_errorRecord' is defined but never used.","line":74,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":53},{"ruleId":"no-unused-vars","severity":2,"message":"'reportRecord' is defined but never used.","line":92,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":78},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reportRecord' is defined but never used.","line":92,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":53}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ErrorRecord, ErrorContext, ConsoleRecord } from '@/types/error';\nimport { createErrorRecord, sanitizeErrorForLogging, createConsoleRecord, shouldReportConsoleMessage } from '@/utils/errorUtils';\nimport { ErrorReportData } from '@/hooks/useErrorReport';\n\nclass MonitoringService {\n  private errorQueue: ErrorRecord[] = [];\n  private consoleQueue: ConsoleRecord[] = [];\n  private readonly maxQueueSize = 50;\n  private readonly isDevelopment = import.meta.env.DEV;\n  private consoleInterceptorInitialized = false;\n  private originalConsole = {\n    warn: console.warn.bind(console),\n    error: console.error.bind(console),\n    log: console.log.bind(console),\n  };\n  private isCapturingConsole = false;\n\n  async reportError(error: Error, context?: ErrorContext): Promise<void> {\n    const errorRecord = createErrorRecord(error, undefined, context);\n    \n    // Log to console in development\n    if (this.isDevelopment) {\n      console.group('üö® Error Report');\n      console.error('Error:', error);\n      console.log('Context:', context);\n      console.log('Record:', errorRecord);\n      console.groupEnd();\n    }\n\n    // Add to queue\n    this.addToQueue(errorRecord);\n\n    // Future: Send to external monitoring service\n    await this.sendToMonitoringService(errorRecord);\n  }\n\n  async submitUserReport(reportData: ErrorReportData): Promise<void> {\n    const { errorId, error, userFeedback } = reportData;\n    \n    // Find the original error record if it exists\n    const originalRecord = this.errorQueue.find(record => record.id === errorId);\n    \n    const reportRecord = {\n      id: `report_${errorId}`,\n      type: 'user_report',\n      errorId,\n      originalError: error ? sanitizeErrorForLogging(error) : null,\n      userFeedback,\n      timestamp: new Date(),\n      url: window.location.href,\n      userAgent: navigator.userAgent,\n    };\n\n    if (this.isDevelopment) {\n      console.group('üìù User Report Submitted');\n      console.log('Report:', reportRecord);\n      console.log('Original Record:', originalRecord);\n      console.groupEnd();\n    }\n\n    // Future: Send user report to backend\n    await this.sendUserReportToBackend(reportRecord);\n  }\n\n  private addToQueue(errorRecord: ErrorRecord): void {\n    this.errorQueue.unshift(errorRecord);\n    \n    // Keep queue size manageable\n    if (this.errorQueue.length > this.maxQueueSize) {\n      this.errorQueue = this.errorQueue.slice(0, this.maxQueueSize);\n    }\n  }\n\n  private async sendToMonitoringService(_errorRecord: ErrorRecord): Promise<void> {\n    // Future implementation for external services like Sentry\n    // For now, we just store locally and log\n    \n    try {\n      // Simulate API call\n      if (!this.isDevelopment) {\n        // await fetch('/api/errors', {\n        //   method: 'POST',\n        //   headers: { 'Content-Type': 'application/json' },\n        //   body: JSON.stringify(sanitizeErrorForLogging(errorRecord.error))\n        // });\n      }\n    } catch (error) {\n      console.error('Failed to send error to monitoring service:', error);\n    }\n  }\n\n  private async sendUserReportToBackend(reportRecord: Record<string, unknown>): Promise<void> {\n    // Future implementation for user report submission\n    try {\n      // Simulate API call\n      if (!this.isDevelopment) {\n        // await fetch('/api/error-reports', {\n        //   method: 'POST',\n        //   headers: { 'Content-Type': 'application/json' },\n        //   body: JSON.stringify(reportRecord)\n        // });\n      }\n    } catch (error) {\n      console.error('Failed to send user report to backend:', error);\n    }\n  }\n\n  // Development helpers\n  getErrorQueue(): ErrorRecord[] {\n    return [...this.errorQueue];\n  }\n\n  clearErrorQueue(): void {\n    this.errorQueue = [];\n  }\n\ninitializeConsoleInterceptor(): void {\n  if (this.consoleInterceptorInitialized) return;\n\n  const oc = this.originalConsole;\n\n  // Intercept console.warn\n  console.warn = (...args: unknown[]) => {\n    oc.warn(...args);\n    if (this.isCapturingConsole) return;\n    this.isCapturingConsole = true;\n    try {\n      this.captureConsoleMessage('warn', args);\n    } finally {\n      this.isCapturingConsole = false;\n    }\n  };\n\n  // Intercept console.error\n  console.error = (...args: unknown[]) => {\n    oc.error(...args);\n    if (this.isCapturingConsole) return;\n    this.isCapturingConsole = true;\n    try {\n      this.captureConsoleMessage('error', args);\n    } finally {\n      this.isCapturingConsole = false;\n    }\n  };\n\n  // Optionally intercept console.log in development\n  if (this.isDevelopment) {\n    console.log = (...args: unknown[]) => {\n      oc.log(...args);\n      if (this.isCapturingConsole) return;\n      this.isCapturingConsole = true;\n      try {\n        this.captureConsoleMessage('log', args);\n      } finally {\n        this.isCapturingConsole = false;\n      }\n    };\n  }\n\n  this.consoleInterceptorInitialized = true;\n}\n\n  private captureConsoleMessage(type: 'warn' | 'error' | 'log', args: unknown[]): void {\n    const message = args.map(arg => \n      typeof arg === 'string' ? arg : JSON.stringify(arg)\n    ).join(' ');\n    \n    const record = createConsoleRecord(type, message, args);\n    \n    // Only process if it should be reported\n    if (shouldReportConsoleMessage(record)) {\n      this.addToConsoleQueue(record);\n      \nif (this.isDevelopment) {\n  console.group(`üìä Console ${type.toUpperCase()} captured`);\n  this.originalConsole.log('Record:', record);\n  console.groupEnd();\n}\n    }\n  }\n\n  private addToConsoleQueue(record: ConsoleRecord): void {\n    this.consoleQueue.unshift(record);\n    \n    if (this.consoleQueue.length > this.maxQueueSize) {\n      this.consoleQueue = this.consoleQueue.slice(0, this.maxQueueSize);\n    }\n  }\n\n  getConsoleStats(): { total: number; byCategory: Record<string, number>; byType: Record<string, number> } {\n    const byCategory: Record<string, number> = {};\n    const byType: Record<string, number> = {};\n    \n    this.consoleQueue.forEach(record => {\n      byCategory[record.category] = (byCategory[record.category] || 0) + 1;\n      byType[record.type] = (byType[record.type] || 0) + 1;\n    });\n\n    return {\n      total: this.consoleQueue.length,\n      byCategory,\n      byType,\n    };\n  }\n\n  getErrorStats(): { total: number; byCategory: Record<string, number> } {\n    const byCategory: Record<string, number> = {};\n    \n    this.errorQueue.forEach(record => {\n      const rawCategory = record.context?.metadata?.category;\n      const category = typeof rawCategory === 'string' ? rawCategory : 'unknown';\n      byCategory[category] = (byCategory[category] || 0) + 1;\n    });\n\n    return {\n      total: this.errorQueue.length,\n      byCategory,\n    };\n  }\n\n  getConsoleQueue(): ConsoleRecord[] {\n    return [...this.consoleQueue];\n  }\n\n  clearConsoleQueue(): void {\n    this.consoleQueue = [];\n  }\n}\n\nexport const monitoringService = new MonitoringService();\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/services/parametersService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'validationService' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validationService' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo de gerenciamento de par√¢metros personaliz√°veis para an√°lise de documentos\n */\n\nimport { apiClient } from './core/api';\nimport { globalCache } from './core/cache';\nimport { loggingService } from './core/logging';\nimport { validationService } from './core/validation';\nimport { errorService } from './core/error';\n\n/** Pesos para cada categoria de an√°lise */\nexport interface AnalysisWeights {\n  /** Peso da an√°lise estrutural (0-1) */\n  structural: number;\n  /** Peso da an√°lise legal (0-1) */\n  legal: number;\n  /** Peso da an√°lise de clareza (0-1) */\n  clarity: number;\n  /** Peso da an√°lise ABNT (0-1) */\n  abnt: number;\n}\n\n/** Configura√ß√µes espec√≠ficas por categoria */\nexport interface CategoryConfig {\n  /** Se a categoria est√° habilitada */\n  enabled: boolean;\n  /** Configura√ß√µes espec√≠ficas da categoria */\n  settings: Record<string, unknown>;\n  /** Regras customizadas para a categoria */\n  customRules: string[];\n}\n\n/** Par√¢metros de an√°lise personaliz√°veis */\nexport interface AnalysisParameters {\n  /** ID √∫nico dos par√¢metros */\n  id?: string;\n  /** Nome dos par√¢metros */\n  name: string;\n  /** Descri√ß√£o dos par√¢metros */\n  description?: string;\n  /** Pesos das categorias */\n  weights: AnalysisWeights;\n  /** Configura√ß√µes por categoria */\n  categories: {\n    structural: CategoryConfig;\n    legal: CategoryConfig;\n    clarity: CategoryConfig;\n    abnt: CategoryConfig;\n  };\n  /** Thresholds de qualidade */\n  thresholds: AnalysisThresholds;\n  /** Feature flags */\n  features: FeatureFlags;\n  /** Metadados */\n  metadata: {\n    createdAt: string;\n    updatedAt: string;\n    version: string;\n    author?: string;\n  };\n}\n\n/** Regra customizada de an√°lise */\nexport interface CustomRule {\n  /** ID √∫nico da regra */\n  id: string;\n  /** Nome da regra */\n  name: string;\n  /** Descri√ß√£o da regra */\n  description: string;\n  /** Categoria da regra */\n  category: 'structural' | 'legal' | 'clarity' | 'abnt';\n  /** Padr√£o regex ou texto a verificar */\n  pattern: string;\n  /** Tipo de padr√£o */\n  patternType: 'regex' | 'text' | 'keyword';\n  /** Peso da regra (0-1) */\n  weight: number;\n  /** Se √© obrigat√≥ria */\n  required: boolean;\n  /** Mensagem de erro/aviso */\n  message: string;\n  /** Se est√° ativa */\n  active: boolean;\n}\n\n/** Thresholds de qualidade */\nexport interface AnalysisThresholds {\n  /** Score m√≠nimo para aprova√ß√£o (0-100) */\n  approval: number;\n  /** Score m√≠nimo para aviso (0-100) */\n  warning: number;\n  /** Score m√≠nimo para cada categoria */\n  categories: {\n    structural: number;\n    legal: number;\n    clarity: number;\n    abnt: number;\n  };\n}\n\n/** Feature flags para funcionalidades */\nexport interface FeatureFlags {\n  /** An√°lise de sentimento */\n  sentimentAnalysis: boolean;\n  /** Detec√ß√£o de inconsist√™ncias */\n  inconsistencyDetection: boolean;\n  /** Sugest√µes autom√°ticas */\n  autoSuggestions: boolean;\n  /** An√°lise de complexidade */\n  complexityAnalysis: boolean;\n  /** Verifica√ß√£o de acessibilidade */\n  accessibilityCheck: boolean;\n}\n\n/** Template de par√¢metros */\nexport interface ParametersTemplate {\n  /** ID √∫nico do template */\n  id: string;\n  /** Nome do template */\n  name: string;\n  /** Descri√ß√£o do template */\n  description: string;\n  /** Par√¢metros do template */\n  parameters: AnalysisParameters;\n  /** Se √© template padr√£o do sistema */\n  isDefault: boolean;\n  /** Se √© p√∫blico */\n  isPublic: boolean;\n  /** Tags para categoriza√ß√£o */\n  tags: string[];\n  /** Metadados */\n  metadata: {\n    createdAt: string;\n    updatedAt: string;\n    version: string;\n    author: string;\n    usage: number;\n  };\n}\n\n/** Configura√ß√£o export√°vel */\nexport interface ExportableConfig {\n  /** Par√¢metros */\n  parameters: AnalysisParameters;\n  /** Templates */\n  templates: ParametersTemplate[];\n  /** Regras customizadas */\n  customRules: CustomRule[];\n  /** Metadados da exporta√ß√£o */\n  exportMetadata: {\n    exportedAt: string;\n    version: string;\n    source: string;\n  };\n}\n\n/**\n * Servi√ßo de gerenciamento de par√¢metros de an√°lise\n */\nexport class ParametersService {\n  private readonly cacheKey = 'analysis_parameters';\n  private readonly cacheTimeout = 5 * 60 * 1000; // 5 minutos\n\n  /**\n   * Obt√©m os par√¢metros padr√£o do sistema\n   */\n  async getDefaultParameters(): Promise<AnalysisParameters> {\n    try {\n      loggingService.info('Obtendo par√¢metros padr√£o');\n\n      // Tenta buscar do cache primeiro\n      const cached = await globalCache.get<AnalysisParameters>(`${this.cacheKey}_default`);\n      if (cached) {\n        loggingService.debug('Par√¢metros padr√£o obtidos do cache');\n        return cached;\n      }\n\n      // Busca da API\n      const response = await apiClient.get<AnalysisParameters>('/parameters/default');\n      \n      // Armazena no cache\n      await globalCache.set(`${this.cacheKey}_default`, response.data, this.cacheTimeout);\n      \n      loggingService.info('Par√¢metros padr√£o obtidos com sucesso');\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao obter par√¢metros padr√£o', err instanceof Error ? err : undefined);\n      \n      const error = errorService.createSystemError(\n        `Falha ao obter par√¢metros padr√£o: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'getDefaultParameters',\n        true,\n        undefined,\n        { originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Salva par√¢metros personalizados\n   */\n  async saveCustomParameters(parameters: Partial<AnalysisParameters>): Promise<AnalysisParameters> {\n    try {\n      loggingService.info('Salvando par√¢metros personalizados', { parametersId: parameters.id });\n\n      // Valida os par√¢metros\n      const validation = await this.validateParameters(parameters);\n      if (!validation.isValid) {\n        throw new Error(`Par√¢metros inv√°lidos: ${validation.errors.map(e => e.message).join(', ')}`);\n      }\n\n      // Salva na API\n      const response = await apiClient.post<AnalysisParameters>('/parameters/custom', parameters);\n      \n      // Limpa cache relacionado\n      await globalCache.delete(`${this.cacheKey}_${response.data.id}`);\n      await globalCache.delete(`${this.cacheKey}_list`);\n      \n      loggingService.info('Par√¢metros personalizados salvos com sucesso', { parametersId: response.data.id });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao salvar par√¢metros personalizados', err instanceof Error ? err : undefined, { parameters });\n      \n      const error = errorService.createSystemError(\n        `Falha ao salvar par√¢metros: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'saveCustomParameters',\n        true,\n        undefined,\n        { parameters, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Lista todos os templates dispon√≠veis\n   */\n  async listTemplates(): Promise<ParametersTemplate[]> {\n    try {\n      loggingService.info('Listando templates de par√¢metros');\n\n      // Tenta buscar do cache primeiro\n      const cached = await globalCache.get<ParametersTemplate[]>(`${this.cacheKey}_templates`);\n      if (cached) {\n        loggingService.debug('Templates obtidos do cache');\n        return cached;\n      }\n\n      // Busca da API\n      const response = await apiClient.get<ParametersTemplate[]>('/parameters/templates');\n      \n      // Armazena no cache\n      await globalCache.set(`${this.cacheKey}_templates`, response.data, this.cacheTimeout);\n      \n      loggingService.info('Templates listados com sucesso', { count: response.data.length });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao listar templates', err instanceof Error ? err : undefined);\n      \n      const error = errorService.createSystemError(\n        `Falha ao listar templates: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'listTemplates',\n        true,\n        undefined,\n        { originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Obt√©m um template espec√≠fico\n   */\n  async getTemplate(templateId: string): Promise<ParametersTemplate> {\n    try {\n      loggingService.info('Obtendo template', { templateId });\n\n      // Tenta buscar do cache primeiro\n      const cached = await globalCache.get<ParametersTemplate>(`${this.cacheKey}_template_${templateId}`);\n      if (cached) {\n        loggingService.debug('Template obtido do cache', { templateId });\n        return cached;\n      }\n\n      // Busca da API\n      const response = await apiClient.get<ParametersTemplate>(`/parameters/templates/${templateId}`);\n      \n      // Armazena no cache\n      await globalCache.set(`${this.cacheKey}_template_${templateId}`, response.data, this.cacheTimeout);\n      \n      loggingService.info('Template obtido com sucesso', { templateId });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao obter template', err instanceof Error ? err : undefined, { templateId });\n      \n      const error = errorService.createSystemError(\n        `Falha ao obter template: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'getTemplate',\n        true,\n        undefined,\n        { templateId, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Salva um novo template\n   */\n  async saveTemplate(template: Omit<ParametersTemplate, 'id' | 'metadata'>): Promise<ParametersTemplate> {\n    try {\n      loggingService.info('Salvando template', { templateName: template.name });\n\n      // Salva na API\n      const response = await apiClient.post<ParametersTemplate>('/parameters/templates', template);\n      \n      // Limpa cache relacionado\n      await globalCache.delete(`${this.cacheKey}_templates`);\n      \n      loggingService.info('Template salvo com sucesso', { templateId: response.data.id });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao salvar template', err instanceof Error ? err : undefined, { template });\n      \n      const error = errorService.createSystemError(\n        `Falha ao salvar template: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'saveTemplate',\n        true,\n        undefined,\n        { template, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Atualiza um template existente\n   */\n  async updateTemplate(templateId: string, updates: Partial<ParametersTemplate>): Promise<ParametersTemplate> {\n    try {\n      loggingService.info('Atualizando template', { templateId });\n\n      // Atualiza na API\n      const response = await apiClient.put<ParametersTemplate>(`/parameters/templates/${templateId}`, updates);\n      \n      // Limpa cache relacionado\n      await globalCache.delete(`${this.cacheKey}_template_${templateId}`);\n      await globalCache.delete(`${this.cacheKey}_templates`);\n      \n      loggingService.info('Template atualizado com sucesso', { templateId });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao atualizar template', err instanceof Error ? err : undefined, { templateId, updates });\n      \n      const error = errorService.createSystemError(\n        `Falha ao atualizar template: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'updateTemplate',\n        true,\n        undefined,\n        { templateId, updates, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Deleta um template\n   */\n  async deleteTemplate(templateId: string): Promise<void> {\n    try {\n      loggingService.info('Deletando template', { templateId });\n\n      // Deleta da API\n      await apiClient.delete(`/parameters/templates/${templateId}`);\n      \n      // Limpa cache relacionado\n      await globalCache.delete(`${this.cacheKey}_template_${templateId}`);\n      await globalCache.delete(`${this.cacheKey}_templates`);\n      \n      loggingService.info('Template deletado com sucesso', { templateId });\n    } catch (err) {\n      loggingService.error('Erro ao deletar template', err instanceof Error ? err : undefined, { templateId });\n      \n      const error = errorService.createSystemError(\n        `Falha ao deletar template: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'deleteTemplate',\n        true,\n        undefined,\n        { templateId, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Valida par√¢metros de an√°lise\n   */\n  async validateParameters(parameters: Partial<AnalysisParameters>): Promise<{ isValid: boolean; errors: Array<{ field: string; message: string }> }> {\n    const errors: Array<{ field: string; message: string }> = [];\n\n    // Valida pesos\n    if (parameters.weights) {\n      const { structural, legal, clarity, abnt } = parameters.weights;\n      const total = structural + legal + clarity + abnt;\n      \n      if (Math.abs(total - 1) > 0.01) {\n        errors.push({ field: 'weights', message: 'A soma dos pesos deve ser igual a 1' });\n      }\n      \n      if ([structural, legal, clarity, abnt].some(w => w < 0 || w > 1)) {\n        errors.push({ field: 'weights', message: 'Todos os pesos devem estar entre 0 e 1' });\n      }\n    }\n\n    // Valida thresholds\n    if (parameters.thresholds) {\n      const { approval, warning } = parameters.thresholds;\n      \n      if (approval < 0 || approval > 100) {\n        errors.push({ field: 'thresholds.approval', message: 'Threshold de aprova√ß√£o deve estar entre 0 e 100' });\n      }\n      \n      if (warning < 0 || warning > 100) {\n        errors.push({ field: 'thresholds.warning', message: 'Threshold de aviso deve estar entre 0 e 100' });\n      }\n      \n      if (warning >= approval) {\n        errors.push({ field: 'thresholds', message: 'Threshold de aviso deve ser menor que o de aprova√ß√£o' });\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n\n  /**\n   * Obt√©m regras customizadas\n   */\n  async getCustomRules(): Promise<CustomRule[]> {\n    try {\n      loggingService.info('Obtendo regras customizadas');\n\n      // Tenta buscar do cache primeiro\n      const cached = await globalCache.get<CustomRule[]>(`${this.cacheKey}_custom_rules`);\n      if (cached) {\n        loggingService.debug('Regras customizadas obtidas do cache');\n        return cached;\n      }\n\n      // Busca da API\n      const response = await apiClient.get<CustomRule[]>('/parameters/custom-rules');\n      \n      // Armazena no cache\n      await globalCache.set(`${this.cacheKey}_custom_rules`, response.data, this.cacheTimeout);\n      \n      loggingService.info('Regras customizadas obtidas com sucesso', { count: response.data.length });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao obter regras customizadas', err instanceof Error ? err : undefined);\n      \n      const error = errorService.createSystemError(\n        `Falha ao obter regras customizadas: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'getCustomRules',\n        true,\n        undefined,\n        { originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Cria uma nova regra customizada\n   */\n  async createCustomRule(rule: Omit<CustomRule, 'id'>): Promise<CustomRule> {\n    try {\n      loggingService.info('Criando regra customizada', { ruleName: rule.name });\n\n      // Cria na API\n      const response = await apiClient.post<CustomRule>('/parameters/custom-rules', rule);\n      \n      // Limpa cache relacionado\n      await globalCache.delete(`${this.cacheKey}_custom_rules`);\n      \n      loggingService.info('Regra customizada criada com sucesso', { ruleId: response.data.id });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao criar regra customizada', err instanceof Error ? err : undefined, { rule });\n      \n      const error = errorService.createSystemError(\n        `Falha ao criar regra customizada: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'createCustomRule',\n        true,\n        undefined,\n        { rule, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Atualiza uma regra customizada\n   */\n  async updateCustomRule(ruleId: string, updates: Partial<CustomRule>): Promise<CustomRule> {\n    try {\n      loggingService.info('Atualizando regra customizada', { ruleId });\n\n      // Atualiza na API\n      const response = await apiClient.put<CustomRule>(`/parameters/custom-rules/${ruleId}`, updates);\n      \n      // Limpa cache relacionado\n      await globalCache.delete(`${this.cacheKey}_custom_rules`);\n      \n      loggingService.info('Regra customizada atualizada com sucesso', { ruleId });\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao atualizar regra customizada', err instanceof Error ? err : undefined, { ruleId, updates });\n      \n      const error = errorService.createSystemError(\n        `Falha ao atualizar regra customizada: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'updateCustomRule',\n        true,\n        undefined,\n        { ruleId, updates, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Deleta uma regra customizada\n   */\n  async deleteCustomRule(ruleId: string): Promise<void> {\n    try {\n      loggingService.info('Deletando regra customizada', { ruleId });\n\n      // Deleta da API\n      await apiClient.delete(`/parameters/custom-rules/${ruleId}`);\n      \n      // Limpa cache relacionado\n      await globalCache.delete(`${this.cacheKey}_custom_rules`);\n      \n      loggingService.info('Regra customizada deletada com sucesso', { ruleId });\n    } catch (err) {\n      loggingService.error('Erro ao deletar regra customizada', err instanceof Error ? err : undefined, { ruleId });\n      \n      const error = errorService.createSystemError(\n        `Falha ao deletar regra customizada: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'deleteCustomRule',\n        true,\n        undefined,\n        { ruleId, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Exporta configura√ß√£o completa\n   */\n  async exportConfiguration(): Promise<ExportableConfig> {\n    try {\n      loggingService.info('Exportando configura√ß√£o');\n\n      // Busca dados da API\n      const response = await apiClient.get<ExportableConfig>('/parameters/export');\n      \n      loggingService.info('Configura√ß√£o exportada com sucesso');\n      return response.data;\n    } catch (err) {\n      loggingService.error('Erro ao exportar configura√ß√£o', err instanceof Error ? err : undefined);\n      \n      const error = errorService.createSystemError(\n        `Falha ao exportar configura√ß√µes: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'exportConfiguration',\n        true,\n        undefined,\n        { originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Importa configura√ß√£o\n   */\n  async importConfiguration(config: ExportableConfig): Promise<void> {\n    try {\n      loggingService.info('Importando configura√ß√£o');\n\n      // Importa na API\n      await apiClient.post('/parameters/import', config);\n      \n      // Limpa todo o cache relacionado\n      await globalCache.delete(`${this.cacheKey}_default`);\n      await globalCache.delete(`${this.cacheKey}_templates`);\n      await globalCache.delete(`${this.cacheKey}_custom_rules`);\n      \n      loggingService.info('Configura√ß√£o importada com sucesso');\n    } catch (err) {\n      loggingService.error('Erro ao importar configura√ß√£o', err instanceof Error ? err : undefined, { config });\n      \n      const error = errorService.createSystemError(\n        `Falha ao importar configura√ß√µes: ${err instanceof Error ? err.message : 'Erro desconhecido'}`,\n        'ParametersService',\n        'importConfiguration',\n        true,\n        undefined,\n        { config, originalError: err }\n      );\n      throw errorService.handle(error);\n    }\n  }\n\n  /**\n   * Obt√©m par√¢metros de fallback em caso de erro\n   */\n  getFallbackParameters(): AnalysisParameters {\n    return {\n      id: 'fallback',\n      name: 'Par√¢metros de Fallback',\n      description: 'Par√¢metros padr√£o utilizados em caso de erro',\n      weights: {\n        structural: 0.3,\n        legal: 0.3,\n        clarity: 0.25,\n        abnt: 0.15\n      },\n      categories: {\n        structural: {\n          enabled: true,\n          settings: {},\n          customRules: []\n        },\n        legal: {\n          enabled: true,\n          settings: {},\n          customRules: []\n        },\n        clarity: {\n          enabled: true,\n          settings: {},\n          customRules: []\n        },\n        abnt: {\n          enabled: true,\n          settings: {},\n          customRules: []\n        }\n      },\n      thresholds: {\n        approval: 70,\n        warning: 50,\n        categories: {\n          structural: 60,\n          legal: 70,\n          clarity: 60,\n          abnt: 50\n        }\n      },\n      features: {\n        sentimentAnalysis: false,\n        inconsistencyDetection: true,\n        autoSuggestions: true,\n        complexityAnalysis: false,\n        accessibilityCheck: false\n      },\n      metadata: {\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        version: '1.0.0',\n        author: 'system'\n      }\n    };\n  }\n}\n\n// Inst√¢ncia singleton do servi√ßo\nexport const parametersService = new ParametersService();\n\n// Exporta√ß√µes de conveni√™ncia\nexport default parametersService;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/translations/pt-br.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/comissao.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2784,2787],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2784,2787],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":122,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2820,2823],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2820,2823],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'comissao' is defined but never used.","line":140,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":140,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'comissaoId' is defined but never used.","line":141,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":141,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'comissao' is defined but never used.","line":142,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":142,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":148,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":148,"endColumn":65},{"ruleId":"no-unused-vars","severity":2,"message":"'membros' is defined but never used.","line":157,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":182,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":47},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":183,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":183,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":183,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":183,"endColumn":59},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":184,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":184,"endColumn":30}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Tipos para o m√≥dulo de Comiss√µes\n\nexport type TipoComissao = 'Permanente' | 'Temporaria';\nexport type StatusComissao = 'Ativa' | 'Inativa' | 'Suspensa' | 'Encerrada';\nexport type PapelMembro = 'Presidente' | 'Vice-Presidente' | 'Secretario' | 'Membro' | 'Suplente';\n\nexport interface ConfiguracoesComissao {\n  requererQuorum?: boolean;\n  quorumMinimo?: number;\n  permitirSubstituicoes?: boolean;\n  notificarMembros?: boolean;\n}\n\nexport interface MembroComissao {\n  servidorId: string;\n  papel: PapelMembro;\n  dataDeIngresso: Date;\n  dataDeSaida?: Date;\n  ativo: boolean;\n  observacoes?: string;\n  // Dados do servidor (populados via join)\n  servidor?: {\n    id: string;\n    nome: string;\n    email: string;\n    cargo: string;\n    avatar?: string;\n  };\n}\n\nexport interface Comissao {\n  id: string;\n  organizationId: string;\n  nomeDaComissao: string;\n  tipo: TipoComissao;\n  status: StatusComissao;\n  dataDeCriacao: Date;\n  dataDeEncerramento?: Date;\n  descricao?: string;\n  objetivo?: string;\n  configuracoes?: ConfiguracoesComissao;\n  membros: MembroComissao[];\n  createdBy: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// Tipos para requisi√ß√µes da API\nexport interface CreateComissaoRequest {\n  nomeDaComissao: string;\n  tipo: TipoComissao;\n  dataDeCriacao: Date;\n  dataDeEncerramento?: Date;\n  descricao?: string;\n  objetivo?: string;\n  configuracoes?: ConfiguracoesComissao;\n}\n\nexport interface UpdateComissaoRequest {\n  nomeDaComissao?: string;\n  tipo?: TipoComissao;\n  status?: StatusComissao;\n  dataDeCriacao?: Date;\n  dataDeEncerramento?: Date;\n  descricao?: string;\n  objetivo?: string;\n  configuracoes?: ConfiguracoesComissao;\n}\n\nexport interface AddMembroRequest {\n  servidorId: string;\n  papel: PapelMembro;\n  observacoes?: string;\n}\n\nexport interface UpdateMembroRequest {\n  papel?: PapelMembro;\n  ativo?: boolean;\n  observacoes?: string;\n}\n\n// Tipos para filtros e pagina√ß√£o\nexport interface ComissaoFilters {\n  search?: string;\n  tipo?: TipoComissao | 'all';\n  status?: StatusComissao | 'all';\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface ComissaoPagination {\n  page: number;\n  limit: number;\n  total: number;\n  totalPages: number;\n  hasNext: boolean;\n  hasPrev: boolean;\n}\n\nexport interface ComissoesResponse {\n  data: Comissao[];\n  pagination: ComissaoPagination;\n}\n\n// Tipos para estat√≠sticas\nexport interface ComissaoStats {\n  totalComissoes: number;\n  comissoesAtivas: number;\n  comissoesPermanentes: number;\n  comissoesTemporarias: number;\n  totalMembros: number;\n  membrosAtivos: number;\n}\n\n// Tipos para hist√≥rico\nexport interface HistoricoComissao {\n  id: string;\n  comissaoId: string;\n  acao: 'criacao' | 'edicao' | 'adicao_membro' | 'remocao_membro' | 'alteracao_status';\n  descricao: string;\n  dadosAnteriores?: Record<string, any>;\n  dadosNovos?: Record<string, any>;\n  realizadoPor: string;\n  realizadoEm: Date;\n}\n\n// Tipos para servidores dispon√≠veis\nexport interface ServidorDisponivel {\n  id: string;\n  nome: string;\n  email: string;\n  cargo: string;\n  avatar?: string;\n  ativo: boolean;\n}\n\n// Props dos componentes\nexport interface ComissoesTableProps {\n  organizationId: string;\n  onEdit: (comissao: Comissao) => void;\n  onDelete: (comissaoId: string) => void;\n  onView: (comissao: Comissao) => void;\n}\n\nexport interface ComissaoFormProps {\n  comissao?: Comissao;\n  organizationId: string;\n  onSubmit: (data: CreateComissaoRequest | UpdateComissaoRequest) => Promise<void>;\n  onCancel: () => void;\n  isLoading?: boolean;\n}\n\nexport interface MembrosManagerProps {\n  comissaoId: string;\n  organizationId: string;\n  membros: MembroComissao[];\n  onMembrosChange: (membros: MembroComissao[]) => void;\n  readonly?: boolean;\n}\n\nexport interface ComissaoDetailsProps {\n  comissao: Comissao;\n  onEdit: () => void;\n  onClose: () => void;\n}\n\n// Tipos para hooks\nexport interface UseComissoesOptions {\n  organizationId: string;\n  filters?: ComissaoFilters;\n  pagination?: {\n    page: number;\n    limit: number;\n  };\n}\n\nexport interface UseComissoesReturn {\n  comissoes: Comissao[];\n  loading: boolean;\n  error: string | null;\n  pagination: ComissaoPagination;\n  createComissao: (data: CreateComissaoRequest) => Promise<Comissao>;\n  updateComissao: (id: string, data: UpdateComissaoRequest) => Promise<Comissao>;\n  deleteComissao: (id: string) => Promise<void>;\n  refetch: () => Promise<void>;\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/core/api.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is defined but never used.","line":46,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is defined but never used.","line":48,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":48},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":99,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'response' is defined but never used.","line":105,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":43},{"ruleId":"no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":107,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":107,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":123,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":37},{"ruleId":"no-unused-vars","severity":2,"message":"'attempt' is defined but never used.","line":123,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":54},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":173,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":175,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":175,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":177,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":177,"endColumn":28},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":179,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":179,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":181,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":181,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":187,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":187,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":187,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":187,"endColumn":49},{"ruleId":"no-unused-vars","severity":2,"message":"'criteria' is defined but never used.","line":189,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":44},{"ruleId":"no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":191,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'limit' is defined but never used.","line":191,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":46}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tipos para APIs e requisi√ß√µes HTTP\n */\n\nimport { BaseError, NetworkError } from './errors';\nimport { PaginatedResult, QueryOptions } from './pagination';\n\n/** M√©todos HTTP suportados */\nexport type HttpMethod = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' | 'HEAD' | 'OPTIONS';\n\n/** Status codes HTTP mais comuns */\nexport type HttpStatusCode = \n  | 200 // OK\n  | 201 // Created\n  | 204 // No Content\n  | 400 // Bad Request\n  | 401 // Unauthorized\n  | 403 // Forbidden\n  | 404 // Not Found\n  | 409 // Conflict\n  | 422 // Unprocessable Entity\n  | 429 // Too Many Requests\n  | 500 // Internal Server Error\n  | 502 // Bad Gateway\n  | 503; // Service Unavailable\n\n/** Configura√ß√£o base para requisi√ß√µes */\nexport interface RequestConfig {\n  /** URL da requisi√ß√£o */\n  url: string;\n  /** M√©todo HTTP */\n  method: HttpMethod;\n  /** Headers da requisi√ß√£o */\n  headers?: Record<string, string>;\n  /** Par√¢metros de query */\n  params?: Record<string, unknown>;\n  /** Corpo da requisi√ß√£o */\n  body?: unknown;\n  /** Timeout em milissegundos */\n  timeout?: number;\n  /** Se deve incluir credenciais */\n  withCredentials?: boolean;\n  /** Tipo de resposta esperado */\n  responseType?: 'json' | 'text' | 'blob' | 'arraybuffer';\n  /** Callback para progresso de upload */\n  onUploadProgress?: (progress: ProgressEvent) => void;\n  /** Callback para progresso de download */\n  onDownloadProgress?: (progress: ProgressEvent) => void;\n}\n\n/** Resposta da API */\nexport interface ApiResponse<T = unknown> {\n  /** Dados da resposta */\n  data: T;\n  /** Status HTTP */\n  status: HttpStatusCode;\n  /** Mensagem de status */\n  statusText: string;\n  /** Headers da resposta */\n  headers: Record<string, string>;\n  /** Configura√ß√£o da requisi√ß√£o */\n  config: RequestConfig;\n}\n\n/** Resposta de erro da API */\nexport interface ApiErrorResponse {\n  /** C√≥digo do erro */\n  code: string;\n  /** Mensagem de erro */\n  message: string;\n  /** Detalhes adicionais */\n  details?: Record<string, unknown>;\n  /** Timestamp do erro */\n  timestamp: string;\n  /** ID da requisi√ß√£o para rastreamento */\n  requestId?: string;\n}\n\n/** Configura√ß√£o do cliente da API */\nexport interface ApiClientConfig {\n  /** URL base da API */\n  baseURL: string;\n  /** Headers padr√£o */\n  defaultHeaders?: Record<string, string>;\n  /** Timeout padr√£o */\n  defaultTimeout?: number;\n  /** Interceptors de requisi√ß√£o */\n  requestInterceptors?: RequestInterceptor[];\n  /** Interceptors de resposta */\n  responseInterceptors?: ResponseInterceptor[];\n  /** Configura√ß√£o de retry */\n  retryConfig?: RetryConfig;\n  /** Se deve fazer log das requisi√ß√µes */\n  enableLogging?: boolean;\n}\n\n/** Interceptor de requisi√ß√£o */\nexport type RequestInterceptor = (\n  config: RequestConfig\n) => RequestConfig | Promise<RequestConfig>;\n\n/** Interceptor de resposta */\nexport type ResponseInterceptor = {\n  /** Interceptor para respostas de sucesso */\n  onSuccess?: <T>(response: ApiResponse<T>) => ApiResponse<T> | Promise<ApiResponse<T>>;\n  /** Interceptor para respostas de erro */\n  onError?: (_error: NetworkError) => NetworkError | Promise<NetworkError>;\n};\n\n/** Configura√ß√£o de retry */\nexport interface RetryConfig {\n  /** N√∫mero m√°ximo de tentativas */\n  maxRetries: number;\n  /** Delay inicial em milissegundos */\n  initialDelay: number;\n  /** Multiplicador para backoff exponencial */\n  backoffMultiplier: number;\n  /** Delay m√°ximo */\n  maxDelay: number;\n  /** Status codes que devem ser retentados */\n  retryableStatusCodes: HttpStatusCode[];\n  /** Fun√ß√£o para determinar se deve retentar */\n  shouldRetry?: (error: NetworkError, attempt: number) => boolean;\n}\n\n/** Op√ß√µes para cache de requisi√ß√µes */\nexport interface CacheOptions {\n  /** Chave do cache */\n  key?: string;\n  /** TTL em milissegundos */\n  ttl?: number;\n  /** Se deve usar cache stale-while-revalidate */\n  staleWhileRevalidate?: boolean;\n  /** Se deve invalidar cache em muta√ß√µes */\n  invalidateOnMutation?: boolean;\n}\n\n/** Configura√ß√£o de pagina√ß√£o para APIs */\nexport interface ApiPaginationConfig {\n  /** Par√¢metro para p√°gina */\n  pageParam: string;\n  /** Par√¢metro para limite */\n  limitParam: string;\n  /** Par√¢metro para ordena√ß√£o */\n  sortParam: string;\n  /** Par√¢metro para filtros */\n  filterParam: string;\n  /** Formato dos filtros */\n  filterFormat: 'query' | 'json' | 'custom';\n}\n\n/** Endpoint da API */\nexport interface ApiEndpoint {\n  /** Nome do endpoint */\n  name: string;\n  /** Path do endpoint */\n  path: string;\n  /** M√©todo HTTP */\n  method: HttpMethod;\n  /** Se requer autentica√ß√£o */\n  requiresAuth: boolean;\n  /** Permiss√µes necess√°rias */\n  permissions?: string[];\n  /** Configura√ß√£o de cache */\n  cache?: CacheOptions;\n  /** Configura√ß√£o de retry espec√≠fica */\n  retry?: Partial<RetryConfig>;\n}\n\n/** Opera√ß√µes CRUD padr√£o */\nexport interface CrudOperations<T, CreateData = Partial<T>, UpdateData = Partial<T>> {\n  /** Listar itens com pagina√ß√£o */\n  list: (options?: QueryOptions) => Promise<PaginatedResult<T>>;\n  /** Obter item por ID */\n  get: (id: string) => Promise<T>;\n  /** Criar novo item */\n  create: (data: CreateData) => Promise<T>;\n  /** Atualizar item existente */\n  update: (id: string, data: UpdateData) => Promise<T>;\n  /** Deletar item */\n  delete: (id: string) => Promise<void>;\n}\n\n/** Opera√ß√µes de busca */\nexport interface SearchOperations<T> {\n  /** Busca textual */\n  search: (query: string, options?: QueryOptions) => Promise<PaginatedResult<T>>;\n  /** Busca avan√ßada */\n  advancedSearch: (criteria: SearchCriteria) => Promise<PaginatedResult<T>>;\n  /** Sugest√µes de busca */\n  suggestions: (query: string, limit?: number) => Promise<string[]>;\n}\n\n/** Crit√©rios de busca avan√ßada */\nexport interface SearchCriteria {\n  /** Termo de busca */\n  query?: string;\n  /** Filtros espec√≠ficos */\n  filters: Record<string, unknown>;\n  /** Range de datas */\n  dateRange?: {\n    field: string;\n    start: Date;\n    end: Date;\n  };\n  /** Localiza√ß√£o */\n  location?: {\n    latitude: number;\n    longitude: number;\n    radius: number;\n  };\n}\n\n/** Estado de uma requisi√ß√£o */\nexport interface RequestState<T = unknown> {\n  /** Dados da resposta */\n  data?: T;\n  /** Se est√° carregando */\n  loading: boolean;\n  /** Erro se houver */\n  error?: BaseError;\n  /** Timestamp da √∫ltima atualiza√ß√£o */\n  lastUpdated?: Date;\n  /** Se os dados est√£o stale */\n  isStale: boolean;\n}\n\n/** Configura√ß√£o de webhook */\nexport interface WebhookConfig {\n  /** URL do webhook */\n  url: string;\n  /** Eventos que devem disparar o webhook */\n  events: string[];\n  /** Headers customizados */\n  headers?: Record<string, string>;\n  /** Secret para valida√ß√£o */\n  secret?: string;\n  /** Se est√° ativo */\n  active: boolean;\n}\n\n/** Payload de webhook */\nexport interface WebhookPayload {\n  /** Evento que disparou o webhook */\n  event: string;\n  /** Dados do evento */\n  data: unknown;\n  /** Timestamp do evento */\n  timestamp: Date;\n  /** ID √∫nico do evento */\n  eventId: string;\n  /** Vers√£o da API */\n  apiVersion: string;\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/core/base.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/core/common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/core/errors.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":146,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":146,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tipos para tratamento de erros no sistema\n */\n\nimport { Severity } from './common';\n\n/** Interface base para erros do sistema */\nexport interface BaseError {\n  /** C√≥digo √∫nico do erro */\n  code: string;\n  /** Mensagem de erro */\n  message: string;\n  /** Severidade do erro */\n  severity: Severity;\n  /** Timestamp quando o erro ocorreu */\n  timestamp: Date;\n  /** Contexto adicional do erro */\n  context?: Record<string, unknown>;\n  /** Stack trace (para debugging) */\n  stack?: string;\n}\n\n/** Erro de valida√ß√£o */\nexport interface ValidationError extends BaseError {\n  /** Campo que falhou na valida√ß√£o */\n  field: string;\n  /** Valor que causou o erro */\n  value?: unknown;\n  /** Regra de valida√ß√£o que falhou */\n  rule?: string;\n}\n\n/** Erro de rede/API */\nexport interface NetworkError extends BaseError {\n  /** Status HTTP */\n  status?: number;\n  /** URL da requisi√ß√£o */\n  url?: string;\n  /** M√©todo HTTP */\n  method?: string;\n  /** Headers da resposta */\n  headers?: Record<string, string>;\n  /** Corpo da resposta de erro */\n  responseBody?: unknown;\n}\n\n/** Erro de autentica√ß√£o */\nexport interface AuthenticationError extends BaseError {\n  /** Tipo de erro de auth */\n  authType: 'login' | 'token' | 'permission' | 'session';\n  /** Se o usu√°rio precisa fazer login novamente */\n  requiresReauth: boolean;\n}\n\n/** Erro de autoriza√ß√£o */\nexport interface AuthorizationError extends BaseError {\n  /** Recurso que foi negado acesso */\n  resource: string;\n  /** A√ß√£o que foi negada */\n  action: string;\n  /** Permiss√µes necess√°rias */\n  requiredPermissions: string[];\n  /** Permiss√µes atuais do usu√°rio */\n  userPermissions: string[];\n}\n\n/** Erro de neg√≥cio */\nexport interface BusinessError extends BaseError {\n  /** Categoria do erro de neg√≥cio */\n  category: BusinessErrorCategory;\n  /** Se o erro pode ser resolvido pelo usu√°rio */\n  userResolvable: boolean;\n  /** A√ß√µes sugeridas para resolu√ß√£o */\n  suggestedActions?: string[];\n}\n\n/** Categorias de erros de neg√≥cio */\nexport type BusinessErrorCategory =\n  | 'document_validation'\n  | 'file_processing'\n  | 'analysis_failure'\n  | 'classification_error'\n  | 'quota_exceeded'\n  | 'feature_unavailable'\n  | 'data_integrity'\n  | 'workflow_violation';\n\n/** Erro t√©cnico/sistema */\nexport interface SystemError extends BaseError {\n  /** Componente onde o erro ocorreu */\n  component: string;\n  /** Opera√ß√£o que estava sendo executada */\n  operation: string;\n  /** Se o erro √© recuper√°vel */\n  recoverable: boolean;\n  /** ID da sess√£o/request */\n  sessionId?: string;\n}\n\n/** Erro de arquivo */\nexport interface FileError extends BaseError {\n  /** Nome do arquivo */\n  fileName: string;\n  /** Tamanho do arquivo */\n  fileSize?: number;\n  /** Tipo MIME do arquivo */\n  mimeType?: string;\n  /** Tipo espec√≠fico do erro de arquivo */\n  fileErrorType: FileErrorType;\n}\n\n/** Tipos de erro de arquivo */\nexport type FileErrorType =\n  | 'invalid_format'\n  | 'file_too_large'\n  | 'file_corrupted'\n  | 'unsupported_type'\n  | 'virus_detected'\n  | 'upload_failed'\n  | 'processing_failed';\n\n/** Uni√£o de todos os tipos de erro */\nexport type AppError = \n  | ValidationError\n  | NetworkError\n  | AuthenticationError\n  | AuthorizationError\n  | BusinessError\n  | SystemError\n  | FileError;\n\n/** Resultado que pode conter erro */\nexport type Result<T, E = AppError> = \n  | { success: true; data: T }\n  | { success: false; error: E };\n\n/** Configura√ß√£o para tratamento de erros */\nexport interface ErrorHandlingConfig {\n  /** Se deve fazer log autom√°tico dos erros */\n  autoLog: boolean;\n  /** Se deve mostrar notifica√ß√£o para o usu√°rio */\n  showNotification: boolean;\n  /** Se deve tentar recupera√ß√£o autom√°tica */\n  autoRecover: boolean;\n  /** Fun√ß√£o customizada para tratamento */\n  customHandler?: (error: AppError) => void;\n}\n\n/** Contexto de erro para debugging */\nexport interface ErrorContext {\n  /** ID do usu√°rio */\n  userId?: string;\n  /** ID da sess√£o */\n  sessionId?: string;\n  /** URL atual */\n  currentUrl?: string;\n  /** User agent */\n  userAgent?: string;\n  /** Dados adicionais */\n  additionalData?: Record<string, unknown>;\n}\n\n/** Relat√≥rio de erro para envio */\nexport interface ErrorReport {\n  /** Erro que ocorreu */\n  error: AppError;\n  /** Contexto quando o erro ocorreu */\n  context: ErrorContext;\n  /** Se o usu√°rio consentiu em enviar o relat√≥rio */\n  userConsent: boolean;\n  /** Coment√°rio adicional do usu√°rio */\n  userComment?: string;\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/core/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/core/pagination.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'page' is defined but never used.","line":166,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":166,"endColumn":26},{"ruleId":"no-unused-vars","severity":2,"message":"'limit' is defined but never used.","line":176,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":176,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":178,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":178,"endColumn":35},{"ruleId":"no-unused-vars","severity":2,"message":"'sort' is defined but never used.","line":180,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'search' is defined but never used.","line":182,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":38}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tipos para pagina√ß√£o e resultados paginados\n */\n\nimport { Sort, Filter } from './common';\n\n/** Op√ß√µes de pagina√ß√£o */\nexport interface PaginationOptions {\n  /** P√°gina atual (baseada em 1) */\n  page: number;\n  /** N√∫mero de itens por p√°gina */\n  limit: number;\n  /** Offset para pagina√ß√£o baseada em cursor */\n  offset?: number;\n}\n\n/** Informa√ß√µes de pagina√ß√£o */\nexport interface PaginationInfo {\n  /** P√°gina atual */\n  currentPage: number;\n  /** Total de p√°ginas */\n  totalPages: number;\n  /** N√∫mero de itens por p√°gina */\n  itemsPerPage: number;\n  /** Total de itens */\n  totalItems: number;\n  /** Se h√° p√°gina anterior */\n  hasPrevious: boolean;\n  /** Se h√° pr√≥xima p√°gina */\n  hasNext: boolean;\n  /** N√∫mero da primeira p√°gina */\n  firstPage: number;\n  /** N√∫mero da √∫ltima p√°gina */\n  lastPage: number;\n}\n\n/** Resultado paginado */\nexport interface PaginatedResult<T> {\n  /** Dados da p√°gina atual */\n  data: T[];\n  /** Informa√ß√µes de pagina√ß√£o */\n  pagination: PaginationInfo;\n  /** Metadados adicionais */\n  metadata?: Record<string, unknown>;\n}\n\n/** Op√ß√µes de consulta com pagina√ß√£o */\nexport interface QueryOptions extends PaginationOptions {\n  /** Filtros a serem aplicados */\n  filters?: Filter[];\n  /** Ordena√ß√£o */\n  sort?: Sort[];\n  /** Campos a serem inclu√≠dos na resposta */\n  select?: string[];\n  /** Relacionamentos a serem inclu√≠dos */\n  include?: string[];\n  /** Busca textual */\n  search?: SearchOptions;\n}\n\n/** Op√ß√µes de busca */\nexport interface SearchOptions {\n  /** Termo de busca */\n  query: string;\n  /** Campos onde buscar */\n  fields?: string[];\n  /** Se a busca √© case sensitive */\n  caseSensitive?: boolean;\n  /** Se deve usar busca fuzzy */\n  fuzzy?: boolean;\n  /** Peso dos campos para relev√¢ncia */\n  fieldWeights?: Record<string, number>;\n}\n\n/** Cursor para pagina√ß√£o baseada em cursor */\nexport interface Cursor {\n  /** Valor do cursor */\n  value: string;\n  /** Campo usado para o cursor */\n  field: string;\n  /** Dire√ß√£o da pagina√ß√£o */\n  direction: 'forward' | 'backward';\n}\n\n/** Op√ß√µes de pagina√ß√£o por cursor */\nexport interface CursorPaginationOptions {\n  /** Cursor para in√≠cio da p√°gina */\n  after?: string;\n  /** Cursor para fim da p√°gina */\n  before?: string;\n  /** N√∫mero de itens */\n  first?: number;\n  /** N√∫mero de itens (reverso) */\n  last?: number;\n}\n\n/** Resultado de pagina√ß√£o por cursor */\nexport interface CursorPaginatedResult<T> {\n  /** Dados da p√°gina */\n  data: T[];\n  /** Informa√ß√µes dos cursors */\n  pageInfo: PageInfo;\n  /** Total de itens (opcional) */\n  totalCount?: number;\n}\n\n/** Informa√ß√µes da p√°gina para cursor */\nexport interface PageInfo {\n  /** Cursor do primeiro item */\n  startCursor?: string;\n  /** Cursor do √∫ltimo item */\n  endCursor?: string;\n  /** Se h√° p√°gina anterior */\n  hasPreviousPage: boolean;\n  /** Se h√° pr√≥xima p√°gina */\n  hasNextPage: boolean;\n}\n\n/** Configura√ß√µes de pagina√ß√£o */\nexport interface PaginationConfig {\n  /** Limite padr√£o de itens por p√°gina */\n  defaultLimit: number;\n  /** Limite m√°ximo de itens por p√°gina */\n  maxLimit: number;\n  /** Limite m√≠nimo de itens por p√°gina */\n  minLimit: number;\n  /** Se deve incluir contagem total */\n  includeTotalCount: boolean;\n  /** Tipo de pagina√ß√£o preferido */\n  preferredType: 'offset' | 'cursor';\n}\n\n/** Par√¢metros de URL para pagina√ß√£o */\nexport interface PaginationParams {\n  /** P√°gina */\n  page?: string;\n  /** Limite */\n  limit?: string;\n  /** Ordena√ß√£o */\n  sort?: string;\n  /** Filtros */\n  filter?: string;\n  /** Busca */\n  search?: string;\n  /** Cursor */\n  cursor?: string;\n}\n\n/** Estado de pagina√ß√£o para componentes */\nexport interface PaginationState {\n  /** Op√ß√µes atuais */\n  options: QueryOptions;\n  /** Resultado atual */\n  result?: PaginatedResult<unknown>;\n  /** Se est√° carregando */\n  loading: boolean;\n  /** Erro se houver */\n  error?: Error;\n  /** Cache de p√°ginas visitadas */\n  cache: Map<string, PaginatedResult<unknown>>;\n}\n\n/** A√ß√µes de pagina√ß√£o */\nexport interface PaginationActions {\n  /** Ir para p√°gina espec√≠fica */\n  goToPage: (page: number) => void;\n  /** Ir para pr√≥xima p√°gina */\n  nextPage: () => void;\n  /** Ir para p√°gina anterior */\n  previousPage: () => void;\n  /** Ir para primeira p√°gina */\n  firstPage: () => void;\n  /** Ir para √∫ltima p√°gina */\n  lastPage: () => void;\n  /** Alterar limite de itens */\n  changeLimit: (limit: number) => void;\n  /** Aplicar filtros */\n  applyFilters: (filters: Filter[]) => void;\n  /** Aplicar ordena√ß√£o */\n  applySort: (sort: Sort[]) => void;\n  /** Aplicar busca */\n  applySearch: (search: SearchOptions) => void;\n  /** Limpar filtros */\n  clearFilters: () => void;\n  /** Recarregar dados */\n  refresh: () => void;\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document/analysis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document/base.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document/classification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document/metadata.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document/upload.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_progress' is defined but never used.","line":108,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":108,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'_result' is defined but never used.","line":110,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":110,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":112,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":112,"endColumn":33},{"ruleId":"no-unused-vars","severity":2,"message":"'_progress' is defined but never used.","line":253,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":253,"endColumn":46}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tipos para upload de documentos\n */\n\nimport { DocumentType, DocumentMetadata, ProcessingInfo } from './base';\n\n// Interface base para entidades com ID e timestamps\ninterface BaseEntity {\n  id: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n/** Estado de upload de um documento */\nexport interface DocumentUpload extends BaseEntity {\n  /** Arquivo sendo enviado */\n  file: File;\n  /** Tipo do documento */\n  documentType: DocumentType;\n  /** Classifica√ß√£o espec√≠fica */\n  classification?: DocumentClassification;\n  /** Status atual do upload */\n  status: UploadStatus;\n  /** Progresso do upload */\n  progress: UploadProgress;\n  /** Informa√ß√µes de processamento */\n  processing: ProcessingInfo;\n  /** Metadados do documento */\n  metadata: DocumentMetadata;\n  /** URL tempor√°ria para preview */\n  previewUrl?: string;\n  /** Resultado do upload (quando conclu√≠do) */\n  result?: UploadResult;\n  /** Erros ocorridos */\n  errors: UploadError[];\n  /** Configura√ß√µes do upload */\n  config: UploadConfig;\n}\n\n/** Status do upload */\nexport type UploadStatus = \n  | 'pending'        // Aguardando in√≠cio\n  | 'validating'     // Validando arquivo\n  | 'uploading'      // Upload em andamento\n  | 'processing'     // Processamento p√≥s-upload\n  | 'completed'      // Conclu√≠do com sucesso\n  | 'failed'         // Falhou\n  | 'cancelled'      // Cancelado pelo usu√°rio\n  | 'paused';        // Pausado\n\n/** Progresso detalhado do upload */\nexport interface UploadProgress {\n  /** Etapa atual */\n  stage: UploadStage;\n  /** Progresso da etapa atual (0-100) */\n  stageProgress: number;\n  /** Progresso total (0-100) */\n  totalProgress: number;\n  /** Bytes transferidos */\n  bytesTransferred: number;\n  /** Total de bytes */\n  totalBytes: number;\n  /** Velocidade de upload (bytes/segundo) */\n  uploadSpeed: number;\n  /** Tempo decorrido em segundos */\n  elapsedTime: number;\n  /** Tempo estimado restante em segundos */\n  estimatedTimeRemaining?: number;\n  /** Mensagem de status atual */\n  message: string;\n  /** Timestamp da √∫ltima atualiza√ß√£o */\n  lastUpdated: Date;\n}\n\n/** Etapas do upload */\nexport type UploadStage = \n  | 'preparing'      // Preparando arquivo\n  | 'validating'     // Validando arquivo\n  | 'uploading'      // Enviando arquivo\n  | 'virus_scanning' // Verifica√ß√£o de v√≠rus\n  | 'processing'     // Processamento inicial\n  | 'extracting'     // Extra√ß√£o de texto/metadados\n  | 'classifying'    // Classifica√ß√£o autom√°tica\n  | 'indexing'       // Indexa√ß√£o para busca\n  | 'finalizing';    // Finalizando\n\n/** Configura√ß√µes de upload */\nexport interface UploadConfig {\n  /** Se deve fazer classifica√ß√£o autom√°tica */\n  autoClassify: boolean;\n  /** Se deve extrair texto automaticamente */\n  extractText: boolean;\n  /** Se deve gerar thumbnail */\n  generateThumbnail: boolean;\n  /** Se deve fazer OCR em imagens */\n  performOCR: boolean;\n  /** Se deve fazer verifica√ß√£o de v√≠rus */\n  virusScan: boolean;\n  /** Qualidade da compress√£o (0-100) */\n  compressionQuality?: number;\n  /** Tamanho m√°ximo permitido em bytes */\n  maxFileSize: number;\n  /** Tipos MIME permitidos */\n  allowedMimeTypes: string[];\n  /** Se deve sobrescrever arquivo existente */\n  overwriteExisting: boolean;\n  /** Callback para progresso */\n  onProgress?: (_progress: UploadProgress) => void;\n  /** Callback para conclus√£o */\n  onComplete?: (_result: UploadResult) => void;\n  /** Callback para erro */\n  onError?: (_error: UploadError) => void;\n}\n\n/** Resultado do upload */\nexport interface UploadResult {\n  /** ID do documento criado */\n  documentId: string;\n  /** URL final do documento */\n  documentUrl: string;\n  /** URL do thumbnail */\n  thumbnailUrl?: string;\n  /** Metadados extra√≠dos */\n  extractedMetadata: DocumentMetadata;\n  /** Classifica√ß√£o detectada */\n  detectedClassification?: DocumentClassification;\n  /** Texto extra√≠do */\n  extractedText?: string;\n  /** Estat√≠sticas do processamento */\n  processingStats: ProcessingStats;\n  /** Avisos gerados */\n  warnings: UploadWarning[];\n}\n\n/** Estat√≠sticas de processamento */\nexport interface ProcessingStats {\n  /** Tempo total de processamento em segundos */\n  totalProcessingTime: number;\n  /** Tempo de upload em segundos */\n  uploadTime: number;\n  /** Tempo de processamento em segundos */\n  processingTime: number;\n  /** Tamanho original do arquivo */\n  originalSize: number;\n  /** Tamanho final do arquivo */\n  finalSize: number;\n  /** Taxa de compress√£o */\n  compressionRatio: number;\n  /** N√∫mero de p√°ginas processadas */\n  pagesProcessed?: number;\n  /** Confian√ßa da classifica√ß√£o (0-1) */\n  classificationConfidence?: number;\n}\n\n/** Erro de upload */\nexport interface UploadError {\n  /** C√≥digo do erro */\n  code: UploadErrorCode;\n  /** Mensagem de erro */\n  message: string;\n  /** Etapa onde ocorreu o erro */\n  stage: UploadStage;\n  /** Detalhes t√©cnicos */\n  details?: Record<string, unknown>;\n  /** Se o erro √© recuper√°vel */\n  recoverable: boolean;\n  /** A√ß√µes sugeridas */\n  suggestedActions?: string[];\n  /** Timestamp do erro */\n  timestamp: Date;\n}\n\n/** C√≥digos de erro de upload */\nexport type UploadErrorCode = \n  | 'FILE_TOO_LARGE'\n  | 'INVALID_FILE_TYPE'\n  | 'FILE_CORRUPTED'\n  | 'VIRUS_DETECTED'\n  | 'NETWORK_ERROR'\n  | 'SERVER_ERROR'\n  | 'QUOTA_EXCEEDED'\n  | 'PERMISSION_DENIED'\n  | 'DUPLICATE_FILE'\n  | 'PROCESSING_FAILED'\n  | 'CLASSIFICATION_FAILED'\n  | 'TEXT_EXTRACTION_FAILED'\n  | 'THUMBNAIL_GENERATION_FAILED'\n  | 'UNKNOWN_ERROR';\n\n/** Aviso de upload */\nexport interface UploadWarning {\n  /** C√≥digo do aviso */\n  code: string;\n  /** Mensagem de aviso */\n  message: string;\n  /** Severidade do aviso */\n  severity: 'low' | 'medium' | 'high';\n  /** Se pode ser ignorado */\n  ignorable: boolean;\n}\n\n/** Classifica√ß√£o de documento */\nexport interface DocumentClassification {\n  /** Tipo principal */\n  primaryType: DocumentType;\n  /** Subtipo espec√≠fico */\n  subtype?: string;\n  /** Categoria */\n  category?: string;\n  /** Confian√ßa da classifica√ß√£o (0-1) */\n  confidence: number;\n  /** Classifica√ß√µes alternativas */\n  alternatives?: AlternativeClassification[];\n  /** Caracter√≠sticas detectadas */\n  features: ClassificationFeature[];\n}\n\n/** Classifica√ß√£o alternativa */\nexport interface AlternativeClassification {\n  /** Tipo alternativo */\n  type: DocumentType;\n  /** Subtipo */\n  subtype?: string;\n  /** Confian√ßa */\n  confidence: number;\n}\n\n/** Caracter√≠stica de classifica√ß√£o */\nexport interface ClassificationFeature {\n  /** Nome da caracter√≠stica */\n  name: string;\n  /** Valor da caracter√≠stica */\n  value: unknown;\n  /** Peso na classifica√ß√£o */\n  weight: number;\n  /** Confian√ßa desta caracter√≠stica */\n  confidence: number;\n}\n\n/** Op√ß√µes de upload em lote */\nexport interface BatchUploadOptions {\n  /** Arquivos para upload */\n  files: File[];\n  /** Configura√ß√£o comum */\n  commonConfig: Partial<UploadConfig>;\n  /** Configura√ß√µes espec√≠ficas por arquivo */\n  fileConfigs?: Map<string, Partial<UploadConfig>>;\n  /** N√∫mero m√°ximo de uploads simult√¢neos */\n  maxConcurrent: number;\n  /** Se deve parar em caso de erro */\n  stopOnError: boolean;\n  /** Callback para progresso do lote */\n  onBatchProgress?: (_progress: BatchProgress) => void;\n}\n\n/** Progresso de upload em lote */\nexport interface BatchProgress {\n  /** N√∫mero total de arquivos */\n  totalFiles: number;\n  /** Arquivos conclu√≠dos */\n  completedFiles: number;\n  /** Arquivos com erro */\n  failedFiles: number;\n  /** Arquivos em andamento */\n  inProgressFiles: number;\n  /** Progresso total (0-100) */\n  totalProgress: number;\n  /** Velocidade m√©dia de upload */\n  averageSpeed: number;\n  /** Tempo estimado restante */\n  estimatedTimeRemaining?: number;\n}\n\n/** Estado de upload em lote */\nexport interface BatchUploadState {\n  /** Status do lote */\n  status: 'pending' | 'running' | 'completed' | 'failed' | 'cancelled';\n  /** Progresso do lote */\n  progress: BatchProgress;\n  /** Uploads individuais */\n  uploads: Map<string, DocumentUpload>;\n  /** Resultados */\n  results: UploadResult[];\n  /** Erros globais */\n  errors: UploadError[];\n}\n\n/** Valida√ß√£o de arquivo */\nexport interface FileValidation {\n  /** Se o arquivo √© v√°lido */\n  isValid: boolean;\n  /** Erros de valida√ß√£o */\n  errors: ValidationError[];\n  /** Avisos */\n  warnings: ValidationWarning[];\n  /** Metadados b√°sicos */\n  metadata: BasicFileMetadata;\n}\n\n/** Erro de valida√ß√£o */\nexport interface ValidationError {\n  /** C√≥digo do erro */\n  code: string;\n  /** Mensagem */\n  message: string;\n  /** Campo relacionado */\n  field?: string;\n  /** Valor que causou o erro */\n  value?: unknown;\n}\n\n/** Aviso de valida√ß√£o */\nexport interface ValidationWarning {\n  /** C√≥digo do aviso */\n  code: string;\n  /** Mensagem */\n  message: string;\n  /** Campo relacionado */\n  field?: string;\n}\n\n/** Metadados b√°sicos de arquivo */\nexport interface BasicFileMetadata {\n  /** Nome do arquivo */\n  name: string;\n  /** Tamanho em bytes */\n  size: number;\n  /** Tipo MIME */\n  mimeType: string;\n  /** Extens√£o */\n  extension: string;\n  /** Data de modifica√ß√£o */\n  lastModified: Date;\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/document/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/error.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":43,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'_errorInfo' is defined but never used.","line":43,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":50},{"ruleId":"no-unused-vars","severity":2,"message":"'_errorId' is defined but never used.","line":51,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":31}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ComponentType, ErrorInfo, ReactNode } from 'react';\n\nexport interface ErrorRecord {\n  id: string;\n  error: Error;\n  errorInfo?: ErrorInfo;\n  timestamp: Date;\n  url: string;\n  userAgent: string;\n  userId?: string;\n  context?: ErrorContext;\n}\n\nexport interface ConsoleRecord {\n  id: string;\n  type: 'warn' | 'error' | 'log';\n  message: string;\n  args: unknown[];\n  timestamp: Date;\n  url: string;\n  userAgent: string;\n  stack?: string;\n  category: ConsoleCategory;\n  severity: ErrorSeverity;\n}\n\nexport interface ErrorContext {\n  component?: string;\n  action?: string;\n  userId?: string;\n  metadata?: Record<string, unknown>;\n}\n\nexport interface ErrorBoundaryState {\n  hasError: boolean;\n  error?: Error;\n  errorInfo?: ErrorInfo;\n  errorId: string;\n}\n\nexport interface ErrorBoundaryProps {\n  fallback?: ComponentType<ErrorFallbackProps>;\n  onError?: (_error: Error, _errorInfo: ErrorInfo) => void;\n  children: ReactNode;\n}\n\nexport interface ErrorFallbackProps {\n  error?: Error;\n  errorId: string;\n  resetError: () => void;\n  onReport?: (_errorId: string) => void;\n}\n\nexport type ErrorSeverity = 'low' | 'medium' | 'high' | 'critical';\n\nexport type ErrorCategory = \n  | 'network'\n  | 'validation' \n  | 'authentication'\n  | 'business_logic'\n  | 'ui_rendering'\n  | 'unknown';\n\nexport type ConsoleCategory = \n  | 'react_warning'\n  | 'performance_warning'\n  | 'console_warning'\n  | 'developer_log'\n  | 'unknown';","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/types/template.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/utils/errorUtils.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_args' is defined but never used.","line":101,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":101,"endColumn":87},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_args' is defined but never used.","line":101,"column":71,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":76}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ErrorInfo } from 'react';\nimport { ErrorRecord, ErrorContext, ErrorCategory, ErrorSeverity, ConsoleRecord, ConsoleCategory } from '@/types/error';\n\nexport function generateErrorId(): string {\n  const timestamp = Date.now().toString(36);\n  const random = Math.random().toString(36).substring(2, 8);\n  return `error_${timestamp}_${random}`;\n}\n\nexport function classifyError(error: Error): ErrorCategory {\n  const message = error.message.toLowerCase();\n  const name = error.name.toLowerCase();\n\n  if (message.includes('network') || message.includes('fetch') || name.includes('networkerror')) {\n    return 'network';\n  }\n  \n  if (message.includes('validation') || message.includes('invalid') || name.includes('validationerror')) {\n    return 'validation';\n  }\n  \n  if (message.includes('auth') || message.includes('unauthorized') || message.includes('forbidden')) {\n    return 'authentication';\n  }\n  \n  if (message.includes('render') || name.includes('syntaxerror') || message.includes('component')) {\n    return 'ui_rendering';\n  }\n\n  return 'unknown';\n}\n\nexport function getErrorSeverity(error: Error): ErrorSeverity {\n  const category = classifyError(error);\n  const message = error.message.toLowerCase();\n\n  // Critical errors\n  if (category === 'authentication' || message.includes('critical') || message.includes('fatal')) {\n    return 'critical';\n  }\n\n  // High severity\n  if (category === 'network' || category === 'business_logic' || message.includes('failed')) {\n    return 'high';\n  }\n\n  // Medium severity\n  if (category === 'validation' || category === 'ui_rendering') {\n    return 'medium';\n  }\n\n  // Low severity for unknown or minor issues\n  return 'low';\n}\n\nexport function createErrorRecord(\n  error: Error,\n  errorInfo?: ErrorInfo,\n  context?: ErrorContext\n): ErrorRecord {\n  return {\n    id: generateErrorId(),\n    error,\n    errorInfo,\n    timestamp: new Date(),\n    url: window.location.href,\n    userAgent: navigator.userAgent,\n    context,\n  };\n}\n\nexport function sanitizeErrorForLogging(error: Error): Record<string, unknown> {\n  return {\n    name: error.name,\n    message: error.message,\n    stack: error.stack,\n    category: classifyError(error),\n    severity: getErrorSeverity(error),\n  };\n}\n\nexport function getErrorDisplayMessage(error: Error): string {\n  const category = classifyError(error);\n  \n  switch (category) {\n    case 'network':\n      return 'Problema de conex√£o. Verifique sua internet e tente novamente.';\n    case 'validation':\n      return 'Dados inv√°lidos. Verifique as informa√ß√µes e tente novamente.';\n    case 'authentication':\n      return 'Sess√£o expirada. Fa√ßa login novamente.';\n    case 'business_logic':\n      return 'Erro no processamento. Tente novamente em alguns instantes.';\n    case 'ui_rendering':\n      return 'Erro na interface. Recarregue a p√°gina.';\n    default:\n      return 'Algo deu errado. Nossa equipe foi notificada.';\n  }\n}\n\nexport function classifyConsoleMessage(type: string, message: string, _args: unknown[]): ConsoleCategory {\n  const msg = message.toLowerCase();\n  \n  // React warnings\n  if (msg.includes('react') || msg.includes('warning:') || msg.includes('validatedomnesting')) {\n    return 'react_warning';\n  }\n  \n  // Performance warnings\n  if (msg.includes('preload') || msg.includes('performance') || msg.includes('loading')) {\n    return 'performance_warning';\n  }\n  \n  // Developer logs\n  if (type === 'log' || msg.includes('debug') || msg.includes('info')) {\n    return 'developer_log';\n  }\n  \n  // Generic console warnings\n  if (type === 'warn') {\n    return 'console_warning';\n  }\n  \n  return 'unknown';\n}\n\nexport function getConsoleSeverity(category: ConsoleCategory, type: string): ErrorSeverity {\n  switch (category) {\n    case 'react_warning':\n      return 'medium';\n    case 'performance_warning':\n      return 'low';\n    case 'console_warning':\n      return 'medium';\n    case 'developer_log':\n      return 'low';\n    default:\n      return type === 'error' ? 'high' : 'low';\n  }\n}\n\nexport function createConsoleRecord(\n  type: 'warn' | 'error' | 'log',\n  message: string,\n  args: unknown[]\n): ConsoleRecord {\n  const category = classifyConsoleMessage(type, message, args);\n  const severity = getConsoleSeverity(category, type);\n  \n  return {\n    id: generateErrorId(),\n    type,\n    message,\n    args,\n    timestamp: new Date(),\n    url: window.location.href,\n    userAgent: navigator.userAgent,\n    stack: type === 'error' ? new Error().stack : undefined,\n    category,\n    severity,\n  };\n}\n\nexport function shouldReportConsoleMessage(record: ConsoleRecord): boolean {\n  // Don't report known non-critical warnings\n  const ignoredPatterns = [\n    'data-lov-id', // Known Lovable internal attribute\n    'preload but not used', // Performance warnings\n    '[UTS]', // User tracking scripts\n    'hiring!', // Lovable recruitment message\n  ];\n  \n  return !ignoredPatterns.some(pattern => \n    record.message.toLowerCase().includes(pattern.toLowerCase())\n  );\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/utils/formatters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/src/utils/templateUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/apps/web/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/diagnose-firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/eslint.config.js","messages":[{"ruleId":null,"fatal":true,"severity":2,"message":"Parsing error: 'import' and 'export' may appear only with 'sourceType: module'","line":1,"column":1,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import js from \"@eslint/js\";\nimport globals from \"globals\";\nimport reactHooks from \"eslint-plugin-react-hooks\";\nimport reactRefresh from \"eslint-plugin-react-refresh\";\nimport tseslint from \"@typescript-eslint/eslint-plugin\";\nimport tseslintParser from \"@typescript-eslint/parser\";\n\nexport default [\n  { \n    ignores: [\n      \"dist\",\n      \".migration-backup/**\",\n      \"node_modules/**\",\n      \".turbo/**\",\n      \"**/*.d.ts\",\n      \"venv/**\",\n      \"__pycache__/**\",\n      \".ruff_cache/**\",\n      \"*.log\",\n      \"credentials/**\",\n      \"cloud-run-services/**\",\n      \"go-rate-limiter/**\"\n    ] \n  },\n  {\n    files: [\"**/*.{ts,tsx}\"],\n    languageOptions: {\n      ecmaVersion: 2020,\n      globals: {\n        ...globals.browser,\n        ...globals.node,\n        ...globals.es2020\n      },\n      parser: tseslintParser,\n      parserOptions: {\n        ecmaVersion: 2020,\n        sourceType: \"module\",\n        ecmaFeatures: {\n          jsx: true,\n        },\n      },\n    },\n    plugins: {\n      \"@typescript-eslint\": tseslint,\n      \"react-hooks\": reactHooks,\n      \"react-refresh\": reactRefresh,\n    },\n    rules: {\n      ...tseslint.configs.recommended.rules,\n      ...reactHooks.configs.recommended.rules,\n      \"react-refresh/only-export-components\": [\n        \"warn\",\n        { allowConstantExport: true },\n      ],\n      \"@typescript-eslint/no-unused-vars\": \"warn\",\n      \"@typescript-eslint/no-explicit-any\": \"warn\",\n      \"@typescript-eslint/ban-ts-comment\": \"warn\",\n      \"no-unused-vars\": \"off\",\n    },\n  },\n  {\n    files: [\"**/*.js\"],\n    languageOptions: {\n      ecmaVersion: 2020,\n      sourceType: \"module\",\n      globals: {\n        ...globals.node,\n        ...globals.es2020\n      },\n    },\n    rules: {\n      ...js.configs.recommended.rules,\n      \"no-unused-vars\": \"warn\",\n      \"no-console\": \"off\",\n      \"no-inner-declarations\": \"warn\",\n    },\n  },\n  {\n    files: [\"services/api/**/*.js\", \"*.js\"],\n    languageOptions: {\n      ecmaVersion: 2020,\n      sourceType: \"commonjs\",\n      globals: {\n        ...globals.node,\n        ...globals.commonjs,\n        ...globals.es2020\n      },\n    },\n    rules: {\n      ...js.configs.recommended.rules,\n      \"no-unused-vars\": \"warn\",\n      \"no-console\": \"off\",\n    },\n  },\n  js.configs.recommended,\n];\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/types/src/config.types.ts","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'RIGOROUS' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'STANDARD' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TECHNICAL' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'FAST' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CUSTOM' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'BALANCED' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'LEGAL_FOCUSED' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TECHNICAL_FOCUSED' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'STRUCTURAL_FOCUSED' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CUSTOM' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CRITICA' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ALTA' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'MEDIA' is defined but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'BAIXA' is defined but never used.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ESTRUTURAL' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'JURIDICO' is defined but never used.","line":38,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CLAREZA' is defined but never used.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ABNT' is defined but never used.","line":40,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CONFORMIDADE' is defined but never used.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'COMPLETUDE' is defined but never used.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/types/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/ui/src/components/button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":53,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":53,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '../utils/cn';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/ui/src/components/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/ui/src/components/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/ui/src/components/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/ui/src/components/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/ui/src/utils/cn.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/ui/tsup.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/utils/src/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/utils/src/formatting.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/utils/src/helpers.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/ban-types","severity":2,"message":"Don't use `Function` as a type. The `Function` type accepts any function-like value.\nIt provides no type safety when calling the function, which can be a common source of bugs.\nIt also accepts things like class declarations, which will throw at runtime as they will not be called with `new`.\nIf you are expecting the function to accept certain arguments, you should explicitly define the function shape.","line":87,"column":42,"nodeType":"Identifier","messageId":"bannedTypeMessage","endLine":87,"endColumn":50,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2744,2747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2744,2747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/utils/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/utils/src/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/packages/utils/tsup.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/analyzer/venv/lib/python3.11/site-packages/coverage/htmlfiles/coverage_html.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'$' is defined but never used.","line":6,"column":44,"nodeType":"Program","messageId":"unusedVar","endLine":6,"endColumn":45},{"ruleId":"no-undef","severity":2,"message":"'HTMLDataElement' is not defined.","line":43,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":45},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":87,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":91,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":97,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":97,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":105,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":105,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":129,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":133,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":133,"endColumn":45},{"ruleId":"no-unused-vars","severity":2,"message":"'event' is defined but never used.","line":144,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":144,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":152,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":152,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":156,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":156,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'cell' is not defined.","line":163,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":163,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'cell' is not defined.","line":164,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":164,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'cell' is not defined.","line":165,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":165,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'cell' is not defined.","line":193,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":193,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'cell' is not defined.","line":194,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":194,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'cell' is not defined.","line":199,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":199,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'cell' is not defined.","line":204,"column":48,"nodeType":"Identifier","messageId":"undef","endLine":204,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":268,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":268,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":273,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":273,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'location' is not defined.","line":319,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":319,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":346,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":346,"endColumn":40},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":347,"column":18,"nodeType":"BlockStatement","messageId":"unexpected","endLine":347,"endColumn":20,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[13356,13356],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-undef","severity":2,"message":"'cls' is not defined.","line":356,"column":10,"nodeType":"Identifier","messageId":"undef","endLine":356,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'cls' is not defined.","line":357,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":357,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'cls' is not defined.","line":357,"column":59,"nodeType":"Identifier","messageId":"undef","endLine":357,"endColumn":62},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":380,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":380,"endColumn":21},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":381,"column":18,"nodeType":"BlockStatement","messageId":"unexpected","endLine":381,"endColumn":20,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[14506,14506],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-undef","severity":2,"message":"'location' is not defined.","line":431,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":431,"endColumn":13},{"ruleId":"no-constant-condition","severity":2,"message":"Unexpected constant condition.","line":459,"column":12,"nodeType":"Literal","messageId":"unexpected","endLine":459,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'key' is not defined.","line":718,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":718,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'contexts' is not defined.","line":719,"column":54,"nodeType":"Identifier","messageId":"undef","endLine":719,"endColumn":62},{"ruleId":"no-undef","severity":2,"message":"'key' is not defined.","line":719,"column":63,"nodeType":"Identifier","messageId":"undef","endLine":719,"endColumn":66}],"suppressedMessages":[],"errorCount":33,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Licensed under the Apache License: http://www.apache.org/licenses/LICENSE-2.0\n// For details: https://github.com/nedbat/coveragepy/blob/master/NOTICE.txt\n\n// Coverage.py HTML report browser code.\n/*jslint browser: true, sloppy: true, vars: true, plusplus: true, maxerr: 50, indent: 4 */\n/*global coverage: true, document, window, $ */\n\ncoverage = {};\n\n// General helpers\nfunction debounce(callback, wait) {\n    let timeoutId = null;\n    return function(...args) {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => {\n            callback.apply(this, args);\n        }, wait);\n    };\n}\n\nfunction checkVisible(element) {\n    const rect = element.getBoundingClientRect();\n    const viewBottom = Math.max(document.documentElement.clientHeight, window.innerHeight);\n    const viewTop = 30;\n    return !(rect.bottom < viewTop || rect.top >= viewBottom);\n}\n\nfunction on_click(sel, fn) {\n    const elt = document.querySelector(sel);\n    if (elt) {\n        elt.addEventListener(\"click\", fn);\n    }\n}\n\n// Helpers for table sorting\nfunction getCellValue(row, column = 0) {\n    const cell = row.cells[column]  // nosemgrep: eslint.detect-object-injection\n    if (cell.childElementCount == 1) {\n        var child = cell.firstElementChild;\n        if (child.tagName === \"A\") {\n            child = child.firstElementChild;\n        }\n        if (child instanceof HTMLDataElement && child.value) {\n            return child.value;\n        }\n    }\n    return cell.innerText || cell.textContent;\n}\n\nfunction rowComparator(rowA, rowB, column = 0) {\n    let valueA = getCellValue(rowA, column);\n    let valueB = getCellValue(rowB, column);\n    if (!isNaN(valueA) && !isNaN(valueB)) {\n        return valueA - valueB;\n    }\n    return valueA.localeCompare(valueB, undefined, {numeric: true});\n}\n\nfunction sortColumn(th) {\n    // Get the current sorting direction of the selected header,\n    // clear state on other headers and then set the new sorting direction.\n    const currentSortOrder = th.getAttribute(\"aria-sort\");\n    [...th.parentElement.cells].forEach(header => header.setAttribute(\"aria-sort\", \"none\"));\n    var direction;\n    if (currentSortOrder === \"none\") {\n        direction = th.dataset.defaultSortOrder || \"ascending\";\n    }\n    else if (currentSortOrder === \"ascending\") {\n        direction = \"descending\";\n    }\n    else {\n        direction = \"ascending\";\n    }\n    th.setAttribute(\"aria-sort\", direction);\n\n    const column = [...th.parentElement.cells].indexOf(th)\n\n    // Sort all rows and afterwards append them in order to move them in the DOM.\n    Array.from(th.closest(\"table\").querySelectorAll(\"tbody tr\"))\n        .sort((rowA, rowB) => rowComparator(rowA, rowB, column) * (direction === \"ascending\" ? 1 : -1))\n        .forEach(tr => tr.parentElement.appendChild(tr));\n\n    // Save the sort order for next time.\n    if (th.id !== \"region\") {\n        let th_id = \"file\";  // Sort by file if we don't have a column id\n        let current_direction = direction;\n        const stored_list = localStorage.getItem(coverage.INDEX_SORT_STORAGE);\n        if (stored_list) {\n            ({th_id, direction} = JSON.parse(stored_list))\n        }\n        localStorage.setItem(coverage.INDEX_SORT_STORAGE, JSON.stringify({\n            \"th_id\": th.id,\n            \"direction\": current_direction\n        }));\n        if (th.id !== th_id || document.getElementById(\"region\")) {\n            // Sort column has changed, unset sorting by function or class.\n            localStorage.setItem(coverage.SORTED_BY_REGION, JSON.stringify({\n                \"by_region\": false,\n                \"region_direction\": current_direction\n            }));\n        }\n    }\n    else {\n        // Sort column has changed to by function or class, remember that.\n        localStorage.setItem(coverage.SORTED_BY_REGION, JSON.stringify({\n            \"by_region\": true,\n            \"region_direction\": direction\n        }));\n    }\n}\n\n// Find all the elements with data-shortcut attribute, and use them to assign a shortcut key.\ncoverage.assign_shortkeys = function () {\n    document.querySelectorAll(\"[data-shortcut]\").forEach(element => {\n        document.addEventListener(\"keypress\", event => {\n            if (event.target.tagName.toLowerCase() === \"input\") {\n                return; // ignore keypress from search filter\n            }\n            if (event.key === element.dataset.shortcut) {\n                element.click();\n            }\n        });\n    });\n};\n\n// Create the events for the filter box.\ncoverage.wire_up_filter = function () {\n    // Populate the filter and hide100 inputs if there are saved values for them.\n    const saved_filter_value = localStorage.getItem(coverage.FILTER_STORAGE);\n    if (saved_filter_value) {\n        document.getElementById(\"filter\").value = saved_filter_value;\n    }\n    const saved_hide100_value = localStorage.getItem(coverage.HIDE100_STORAGE);\n    if (saved_hide100_value) {\n        document.getElementById(\"hide100\").checked = JSON.parse(saved_hide100_value);\n    }\n\n    // Cache elements.\n    const table = document.querySelector(\"table.index\");\n    const table_body_rows = table.querySelectorAll(\"tbody tr\");\n    const no_rows = document.getElementById(\"no_rows\");\n\n    // Observe filter keyevents.\n    const filter_handler = (event => {\n        // Keep running total of each metric, first index contains number of shown rows\n        const totals = new Array(table.rows[0].cells.length).fill(0);\n        // Accumulate the percentage as fraction\n        totals[totals.length - 1] = { \"numer\": 0, \"denom\": 0 };  // nosemgrep: eslint.detect-object-injection\n\n        var text = document.getElementById(\"filter\").value;\n        // Store filter value\n        localStorage.setItem(coverage.FILTER_STORAGE, text);\n        const casefold = (text === text.toLowerCase());\n        const hide100 = document.getElementById(\"hide100\").checked;\n        // Store hide value.\n        localStorage.setItem(coverage.HIDE100_STORAGE, JSON.stringify(hide100));\n\n        // Hide / show elements.\n        table_body_rows.forEach(row => {\n            var show = false;\n            // Check the text filter.\n            for (let column = 0; column < totals.length; column++) {\n                cell = row.cells[column];\n                if (cell.classList.contains(\"name\")) {\n                    var celltext = cell.textContent;\n                    if (casefold) {\n                        celltext = celltext.toLowerCase();\n                    }\n                    if (celltext.includes(text)) {\n                        show = true;\n                    }\n                }\n            }\n\n            // Check the \"hide covered\" filter.\n            if (show && hide100) {\n                const [numer, denom] = row.cells[row.cells.length - 1].dataset.ratio.split(\" \");\n                show = (numer !== denom);\n            }\n\n            if (!show) {\n                // hide\n                row.classList.add(\"hidden\");\n                return;\n            }\n\n            // show\n            row.classList.remove(\"hidden\");\n            totals[0]++;\n\n            for (let column = 0; column < totals.length; column++) {\n                // Accumulate dynamic totals\n                cell = row.cells[column]  // nosemgrep: eslint.detect-object-injection\n                if (cell.classList.contains(\"name\")) {\n                    continue;\n                }\n                if (column === totals.length - 1) {\n                    // Last column contains percentage\n                    const [numer, denom] = cell.dataset.ratio.split(\" \");\n                    totals[column][\"numer\"] += parseInt(numer, 10);  // nosemgrep: eslint.detect-object-injection\n                    totals[column][\"denom\"] += parseInt(denom, 10);  // nosemgrep: eslint.detect-object-injection\n                }\n                else {\n                    totals[column] += parseInt(cell.textContent, 10);  // nosemgrep: eslint.detect-object-injection\n                }\n            }\n        });\n\n        // Show placeholder if no rows will be displayed.\n        if (!totals[0]) {\n            // Show placeholder, hide table.\n            no_rows.style.display = \"block\";\n            table.style.display = \"none\";\n            return;\n        }\n\n        // Hide placeholder, show table.\n        no_rows.style.display = null;\n        table.style.display = null;\n\n        const footer = table.tFoot.rows[0];\n        // Calculate new dynamic sum values based on visible rows.\n        for (let column = 0; column < totals.length; column++) {\n            // Get footer cell element.\n            const cell = footer.cells[column];  // nosemgrep: eslint.detect-object-injection\n            if (cell.classList.contains(\"name\")) {\n                continue;\n            }\n\n            // Set value into dynamic footer cell element.\n            if (column === totals.length - 1) {\n                // Percentage column uses the numerator and denominator,\n                // and adapts to the number of decimal places.\n                const match = /\\.([0-9]+)/.exec(cell.textContent);\n                const places = match ? match[1].length : 0;\n                const { numer, denom } = totals[column];  // nosemgrep: eslint.detect-object-injection\n                cell.dataset.ratio = `${numer} ${denom}`;\n                // Check denom to prevent NaN if filtered files contain no statements\n                cell.textContent = denom\n                    ? `${(numer * 100 / denom).toFixed(places)}%`\n                    : `${(100).toFixed(places)}%`;\n            }\n            else {\n                cell.textContent = totals[column];  // nosemgrep: eslint.detect-object-injection\n            }\n        }\n    });\n\n    document.getElementById(\"filter\").addEventListener(\"input\", debounce(filter_handler));\n    document.getElementById(\"hide100\").addEventListener(\"input\", debounce(filter_handler));\n\n    // Trigger change event on setup, to force filter on page refresh\n    // (filter value may still be present).\n    document.getElementById(\"filter\").dispatchEvent(new Event(\"input\"));\n    document.getElementById(\"hide100\").dispatchEvent(new Event(\"input\"));\n};\ncoverage.FILTER_STORAGE = \"COVERAGE_FILTER_VALUE\";\ncoverage.HIDE100_STORAGE = \"COVERAGE_HIDE100_VALUE\";\n\n// Set up the click-to-sort columns.\ncoverage.wire_up_sorting = function () {\n    document.querySelectorAll(\"[data-sortable] th[aria-sort]\").forEach(\n        th => th.addEventListener(\"click\", e => sortColumn(e.target))\n    );\n\n    // Look for a localStorage item containing previous sort settings:\n    let th_id = \"file\", direction = \"ascending\";\n    const stored_list = localStorage.getItem(coverage.INDEX_SORT_STORAGE);\n    if (stored_list) {\n        ({th_id, direction} = JSON.parse(stored_list));\n    }\n    let by_region = false, region_direction = \"ascending\";\n    const sorted_by_region = localStorage.getItem(coverage.SORTED_BY_REGION);\n    if (sorted_by_region) {\n        ({\n            by_region,\n            region_direction\n        } = JSON.parse(sorted_by_region));\n    }\n\n    const region_id = \"region\";\n    if (by_region && document.getElementById(region_id)) {\n        direction = region_direction;\n    }\n    // If we are in a page that has a column with id of \"region\", sort on\n    // it if the last sort was by function or class.\n    let th;\n    if (document.getElementById(region_id)) {\n        th = document.getElementById(by_region ? region_id : th_id);\n    }\n    else {\n        th = document.getElementById(th_id);\n    }\n    th.setAttribute(\"aria-sort\", direction === \"ascending\" ? \"descending\" : \"ascending\");\n    th.click()\n};\n\ncoverage.INDEX_SORT_STORAGE = \"COVERAGE_INDEX_SORT_2\";\ncoverage.SORTED_BY_REGION = \"COVERAGE_SORT_REGION\";\n\n// Loaded on index.html\ncoverage.index_ready = function () {\n    coverage.assign_shortkeys();\n    coverage.wire_up_filter();\n    coverage.wire_up_sorting();\n\n    on_click(\".button_prev_file\", coverage.to_prev_file);\n    on_click(\".button_next_file\", coverage.to_next_file);\n\n    on_click(\".button_show_hide_help\", coverage.show_hide_help);\n};\n\n// -- pyfile stuff --\n\ncoverage.LINE_FILTERS_STORAGE = \"COVERAGE_LINE_FILTERS\";\n\ncoverage.pyfile_ready = function () {\n    // If we're directed to a particular line number, highlight the line.\n    var frag = location.hash;\n    if (frag.length > 2 && frag[1] === \"t\") {\n        document.querySelector(frag).closest(\".n\").classList.add(\"highlight\");\n        coverage.set_sel(parseInt(frag.substr(2), 10));\n    }\n    else {\n        coverage.set_sel(0);\n    }\n\n    on_click(\".button_toggle_run\", coverage.toggle_lines);\n    on_click(\".button_toggle_mis\", coverage.toggle_lines);\n    on_click(\".button_toggle_exc\", coverage.toggle_lines);\n    on_click(\".button_toggle_par\", coverage.toggle_lines);\n\n    on_click(\".button_next_chunk\", coverage.to_next_chunk_nicely);\n    on_click(\".button_prev_chunk\", coverage.to_prev_chunk_nicely);\n    on_click(\".button_top_of_page\", coverage.to_top);\n    on_click(\".button_first_chunk\", coverage.to_first_chunk);\n\n    on_click(\".button_prev_file\", coverage.to_prev_file);\n    on_click(\".button_next_file\", coverage.to_next_file);\n    on_click(\".button_to_index\", coverage.to_index);\n\n    on_click(\".button_show_hide_help\", coverage.show_hide_help);\n\n    coverage.filters = undefined;\n    try {\n        coverage.filters = localStorage.getItem(coverage.LINE_FILTERS_STORAGE);\n    } catch(err) {}\n\n    if (coverage.filters) {\n        coverage.filters = JSON.parse(coverage.filters);\n    }\n    else {\n        coverage.filters = {run: false, exc: true, mis: true, par: true};\n    }\n\n    for (cls in coverage.filters) {\n        coverage.set_line_visibilty(cls, coverage.filters[cls]);  // nosemgrep: eslint.detect-object-injection\n    }\n\n    coverage.assign_shortkeys();\n    coverage.init_scroll_markers();\n    coverage.wire_up_sticky_header();\n\n    document.querySelectorAll(\"[id^=ctxs]\").forEach(\n        cbox => cbox.addEventListener(\"click\", coverage.expand_contexts)\n    );\n\n    // Rebuild scroll markers when the window height changes.\n    window.addEventListener(\"resize\", coverage.build_scroll_markers);\n};\n\ncoverage.toggle_lines = function (event) {\n    const btn = event.target.closest(\"button\");\n    const category = btn.value\n    const show = !btn.classList.contains(\"show_\" + category);\n    coverage.set_line_visibilty(category, show);\n    coverage.build_scroll_markers();\n    coverage.filters[category] = show;\n    try {\n        localStorage.setItem(coverage.LINE_FILTERS_STORAGE, JSON.stringify(coverage.filters));\n    } catch(err) {}\n};\n\ncoverage.set_line_visibilty = function (category, should_show) {\n    const cls = \"show_\" + category;\n    const btn = document.querySelector(\".button_toggle_\" + category);\n    if (btn) {\n        if (should_show) {\n            document.querySelectorAll(\"#source .\" + category).forEach(e => e.classList.add(cls));\n            btn.classList.add(cls);\n        }\n        else {\n            document.querySelectorAll(\"#source .\" + category).forEach(e => e.classList.remove(cls));\n            btn.classList.remove(cls);\n        }\n    }\n};\n\n// Return the nth line div.\ncoverage.line_elt = function (n) {\n    return document.getElementById(\"t\" + n)?.closest(\"p\");\n};\n\n// Set the selection.  b and e are line numbers.\ncoverage.set_sel = function (b, e) {\n    // The first line selected.\n    coverage.sel_begin = b;\n    // The next line not selected.\n    coverage.sel_end = (e === undefined) ? b+1 : e;\n};\n\ncoverage.to_top = function () {\n    coverage.set_sel(0, 1);\n    coverage.scroll_window(0);\n};\n\ncoverage.to_first_chunk = function () {\n    coverage.set_sel(0, 1);\n    coverage.to_next_chunk();\n};\n\ncoverage.to_prev_file = function () {\n    window.location = document.getElementById(\"prevFileLink\").href;\n}\n\ncoverage.to_next_file = function () {\n    window.location = document.getElementById(\"nextFileLink\").href;\n}\n\ncoverage.to_index = function () {\n    location.href = document.getElementById(\"indexLink\").href;\n}\n\ncoverage.show_hide_help = function () {\n    const helpCheck = document.getElementById(\"help_panel_state\")\n    helpCheck.checked = !helpCheck.checked;\n}\n\n// Return a string indicating what kind of chunk this line belongs to,\n// or null if not a chunk.\ncoverage.chunk_indicator = function (line_elt) {\n    const classes = line_elt?.className;\n    if (!classes) {\n        return null;\n    }\n    const match = classes.match(/\\bshow_\\w+\\b/);\n    if (!match) {\n        return null;\n    }\n    return match[0];\n};\n\ncoverage.to_next_chunk = function () {\n    const c = coverage;\n\n    // Find the start of the next colored chunk.\n    var probe = c.sel_end;\n    var chunk_indicator, probe_line;\n    while (true) {\n        probe_line = c.line_elt(probe);\n        if (!probe_line) {\n            return;\n        }\n        chunk_indicator = c.chunk_indicator(probe_line);\n        if (chunk_indicator) {\n            break;\n        }\n        probe++;\n    }\n\n    // There's a next chunk, `probe` points to it.\n    var begin = probe;\n\n    // Find the end of this chunk.\n    var next_indicator = chunk_indicator;\n    while (next_indicator === chunk_indicator) {\n        probe++;\n        probe_line = c.line_elt(probe);\n        next_indicator = c.chunk_indicator(probe_line);\n    }\n    c.set_sel(begin, probe);\n    c.show_selection();\n};\n\ncoverage.to_prev_chunk = function () {\n    const c = coverage;\n\n    // Find the end of the prev colored chunk.\n    var probe = c.sel_begin-1;\n    var probe_line = c.line_elt(probe);\n    if (!probe_line) {\n        return;\n    }\n    var chunk_indicator = c.chunk_indicator(probe_line);\n    while (probe > 1 && !chunk_indicator) {\n        probe--;\n        probe_line = c.line_elt(probe);\n        if (!probe_line) {\n            return;\n        }\n        chunk_indicator = c.chunk_indicator(probe_line);\n    }\n\n    // There's a prev chunk, `probe` points to its last line.\n    var end = probe+1;\n\n    // Find the beginning of this chunk.\n    var prev_indicator = chunk_indicator;\n    while (prev_indicator === chunk_indicator) {\n        probe--;\n        if (probe <= 0) {\n            return;\n        }\n        probe_line = c.line_elt(probe);\n        prev_indicator = c.chunk_indicator(probe_line);\n    }\n    c.set_sel(probe+1, end);\n    c.show_selection();\n};\n\n// Returns 0, 1, or 2: how many of the two ends of the selection are on\n// the screen right now?\ncoverage.selection_ends_on_screen = function () {\n    if (coverage.sel_begin === 0) {\n        return 0;\n    }\n\n    const begin = coverage.line_elt(coverage.sel_begin);\n    const end = coverage.line_elt(coverage.sel_end-1);\n\n    return (\n        (checkVisible(begin) ? 1 : 0)\n        + (checkVisible(end) ? 1 : 0)\n    );\n};\n\ncoverage.to_next_chunk_nicely = function () {\n    if (coverage.selection_ends_on_screen() === 0) {\n        // The selection is entirely off the screen:\n        // Set the top line on the screen as selection.\n\n        // This will select the top-left of the viewport\n        // As this is most likely the span with the line number we take the parent\n        const line = document.elementFromPoint(0, 0).parentElement;\n        if (line.parentElement !== document.getElementById(\"source\")) {\n            // The element is not a source line but the header or similar\n            coverage.select_line_or_chunk(1);\n        }\n        else {\n            // We extract the line number from the id\n            coverage.select_line_or_chunk(parseInt(line.id.substring(1), 10));\n        }\n    }\n    coverage.to_next_chunk();\n};\n\ncoverage.to_prev_chunk_nicely = function () {\n    if (coverage.selection_ends_on_screen() === 0) {\n        // The selection is entirely off the screen:\n        // Set the lowest line on the screen as selection.\n\n        // This will select the bottom-left of the viewport\n        // As this is most likely the span with the line number we take the parent\n        const line = document.elementFromPoint(document.documentElement.clientHeight-1, 0).parentElement;\n        if (line.parentElement !== document.getElementById(\"source\")) {\n            // The element is not a source line but the header or similar\n            coverage.select_line_or_chunk(coverage.lines_len);\n        }\n        else {\n            // We extract the line number from the id\n            coverage.select_line_or_chunk(parseInt(line.id.substring(1), 10));\n        }\n    }\n    coverage.to_prev_chunk();\n};\n\n// Select line number lineno, or if it is in a colored chunk, select the\n// entire chunk\ncoverage.select_line_or_chunk = function (lineno) {\n    var c = coverage;\n    var probe_line = c.line_elt(lineno);\n    if (!probe_line) {\n        return;\n    }\n    var the_indicator = c.chunk_indicator(probe_line);\n    if (the_indicator) {\n        // The line is in a highlighted chunk.\n        // Search backward for the first line.\n        var probe = lineno;\n        var indicator = the_indicator;\n        while (probe > 0 && indicator === the_indicator) {\n            probe--;\n            probe_line = c.line_elt(probe);\n            if (!probe_line) {\n                break;\n            }\n            indicator = c.chunk_indicator(probe_line);\n        }\n        var begin = probe + 1;\n\n        // Search forward for the last line.\n        probe = lineno;\n        indicator = the_indicator;\n        while (indicator === the_indicator) {\n            probe++;\n            probe_line = c.line_elt(probe);\n            indicator = c.chunk_indicator(probe_line);\n        }\n\n        coverage.set_sel(begin, probe);\n    }\n    else {\n        coverage.set_sel(lineno);\n    }\n};\n\ncoverage.show_selection = function () {\n    // Highlight the lines in the chunk\n    document.querySelectorAll(\"#source .highlight\").forEach(e => e.classList.remove(\"highlight\"));\n    for (let probe = coverage.sel_begin; probe < coverage.sel_end; probe++) {\n        coverage.line_elt(probe).querySelector(\".n\").classList.add(\"highlight\");\n    }\n\n    coverage.scroll_to_selection();\n};\n\ncoverage.scroll_to_selection = function () {\n    // Scroll the page if the chunk isn't fully visible.\n    if (coverage.selection_ends_on_screen() < 2) {\n        const element = coverage.line_elt(coverage.sel_begin);\n        coverage.scroll_window(element.offsetTop - 60);\n    }\n};\n\ncoverage.scroll_window = function (to_pos) {\n    window.scroll({top: to_pos, behavior: \"smooth\"});\n};\n\ncoverage.init_scroll_markers = function () {\n    // Init some variables\n    coverage.lines_len = document.querySelectorAll(\"#source > p\").length;\n\n    // Build html\n    coverage.build_scroll_markers();\n};\n\ncoverage.build_scroll_markers = function () {\n    const temp_scroll_marker = document.getElementById(\"scroll_marker\")\n    if (temp_scroll_marker) temp_scroll_marker.remove();\n    // Don't build markers if the window has no scroll bar.\n    if (document.body.scrollHeight <= window.innerHeight) {\n        return;\n    }\n\n    const marker_scale = window.innerHeight / document.body.scrollHeight;\n    const line_height = Math.min(Math.max(3, window.innerHeight / coverage.lines_len), 10);\n\n    let previous_line = -99, last_mark, last_top;\n\n    const scroll_marker = document.createElement(\"div\");\n    scroll_marker.id = \"scroll_marker\";\n    document.getElementById(\"source\").querySelectorAll(\n        \"p.show_run, p.show_mis, p.show_exc, p.show_exc, p.show_par\"\n    ).forEach(element => {\n        const line_top = Math.floor(element.offsetTop * marker_scale);\n        const line_number = parseInt(element.querySelector(\".n a\").id.substr(1));\n\n        if (line_number === previous_line + 1) {\n            // If this solid missed block just make previous mark higher.\n            last_mark.style.height = `${line_top + line_height - last_top}px`;\n        }\n        else {\n            // Add colored line in scroll_marker block.\n            last_mark = document.createElement(\"div\");\n            last_mark.id = `m${line_number}`;\n            last_mark.classList.add(\"marker\");\n            last_mark.style.height = `${line_height}px`;\n            last_mark.style.top = `${line_top}px`;\n            scroll_marker.append(last_mark);\n            last_top = line_top;\n        }\n\n        previous_line = line_number;\n    });\n\n    // Append last to prevent layout calculation\n    document.body.append(scroll_marker);\n};\n\ncoverage.wire_up_sticky_header = function () {\n    const header = document.querySelector(\"header\");\n    const header_bottom = (\n        header.querySelector(\".content h2\").getBoundingClientRect().top -\n        header.getBoundingClientRect().top\n    );\n\n    function updateHeader() {\n        if (window.scrollY > header_bottom) {\n            header.classList.add(\"sticky\");\n        }\n        else {\n            header.classList.remove(\"sticky\");\n        }\n    }\n\n    window.addEventListener(\"scroll\", updateHeader);\n    updateHeader();\n};\n\ncoverage.expand_contexts = function (e) {\n    var ctxs = e.target.parentNode.querySelector(\".ctxs\");\n\n    if (!ctxs.classList.contains(\"expanded\")) {\n        var ctxs_text = ctxs.textContent;\n        var width = Number(ctxs_text[0]);\n        ctxs.textContent = \"\";\n        for (var i = 1; i < ctxs_text.length; i += width) {\n            key = ctxs_text.substring(i, i + width).trim();\n            ctxs.appendChild(document.createTextNode(contexts[key]));\n            ctxs.appendChild(document.createElement(\"br\"));\n        }\n        ctxs.classList.add(\"expanded\");\n    }\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    if (document.body.classList.contains(\"indexfile\")) {\n        coverage.index_ready();\n    }\n    else {\n        coverage.pyfile_ready();\n    }\n});\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/analyzer/venv/lib/python3.11/site-packages/urllib3/contrib/emscripten/emscripten_fetch_worker.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":12,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":110,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":5}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"let Status = {\n  SUCCESS_HEADER: -1,\n  SUCCESS_EOF: -2,\n  ERROR_TIMEOUT: -3,\n  ERROR_EXCEPTION: -4,\n};\n\nlet connections = {};\nlet nextConnectionID = 1;\nconst encoder = new TextEncoder();\n\nself.addEventListener(\"message\", async function (event) {\n  if (event.data.close) {\n    let connectionID = event.data.close;\n    delete connections[connectionID];\n    return;\n  } else if (event.data.getMore) {\n    let connectionID = event.data.getMore;\n    let { curOffset, value, reader, intBuffer, byteBuffer } =\n      connections[connectionID];\n    // if we still have some in buffer, then just send it back straight away\n    if (!value || curOffset >= value.length) {\n      // read another buffer if required\n      try {\n        let readResponse = await reader.read();\n\n        if (readResponse.done) {\n          // read everything - clear connection and return\n          delete connections[connectionID];\n          Atomics.store(intBuffer, 0, Status.SUCCESS_EOF);\n          Atomics.notify(intBuffer, 0);\n          // finished reading successfully\n          // return from event handler\n          return;\n        }\n        curOffset = 0;\n        connections[connectionID].value = readResponse.value;\n        value = readResponse.value;\n      } catch (error) {\n        console.log(\"Request exception:\", error);\n        let errorBytes = encoder.encode(error.message);\n        let written = errorBytes.length;\n        byteBuffer.set(errorBytes);\n        intBuffer[1] = written;\n        Atomics.store(intBuffer, 0, Status.ERROR_EXCEPTION);\n        Atomics.notify(intBuffer, 0);\n      }\n    }\n\n    // send as much buffer as we can\n    let curLen = value.length - curOffset;\n    if (curLen > byteBuffer.length) {\n      curLen = byteBuffer.length;\n    }\n    byteBuffer.set(value.subarray(curOffset, curOffset + curLen), 0);\n\n    Atomics.store(intBuffer, 0, curLen); // store current length in bytes\n    Atomics.notify(intBuffer, 0);\n    curOffset += curLen;\n    connections[connectionID].curOffset = curOffset;\n\n    return;\n  } else {\n    // start fetch\n    let connectionID = nextConnectionID;\n    nextConnectionID += 1;\n    const intBuffer = new Int32Array(event.data.buffer);\n    const byteBuffer = new Uint8Array(event.data.buffer, 8);\n    try {\n      const response = await fetch(event.data.url, event.data.fetchParams);\n      // return the headers first via textencoder\n      var headers = [];\n      for (const pair of response.headers.entries()) {\n        headers.push([pair[0], pair[1]]);\n      }\n      let headerObj = {\n        headers: headers,\n        status: response.status,\n        connectionID,\n      };\n      const headerText = JSON.stringify(headerObj);\n      let headerBytes = encoder.encode(headerText);\n      let written = headerBytes.length;\n      byteBuffer.set(headerBytes);\n      intBuffer[1] = written;\n      // make a connection\n      connections[connectionID] = {\n        reader: response.body.getReader(),\n        intBuffer: intBuffer,\n        byteBuffer: byteBuffer,\n        value: undefined,\n        curOffset: 0,\n      };\n      // set header ready\n      Atomics.store(intBuffer, 0, Status.SUCCESS_HEADER);\n      Atomics.notify(intBuffer, 0);\n      // all fetching after this goes through a new postmessage call with getMore\n      // this allows for parallel requests\n    } catch (error) {\n      console.log(\"Request exception:\", error);\n      let errorBytes = encoder.encode(error.message);\n      let written = errorBytes.length;\n      byteBuffer.set(errorBytes);\n      intBuffer[1] = written;\n      Atomics.store(intBuffer, 0, Status.ERROR_EXCEPTION);\n      Atomics.notify(intBuffer, 0);\n    }\n  }\n});\nself.postMessage({ inited: true });\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/.eslintrc.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/coverage/block-navigation.js","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":20,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":67,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":67,"column":55,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":63,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":68,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":87,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/coverage/lcov-report/block-navigation.js","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":20,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":67,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":67,"column":55,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":63,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":68,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":87,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/coverage/lcov-report/prettify.js","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ar' is already defined.","line":2,"column":3893,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":3895,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ar' is already defined.","line":2,"column":4061,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4063,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'at' is already defined.","line":2,"column":4089,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4091,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4604,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4606,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4665,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4667,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'am' is already defined.","line":2,"column":4670,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4672,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ag' is already defined.","line":2,"column":4691,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4693,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'af' is already defined.","line":2,"column":4789,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4791,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4854,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4856,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'am' is already defined.","line":2,"column":4859,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4861,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4949,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4951,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ag' is already defined.","line":2,"column":4970,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4972,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'V' is already defined.","line":2,"column":5216,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":5217,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'U' is already defined.","line":2,"column":5220,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":5221,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ae' is already defined.","line":2,"column":5244,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":5246,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":5512,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":5518,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":2,"column":5539,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":5547,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":2,"column":6621,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":2,"endColumn":6635,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[6638,6656],"text":"Object.prototype.hasOwnProperty.call(ag, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7590,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7591,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7610,7611],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7610,7610],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7592,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7593,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7612,7613],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7612,7612],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7594,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7595,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7614,7615],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7614,7614],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7601,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7602,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7621,7622],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7621,7621],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7616,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7617,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7636,7637],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7636,7636],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7628,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7629,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7648,7649],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7648,7648],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7637,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7638,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7657,7658],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7657,7657],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7639,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7640,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7659,7660],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7659,7659],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7641,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7642,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7661,7662],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7661,7661],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7647,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7648,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7667,7668],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7667,7667],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7649,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7650,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7669,7670],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7669,7669],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7651,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7652,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7671,7672],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7671,7671],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7658,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7659,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7678,7679],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7678,7678],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7673,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7674,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7693,7694],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7693,7693],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7685,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7686,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7705,7706],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7705,7705],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7694,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7695,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7714,7715],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7714,7714],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7696,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7697,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7716,7717],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7716,7716],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7698,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7699,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7718,7719],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7718,7718],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7704,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7705,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7724,7725],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7724,7724],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7713,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7714,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7733,7734],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7733,7733],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7730,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7731,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7750,7751],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7750,7750],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7736,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7737,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7756,7757],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7756,7756],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7745,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7746,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7765,7766],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7765,7765],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7762,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7763,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7782,7783],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7782,7782],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7826,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7827,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7846,7847],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7846,7846],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7835,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7836,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7855,7856],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7855,7855],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7852,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7853,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7872,7873],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7872,7872],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7858,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7859,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7878,7879],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7878,7878],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7867,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7868,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7887,7888],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7887,7887],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7884,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7885,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7904,7905],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7904,7904],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":7890,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7891,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7910,7911],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7910,7910],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":7899,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7900,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7919,7920],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7919,7919],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":7916,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7917,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7936,7937],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7936,7936],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7958,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7959,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7978,7979],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7978,7978],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7967,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7968,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7987,7988],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7987,7987],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7983,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7984,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8003,8004],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8003,8003],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7989,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7990,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8009,8010],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8009,8009],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7998,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7999,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8018,8019],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8018,8018],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8014,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8015,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8034,8035],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8034,8034],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8071,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8072,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8091,8092],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8091,8091],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8078,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8079,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8098,8099],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8098,8098],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8082,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8083,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8102,8103],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8102,8102],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8084,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8085,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8104,8105],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8104,8104],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8091,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8092,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8111,8112],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8111,8111],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\..","line":2,"column":9231,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9232,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9251,9252],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9251,9251],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":9235,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9236,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9255,9256],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9255,9255],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":9237,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9238,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9257,9258],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9257,9257],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":9239,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9240,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9259,9260],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9259,9259],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":9241,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9242,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9261,9262],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9261,9261],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\#.","line":2,"column":9243,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9244,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9263,9264],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9263,9263],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":9523,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":9529,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'Y' is already defined.","line":2,"column":10812,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":10813,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'navigator' is not defined.","line":2,"column":11008,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":11017,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ae' is assigned a value but never used.","line":2,"column":11414,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11416,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'af' is assigned a value but never used.","line":2,"column":11438,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11440,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ag' is assigned a value but never used.","line":2,"column":11471,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11473,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'W' is already defined.","line":2,"column":11501,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":11502,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":2,"column":11964,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":2,"endColumn":11978,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[11982,11999],"text":"Object.prototype.hasOwnProperty.call(t, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":11998,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":12004,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":2,"column":12097,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":2,"endColumn":12111,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[12115,12132],"text":"Object.prototype.hasOwnProperty.call(t, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\!.","line":2,"column":12253,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12254,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12273,12274],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12273,12273],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":12269,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12270,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12289,12290],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12289,12289],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12685,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12686,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12705,12706],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12705,12705],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12689,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12690,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12709,12710],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12709,12709],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12693,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12694,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12713,12714],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12713,12713],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12697,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12698,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12717,12718],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12717,12717],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12701,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12702,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12721,12722],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12721,12721],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12705,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12706,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12725,12726],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12725,12725],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12835,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12836,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12855,12856],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12855,12855],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12837,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12838,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12857,12858],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12857,12857],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12849,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12850,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12869,12870],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12869,12869],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12851,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12852,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12871,12872],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12871,12871],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":12855,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12856,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12875,12876],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12875,12875],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":12881,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12882,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12901,12902],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12901,12901],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12913,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12914,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12933,12934],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12933,12933],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12918,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12919,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12938,12939],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12938,12938],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12923,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12924,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12943,12944],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12943,12943],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12954,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12955,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12974,12975],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12974,12974],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12959,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12960,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12979,12980],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12979,12979],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12964,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12965,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12984,12985],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12984,12984],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12998,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12999,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13018,13019],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13018,13018],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13000,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13001,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13020,13021],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13020,13020],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13038,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13039,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13058,13059],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13058,13058],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13043,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13044,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13063,13064],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13063,13063],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13048,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13049,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13068,13069],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13068,13068],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13080,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13081,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13100,13101],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13100,13100],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13085,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13086,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13105,13106],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13105,13105],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13090,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13091,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13110,13111],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13110,13110],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13125,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13126,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13145,13146],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13145,13145],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13127,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13128,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13147,13148],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13147,13147],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":14225,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14231,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":2,"column":14293,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14301,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":2,"column":14462,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14470,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ae' is assigned a value but never used.","line":2,"column":14757,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14759,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":14799,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14805,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":15491,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15497,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":15515,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15521,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":15536,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15542,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15786,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15788,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15809,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15811,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15835,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15837,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15875,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15877,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\!.","line":2,"column":15892,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":15893,"suggestions":[{"messageId":"removeEscape","fix":{"range":[15912,15913],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[15912,15912],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":15908,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":15909,"suggestions":[{"messageId":"removeEscape","fix":{"range":[15928,15929],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[15928,15928],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15918,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15920,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16362,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16364,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16410,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16412,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16453,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16455,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16498,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16500,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16551,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16553,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16574,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16576,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16597,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16599,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16646,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16648,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16661,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16662,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16681,16682],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16681,16681],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16676,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16677,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16696,16697],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16696,16696],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16708,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16709,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16728,16729],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16728,16728],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16719,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16721,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16734,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16735,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16754,16755],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16754,16754],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16749,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16750,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16769,16770],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16769,16769],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16781,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16782,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16801,16802],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16801,16801],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":2,"column":16817,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16818,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16837,16838],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16837,16837],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16819,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16820,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16839,16840],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16839,16839],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16821,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16822,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16841,16842],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16841,16841],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16833,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16835,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\!.","line":2,"column":16860,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16861,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16880,16881],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16880,16880],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":16991,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16992,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17011,17012],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17011,17011],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17026,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17028,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":17059,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17060,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17079,17080],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17079,17079],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17079,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17081,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17111,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17113,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17161,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17163,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17203,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17205,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":17256,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17257,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17276,17277],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17276,17276],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17285,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17287,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":17311,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17312,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17331,17332],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17331,17331],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":17313,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17314,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17333,17334],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17333,17333],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17331,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17333,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17354,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17356,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17380,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17382,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":17435,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17436,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17455,17456],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17455,17455],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17477,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17479,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17500,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17502,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17526,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17528,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":2,"column":17543,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17544,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17563,17564],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17563,17563],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":17545,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17546,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17565,17566],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17565,17565],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":17547,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17548,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17567,17568],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17567,17567],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/coverage/lcov-report/sorter.js","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":12,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":28,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":29,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":46,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":114,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":114,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":196,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/coverage/prettify.js","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ar' is already defined.","line":2,"column":3893,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":3895,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ar' is already defined.","line":2,"column":4061,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4063,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'at' is already defined.","line":2,"column":4089,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4091,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4604,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4606,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4665,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4667,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'am' is already defined.","line":2,"column":4670,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4672,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ag' is already defined.","line":2,"column":4691,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4693,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'af' is already defined.","line":2,"column":4789,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4791,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4854,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4856,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'am' is already defined.","line":2,"column":4859,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4861,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ak' is already defined.","line":2,"column":4949,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4951,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ag' is already defined.","line":2,"column":4970,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":4972,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'V' is already defined.","line":2,"column":5216,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":5217,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'U' is already defined.","line":2,"column":5220,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":5221,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'ae' is already defined.","line":2,"column":5244,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":5246,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":5512,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":5518,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":2,"column":5539,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":5547,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":2,"column":6621,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":2,"endColumn":6635,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[6638,6656],"text":"Object.prototype.hasOwnProperty.call(ag, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7590,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7591,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7610,7611],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7610,7610],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7592,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7593,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7612,7613],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7612,7612],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7594,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7595,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7614,7615],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7614,7614],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7601,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7602,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7621,7622],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7621,7621],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7616,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7617,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7636,7637],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7636,7636],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7628,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7629,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7648,7649],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7648,7648],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7637,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7638,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7657,7658],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7657,7657],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7639,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7640,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7659,7660],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7659,7659],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7641,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7642,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7661,7662],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7661,7661],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7647,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7648,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7667,7668],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7667,7667],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7649,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7650,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7669,7670],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7669,7669],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7651,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7652,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7671,7672],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7671,7671],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7658,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7659,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7678,7679],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7678,7678],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7673,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7674,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7693,7694],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7693,7693],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7685,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7686,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7705,7706],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7705,7705],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7694,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7695,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7714,7715],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7714,7714],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7696,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7697,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7716,7717],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7716,7716],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7698,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7699,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7718,7719],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7718,7718],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7704,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7705,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7724,7725],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7724,7724],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7713,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7714,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7733,7734],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7733,7733],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7730,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7731,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7750,7751],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7750,7750],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7736,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7737,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7756,7757],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7756,7756],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7745,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7746,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7765,7766],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7765,7765],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7762,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7763,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7782,7783],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7782,7782],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7826,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7827,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7846,7847],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7846,7846],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7835,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7836,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7855,7856],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7855,7855],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7852,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7853,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7872,7873],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7872,7872],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7858,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7859,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7878,7879],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7878,7878],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7867,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7868,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7887,7888],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7887,7887],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7884,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7885,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7904,7905],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7904,7904],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":7890,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7891,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7910,7911],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7910,7910],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":7899,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7900,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7919,7920],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7919,7919],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":7916,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7917,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7936,7937],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7936,7936],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7958,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7959,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7978,7979],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7978,7978],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7967,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7968,"suggestions":[{"messageId":"removeEscape","fix":{"range":[7987,7988],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[7987,7987],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":7983,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7984,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8003,8004],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8003,8003],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7989,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7990,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8009,8010],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8009,8009],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":7998,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":7999,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8018,8019],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8018,8018],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8014,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8015,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8034,8035],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8034,8034],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8071,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8072,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8091,8092],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8091,8091],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8078,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8079,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8098,8099],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8098,8098],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8082,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8083,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8102,8103],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8102,8102],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8084,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8085,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8104,8105],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8104,8104],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":8091,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":8092,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8111,8112],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8111,8111],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\..","line":2,"column":9231,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9232,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9251,9252],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9251,9251],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":9235,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9236,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9255,9256],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9255,9255],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":9237,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9238,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9257,9258],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9257,9257],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\`.","line":2,"column":9239,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9240,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9259,9260],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9259,9259],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":9241,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9242,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9261,9262],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9261,9261],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\#.","line":2,"column":9243,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":9244,"suggestions":[{"messageId":"removeEscape","fix":{"range":[9263,9264],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[9263,9263],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":9523,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":9529,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'Y' is already defined.","line":2,"column":10812,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":10813,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'navigator' is not defined.","line":2,"column":11008,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":11017,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ae' is assigned a value but never used.","line":2,"column":11414,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11416,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'af' is assigned a value but never used.","line":2,"column":11438,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11440,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ag' is assigned a value but never used.","line":2,"column":11471,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11473,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-redeclare","severity":2,"message":"'W' is already defined.","line":2,"column":11501,"nodeType":"Identifier","messageId":"redeclared","endLine":2,"endColumn":11502,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":2,"column":11964,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":2,"endColumn":11978,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[11982,11999],"text":"Object.prototype.hasOwnProperty.call(t, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":11998,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":12004,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":2,"column":12097,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":2,"endColumn":12111,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[12115,12132],"text":"Object.prototype.hasOwnProperty.call(t, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\!.","line":2,"column":12253,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12254,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12273,12274],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12273,12273],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":12269,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12270,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12289,12290],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12289,12289],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12685,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12686,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12705,12706],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12705,12705],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12689,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12690,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12709,12710],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12709,12709],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12693,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12694,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12713,12714],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12713,12713],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12697,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12698,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12717,12718],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12717,12717],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12701,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12702,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12721,12722],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12721,12721],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12705,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12706,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12725,12726],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12725,12725],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12835,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12836,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12855,12856],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12855,12855],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12837,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12838,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12857,12858],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12857,12857],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12849,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12850,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12869,12870],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12869,12869],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12851,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12852,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12871,12872],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12871,12871],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":12855,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12856,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12875,12876],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12875,12875],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":12881,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12882,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12901,12902],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12901,12901],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12913,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12914,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12933,12934],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12933,12933],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12918,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12919,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12938,12939],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12938,12938],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12923,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12924,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12943,12944],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12943,12943],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12954,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12955,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12974,12975],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12974,12974],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12959,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12960,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12979,12980],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12979,12979],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":12964,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12965,"suggestions":[{"messageId":"removeEscape","fix":{"range":[12984,12985],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[12984,12984],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":12998,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":12999,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13018,13019],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13018,13018],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13000,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13001,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13020,13021],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13020,13020],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13038,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13039,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13058,13059],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13058,13058],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13043,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13044,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13063,13064],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13063,13063],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13048,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13049,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13068,13069],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13068,13068],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13080,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13081,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13100,13101],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13100,13100],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13085,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13086,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13105,13106],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13105,13105],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13090,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13091,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13110,13111],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13110,13110],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":13125,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13126,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13145,13146],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13145,13145],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":13127,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":13128,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13147,13148],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13147,13147],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":14225,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14231,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":2,"column":14293,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14301,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":2,"column":14462,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14470,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ae' is assigned a value but never used.","line":2,"column":14757,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14759,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":14799,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":14805,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":15491,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15497,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":15515,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15521,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":2,"column":15536,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15542,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15786,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15788,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15809,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15811,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15835,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15837,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15875,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15877,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\!.","line":2,"column":15892,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":15893,"suggestions":[{"messageId":"removeEscape","fix":{"range":[15912,15913],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[15912,15912],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":15908,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":15909,"suggestions":[{"messageId":"removeEscape","fix":{"range":[15928,15929],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[15928,15928],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":15918,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":15920,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16362,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16364,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16410,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16412,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16453,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16455,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16498,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16500,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16551,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16553,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16574,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16576,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16597,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16599,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16646,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16648,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16661,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16662,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16681,16682],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16681,16681],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16676,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16677,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16696,16697],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16696,16696],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16708,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16709,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16728,16729],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16728,16728],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16719,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16721,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16734,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16735,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16754,16755],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16754,16754],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16749,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16750,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16769,16770],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16769,16769],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16781,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16782,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16801,16802],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16801,16801],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":2,"column":16817,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16818,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16837,16838],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16837,16837],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":16819,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16820,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16839,16840],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16839,16839],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":16821,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16822,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16841,16842],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16841,16841],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":16833,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":16835,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\!.","line":2,"column":16860,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16861,"suggestions":[{"messageId":"removeEscape","fix":{"range":[16880,16881],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[16880,16880],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":16991,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":16992,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17011,17012],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17011,17011],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17026,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17028,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":17059,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17060,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17079,17080],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17079,17079],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17079,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17081,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17111,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17113,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17161,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17163,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17203,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17205,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":17256,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17257,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17276,17277],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17276,17276],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17285,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17287,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":17311,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17312,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17331,17332],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17331,17331],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":17313,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17314,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17333,17334],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17333,17333],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17331,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17333,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17354,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17356,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17380,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17382,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":2,"column":17435,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17436,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17455,17456],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17455,17455],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17477,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17479,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17500,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17502,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'PR' is not defined.","line":2,"column":17526,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":17528,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":2,"column":17543,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17544,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17563,17564],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17563,17563],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":2,"column":17545,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17546,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17565,17566],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17565,17565],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\'.","line":2,"column":17547,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":17548,"suggestions":[{"messageId":"removeEscape","fix":{"range":[17567,17568],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[17567,17567],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/coverage/sorter.js","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":12,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":28,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":29,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":46,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":114,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":114,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":196,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/jest.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/CloudRunClient.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/NotificationService.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'payload' is defined but never used.","line":145,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":145,"endColumn":43},{"ruleId":"no-unused-vars","severity":2,"message":"'notification' is defined but never used.","line":156,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":156,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'notification' is defined but never used.","line":167,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":167,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":178,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":178,"endColumn":48}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Servi√ßo para gerenciar notifica√ß√µes do sistema\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotificationService = void 0;\nclass NotificationService {\n    constructor(projectId) {\n        this.projectId = projectId;\n    }\n    /**\n     * Envia notifica√ß√£o para um usu√°rio espec√≠fico\n     */\n    async sendNotification(payload) {\n        try {\n            console.log(`Enviando notifica√ß√£o para usu√°rio ${payload.userId}:`, {\n                type: payload.type,\n                title: payload.title,\n                message: payload.message,\n                priority: payload.priority || 'normal'\n            });\n            // Aqui seria implementada a l√≥gica real de envio\n            // Por exemplo, usando Firebase Cloud Messaging, SendGrid, etc.\n            // Simular envio bem-sucedido\n            await this.simulateNotificationSend(payload);\n            console.log(`Notifica√ß√£o enviada com sucesso para ${payload.userId}`);\n        }\n        catch (error) {\n            console.error('Erro ao enviar notifica√ß√£o:', error);\n            throw new Error(`Falha ao enviar notifica√ß√£o: ${error}`);\n        }\n    }\n    /**\n     * Envia notifica√ß√£o por email\n     */\n    async sendEmailNotification(notification) {\n        try {\n            console.log(`Enviando email para: ${notification.to.join(', ')}`);\n            console.log(`Assunto: ${notification.subject}`);\n            // Aqui seria implementada a integra√ß√£o com servi√ßo de email\n            // Por exemplo, SendGrid, AWS SES, etc.\n            await this.simulateEmailSend(notification);\n            console.log('Email enviado com sucesso');\n        }\n        catch (error) {\n            console.error('Erro ao enviar email:', error);\n            throw new Error(`Falha ao enviar email: ${error}`);\n        }\n    }\n    /**\n     * Envia notifica√ß√£o push\n     */\n    async sendPushNotification(notification) {\n        try {\n            console.log(`Enviando push notification para ${notification.tokens.length} dispositivos`);\n            console.log(`T√≠tulo: ${notification.title}`);\n            console.log(`Mensagem: ${notification.body}`);\n            // Aqui seria implementada a integra√ß√£o com Firebase Cloud Messaging\n            await this.simulatePushSend(notification);\n            console.log('Push notification enviado com sucesso');\n        }\n        catch (error) {\n            console.error('Erro ao enviar push notification:', error);\n            throw new Error(`Falha ao enviar push notification: ${error}`);\n        }\n    }\n    /**\n     * Notifica sobre conclus√£o de an√°lise\n     */\n    async notifyAnalysisComplete(userId, organizationId, analysisId, documentName, results) {\n        const payload = {\n            userId,\n            organizationId,\n            type: 'analysis_complete',\n            title: 'An√°lise Conclu√≠da',\n            message: `A an√°lise do documento \"${documentName}\" foi conclu√≠da com sucesso.`,\n            data: {\n                analysisId,\n                documentName,\n                conformityScore: results.conformity_score,\n                confidence: results.confidence\n            },\n            priority: 'normal'\n        };\n        await this.sendNotification(payload);\n    }\n    /**\n     * Notifica sobre falha na an√°lise\n     */\n    async notifyAnalysisFailure(userId, organizationId, analysisId, documentName, error) {\n        const payload = {\n            userId,\n            organizationId,\n            type: 'analysis_failed',\n            title: 'Falha na An√°lise',\n            message: `A an√°lise do documento \"${documentName}\" falhou. Erro: ${error}`,\n            data: {\n                analysisId,\n                documentName,\n                error\n            },\n            priority: 'high'\n        };\n        await this.sendNotification(payload);\n    }\n    /**\n     * Notifica sobre upload de documento\n     */\n    async notifyDocumentUploaded(userId, organizationId, documentId, documentName) {\n        const payload = {\n            userId,\n            organizationId,\n            type: 'document_uploaded',\n            title: 'Documento Carregado',\n            message: `O documento \"${documentName}\" foi carregado com sucesso e est√° sendo processado.`,\n            data: {\n                documentId,\n                documentName\n            },\n            priority: 'low'\n        };\n        await this.sendNotification(payload);\n    }\n    /**\n     * Envia alerta do sistema\n     */\n    async sendSystemAlert(userIds, organizationId, title, message, data) {\n        const promises = userIds.map(userId => {\n            const payload = {\n                userId,\n                organizationId,\n                type: 'system_alert',\n                title,\n                message,\n                data,\n                priority: 'urgent'\n            };\n            return this.sendNotification(payload);\n        });\n        await Promise.all(promises);\n    }\n    /**\n     * Simula envio de notifica√ß√£o (para desenvolvimento/teste)\n     */\n    async simulateNotificationSend(payload) {\n        // Simular delay de rede\n        await new Promise(resolve => setTimeout(resolve, 100));\n        // Simular falha ocasional (5% de chance)\n        if (Math.random() < 0.05) {\n            throw new Error('Falha simulada no envio de notifica√ß√£o');\n        }\n    }\n    /**\n     * Simula envio de email (para desenvolvimento/teste)\n     */\n    async simulateEmailSend(notification) {\n        // Simular delay de rede\n        await new Promise(resolve => setTimeout(resolve, 200));\n        // Simular falha ocasional (3% de chance)\n        if (Math.random() < 0.03) {\n            throw new Error('Falha simulada no envio de email');\n        }\n    }\n    /**\n     * Simula envio de push notification (para desenvolvimento/teste)\n     */\n    async simulatePushSend(notification) {\n        // Simular delay de rede\n        await new Promise(resolve => setTimeout(resolve, 150));\n        // Simular falha ocasional (2% de chance)\n        if (Math.random() < 0.02) {\n            throw new Error('Falha simulada no envio de push notification');\n        }\n    }\n    /**\n     * Obt√©m prefer√™ncias de notifica√ß√£o do usu√°rio\n     */\n    async getUserNotificationPreferences(userId) {\n        // Aqui seria implementada a busca das prefer√™ncias no banco de dados\n        // Por enquanto, retorna prefer√™ncias padr√£o\n        return {\n            email: true,\n            push: true,\n            sms: false,\n            types: ['analysis_complete', 'analysis_failed', 'system_alert']\n        };\n    }\n    /**\n     * Atualiza prefer√™ncias de notifica√ß√£o do usu√°rio\n     */\n    async updateUserNotificationPreferences(userId, preferences) {\n        console.log(`Atualizando prefer√™ncias de notifica√ß√£o para usu√°rio ${userId}:`, preferences);\n        // Aqui seria implementada a atualiza√ß√£o no banco de dados\n        // Por enquanto, apenas log\n    }\n}\nexports.NotificationService = NotificationService;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/TaskQueueService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/analysis-config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":133,"column":56,"nodeType":"Identifier","messageId":"undef","endLine":133,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":218,"column":56,"nodeType":"Identifier","messageId":"undef","endLine":218,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":260,"column":56,"nodeType":"Identifier","messageId":"undef","endLine":260,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":303,"column":58,"nodeType":"Identifier","messageId":"undef","endLine":303,"endColumn":59},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":304,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":304,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":305,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":305,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":306,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":306,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":307,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":307,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":333,"column":81,"nodeType":"Identifier","messageId":"undef","endLine":333,"endColumn":82},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":334,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":334,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":335,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":335,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":336,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":336,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":381,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":381,"endColumn":31}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Analysis Configuration API - CORE DIFFERENTIATOR\n * Manage organization-specific analysis configurations\n * LicitaReview Cloud Functions\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.analysisConfigApi = void 0;\nconst https_1 = require(\"firebase-functions/v2/https\");\nconst express_1 = __importDefault(require(\"express\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst express_rate_limit_1 = __importDefault(require(\"express-rate-limit\"));\nconst uuid_1 = require(\"uuid\");\nconst firebase_1 = require(\"../config/firebase\");\nconst types_1 = require(\"../types\");\nconst auth_1 = require(\"../middleware/auth\");\nconst utils_1 = require(\"../utils\");\nconst config_1 = require(\"../config\");\nconst app = (0, express_1.default)();\n// Middleware\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)({ origin: config_1.config.corsOrigin }));\napp.use(express_1.default.json({ limit: config_1.config.maxRequestSize }));\n// Rate limiting\nconst limiter = (0, express_rate_limit_1.default)({\n    windowMs: config_1.config.rateLimitWindowMs,\n    max: config_1.config.rateLimitMax,\n    message: { error: \"Too many requests, please try again later\" },\n    standardHeaders: true,\n    legacyHeaders: false\n});\napp.use(limiter);\n// Request ID middleware\napp.use((req, res, next) => {\n    req.requestId = (0, utils_1.generateRequestId)();\n    res.setHeader(\"X-Request-ID\", req.requestId);\n    next();\n});\n// Authentication middleware\napp.use(auth_1.authenticateUser);\napp.use(auth_1.requireOrganization);\n/**\n * GET /configs\n * List organization configurations (admin only)\n */\napp.get(\"/\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_READ]), async (req, res) => {\n    try {\n        const query = (0, utils_1.validateQueryParams)(utils_1.PaginationSchema, req);\n        // Super admin can see all configs, others only their org\n        let firestoreQuery = firebase_1.collections.configs;\n        if (!req.user.roles.includes(\"super_admin\")) {\n            firestoreQuery = firestoreQuery.where(\"organizationId\", \"==\", req.user.organizationId);\n        }\n        // Apply sorting\n        firestoreQuery = firestoreQuery.orderBy(\"updatedAt\", query.sortOrder);\n        // Count total\n        const countQuery = await firestoreQuery.count().get();\n        const total = countQuery.data().count;\n        // Apply pagination\n        const offset = (query.page - 1) * query.limit;\n        firestoreQuery = firestoreQuery.offset(offset).limit(query.limit);\n        const snapshot = await firestoreQuery.get();\n        const configs = snapshot.docs.map(doc => {\n            const data = Object.assign({ id: doc.id }, doc.data());\n            return (0, types_1.createConfigSummary)(data);\n        });\n        const totalPages = Math.ceil(total / query.limit);\n        res.json({\n            success: true,\n            data: configs,\n            pagination: {\n                page: query.page,\n                limit: query.limit,\n                total,\n                totalPages,\n                hasNext: query.page < totalPages,\n                hasPrev: query.page > 1\n            },\n            timestamp: new Date().toISOString(),\n            requestId: req.requestId\n        });\n    }\n    catch (error) {\n        console.error(\"Error listing configs:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while listing configs\", null, req.requestId));\n        }\n    }\n});\n/**\n * GET /configs/current\n * Get current organization's configuration\n */\napp.get(\"/current\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_READ]), async (req, res) => {\n    try {\n        const snapshot = await firebase_1.collections.configs\n            .where(\"organizationId\", \"==\", req.user.organizationId)\n            .where(\"isActive\", \"==\", true)\n            .orderBy(\"version\", \"desc\")\n            .limit(1)\n            .get();\n        if (snapshot.empty) {\n            // Create default config if none exists\n            const defaultConfig = (0, types_1.createDefaultConfig)(req.user.organizationId, req.user.organizationId, // Use org ID as name for now\n            types_1.AnalysisPreset.STANDARD, req.user.uid);\n            const configWithId = Object.assign({ id: (0, uuid_1.v4)() }, defaultConfig);\n            await firebase_1.collections.configs.doc(configWithId.id).set(configWithId);\n            res.json((0, utils_1.createSuccessResponse)(configWithId, \"Default configuration created\", req.requestId));\n            return;\n        }\n        const configDoc = snapshot.docs[0];\n        const config = Object.assign({ id: configDoc.id }, configDoc.data());\n        res.json((0, utils_1.createSuccessResponse)(config, undefined, req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error getting current config:\", error);\n        res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while getting config\", null, req.requestId));\n    }\n});\n/**\n * GET /configs/:id\n * Get configuration by ID\n */\napp.get(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_READ]), (0, auth_1.validateOrganizationAccess)(\"organizationId\"), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(z.object({ id: utils_1.UUIDSchema }), req.params);\n        const configDoc = await firebase_1.collections.configs.doc(id).get();\n        if (!configDoc.exists) {\n            res.status(404).json((0, utils_1.createErrorResponse)(\"Configuration not found\", { configId: id }, req.requestId));\n            return;\n        }\n        const config = Object.assign({ id: configDoc.id }, configDoc.data());\n        // Verify organization access\n        if (config.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Access denied to configuration\", { configId: id }, req.requestId));\n            return;\n        }\n        res.json((0, utils_1.createSuccessResponse)(config, undefined, req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error getting config:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while getting config\", null, req.requestId));\n        }\n    }\n});\n/**\n * POST /configs\n * Create new organization configuration\n */\napp.post(\"/\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_WRITE]), async (req, res) => {\n    try {\n        const configData = (0, utils_1.validateRequestBody)(types_1.CreateConfigRequestSchema)(req);\n        // Validate organization access\n        if (configData.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Cannot create config for different organization\", { requestedOrg: configData.organizationId, userOrg: req.user.organizationId }, req.requestId));\n            return;\n        }\n        // Check if active config already exists\n        const existingSnapshot = await firebase_1.collections.configs\n            .where(\"organizationId\", \"==\", configData.organizationId)\n            .where(\"isActive\", \"==\", true)\n            .get();\n        if (!existingSnapshot.empty && !req.body.allowMultiple) {\n            res.status(409).json((0, utils_1.createErrorResponse)(\"Active configuration already exists for organization\", {\n                existingConfigId: existingSnapshot.docs[0].id,\n                suggestion: \"Update existing config or set allowMultiple=true\"\n            }, req.requestId));\n            return;\n        }\n        const config = Object.assign(Object.assign({ id: (0, uuid_1.v4)() }, configData), { version: 1, isActive: true, createdAt: new Date(), updatedAt: new Date() });\n        // Validate complete config\n        const validation = types_1.OrganizationConfigSchema.safeParse(config);\n        if (!validation.success) {\n            res.status(400).json((0, utils_1.createErrorResponse)(\"Invalid configuration data\", validation.error.errors, req.requestId));\n            return;\n        }\n        // Deactivate existing configs if creating new active one\n        if (config.isActive && !existingSnapshot.empty) {\n            const batch = firebase_1.collections.configs.firestore.batch();\n            existingSnapshot.docs.forEach(doc => {\n                batch.update(doc.ref, { isActive: false, updatedAt: new Date() });\n            });\n            await batch.commit();\n        }\n        // Save new config\n        await firebase_1.collections.configs.doc(config.id).set(config);\n        res.status(201).json((0, utils_1.createSuccessResponse)(config, \"Configuration created successfully\", req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error creating config:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while creating config\", null, req.requestId));\n        }\n    }\n});\n/**\n * PUT /configs/:id\n * Update configuration\n */\napp.put(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_WRITE]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(z.object({ id: utils_1.UUIDSchema }), req.params);\n        const updateData = (0, utils_1.validateRequestBody)(types_1.UpdateConfigRequestSchema)(req);\n        const configDoc = await firebase_1.collections.configs.doc(id).get();\n        if (!configDoc.exists) {\n            res.status(404).json((0, utils_1.createErrorResponse)(\"Configuration not found\", { configId: id }, req.requestId));\n            return;\n        }\n        const existingConfig = Object.assign({ id: configDoc.id }, configDoc.data());\n        // Verify organization access\n        if (existingConfig.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Access denied to configuration\", { configId: id }, req.requestId));\n            return;\n        }\n        // Prepare updated config\n        const updatedConfig = Object.assign(Object.assign(Object.assign({}, existingConfig), updateData), { id: existingConfig.id, organizationId: existingConfig.organizationId, version: existingConfig.version + 1, updatedAt: new Date(), lastModifiedBy: req.user.uid });\n        // Validate updated config\n        const validation = types_1.OrganizationConfigSchema.safeParse(updatedConfig);\n        if (!validation.success) {\n            res.status(400).json((0, utils_1.createErrorResponse)(\"Invalid configuration update data\", validation.error.errors, req.requestId));\n            return;\n        }\n        // Update in Firestore\n        await configDoc.ref.set(updatedConfig);\n        res.json((0, utils_1.createSuccessResponse)(updatedConfig, \"Configuration updated successfully\", req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error updating config:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while updating config\", null, req.requestId));\n        }\n    }\n});\n/**\n * POST /configs/:id/clone\n * Clone configuration to new version\n */\napp.post(\"/:id/clone\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_WRITE]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(z.object({ id: utils_1.UUIDSchema }), req.params);\n        const configDoc = await firebase_1.collections.configs.doc(id).get();\n        if (!configDoc.exists) {\n            res.status(404).json((0, utils_1.createErrorResponse)(\"Configuration not found\", { configId: id }, req.requestId));\n            return;\n        }\n        const sourceConfig = Object.assign({ id: configDoc.id }, configDoc.data());\n        // Verify organization access\n        if (sourceConfig.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Access denied to configuration\", { configId: id }, req.requestId));\n            return;\n        }\n        // Create cloned config\n        const clonedConfig = Object.assign(Object.assign({}, sourceConfig), { id: (0, uuid_1.v4)(), version: sourceConfig.version + 1, isActive: false, createdAt: new Date(), updatedAt: new Date(), createdBy: req.user.uid, lastModifiedBy: req.user.uid });\n        // Save cloned config\n        await firebase_1.collections.configs.doc(clonedConfig.id).set(clonedConfig);\n        res.status(201).json((0, utils_1.createSuccessResponse)(clonedConfig, \"Configuration cloned successfully\", req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error cloning config:\", error);\n        res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while cloning config\", null, req.requestId));\n    }\n});\n/**\n * GET /presets\n * Get available analysis presets\n */\napp.get(\"/presets\", (req, res) => {\n    const presets = Object.entries(types_1.PRESET_WEIGHTS).map(([preset, weights]) => ({\n        preset: preset,\n        weights,\n        name: preset.charAt(0).toUpperCase() + preset.slice(1).toLowerCase(),\n        description: getPresetDescription(preset)\n    }));\n    res.json((0, utils_1.createSuccessResponse)(presets, undefined, req.requestId));\n});\n/**\n * POST /validate-weights\n * Validate analysis weights\n */\napp.post(\"/validate-weights\", (req, res) => {\n    try {\n        const weights = (0, utils_1.validateRequestBody)(z.object({\n            structural: z.number().min(0).max(100),\n            legal: z.number().min(0).max(100),\n            clarity: z.number().min(0).max(100),\n            abnt: z.number().min(0).max(100)\n        }))(req);\n        const total = weights.structural + weights.legal + weights.clarity + weights.abnt;\n        const isValid = Math.abs(total - 100) < 0.01;\n        res.json((0, utils_1.createSuccessResponse)({\n            isValid,\n            total,\n            weights,\n            error: !isValid ? `Weights must sum to 100%. Current sum: ${total.toFixed(2)}%` : null\n        }, undefined, req.requestId));\n    }\n    catch (error) {\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Error validating weights\", null, req.requestId));\n        }\n    }\n});\n/**\n * POST /test-rule\n * Test custom rule pattern against text\n */\napp.post(\"/test-rule\", (req, res) => {\n    try {\n        const { pattern, text, patternType } = (0, utils_1.validateRequestBody)(z.object({\n            pattern: z.string(),\n            text: z.string(),\n            patternType: z.enum([\"regex\", \"keyword\", \"phrase\"]).default(\"regex\")\n        }))(req);\n        let matches = false;\n        let error = null;\n        try {\n            if (patternType === \"regex\") {\n                const regex = new RegExp(pattern, \"gi\");\n                matches = regex.test(text);\n            }\n            else if (patternType === \"keyword\" || patternType === \"phrase\") {\n                matches = text.toLowerCase().includes(pattern.toLowerCase());\n            }\n        }\n        catch (err) {\n            error = `Invalid pattern: ${err.message}`;\n        }\n        res.json((0, utils_1.createSuccessResponse)({\n            matches,\n            pattern,\n            text: text.substring(0, 200) + (text.length > 200 ? \"...\" : \"\"),\n            patternType,\n            error\n        }, undefined, req.requestId));\n    }\n    catch (error) {\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Error testing rule\", null, req.requestId));\n        }\n    }\n});\n// Helper function for preset descriptions\nfunction getPresetDescription(preset) {\n    const descriptions = {\n        [types_1.AnalysisPreset.RIGOROUS]: \"Foco em conformidade legal rigorosa\",\n        [types_1.AnalysisPreset.STANDARD]: \"An√°lise balanceada para uso geral\",\n        [types_1.AnalysisPreset.TECHNICAL]: \"Foco em especifica√ß√µes t√©cnicas detalhadas\",\n        [types_1.AnalysisPreset.FAST]: \"An√°lise r√°pida com foco em aspectos essenciais\",\n        [types_1.AnalysisPreset.CUSTOM]: \"Configura√ß√£o completamente personalizada\"\n    };\n    return descriptions[preset] || \"Preset personalizado\";\n}\n// Error handling middleware\napp.use((error, req, res, next) => {\n    console.error(\"Unhandled error in analysis-config API:\", error);\n    res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error\", process.env.NODE_ENV === \"development\" ? error.stack : null, req.requestId));\n});\n// Export Cloud Function\nexports.analysisConfigApi = (0, https_1.onRequest)({\n    region: \"us-central1\",\n    memory: \"1GiB\",\n    timeoutSeconds: 300,\n    maxInstances: 50,\n    cors: config_1.config.corsOrigin\n}, app);\n//# sourceMappingURL=analysis-config.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/analysis.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'organizationId' is assigned a value but never used.","line":166,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":166,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'organizationId' is assigned a value but never used.","line":210,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'status' is assigned a value but never used.","line":213,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":213,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Analysis API - Endpoints para an√°lise de documentos\n * LicitaReview Cloud Functions\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst express = __importStar(require(\"express\"));\nconst auth_1 = require(\"../middleware/auth\");\nconst AnalysisOrchestrator_1 = require(\"../services/AnalysisOrchestrator\");\nconst firebase_1 = require(\"../config/firebase\");\nconst zod_1 = require(\"zod\");\nconst error_1 = require(\"../middleware/error\");\nconst auth_2 = require(\"../middleware/auth\");\n// Schemas de valida√ß√£o\nconst StartAnalysisRequestSchema = zod_1.z.object({\n    documentId: zod_1.z.string().min(1, 'Document ID is required'),\n    analysisType: zod_1.z.enum(['compliance', 'risk', 'completeness', 'all']).default('all'),\n    options: zod_1.z.object({\n        priority: zod_1.z.enum(['low', 'normal', 'high']).default('normal'),\n        includeRecommendations: zod_1.z.boolean().default(true),\n        detailedReport: zod_1.z.boolean().default(false)\n    }).default({})\n});\nconst AnalysisIdSchema = zod_1.z.object({\n    analysisId: zod_1.z.string().min(1, 'Analysis ID is required')\n});\nconst DocumentIdSchema = zod_1.z.object({\n    documentId: zod_1.z.string().min(1, 'Document ID is required')\n});\n// Inicializar o orquestrador de an√°lises\nconst orchestrator = new AnalysisOrchestrator_1.AnalysisOrchestrator(firebase_1.firestore, process.env.CLOUD_RUN_SERVICE_URL || 'https://analysis-service-url', { projectId: process.env.GOOGLE_CLOUD_PROJECT });\n// Helper functions\nfunction createSuccessResponse(data, requestId) {\n    return {\n        success: true,\n        data,\n        requestId,\n        timestamp: new Date().toISOString()\n    };\n}\nfunction createErrorResponse(message, details = null, requestId) {\n    return {\n        success: false,\n        error: {\n            message,\n            details\n        },\n        requestId,\n        timestamp: new Date().toISOString()\n    };\n}\nfunction validateRequestBody(schema) {\n    return (req, res, next) => {\n        try {\n            req.body = schema.parse(req.body);\n            next();\n        }\n        catch (error) {\n            if (error instanceof zod_1.z.ZodError) {\n                res.status(400).json(createErrorResponse('Invalid request body', error.errors, req.headers['x-request-id']));\n            }\n            else {\n                next(error);\n            }\n        }\n    };\n}\nfunction validatePathParams(schema) {\n    return (req, res, next) => {\n        try {\n            req.params = schema.parse(req.params);\n            next();\n        }\n        catch (error) {\n            if (error instanceof zod_1.z.ZodError) {\n                res.status(400).json(createErrorResponse('Invalid path parameters', error.errors, req.headers['x-request-id']));\n            }\n            else {\n                next(error);\n            }\n        }\n    };\n}\nconst router = express.Router();\n/**\n * POST /analysis/start\n * Inicia uma nova an√°lise de documento\n */\nrouter.post('/start', auth_2.authenticateUser, auth_2.requireOrganization, (0, auth_2.requirePermissions)([auth_1.PERMISSIONS.ANALYSIS_WRITE]), validateRequestBody(StartAnalysisRequestSchema), async (req, res) => {\n    var _a, _b;\n    try {\n        const { documentId, analysisType, options } = req.body;\n        const organizationId = (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId;\n        const userId = (_b = req.user) === null || _b === void 0 ? void 0 : _b.uid;\n        if (!organizationId) {\n            return res.status(400).json(createErrorResponse('Organization ID is required', null, req.headers['x-request-id']));\n        }\n        // Verificar se o documento existe e pertence √† organiza√ß√£o\n        const docSnapshot = await firebase_1.collections.documents.doc(documentId).get();\n        if (!docSnapshot.exists) {\n            return res.status(404).json(createErrorResponse('Document not found', { documentId }, req.headers['x-request-id']));\n        }\n        const document = docSnapshot.data();\n        if ((document === null || document === void 0 ? void 0 : document.organizationId) !== organizationId) {\n            return res.status(403).json(createErrorResponse('Access denied to document', { documentId }, req.headers['x-request-id']));\n        }\n        // Iniciar an√°lise via AnalysisOrchestrator\n        const analysisId = await orchestrator.startAnalysis({\n            documentId,\n            organizationId,\n            userId,\n            options: Object.assign({ analysisType }, options),\n            priority: options.priority || 'normal'\n        });\n        res.status(202).json(createSuccessResponse({\n            analysisId,\n            status: 'queued',\n            message: 'Analysis started successfully'\n        }, req.headers['x-request-id']));\n    }\n    catch (error) {\n        (0, error_1.errorHandler)(error, req, res, () => { });\n    }\n});\n/**\n * GET /analysis/:analysisId/progress\n * Obt√©m o progresso de uma an√°lise\n */\nrouter.get('/:analysisId/progress', auth_2.authenticateUser, auth_2.requireOrganization, (0, auth_2.requirePermissions)([auth_1.PERMISSIONS.ANALYSIS_READ]), validatePathParams(AnalysisIdSchema), async (req, res) => {\n    var _a;\n    try {\n        const { analysisId } = req.params;\n        const organizationId = (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId;\n        const progress = await orchestrator.getAnalysisProgress(analysisId);\n        if (!progress) {\n            return res.status(404).json(createErrorResponse('Analysis not found', { analysisId }, req.headers['x-request-id']));\n        }\n        res.json(createSuccessResponse(progress, req.headers['x-request-id']));\n    }\n    catch (error) {\n        (0, error_1.errorHandler)(error, req, res, () => { });\n    }\n});\n/**\n * DELETE /analysis/:analysisId\n * Cancela uma an√°lise em andamento\n */\nrouter.delete('/:analysisId', auth_2.authenticateUser, auth_2.requireOrganization, (0, auth_2.requirePermissions)([auth_1.PERMISSIONS.ANALYSIS_WRITE]), validatePathParams(AnalysisIdSchema), async (req, res) => {\n    var _a, _b;\n    try {\n        const { analysisId } = req.params;\n        const organizationId = (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId;\n        const userId = (_b = req.user) === null || _b === void 0 ? void 0 : _b.uid;\n        if (!organizationId) {\n            return res.status(400).json(createErrorResponse('Organization ID is required', null, req.headers['x-request-id']));\n        }\n        // Verificar se a an√°lise existe\n        const activeAnalyses = orchestrator.getActiveAnalyses();\n        const analysis = activeAnalyses.find(a => a.analysisId === analysisId);\n        if (!analysis) {\n            return res.status(404).json(createErrorResponse('Analysis not found or access denied', { analysisId }, req.headers['x-request-id']));\n        }\n        await orchestrator.cancelAnalysis(analysisId, userId);\n        res.json(createSuccessResponse({ message: 'Analysis cancelled successfully' }, req.headers['x-request-id']));\n    }\n    catch (error) {\n        (0, error_1.errorHandler)(error, req, res, () => { });\n    }\n});\n/**\n * GET /analysis/list\n * Lista an√°lises da organiza√ß√£o\n */\nrouter.get('/list', auth_2.authenticateUser, auth_2.requireOrganization, (0, auth_2.requirePermissions)([auth_1.PERMISSIONS.ANALYSIS_READ]), async (req, res) => {\n    var _a;\n    try {\n        const organizationId = (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId;\n        const page = parseInt(req.query.page) || 1;\n        const limit = Math.min(parseInt(req.query.limit) || 10, 100);\n        const status = req.query.status;\n        // Por enquanto, retornamos as an√°lises ativas\n        // TODO: Implementar filtro por organiza√ß√£o quando a propriedade estiver dispon√≠vel\n        const allAnalyses = orchestrator.getActiveAnalyses();\n        const filteredAnalyses = allAnalyses;\n        const startIndex = (page - 1) * limit;\n        const endIndex = startIndex + limit;\n        const paginatedAnalyses = filteredAnalyses.slice(startIndex, endIndex);\n        const analyses = {\n            data: paginatedAnalyses,\n            total: filteredAnalyses.length,\n            page,\n            limit,\n            totalPages: Math.ceil(filteredAnalyses.length / limit)\n        };\n        res.json(createSuccessResponse(analyses, req.headers['x-request-id']));\n    }\n    catch (error) {\n        (0, error_1.errorHandler)(error, req, res, () => { });\n    }\n});\n/**\n * GET /analysis/result/:documentId\n * Obt√©m o resultado da an√°lise de um documento\n */\nrouter.get('/result/:documentId', auth_2.authenticateUser, auth_2.requireOrganization, (0, auth_2.requirePermissions)([auth_1.PERMISSIONS.ANALYSIS_READ]), validatePathParams(DocumentIdSchema), async (req, res) => {\n    var _a;\n    try {\n        const { documentId } = req.params;\n        const organizationId = (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId;\n        // Verificar se o documento pertence √† organiza√ß√£o\n        const docSnapshot = await firebase_1.collections.documents.doc(documentId).get();\n        if (!docSnapshot.exists) {\n            return res.status(404).json(createErrorResponse('Document not found', { documentId }, req.headers['x-request-id']));\n        }\n        const document = docSnapshot.data();\n        if ((document === null || document === void 0 ? void 0 : document.organizationId) !== organizationId) {\n            return res.status(403).json(createErrorResponse('Access denied to document', { documentId }, req.headers['x-request-id']));\n        }\n        // Buscar resultado da an√°lise no Firestore\n        const resultQuery = await firebase_1.firestore\n            .collection('analysisResults')\n            .where('documentId', '==', documentId)\n            .orderBy('createdAt', 'desc')\n            .limit(1)\n            .get();\n        if (resultQuery.empty) {\n            return res.status(404).json(createErrorResponse('Analysis result not found', { documentId }, req.headers['x-request-id']));\n        }\n        const result = resultQuery.docs[0].data();\n        res.json(createSuccessResponse(result, req.headers['x-request-id']));\n    }\n    catch (error) {\n        (0, error_1.errorHandler)(error, req, res, () => { });\n    }\n});\nexports.default = router;\n//# sourceMappingURL=analysis.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/analytics.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'period' is defined but never used.","line":309,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":309,"endColumn":73}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Analytics API\n * LicitaReview Cloud Functions\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.analyticsReporter = void 0;\nconst https_1 = require(\"firebase-functions/v2/https\");\nconst express_1 = __importDefault(require(\"express\"));\nconst firebase_1 = require(\"../config/firebase\");\nconst auth_1 = require(\"../middleware/auth\");\nconst utils_1 = require(\"../utils\");\nconst zod_1 = require(\"zod\");\nconst app = (0, express_1.default)();\napp.use(express_1.default.json());\n// Request ID middleware\napp.use((req, res, next) => {\n    req.requestId = (0, utils_1.generateRequestId)();\n    res.setHeader(\"X-Request-ID\", req.requestId);\n    next();\n});\napp.use(auth_1.authenticateUser);\napp.use(auth_1.requireOrganization);\n/**\n * GET /analytics/usage\n * Get usage metrics for organization\n */\napp.get(\"/usage\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.AUDIT_READ]), async (req, res) => {\n    try {\n        const query = (0, utils_1.validateQueryParams)(zod_1.z.object({\n            period: zod_1.z.enum([\"day\", \"week\", \"month\", \"year\"]).default(\"month\"),\n            startDate: zod_1.z.coerce.date().optional(),\n            endDate: zod_1.z.coerce.date().optional()\n        }), req);\n        const organizationId = req.user.organizationId;\n        // Calculate date range\n        const endDate = query.endDate || new Date();\n        const startDate = query.startDate || getStartDateForPeriod(query.period, endDate);\n        // Query analytics data\n        const analyticsSnapshot = await firebase_1.collections.firestore\n            .collection(\"organizationAnalytics\")\n            .doc(organizationId)\n            .get();\n        if (!analyticsSnapshot.exists) {\n            res.json((0, utils_1.createSuccessResponse)({\n                organizationId,\n                period: query.period,\n                startDate,\n                endDate,\n                metrics: getEmptyMetrics()\n            }, undefined, req.requestId));\n            return;\n        }\n        const analyticsData = analyticsSnapshot.data();\n        const metrics = aggregateMetricsForPeriod(analyticsData.daily || {}, startDate, endDate, query.period);\n        res.json((0, utils_1.createSuccessResponse)({\n            organizationId,\n            period: query.period,\n            startDate,\n            endDate,\n            metrics\n        }, undefined, req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error getting usage analytics:\", error);\n        res.status(500).json((0, utils_1.createErrorResponse)(\"Failed to get usage analytics\", null, req.requestId));\n    }\n});\n/**\n * GET /analytics/documents\n * Get document-related analytics\n */\napp.get(\"/documents\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.AUDIT_READ]), async (req, res) => {\n    try {\n        const query = (0, utils_1.validateQueryParams)(zod_1.z.object({\n            days: zod_1.z.coerce.number().min(1).max(365).default(30)\n        }), req);\n        const organizationId = req.user.organizationId;\n        const startDate = new Date();\n        startDate.setDate(startDate.getDate() - query.days);\n        // Get document statistics\n        const documentsQuery = firebase_1.collections.documents\n            .where(\"organizationId\", \"==\", organizationId)\n            .where(\"createdAt\", \">=\", startDate);\n        const documentsSnapshot = await documentsQuery.get();\n        const documentStats = {\n            total: documentsSnapshot.size,\n            byStatus: {},\n            byType: {},\n            byDay: {}\n        };\n        documentsSnapshot.docs.forEach(doc => {\n            var _a;\n            const data = doc.data();\n            const status = data.status || \"unknown\";\n            const type = ((_a = data.classification) === null || _a === void 0 ? void 0 : _a.documentType) || \"unknown\";\n            const day = data.createdAt.toDate().toISOString().split('T')[0];\n            documentStats.byStatus[status] = (documentStats.byStatus[status] || 0) + 1;\n            documentStats.byType[type] = (documentStats.byType[type] || 0) + 1;\n            documentStats.byDay[day] = (documentStats.byDay[day] || 0) + 1;\n        });\n        res.json((0, utils_1.createSuccessResponse)({\n            organizationId,\n            period: `${query.days} days`,\n            documentStats\n        }, undefined, req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error getting document analytics:\", error);\n        res.status(500).json((0, utils_1.createErrorResponse)(\"Failed to get document analytics\", null, req.requestId));\n    }\n});\n/**\n * GET /analytics/analysis\n * Get analysis-related analytics\n */\napp.get(\"/analysis\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.AUDIT_READ]), async (req, res) => {\n    try {\n        const query = (0, utils_1.validateQueryParams)(zod_1.z.object({\n            days: zod_1.z.coerce.number().min(1).max(365).default(30)\n        }), req);\n        const organizationId = req.user.organizationId;\n        const startDate = new Date();\n        startDate.setDate(startDate.getDate() - query.days);\n        // Get analysis results statistics\n        const analysisQuery = firebase_1.collections.analysisResults\n            .where(\"organizationId\", \"==\", organizationId)\n            .where(\"createdAt\", \">=\", startDate);\n        const analysisSnapshot = await analysisQuery.get();\n        const analysisStats = {\n            total: analysisSnapshot.size,\n            byStatus: {},\n            scoreDistribution: {\n                excellent: 0, // 90-100\n                good: 0, // 70-89\n                fair: 0, // 50-69\n                poor: 0 // 0-49\n            },\n            averageScore: 0,\n            averageProcessingTime: 0,\n            findingsBreakdown: {\n                critical: 0,\n                high: 0,\n                medium: 0,\n                low: 0\n            }\n        };\n        let totalScore = 0;\n        let totalProcessingTime = 0;\n        let completedAnalyses = 0;\n        analysisSnapshot.docs.forEach(doc => {\n            const data = doc.data();\n            const status = data.status || \"unknown\";\n            analysisStats.byStatus[status] = (analysisStats.byStatus[status] || 0) + 1;\n            if (status === \"completed\" && data.weightedScore !== undefined) {\n                completedAnalyses++;\n                totalScore += data.weightedScore;\n                totalProcessingTime += data.executionTimeSeconds || 0;\n                // Score distribution\n                if (data.weightedScore >= 90) {\n                    analysisStats.scoreDistribution.excellent++;\n                }\n                else if (data.weightedScore >= 70) {\n                    analysisStats.scoreDistribution.good++;\n                }\n                else if (data.weightedScore >= 50) {\n                    analysisStats.scoreDistribution.fair++;\n                }\n                else {\n                    analysisStats.scoreDistribution.poor++;\n                }\n                // Findings breakdown\n                if (data.findings) {\n                    data.findings.forEach((finding) => {\n                        var _a;\n                        const severity = ((_a = finding.severity) === null || _a === void 0 ? void 0 : _a.toLowerCase()) || \"unknown\";\n                        if (severity === \"critica\") {\n                            analysisStats.findingsBreakdown.critical++;\n                        }\n                        else if (severity === \"alta\") {\n                            analysisStats.findingsBreakdown.high++;\n                        }\n                        else if (severity === \"media\") {\n                            analysisStats.findingsBreakdown.medium++;\n                        }\n                        else if (severity === \"baixa\") {\n                            analysisStats.findingsBreakdown.low++;\n                        }\n                    });\n                }\n            }\n        });\n        if (completedAnalyses > 0) {\n            analysisStats.averageScore = totalScore / completedAnalyses;\n            analysisStats.averageProcessingTime = totalProcessingTime / completedAnalyses;\n        }\n        res.json((0, utils_1.createSuccessResponse)({\n            organizationId,\n            period: `${query.days} days`,\n            analysisStats\n        }, undefined, req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error getting analysis analytics:\", error);\n        res.status(500).json((0, utils_1.createErrorResponse)(\"Failed to get analysis analytics\", null, req.requestId));\n    }\n});\n/**\n * GET /analytics/performance\n * Get performance metrics\n */\napp.get(\"/performance\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.AUDIT_READ]), async (req, res) => {\n    try {\n        const query = (0, utils_1.validateQueryParams)(zod_1.z.object({\n            hours: zod_1.z.coerce.number().min(1).max(168).default(24) // Max 1 week\n        }), req);\n        const startDate = new Date();\n        startDate.setHours(startDate.getHours() - query.hours);\n        // Get performance metrics from logs or metrics collection\n        const metricsSnapshot = await firebase_1.collections.firestore\n            .collection(\"performanceMetrics\")\n            .where(\"timestamp\", \">=\", startDate)\n            .orderBy(\"timestamp\", \"desc\")\n            .limit(1000)\n            .get();\n        const metrics = metricsSnapshot.docs.map(doc => doc.data());\n        // Aggregate metrics by function\n        const functionMetrics = metrics.reduce((acc, metric) => {\n            const functionName = metric.functionName;\n            if (!acc[functionName]) {\n                acc[functionName] = {\n                    totalCalls: 0,\n                    totalExecutionTime: 0,\n                    totalMemoryUsed: 0,\n                    successCount: 0,\n                    errorCount: 0,\n                    averageExecutionTime: 0,\n                    averageMemoryUsed: 0,\n                    successRate: 0,\n                    errors: []\n                };\n            }\n            acc[functionName].totalCalls++;\n            acc[functionName].totalExecutionTime += metric.executionTime;\n            acc[functionName].totalMemoryUsed += metric.memoryUsed;\n            if (metric.success) {\n                acc[functionName].successCount++;\n            }\n            else {\n                acc[functionName].errorCount++;\n                if (metric.error && !acc[functionName].errors.includes(metric.error)) {\n                    acc[functionName].errors.push(metric.error);\n                }\n            }\n            return acc;\n        }, {});\n        // Calculate averages and rates\n        Object.values(functionMetrics).forEach((funcMetric) => {\n            funcMetric.averageExecutionTime = funcMetric.totalExecutionTime / funcMetric.totalCalls;\n            funcMetric.averageMemoryUsed = funcMetric.totalMemoryUsed / funcMetric.totalCalls;\n            funcMetric.successRate = (funcMetric.successCount / funcMetric.totalCalls) * 100;\n        });\n        res.json((0, utils_1.createSuccessResponse)({\n            period: `${query.hours} hours`,\n            totalMetrics: metrics.length,\n            functionMetrics\n        }, undefined, req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error getting performance analytics:\", error);\n        res.status(500).json((0, utils_1.createErrorResponse)(\"Failed to get performance analytics\", null, req.requestId));\n    }\n});\n// Helper functions\nfunction getStartDateForPeriod(period, endDate) {\n    const start = new Date(endDate);\n    switch (period) {\n        case \"day\":\n            start.setDate(start.getDate() - 1);\n            break;\n        case \"week\":\n            start.setDate(start.getDate() - 7);\n            break;\n        case \"month\":\n            start.setMonth(start.getMonth() - 1);\n            break;\n        case \"year\":\n            start.setFullYear(start.getFullYear() - 1);\n            break;\n    }\n    return start;\n}\nfunction getEmptyMetrics() {\n    return {\n        organizationId: \"\",\n        period: \"\",\n        documentsProcessed: 0,\n        analysesCompleted: 0,\n        storageUsed: 0,\n        apiCalls: 0,\n        errorRate: 0,\n        averageProcessingTime: 0,\n        activeUsers: 0\n    };\n}\nfunction aggregateMetricsForPeriod(dailyData, startDate, endDate, period) {\n    const metrics = getEmptyMetrics();\n    // Iterate through date range and aggregate data\n    const currentDate = new Date(startDate);\n    while (currentDate <= endDate) {\n        const dateKey = currentDate.toISOString().split('T')[0];\n        const dayData = dailyData[dateKey];\n        if (dayData) {\n            metrics.documentsProcessed += dayData.documentsProcessed || 0;\n            metrics.analysesCompleted += dayData.analysesCompleted || 0;\n            metrics.storageUsed += dayData.storageUsed || 0;\n            metrics.apiCalls += dayData.apiCalls || 0;\n        }\n        currentDate.setDate(currentDate.getDate() + 1);\n    }\n    return metrics;\n}\n// Export Cloud Function\nexports.analyticsReporter = (0, https_1.onRequest)({\n    region: \"us-central1\",\n    memory: \"512MiB\",\n    timeoutSeconds: 300,\n    maxInstances: 10,\n    cors: true\n}, app);\n//# sourceMappingURL=analytics.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/audit.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/comissoes-api.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ServidorIdSchema' is assigned a value but never used.","line":26,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":68,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":92,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":111,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":111,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":130,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":187,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":187,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":206,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":206,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":220,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":220,"endColumn":31}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Comiss√µes API - Comiss√µes CRUD operations\n * LicitaReview Cloud Functions\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.comissoesApi = void 0;\nconst https_1 = require(\"firebase-functions/v2/https\");\nconst express_1 = __importDefault(require(\"express\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst express_rate_limit_1 = __importDefault(require(\"express-rate-limit\"));\nconst zod_1 = require(\"zod\");\nconst types_1 = require(\"../types\");\nconst auth_1 = require(\"../middleware/auth\");\nconst utils_1 = require(\"../utils\");\nconst config_1 = require(\"../config\");\nconst comissoes_1 = require(\"./comissoes\");\n// Validation schemas for path parameters\nconst ComissaoIdSchema = zod_1.z.object({\n    id: zod_1.z.string().uuid()\n});\nconst ServidorIdSchema = zod_1.z.object({\n    servidorId: zod_1.z.string().uuid()\n});\nconst ComissaoServidorSchema = zod_1.z.object({\n    id: zod_1.z.string().uuid(),\n    servidorId: zod_1.z.string().uuid()\n});\nconst app = (0, express_1.default)();\n// Middleware\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)({ origin: config_1.config.corsOrigin }));\napp.use(express_1.default.json({ limit: config_1.config.maxRequestSize }));\n// Rate limiting\nconst limiter = (0, express_rate_limit_1.default)({\n    windowMs: config_1.config.rateLimitWindowMs,\n    max: config_1.config.rateLimitMax,\n    message: { error: \"Too many requests, please try again later\" },\n    standardHeaders: true,\n    legacyHeaders: false\n});\napp.use(limiter);\n// Request ID middleware\napp.use((req, res, next) => {\n    req.requestId = (0, utils_1.generateRequestId)();\n    res.setHeader('X-Request-ID', req.requestId);\n    next();\n});\n// Authentication and authorization\napp.use(auth_1.authenticateUser);\napp.use(auth_1.requireOrganization);\n/**\n * GET /\n * List comiss√µes with filtering and pagination\n */\napp.get(\"/\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_READ]), // Using existing permission for now\ncomissoes_1.listComissoes);\n/**\n * GET /:id\n * Get comiss√£o by ID with detailed information\n */\napp.get(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_READ]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(ComissaoIdSchema, req.params);\n        await (0, comissoes_1.getComissaoById)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n/**\n * POST /\n * Create new comiss√£o\n */\napp.post(\"/\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), (0, utils_1.validateRequestBody)(types_1.CreateComissaoRequestSchema), comissoes_1.createComissao);\n/**\n * PUT /:id\n * Update comiss√£o\n */\napp.put(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), (0, utils_1.validateRequestBody)(types_1.UpdateComissaoRequestSchema), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(ComissaoIdSchema, req.params);\n        await (0, comissoes_1.updateComissao)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n/**\n * DELETE /:id\n * Delete comiss√£o\n */\napp.delete(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_DELETE]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(ComissaoIdSchema, req.params);\n        await (0, comissoes_1.deleteComissao)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n/**\n * POST /:id/membros\n * Add member to comiss√£o\n */\napp.post(\"/:id/membros\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), (0, utils_1.validateRequestBody)(types_1.AdicionarMembroRequestSchema), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(ComissaoIdSchema, req.params);\n        await (0, comissoes_1.adicionarMembro)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n/**\n * DELETE /:id/membros/:servidorId\n * Remove member from comiss√£o\n */\napp.delete(\"/:id/membros/:servidorId\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), async (req, res) => {\n    try {\n        (0, utils_1.validatePathParams)(ComissaoServidorSchema, req.params);\n        await (0, comissoes_1.removerMembro)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n/**\n * PATCH /:id/membros/:servidorId\n * Update member in comiss√£o\n */\napp.patch(\"/:id/membros/:servidorId\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), (0, utils_1.validateRequestBody)(types_1.AtualizarMembroRequestSchema), async (req, res) => {\n    try {\n        (0, utils_1.validatePathParams)(ComissaoServidorSchema, req.params);\n        await (0, comissoes_1.atualizarMembro)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n/**\n * GET /:id/stats\n * Get comiss√£o statistics\n */\napp.get(\"/:id/stats\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_READ]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(ComissaoIdSchema, req.params);\n        await (0, comissoes_1.getComissaoStats)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n/**\n * GET /:id/history\n * Get comiss√£o history\n */\napp.get(\"/:id/history\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_READ]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(ComissaoIdSchema, req.params);\n        await (0, comissoes_1.getComissaoHistory)(req, res);\n    }\n    catch (error) {\n        const requestId = req.headers['x-request-id'];\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)('Internal server error', undefined, requestId));\n        }\n    }\n});\n// Error handling middleware\napp.use((error, req, res, next) => {\n    console.error('Comiss√µes API Error:', error);\n    const errorResponse = (0, utils_1.createErrorResponse)(error.message || 'Internal server error', error instanceof utils_1.ValidationError ? error.details : undefined, req.requestId);\n    res.status(error instanceof utils_1.ValidationError ? 400 : 500).json(errorResponse);\n});\n// Export the Cloud Function\nexports.comissoesApi = (0, https_1.onRequest)({\n    region: \"us-central1\",\n    memory: \"1GiB\",\n    timeoutSeconds: 300,\n    maxInstances: 100,\n    cors: config_1.config.corsOrigin\n}, app);\n//# sourceMappingURL=comissoes-api.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/comissoes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/documents.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":52,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":53,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":54,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":133,"column":56,"nodeType":"Identifier","messageId":"undef","endLine":133,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":199,"column":56,"nodeType":"Identifier","messageId":"undef","endLine":199,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":242,"column":56,"nodeType":"Identifier","messageId":"undef","endLine":242,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":279,"column":56,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":280,"column":61,"nodeType":"Identifier","messageId":"undef","endLine":280,"endColumn":62},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":280,"column":80,"nodeType":"Identifier","messageId":"undef","endLine":280,"endColumn":81},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":311,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":311,"endColumn":31}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Documents API - Document CRUD operations\n * LicitaReview Cloud Functions\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.documentsApi = void 0;\nconst https_1 = require(\"firebase-functions/v2/https\");\nconst express_1 = __importDefault(require(\"express\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst express_rate_limit_1 = __importDefault(require(\"express-rate-limit\"));\nconst uuid_1 = require(\"uuid\");\nconst firebase_1 = require(\"../config/firebase\");\nconst types_1 = require(\"../types\");\nconst auth_1 = require(\"../middleware/auth\");\nconst utils_1 = require(\"../utils\");\nconst config_1 = require(\"../config\");\nconst app = (0, express_1.default)();\n// Middleware\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)({ origin: config_1.config.corsOrigin }));\napp.use(express_1.default.json({ limit: config_1.config.maxRequestSize }));\n// Rate limiting\nconst limiter = (0, express_rate_limit_1.default)({\n    windowMs: config_1.config.rateLimitWindowMs,\n    max: config_1.config.rateLimitMax,\n    message: { error: \"Too many requests, please try again later\" },\n    standardHeaders: true,\n    legacyHeaders: false\n});\napp.use(limiter);\n// Request ID middleware\napp.use((req, res, next) => {\n    req.requestId = (0, utils_1.generateRequestId)();\n    res.setHeader(\"X-Request-ID\", req.requestId);\n    next();\n});\n// Authentication middleware\napp.use(auth_1.authenticateUser);\napp.use(auth_1.requireOrganization);\n/**\n * GET /documents\n * List documents for organization with pagination and filtering\n */\napp.get(\"/\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_READ]), async (req, res) => {\n    try {\n        const query = (0, utils_1.validateQueryParams)(utils_1.PaginationSchema.extend({\n            status: z.nativeEnum(types_1.DocumentStatus).optional(),\n            documentType: z.string().optional(),\n            search: z.string().optional()\n        }), req);\n        let firestoreQuery = firebase_1.collections.documents\n            .where(\"organizationId\", \"==\", req.user.organizationId);\n        // Apply filters\n        if (query.status) {\n            firestoreQuery = firestoreQuery.where(\"status\", \"==\", query.status);\n        }\n        if (query.documentType) {\n            firestoreQuery = firestoreQuery.where(\"classification.documentType\", \"==\", query.documentType);\n        }\n        // Apply sorting\n        const sortField = query.sortBy === \"title\" ? \"title\" :\n            query.sortBy === \"status\" ? \"status\" : \"createdAt\";\n        firestoreQuery = firestoreQuery.orderBy(sortField, query.sortOrder);\n        // Count total documents for pagination\n        const countQuery = await firestoreQuery.count().get();\n        const total = countQuery.data().count;\n        // Apply pagination\n        const offset = (query.page - 1) * query.limit;\n        firestoreQuery = firestoreQuery.offset(offset).limit(query.limit);\n        const snapshot = await firestoreQuery.get();\n        const documents = snapshot.docs.map(doc => {\n            const data = doc.data();\n            return {\n                id: doc.id,\n                title: data.title,\n                documentType: data.classification.documentType,\n                status: data.status,\n                organizationId: data.organizationId,\n                createdAt: data.createdAt,\n                updatedAt: data.updatedAt,\n                fileInfo: {\n                    name: data.metadata.fileName,\n                    size: data.metadata.fileSize,\n                    type: data.metadata.fileType\n                }\n            };\n        });\n        // Apply text search if needed (post-processing for now)\n        let filteredDocuments = documents;\n        if (query.search) {\n            const searchTerm = query.search.toLowerCase();\n            filteredDocuments = documents.filter(doc => doc.title.toLowerCase().includes(searchTerm) ||\n                doc.fileInfo.name.toLowerCase().includes(searchTerm));\n        }\n        const totalPages = Math.ceil(total / query.limit);\n        const response = {\n            success: true,\n            data: filteredDocuments,\n            pagination: {\n                page: query.page,\n                limit: query.limit,\n                total,\n                totalPages,\n                hasNext: query.page < totalPages,\n                hasPrev: query.page > 1\n            },\n            timestamp: new Date().toISOString(),\n            requestId: req.requestId\n        };\n        res.json(response);\n    }\n    catch (error) {\n        console.error(\"Error listing documents:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while listing documents\", null, req.requestId));\n        }\n    }\n});\n/**\n * GET /documents/:id\n * Get document by ID\n */\napp.get(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_READ]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(z.object({ id: utils_1.UUIDSchema }), req.params);\n        const docRef = firebase_1.collections.documents.doc(id);\n        const doc = await docRef.get();\n        if (!doc.exists) {\n            res.status(404).json((0, utils_1.createErrorResponse)(\"Document not found\", { documentId: id }, req.requestId));\n            return;\n        }\n        const document = Object.assign({ id: doc.id }, doc.data());\n        // Verify organization access\n        if (document.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Access denied to document\", { documentId: id }, req.requestId));\n            return;\n        }\n        res.json((0, utils_1.createSuccessResponse)(document, undefined, req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error getting document:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while getting document\", null, req.requestId));\n        }\n    }\n});\n/**\n * POST /documents\n * Create new document\n */\napp.post(\"/\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), async (req, res) => {\n    try {\n        const documentData = (0, utils_1.validateRequestBody)(types_1.CreateDocumentRequestSchema)(req);\n        // Validate organization access\n        if (documentData.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Cannot create document for different organization\", { requestedOrg: documentData.organizationId, userOrg: req.user.organizationId }, req.requestId));\n            return;\n        }\n        const document = Object.assign(Object.assign({ id: (0, uuid_1.v4)() }, documentData), { status: types_1.DocumentStatus.DRAFT, version: 1, createdAt: new Date(), updatedAt: new Date() });\n        // Validate complete document\n        const validation = types_1.DocumentSchema.safeParse(document);\n        if (!validation.success) {\n            res.status(400).json((0, utils_1.createErrorResponse)(\"Invalid document data\", validation.error.errors, req.requestId));\n            return;\n        }\n        // Save to Firestore\n        await firebase_1.collections.documents.doc(document.id).set(document);\n        res.status(201).json((0, utils_1.createSuccessResponse)(document, \"Document created successfully\", req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error creating document:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while creating document\", null, req.requestId));\n        }\n    }\n});\n/**\n * PUT /documents/:id\n * Update document\n */\napp.put(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(z.object({ id: utils_1.UUIDSchema }), req.params);\n        const updateData = (0, utils_1.validateRequestBody)(types_1.UpdateDocumentRequestSchema)(req);\n        const docRef = firebase_1.collections.documents.doc(id);\n        const doc = await docRef.get();\n        if (!doc.exists) {\n            res.status(404).json((0, utils_1.createErrorResponse)(\"Document not found\", { documentId: id }, req.requestId));\n            return;\n        }\n        const existingDocument = Object.assign({ id: doc.id }, doc.data());\n        // Verify organization access\n        if (existingDocument.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Access denied to document\", { documentId: id }, req.requestId));\n            return;\n        }\n        // Prepare updated document\n        const updatedDocument = Object.assign(Object.assign(Object.assign({}, existingDocument), updateData), { id: existingDocument.id, organizationId: existingDocument.organizationId, updatedAt: new Date() });\n        // Validate updated document\n        const validation = types_1.DocumentSchema.safeParse(updatedDocument);\n        if (!validation.success) {\n            res.status(400).json((0, utils_1.createErrorResponse)(\"Invalid document update data\", validation.error.errors, req.requestId));\n            return;\n        }\n        // Update in Firestore\n        await docRef.set(updatedDocument);\n        res.json((0, utils_1.createSuccessResponse)(updatedDocument, \"Document updated successfully\", req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error updating document:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while updating document\", null, req.requestId));\n        }\n    }\n});\n/**\n * DELETE /documents/:id\n * Delete document (soft delete by setting status to ARCHIVED)\n */\napp.delete(\"/:id\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_DELETE]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(z.object({ id: utils_1.UUIDSchema }), req.params);\n        const docRef = firebase_1.collections.documents.doc(id);\n        const doc = await docRef.get();\n        if (!doc.exists) {\n            res.status(404).json((0, utils_1.createErrorResponse)(\"Document not found\", { documentId: id }, req.requestId));\n            return;\n        }\n        const document = Object.assign({ id: doc.id }, doc.data());\n        // Verify organization access\n        if (document.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Access denied to document\", { documentId: id }, req.requestId));\n            return;\n        }\n        // Soft delete by archiving\n        await docRef.update({\n            status: types_1.DocumentStatus.ARCHIVED,\n            updatedAt: new Date()\n        });\n        res.json((0, utils_1.createSuccessResponse)({ id, status: types_1.DocumentStatus.ARCHIVED }, \"Document archived successfully\", req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error deleting document:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while deleting document\", null, req.requestId));\n        }\n    }\n});\n/**\n * PATCH /documents/:id/status\n * Update document status\n */\napp.patch(\"/:id/status\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.DOCUMENTS_WRITE]), async (req, res) => {\n    try {\n        const { id } = (0, utils_1.validatePathParams)(z.object({ id: utils_1.UUIDSchema }), req.params);\n        const { status } = (0, utils_1.validateRequestBody)(z.object({ status: z.nativeEnum(types_1.DocumentStatus) }))(req);\n        const docRef = firebase_1.collections.documents.doc(id);\n        const doc = await docRef.get();\n        if (!doc.exists) {\n            res.status(404).json((0, utils_1.createErrorResponse)(\"Document not found\", { documentId: id }, req.requestId));\n            return;\n        }\n        const document = Object.assign({ id: doc.id }, doc.data());\n        // Verify organization access\n        if (document.organizationId !== req.user.organizationId &&\n            !req.user.roles.includes(\"super_admin\")) {\n            res.status(403).json((0, utils_1.createErrorResponse)(\"Access denied to document\", { documentId: id }, req.requestId));\n            return;\n        }\n        await docRef.update({\n            status,\n            updatedAt: new Date()\n        });\n        res.json((0, utils_1.createSuccessResponse)({ id, status }, \"Document status updated successfully\", req.requestId));\n    }\n    catch (error) {\n        console.error(\"Error updating document status:\", error);\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error while updating document status\", null, req.requestId));\n        }\n    }\n});\n// Error handling middleware\napp.use((error, req, res, next) => {\n    console.error(\"Unhandled error in documents API:\", error);\n    res.status(500).json((0, utils_1.createErrorResponse)(\"Internal server error\", process.env.NODE_ENV === \"development\" ? error.stack : null, req.requestId));\n});\n// Export Cloud Function\nexports.documentsApi = (0, https_1.onRequest)({\n    region: \"us-central1\",\n    memory: \"1GiB\",\n    timeoutSeconds: 300,\n    maxInstances: 100,\n    cors: config_1.config.corsOrigin\n}, app);\n//# sourceMappingURL=documents.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/health.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'responseTime' is assigned a value but never used.","line":136,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":136,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Health Check API\n * LicitaReview Cloud Functions\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.healthCheck = void 0;\nconst https_1 = require(\"firebase-functions/v2/https\");\nconst express_1 = __importDefault(require(\"express\"));\nconst firebase_1 = require(\"../config/firebase\");\nconst utils_1 = require(\"../utils\");\nconst config_1 = require(\"../config\");\nconst app = (0, express_1.default)();\napp.use(express_1.default.json());\n/**\n * GET /health\n * Basic health check endpoint\n */\napp.get(\"/\", async (req, res) => {\n    try {\n        const systemHealth = await checkSystemHealth();\n        const statusCode = systemHealth.overall === \"healthy\" ? 200 :\n            systemHealth.overall === \"degraded\" ? 200 : 503;\n        res.status(statusCode).json((0, utils_1.createSuccessResponse)(systemHealth));\n    }\n    catch (error) {\n        console.error(\"Health check failed:\", error);\n        res.status(503).json((0, utils_1.createErrorResponse)(\"Health check failed\", { error: error.message }));\n    }\n});\n/**\n * GET /health/detailed\n * Detailed health check with all services\n */\napp.get(\"/detailed\", async (req, res) => {\n    try {\n        const services = await Promise.allSettled([\n            checkFirestore(),\n            checkStorage(),\n            checkAuth(),\n            checkMemory(),\n            checkEnvironment()\n        ]);\n        const serviceResults = services.map((result, index) => {\n            var _a;\n            const serviceNames = [\"firestore\", \"storage\", \"auth\", \"memory\", \"environment\"];\n            if (result.status === \"fulfilled\") {\n                return result.value;\n            }\n            else {\n                return {\n                    service: serviceNames[index],\n                    status: \"unhealthy\",\n                    timestamp: new Date(),\n                    details: { error: ((_a = result.reason) === null || _a === void 0 ? void 0 : _a.message) || \"Unknown error\" }\n                };\n            }\n        });\n        const overall = determineOverallHealth(serviceResults);\n        const systemHealth = {\n            overall,\n            services: serviceResults,\n            timestamp: new Date(),\n            version: process.env.npm_package_version || \"1.0.0\",\n            uptime: process.uptime()\n        };\n        const statusCode = overall === \"healthy\" ? 200 :\n            overall === \"degraded\" ? 200 : 503;\n        res.status(statusCode).json((0, utils_1.createSuccessResponse)(systemHealth));\n    }\n    catch (error) {\n        console.error(\"Detailed health check failed:\", error);\n        res.status(503).json((0, utils_1.createErrorResponse)(\"Detailed health check failed\", { error: error.message }));\n    }\n});\n/**\n * GET /health/liveness\n * Kubernetes liveness probe endpoint\n */\napp.get(\"/liveness\", (req, res) => {\n    res.status(200).json({\n        status: \"alive\",\n        timestamp: new Date().toISOString()\n    });\n});\n/**\n * GET /health/readiness\n * Kubernetes readiness probe endpoint\n */\napp.get(\"/readiness\", async (req, res) => {\n    try {\n        // Check critical services for readiness\n        await Promise.all([\n            checkFirestore(),\n            checkAuth()\n        ]);\n        res.status(200).json({\n            status: \"ready\",\n            timestamp: new Date().toISOString()\n        });\n    }\n    catch (error) {\n        res.status(503).json({\n            status: \"not ready\",\n            error: error.message,\n            timestamp: new Date().toISOString()\n        });\n    }\n});\n// Individual service health checks\nasync function checkSystemHealth() {\n    const startTime = Date.now();\n    const services = await Promise.allSettled([\n        checkFirestore(),\n        checkStorage(),\n        checkAuth()\n    ]);\n    const serviceResults = services.map((result, index) => {\n        var _a;\n        const serviceNames = [\"firestore\", \"storage\", \"auth\"];\n        if (result.status === \"fulfilled\") {\n            return result.value;\n        }\n        else {\n            return {\n                service: serviceNames[index],\n                status: \"unhealthy\",\n                timestamp: new Date(),\n                details: { error: ((_a = result.reason) === null || _a === void 0 ? void 0 : _a.message) || \"Unknown error\" }\n            };\n        }\n    });\n    const responseTime = Date.now() - startTime;\n    return {\n        overall: determineOverallHealth(serviceResults),\n        services: serviceResults,\n        timestamp: new Date(),\n        version: process.env.npm_package_version || \"1.0.0\",\n        uptime: process.uptime()\n    };\n}\nasync function checkFirestore() {\n    const startTime = Date.now();\n    try {\n        // Simple read operation to test connectivity\n        await firebase_1.firestore.collection(\"health\").limit(1).get();\n        return {\n            service: \"firestore\",\n            status: \"healthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime\n        };\n    }\n    catch (error) {\n        return {\n            service: \"firestore\",\n            status: \"unhealthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime,\n            details: { error: error.message }\n        };\n    }\n}\nasync function checkStorage() {\n    const startTime = Date.now();\n    try {\n        // Test bucket accessibility\n        const bucket = firebase_1.storage.bucket();\n        await bucket.getMetadata();\n        return {\n            service: \"storage\",\n            status: \"healthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime\n        };\n    }\n    catch (error) {\n        return {\n            service: \"storage\",\n            status: \"unhealthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime,\n            details: { error: error.message }\n        };\n    }\n}\nasync function checkAuth() {\n    const startTime = Date.now();\n    try {\n        // Test auth service by getting service config\n        await firebase_1.auth.getUsers([]);\n        return {\n            service: \"auth\",\n            status: \"healthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime\n        };\n    }\n    catch (error) {\n        return {\n            service: \"auth\",\n            status: \"unhealthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime,\n            details: { error: error.message }\n        };\n    }\n}\nasync function checkMemory() {\n    const startTime = Date.now();\n    try {\n        const used = process.memoryUsage();\n        const totalMB = used.heapTotal / 1024 / 1024;\n        const usedMB = used.heapUsed / 1024 / 1024;\n        const usagePercent = (usedMB / totalMB) * 100;\n        const status = usagePercent > 90 ? \"unhealthy\" :\n            usagePercent > 75 ? \"degraded\" : \"healthy\";\n        return {\n            service: \"memory\",\n            status,\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime,\n            details: {\n                heapUsed: `${Math.round(usedMB)}MB`,\n                heapTotal: `${Math.round(totalMB)}MB`,\n                usagePercent: `${Math.round(usagePercent)}%`,\n                external: `${Math.round(used.external / 1024 / 1024)}MB`,\n                rss: `${Math.round(used.rss / 1024 / 1024)}MB`\n            }\n        };\n    }\n    catch (error) {\n        return {\n            service: \"memory\",\n            status: \"unhealthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime,\n            details: { error: error.message }\n        };\n    }\n}\nasync function checkEnvironment() {\n    const startTime = Date.now();\n    try {\n        const requiredEnvVars = [\n            \"GCLOUD_PROJECT\",\n            \"FIREBASE_PROJECT_ID\"\n        ];\n        const missingVars = requiredEnvVars.filter(varName => !process.env[varName]);\n        const status = missingVars.length === 0 ? \"healthy\" : \"unhealthy\";\n        return {\n            service: \"environment\",\n            status,\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime,\n            details: {\n                nodeVersion: process.version,\n                platform: process.platform,\n                environment: process.env.NODE_ENV || \"development\",\n                missingVariables: missingVars.length > 0 ? missingVars : undefined,\n                functionRegion: process.env.FUNCTION_REGION,\n                projectId: config_1.config.projectId\n            }\n        };\n    }\n    catch (error) {\n        return {\n            service: \"environment\",\n            status: \"unhealthy\",\n            timestamp: new Date(),\n            responseTime: Date.now() - startTime,\n            details: { error: error.message }\n        };\n    }\n}\nfunction determineOverallHealth(services) {\n    const unhealthyServices = services.filter(s => s.status === \"unhealthy\");\n    const degradedServices = services.filter(s => s.status === \"degraded\");\n    if (unhealthyServices.length > 0) {\n        // If critical services are unhealthy, mark as unhealthy\n        const criticalServices = [\"firestore\", \"auth\"];\n        const criticalUnhealthy = unhealthyServices.some(s => criticalServices.includes(s.service));\n        if (criticalUnhealthy) {\n            return \"unhealthy\";\n        }\n        else {\n            return \"degraded\";\n        }\n    }\n    if (degradedServices.length > 0) {\n        return \"degraded\";\n    }\n    return \"healthy\";\n}\n// Export Cloud Function\nexports.healthCheck = (0, https_1.onRequest)({\n    region: \"us-central1\",\n    memory: \"256MiB\",\n    timeoutSeconds: 60,\n    maxInstances: 10,\n    cors: true\n}, app);\n//# sourceMappingURL=health.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/notifications.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getUserNotificationPreferences' is defined but never used.","line":321,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":321,"endColumn":46}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Notifications Processor\n * LicitaReview Cloud Functions\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.notificationProcessor = exports.onNotificationCreated = void 0;\nconst https_1 = require(\"firebase-functions/v2/https\");\nconst firestore_1 = require(\"firebase-functions/v2/firestore\");\nconst express_1 = __importDefault(require(\"express\"));\nconst firebase_functions_1 = require(\"firebase-functions\");\nconst firebase_1 = require(\"../config/firebase\");\nconst auth_1 = require(\"../middleware/auth\");\nconst utils_1 = require(\"../utils\");\nconst app = (0, express_1.default)();\napp.use(express_1.default.json());\n// Request ID middleware\napp.use((req, res, next) => {\n    req.requestId = (0, utils_1.generateRequestId)();\n    res.setHeader(\"X-Request-ID\", req.requestId);\n    next();\n});\n/**\n * POST /notifications/send\n * Send notification (service-to-service)\n */\napp.post(\"/send\", auth_1.authenticateService, async (req, res) => {\n    try {\n        const notification = req.body;\n        const result = await processNotification(notification);\n        res.json((0, utils_1.createSuccessResponse)(result, \"Notification processed successfully\", req.requestId));\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error sending notification:\", error);\n        res.status(500).json((0, utils_1.createErrorResponse)(\"Failed to send notification\", { error: error.message }, req.requestId));\n    }\n});\n/**\n * Firestore trigger for new notifications\n */\nexports.onNotificationCreated = (0, firestore_1.onDocumentCreated)({\n    document: \"notifications/{notificationId}\",\n    region: \"us-central1\",\n    memory: \"512MiB\",\n    timeoutSeconds: 300,\n    maxInstances: 20\n}, async (event) => {\n    var _a;\n    const notificationId = event.params.notificationId;\n    const notificationData = (_a = event.data) === null || _a === void 0 ? void 0 : _a.data();\n    if (!notificationData || notificationData.processed) {\n        return;\n    }\n    firebase_functions_1.logger.info(`Processing notification: ${notificationId}`, {\n        notificationId,\n        userId: notificationData.userId,\n        organizationId: notificationData.organizationId,\n        type: notificationData.type,\n        channels: notificationData.channels\n    });\n    try {\n        await processNotification(notificationData);\n        // Mark as processed\n        await firebase_1.collections.firestore\n            .collection(\"notifications\")\n            .doc(notificationId)\n            .update({\n            processed: true,\n            processedAt: new Date()\n        });\n        firebase_functions_1.logger.info(`Notification processed successfully: ${notificationId}`);\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(`Error processing notification ${notificationId}:`, error);\n        // Mark as failed\n        await firebase_1.collections.firestore\n            .collection(\"notifications\")\n            .doc(notificationId)\n            .update({\n            processed: false,\n            processingError: error.message,\n            failedAt: new Date()\n        });\n    }\n});\n/**\n * Process notification through various channels\n */\nasync function processNotification(notification) {\n    const results = {};\n    // Process each channel\n    for (const channel of notification.channels) {\n        try {\n            switch (channel) {\n                case \"push\":\n                    results[channel] = await sendPushNotification(notification);\n                    break;\n                case \"email\":\n                    results[channel] = await sendEmailNotification(notification);\n                    break;\n                case \"webhook\":\n                    results[channel] = await sendWebhookNotification(notification);\n                    break;\n                default:\n                    results[channel] = {\n                        success: false,\n                        details: { error: `Unsupported channel: ${channel}` }\n                    };\n            }\n        }\n        catch (error) {\n            firebase_functions_1.logger.error(`Error sending notification via ${channel}:`, error);\n            results[channel] = {\n                success: false,\n                details: { error: error.message }\n            };\n        }\n    }\n    return { channels: results };\n}\n/**\n * Send push notification via Firebase Messaging\n */\nasync function sendPushNotification(notification) {\n    var _a;\n    try {\n        // Get user's FCM tokens\n        const userTokensSnapshot = await firebase_1.collections.firestore\n            .collection(\"userTokens\")\n            .doc(notification.userId)\n            .get();\n        if (!userTokensSnapshot.exists) {\n            return {\n                success: false,\n                details: { error: \"No FCM tokens found for user\" }\n            };\n        }\n        const tokens = ((_a = userTokensSnapshot.data()) === null || _a === void 0 ? void 0 : _a.fcmTokens) || [];\n        if (tokens.length === 0) {\n            return {\n                success: false,\n                details: { error: \"No active FCM tokens\" }\n            };\n        }\n        // Create FCM message\n        const message = {\n            notification: {\n                title: notification.title,\n                body: notification.message\n            },\n            data: Object.assign({ type: notification.type, organizationId: notification.organizationId || \"\" }, (notification.data ? JSON.stringify(notification.data) : {})),\n            tokens: tokens\n        };\n        // Send multicast message\n        const response = await firebase_1.messaging.sendMulticast(message);\n        firebase_functions_1.logger.info(`Push notification sent`, {\n            userId: notification.userId,\n            successCount: response.successCount,\n            failureCount: response.failureCount\n        });\n        // Clean up invalid tokens\n        if (response.failureCount > 0) {\n            const invalidTokens = [];\n            response.responses.forEach((resp, idx) => {\n                var _a, _b;\n                if (!resp.success &&\n                    (((_a = resp.error) === null || _a === void 0 ? void 0 : _a.code) === \"messaging/invalid-registration-token\" ||\n                        ((_b = resp.error) === null || _b === void 0 ? void 0 : _b.code) === \"messaging/registration-token-not-registered\")) {\n                    invalidTokens.push(tokens[idx]);\n                }\n            });\n            if (invalidTokens.length > 0) {\n                const validTokens = tokens.filter((token) => !invalidTokens.includes(token));\n                await userTokensSnapshot.ref.update({ fcmTokens: validTokens });\n            }\n        }\n        return {\n            success: response.successCount > 0,\n            details: {\n                successCount: response.successCount,\n                failureCount: response.failureCount,\n                invalidTokensRemoved: response.failureCount\n            }\n        };\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error sending push notification:\", error);\n        return {\n            success: false,\n            details: { error: error.message }\n        };\n    }\n}\n/**\n * Send email notification\n */\nasync function sendEmailNotification(notification) {\n    try {\n        // In a real implementation, you would integrate with an email service\n        // like SendGrid, AWS SES, or similar\n        // For now, just store the email request\n        await firebase_1.collections.firestore.collection(\"emailQueue\").add({\n            userId: notification.userId,\n            organizationId: notification.organizationId,\n            subject: notification.title,\n            body: notification.message,\n            type: notification.type,\n            data: notification.data,\n            createdAt: new Date(),\n            processed: false\n        });\n        firebase_functions_1.logger.info(`Email notification queued for user: ${notification.userId}`);\n        return {\n            success: true,\n            details: { message: \"Email queued for delivery\" }\n        };\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error queuing email notification:\", error);\n        return {\n            success: false,\n            details: { error: error.message }\n        };\n    }\n}\n/**\n * Send webhook notification\n */\nasync function sendWebhookNotification(notification) {\n    var _a, _b;\n    try {\n        // Get organization webhook configuration\n        const orgConfigSnapshot = await firebase_1.collections.configs\n            .where(\"organizationId\", \"==\", notification.organizationId)\n            .where(\"isActive\", \"==\", true)\n            .limit(1)\n            .get();\n        if (orgConfigSnapshot.empty) {\n            return {\n                success: false,\n                details: { error: \"No webhook configuration found\" }\n            };\n        }\n        const config = orgConfigSnapshot.docs[0].data();\n        const webhookUrl = (_a = config.settings) === null || _a === void 0 ? void 0 : _a.webhookUrl;\n        if (!webhookUrl) {\n            return {\n                success: false,\n                details: { error: \"No webhook URL configured\" }\n            };\n        }\n        // Prepare webhook payload\n        const webhookPayload = {\n            id: (0, utils_1.generateRequestId)(),\n            timestamp: new Date().toISOString(),\n            type: \"notification\",\n            data: {\n                userId: notification.userId,\n                organizationId: notification.organizationId,\n                notification: {\n                    title: notification.title,\n                    message: notification.message,\n                    type: notification.type,\n                    data: notification.data\n                }\n            }\n        };\n        // Send webhook (in production, consider using a queue for retry logic)\n        const response = await fetch(webhookUrl, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"User-Agent\": \"LicitaReview-Webhook/1.0\",\n                \"X-Webhook-Signature\": generateWebhookSignature(webhookPayload, (_b = config.settings) === null || _b === void 0 ? void 0 : _b.webhookSecret)\n            },\n            body: JSON.stringify(webhookPayload)\n        });\n        const success = response.ok;\n        firebase_functions_1.logger.info(`Webhook notification sent`, {\n            userId: notification.userId,\n            webhookUrl,\n            status: response.status,\n            success\n        });\n        return {\n            success,\n            details: {\n                status: response.status,\n                statusText: response.statusText,\n                url: webhookUrl\n            }\n        };\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error sending webhook notification:\", error);\n        return {\n            success: false,\n            details: { error: error.message }\n        };\n    }\n}\n/**\n * Generate webhook signature for security\n */\nfunction generateWebhookSignature(payload, secret) {\n    if (!secret)\n        return \"\";\n    const crypto = require(\"crypto\");\n    const payloadString = JSON.stringify(payload);\n    return crypto\n        .createHmac(\"sha256\", secret)\n        .update(payloadString)\n        .digest(\"hex\");\n}\n/**\n * Get user notification preferences\n */\nasync function getUserNotificationPreferences(userId) {\n    var _a;\n    try {\n        const userPrefsSnapshot = await firebase_1.collections.firestore\n            .collection(\"userPreferences\")\n            .doc(userId)\n            .get();\n        if (!userPrefsSnapshot.exists) {\n            // Default preferences\n            return {\n                push: true,\n                email: true,\n                webhook: false,\n                types: [\"success\", \"error\", \"warning\", \"info\"]\n            };\n        }\n        const prefs = ((_a = userPrefsSnapshot.data()) === null || _a === void 0 ? void 0 : _a.notifications) || {};\n        return {\n            push: prefs.push !== false,\n            email: prefs.email !== false,\n            webhook: prefs.webhook === true,\n            types: prefs.types || [\"success\", \"error\", \"warning\", \"info\"]\n        };\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(`Error getting user notification preferences for ${userId}:`, error);\n        // Return defaults on error\n        return {\n            push: true,\n            email: false,\n            webhook: false,\n            types: [\"error\"] // Only critical notifications on error\n        };\n    }\n}\n// Export Cloud Function\nexports.notificationProcessor = (0, https_1.onRequest)({\n    region: \"us-central1\",\n    memory: \"512MiB\",\n    timeoutSeconds: 300,\n    maxInstances: 20,\n    cors: false // Only service-to-service calls\n}, app);\n//# sourceMappingURL=notifications.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/organization-config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/parameter-engine.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'GenerateParametersQuerySchema' is assigned a value but never used.","line":53,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'forceRefresh' is assigned a value but never used.","line":74,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'newConfig' is assigned a value but never used.","line":192,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":192,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":235,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":235,"endColumn":31}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Parameter Engine API - Gerenciamento de Par√¢metros de An√°lise\n *\n * API para gerenciar e otimizar par√¢metros de an√°lise usando o ParameterEngine.\n * Permite configura√ß√£o adaptativa e otimiza√ß√£o baseada em hist√≥rico.\n *\n * üöÄ CORE DIFFERENTIATOR: Engine adaptativo de par√¢metros\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parameterEngineApi = void 0;\nconst https_1 = require(\"firebase-functions/v2/https\");\nconst express_1 = __importDefault(require(\"express\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst express_rate_limit_1 = __importDefault(require(\"express-rate-limit\"));\nconst zod_1 = require(\"zod\");\nconst firebase_1 = require(\"../config/firebase\");\nconst ParameterEngine_1 = require(\"../services/ParameterEngine\");\nconst auth_1 = require(\"../middleware/auth\");\nconst utils_1 = require(\"../utils\");\nconst config_1 = require(\"../config\");\nconst firebase_functions_1 = require(\"firebase-functions\");\nconst app = (0, express_1.default)();\n// Middleware\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)({ origin: config_1.config.corsOrigin }));\napp.use(express_1.default.json({ limit: config_1.config.maxRequestSize }));\napp.use(utils_1.generateRequestId);\napp.use(auth_1.authenticateUser);\napp.use(auth_1.requireOrganization);\n// Rate limiting\nconst limiter = (0, express_rate_limit_1.default)({\n    windowMs: config_1.config.rateLimitWindowMs,\n    max: config_1.config.rateLimitMax,\n    message: { error: \"Too many requests, please try again later\" },\n    standardHeaders: true,\n    legacyHeaders: false\n});\napp.use(limiter);\n// Initialize ParameterEngine\nconst parameterEngine = new ParameterEngine_1.ParameterEngine(firebase_1.firestore, {\n    enableAdaptiveWeights: true,\n    enableLearningMode: true,\n    adaptationThreshold: 10,\n    maxWeightAdjustment: 15.0,\n    cacheTimeout: 30 * 60 * 1000 // 30 minutos\n});\n// Schemas de valida√ß√£o\nconst GenerateParametersQuerySchema = zod_1.z.object({\n    forceRefresh: zod_1.z.string().optional().transform(val => val === 'true')\n});\nconst OptimizeParametersRequestSchema = zod_1.z.object({\n    analysisCount: zod_1.z.number().int().min(1).max(100).optional().default(50),\n    includeRecommendations: zod_1.z.boolean().optional().default(true)\n});\nconst UpdateEngineConfigRequestSchema = zod_1.z.object({\n    enableAdaptiveWeights: zod_1.z.boolean().optional(),\n    enableLearningMode: zod_1.z.boolean().optional(),\n    adaptationThreshold: zod_1.z.number().int().min(1).max(100).optional(),\n    maxWeightAdjustment: zod_1.z.number().min(0).max(50).optional(),\n    cacheTimeout: zod_1.z.number().int().min(60000).max(3600000).optional() // 1min - 1h\n});\n/**\n * GET /parameters\n * Gera par√¢metros de an√°lise otimizados para a organiza√ß√£o\n */\napp.get(\"/parameters\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_READ]), async (req, res) => {\n    var _a;\n    try {\n        const forceRefresh = req.query.forceRefresh === 'true';\n        const organizationId = req.user.organizationId;\n        const parameters = await parameterEngine.generateParameters(organizationId);\n        res.status(200).json((0, utils_1.createSuccessResponse)(parameters, req.requestId));\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error generating parameters\", {\n            organizationId: (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId,\n            error: error instanceof Error ? error.message : error,\n            requestId: req.requestId\n        });\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(\"VALIDATION_ERROR\", error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"INTERNAL_ERROR\", \"Internal server error while generating parameters\", undefined, req.requestId));\n        }\n    }\n});\n/**\n * POST /optimize\n * Analisa hist√≥rico e sugere otimiza√ß√µes de par√¢metros\n */\napp.post(\"/optimize\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_WRITE]), async (req, res) => {\n    var _a;\n    try {\n        const bodyValidation = (0, utils_1.validateData)(OptimizeParametersRequestSchema, req.body);\n        if (!bodyValidation.success) {\n            throw new utils_1.ValidationError(bodyValidation.error, bodyValidation.details);\n        }\n        const requestData = bodyValidation.data;\n        const organizationId = req.user.organizationId;\n        // Gerar par√¢metros atuais\n        const currentParameters = await parameterEngine.generateParameters(organizationId);\n        // Simular otimiza√ß√£o (o ParameterEngine j√° faz isso internamente)\n        // Aqui podemos expor mais detalhes sobre as otimiza√ß√µes\n        const optimizationResult = {\n            currentParameters,\n            hasOptimizations: !!currentParameters.adaptiveAdjustments,\n            optimizationDetails: currentParameters.adaptiveAdjustments ? {\n                confidence: currentParameters.adaptiveAdjustments.confidenceScore,\n                basedOnAnalyses: currentParameters.adaptiveAdjustments.basedOnAnalyses,\n                weightAdjustments: currentParameters.adaptiveAdjustments.weightAdjustments,\n                lastUpdated: currentParameters.adaptiveAdjustments.lastUpdated\n            } : null,\n            recommendations: requestData.includeRecommendations ? [\n                \"Continue usando o sistema para melhorar as otimiza√ß√µes adaptativas\",\n                \"Considere revisar regras customizadas baseadas no hist√≥rico de an√°lises\",\n                \"Monitore a performance das categorias com menor pontua√ß√£o\"\n            ] : []\n        };\n        res.status(200).json((0, utils_1.createSuccessResponse)(optimizationResult, req.requestId));\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error optimizing parameters\", {\n            organizationId: (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId,\n            error: error instanceof Error ? error.message : error,\n            requestId: req.requestId\n        });\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(\"VALIDATION_ERROR\", error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"INTERNAL_ERROR\", \"Internal server error while optimizing parameters\", undefined, req.requestId));\n        }\n    }\n});\n/**\n * POST /refresh-cache\n * Limpa cache de par√¢metros para for√ßar regenera√ß√£o\n */\napp.post(\"/refresh-cache\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_WRITE]), async (req, res) => {\n    var _a;\n    try {\n        const organizationId = req.user.organizationId;\n        parameterEngine.clearCache(organizationId);\n        res.status(200).json((0, utils_1.createSuccessResponse)({ cleared: true }, req.requestId));\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error clearing parameter cache\", {\n            organizationId: (_a = req.user) === null || _a === void 0 ? void 0 : _a.organizationId,\n            error: error instanceof Error ? error.message : error,\n            requestId: req.requestId\n        });\n        res.status(500).json((0, utils_1.createErrorResponse)(\"INTERNAL_ERROR\", \"Internal server error while clearing cache\", undefined, req.requestId));\n    }\n});\n/**\n * GET /engine/stats\n * Obt√©m estat√≠sticas do ParameterEngine\n */\napp.get(\"/engine/stats\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_READ]), async (req, res) => {\n    try {\n        const stats = parameterEngine.getEngineStats();\n        res.status(200).json((0, utils_1.createSuccessResponse)(stats, req.requestId));\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error getting engine stats\", {\n            error: error instanceof Error ? error.message : error,\n            requestId: req.requestId\n        });\n        res.status(500).json((0, utils_1.createErrorResponse)(\"INTERNAL_ERROR\", \"Internal server error while getting engine stats\", undefined, req.requestId));\n    }\n});\n/**\n * PUT /engine/config\n * Atualiza configura√ß√£o do ParameterEngine (apenas super admins)\n */\napp.put(\"/engine/config\", (0, auth_1.requirePermissions)([auth_1.PERMISSIONS.CONFIG_WRITE]), // Using CONFIG_WRITE since SUPER_ADMIN doesn't exist\nasync (req, res) => {\n    try {\n        const configValidation = (0, utils_1.validateData)(UpdateEngineConfigRequestSchema, req.body);\n        if (!configValidation.success) {\n            throw new utils_1.ValidationError(configValidation.error, configValidation.details);\n        }\n        const configUpdate = configValidation.data;\n        // Criar novo engine com configura√ß√£o atualizada\n        const currentStats = parameterEngine.getEngineStats();\n        const newConfig = Object.assign(Object.assign({}, currentStats.config), configUpdate);\n        // Limpar cache para aplicar nova configura√ß√£o\n        parameterEngine.clearCache();\n        res.status(200).json((0, utils_1.createSuccessResponse)({ updated: true }, req.requestId));\n    }\n    catch (error) {\n        firebase_functions_1.logger.error(\"Error updating engine config\", {\n            error: error instanceof Error ? error.message : error,\n            requestId: req.requestId\n        });\n        if (error instanceof utils_1.ValidationError) {\n            res.status(400).json((0, utils_1.createErrorResponse)(\"VALIDATION_ERROR\", error.message, error.details, req.requestId));\n        }\n        else {\n            res.status(500).json((0, utils_1.createErrorResponse)(\"INTERNAL_ERROR\", \"Internal server error while updating engine config\", undefined, req.requestId));\n        }\n    }\n});\n/**\n * GET /health\n * Health check do ParameterEngine\n */\napp.get(\"/health\", async (req, res) => {\n    try {\n        const stats = parameterEngine.getEngineStats();\n        res.json({\n            status: \"healthy\",\n            timestamp: new Date().toISOString(),\n            engine: {\n                version: stats.version,\n                cacheSize: stats.cacheSize\n            }\n        });\n    }\n    catch (error) {\n        res.status(503).json({\n            status: \"unhealthy\",\n            timestamp: new Date().toISOString(),\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n});\n// Error handling middleware\napp.use((error, req, res, next) => {\n    firebase_functions_1.logger.error(\"Unhandled error in parameter-engine API\", {\n        error: error.message,\n        stack: error.stack,\n        requestId: req.requestId\n    });\n    res.status(500).json((0, utils_1.createErrorResponse)(\"INTERNAL_ERROR\", \"Internal server error\", undefined, req.requestId));\n});\nexports.parameterEngineApi = (0, https_1.onRequest)({\n    region: \"us-central1\",\n    memory: \"512MiB\",\n    timeoutSeconds: 60,\n    maxInstances: 10\n}, app);\n//# sourceMappingURL=parameter-engine.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/process-analysis.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/api/routes/comissoes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/config/firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/config/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/migrations/001-initial-data.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/migrations/migration-runner.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/repositories/AnalysisRepository.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/repositories/BaseRepository.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/repositories/ComissaoRepository.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/repositories/DocumentRepository.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/repositories/OrganizationRepository.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/schemas/analysis.schema.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/schemas/document.schema.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/db/schemas/organization.schema.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/middleware/auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/middleware/error.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":61,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Error Handling Middleware\n * LicitaReview Cloud Functions\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setupGlobalErrorHandlers = exports.formatValidationError = exports.corsError = exports.rateLimitError = exports.externalServiceError = exports.dbErrorHandler = exports.healthCheckError = exports.timeoutHandler = exports.asyncHandler = exports.notFoundHandler = exports.errorHandler = exports.ServiceUnavailableError = exports.BadRequestError = exports.ConflictError = exports.ForbiddenError = exports.UnauthorizedError = exports.NotFoundError = exports.AppError = void 0;\nconst firebase_functions_1 = require(\"firebase-functions\");\nconst utils_1 = require(\"../utils\");\nconst config_1 = require(\"../config\");\n// Custom error classes\nclass AppError extends Error {\n    constructor(message, statusCode = 500, details) {\n        super(message);\n        this.statusCode = statusCode;\n        this.isOperational = true;\n        this.details = details;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\nexports.AppError = AppError;\nclass NotFoundError extends AppError {\n    constructor(resource, id) {\n        super(`${resource}${id ? ` with id ${id}` : \"\"} not found`, 404, { resource, id });\n    }\n}\nexports.NotFoundError = NotFoundError;\nclass UnauthorizedError extends AppError {\n    constructor(message = \"Unauthorized access\") {\n        super(message, 401);\n    }\n}\nexports.UnauthorizedError = UnauthorizedError;\nclass ForbiddenError extends AppError {\n    constructor(message = \"Forbidden access\") {\n        super(message, 403);\n    }\n}\nexports.ForbiddenError = ForbiddenError;\nclass ConflictError extends AppError {\n    constructor(message, details) {\n        super(message, 409, details);\n    }\n}\nexports.ConflictError = ConflictError;\nclass BadRequestError extends AppError {\n    constructor(message, details) {\n        super(message, 400, details);\n    }\n}\nexports.BadRequestError = BadRequestError;\nclass ServiceUnavailableError extends AppError {\n    constructor(message = \"Service temporarily unavailable\") {\n        super(message, 503);\n    }\n}\nexports.ServiceUnavailableError = ServiceUnavailableError;\n/**\n * Error handling middleware - should be the last middleware\n */\nconst errorHandler = (error, req, res, next) => {\n    var _a, _b;\n    // Ensure request ID exists\n    if (!req.requestId) {\n        req.requestId = (0, utils_1.generateRequestId)();\n    }\n    // Log error with context\n    const errorContext = {\n        requestId: req.requestId,\n        method: req.method,\n        path: req.path,\n        userAgent: req.get(\"User-Agent\"),\n        ip: req.ip,\n        userId: (_a = req.user) === null || _a === void 0 ? void 0 : _a.uid,\n        organizationId: (_b = req.user) === null || _b === void 0 ? void 0 : _b.organizationId,\n        error: {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        }\n    };\n    // Determine log level based on error type\n    if (error instanceof AppError && error.statusCode < 500) {\n        firebase_functions_1.logger.warn(\"Client error occurred\", errorContext);\n    }\n    else if (error instanceof utils_1.ValidationError) {\n        firebase_functions_1.logger.warn(\"Validation error occurred\", errorContext);\n    }\n    else {\n        firebase_functions_1.logger.error(\"Server error occurred\", errorContext);\n    }\n    // Handle specific error types\n    let statusCode = 500;\n    let message = \"Internal server error\";\n    let details = undefined;\n    if (error instanceof AppError) {\n        statusCode = error.statusCode;\n        message = error.message;\n        details = error.details;\n    }\n    else if (error instanceof utils_1.ValidationError) {\n        statusCode = 400;\n        message = error.message;\n        details = error.details;\n    }\n    else if (error.name === \"UnauthorizedError\" || error.message.includes(\"unauthorized\")) {\n        statusCode = 401;\n        message = \"Unauthorized access\";\n    }\n    else if (error.name === \"ForbiddenError\" || error.message.includes(\"forbidden\")) {\n        statusCode = 403;\n        message = \"Forbidden access\";\n    }\n    else if (error.message.includes(\"not found\")) {\n        statusCode = 404;\n        message = \"Resource not found\";\n    }\n    else if (error.message.includes(\"timeout\")) {\n        statusCode = 408;\n        message = \"Request timeout\";\n    }\n    else if (error.message.includes(\"too many\")) {\n        statusCode = 429;\n        message = \"Too many requests\";\n    }\n    // Create error response\n    const errorResponse = (0, utils_1.createErrorResponse)('INTERNAL_ERROR', message, config_1.config.isDevelopment ? details || error.stack : details, req.requestId);\n    // Add additional error metadata in development\n    if (config_1.config.isDevelopment) {\n        errorResponse.debug = {\n            name: error.name,\n            stack: error.stack,\n            timestamp: new Date().toISOString()\n        };\n    }\n    // Send response\n    res.status(statusCode).json(errorResponse);\n};\nexports.errorHandler = errorHandler;\n/**\n * Not found handler - for unmatched routes\n */\nconst notFoundHandler = (req, res) => {\n    const error = (0, utils_1.createErrorResponse)(\"NOT_FOUND\", `Route not found: ${req.method} ${req.path}`, {\n        method: req.method,\n        path: req.path,\n        availableRoutes: \"Check API documentation for available routes\"\n    }, req.requestId);\n    res.status(404).json(error);\n};\nexports.notFoundHandler = notFoundHandler;\n/**\n * Async error wrapper for route handlers\n */\nconst asyncHandler = (fn) => {\n    return (req, res, next) => {\n        Promise.resolve(fn(req, res, next)).catch(next);\n    };\n};\nexports.asyncHandler = asyncHandler;\n/**\n * Timeout handler\n */\nconst timeoutHandler = (timeoutMs = 30000) => {\n    return (req, res, next) => {\n        const timeout = setTimeout(() => {\n            const error = new AppError(`Request timeout after ${timeoutMs}ms`, 408, { timeout: timeoutMs });\n            next(error);\n        }, timeoutMs);\n        // Clear timeout when response is sent\n        res.on(\"finish\", () => clearTimeout(timeout));\n        res.on(\"close\", () => clearTimeout(timeout));\n        next();\n    };\n};\nexports.timeoutHandler = timeoutHandler;\n/**\n * Health check error handler\n */\nconst healthCheckError = (serviceName, error) => {\n    firebase_functions_1.logger.error(`Health check failed for ${serviceName}`, {\n        service: serviceName,\n        error: error.message,\n        stack: error.stack\n    });\n    return {\n        service: serviceName,\n        status: \"unhealthy\",\n        timestamp: new Date(),\n        error: error.message,\n        details: config_1.config.isDevelopment ? error.stack : undefined\n    };\n};\nexports.healthCheckError = healthCheckError;\n/**\n * Database connection error handler\n */\nconst dbErrorHandler = (operation, error) => {\n    const errorMessage = `Database operation failed: ${operation}`;\n    firebase_functions_1.logger.error(errorMessage, {\n        operation,\n        error: (error === null || error === void 0 ? void 0 : error.message) || error,\n        code: error === null || error === void 0 ? void 0 : error.code,\n        details: error === null || error === void 0 ? void 0 : error.details\n    });\n    // Map Firestore errors to appropriate HTTP status codes\n    if ((error === null || error === void 0 ? void 0 : error.code) === \"not-found\") {\n        throw new NotFoundError(\"Resource\");\n    }\n    else if ((error === null || error === void 0 ? void 0 : error.code) === \"permission-denied\") {\n        throw new ForbiddenError(\"Insufficient permissions for database operation\");\n    }\n    else if ((error === null || error === void 0 ? void 0 : error.code) === \"already-exists\") {\n        throw new ConflictError(\"Resource already exists\");\n    }\n    else if ((error === null || error === void 0 ? void 0 : error.code) === \"resource-exhausted\") {\n        throw new ServiceUnavailableError(\"Database resources exhausted\");\n    }\n    else if ((error === null || error === void 0 ? void 0 : error.code) === \"deadline-exceeded\") {\n        throw new AppError(\"Database operation timeout\", 408);\n    }\n    else {\n        throw new AppError(errorMessage, 500, { operation, originalError: error === null || error === void 0 ? void 0 : error.message });\n    }\n};\nexports.dbErrorHandler = dbErrorHandler;\n/**\n * External service error handler\n */\nconst externalServiceError = (serviceName, error) => {\n    var _a;\n    const errorMessage = `External service error: ${serviceName}`;\n    firebase_functions_1.logger.error(errorMessage, {\n        service: serviceName,\n        error: (error === null || error === void 0 ? void 0 : error.message) || error,\n        status: (error === null || error === void 0 ? void 0 : error.status) || (error === null || error === void 0 ? void 0 : error.statusCode),\n        response: (_a = error === null || error === void 0 ? void 0 : error.response) === null || _a === void 0 ? void 0 : _a.data\n    });\n    if ((error === null || error === void 0 ? void 0 : error.status) >= 400 && (error === null || error === void 0 ? void 0 : error.status) < 500) {\n        throw new AppError(`${serviceName} service error: ${error.message}`, error.status, { service: serviceName });\n    }\n    else {\n        throw new ServiceUnavailableError(`${serviceName} service is currently unavailable`);\n    }\n};\nexports.externalServiceError = externalServiceError;\n/**\n * Rate limit error handler\n */\nconst rateLimitError = (req, res) => {\n    const error = (0, utils_1.createErrorResponse)(\"RATE_LIMIT_EXCEEDED\", \"Rate limit exceeded\", {\n        limit: \"100 requests per 15 minutes\",\n        retryAfter: \"15 minutes\",\n        documentation: \"https://docs.api.com/rate-limits\"\n    }, req.requestId);\n    res.status(429).json(error);\n};\nexports.rateLimitError = rateLimitError;\n/**\n * CORS error handler\n */\nconst corsError = (req, res) => {\n    const error = (0, utils_1.createErrorResponse)(\"CORS_VIOLATION\", \"CORS policy violation\", {\n        origin: req.headers.origin,\n        allowedOrigins: config_1.config.corsOrigin,\n        documentation: \"https://docs.api.com/cors\"\n    }, req.requestId);\n    res.status(403).json(error);\n};\nexports.corsError = corsError;\n/**\n * Validation error formatter\n */\nconst formatValidationError = (error) => {\n    return (0, utils_1.createErrorResponse)(\"VALIDATION_ERROR\", error.message, {\n        validationErrors: error.details,\n        documentation: \"https://docs.api.com/validation\"\n    });\n};\nexports.formatValidationError = formatValidationError;\n/**\n * Global unhandled rejection handler\n */\nconst setupGlobalErrorHandlers = () => {\n    process.on(\"unhandledRejection\", (reason, promise) => {\n        firebase_functions_1.logger.error(\"Unhandled Rejection at:\", {\n            promise: promise.toString(),\n            reason: (reason === null || reason === void 0 ? void 0 : reason.message) || reason\n        });\n        // In production, you might want to exit the process\n        if (config_1.config.nodeEnv === \"production\") {\n            process.exit(1);\n        }\n    });\n    process.on(\"uncaughtException\", (error) => {\n        firebase_functions_1.logger.error(\"Uncaught Exception:\", {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        });\n        // Exit the process for uncaught exceptions\n        process.exit(1);\n    });\n};\nexports.setupGlobalErrorHandlers = setupGlobalErrorHandlers;\n//# sourceMappingURL=error.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/middleware/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/services/AnalysisOrchestrator.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":141,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":141,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * AnalysisOrchestrator - Orquestra√ß√£o de an√°lises entre Cloud Functions e Cloud Run\n * LicitaReview Cloud Functions\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AnalysisOrchestrator = void 0;\nconst DocumentRepository_1 = require(\"../db/repositories/DocumentRepository\");\nconst OrganizationRepository_1 = require(\"../db/repositories/OrganizationRepository\");\nconst CloudRunClient_1 = require(\"./CloudRunClient\");\nconst TaskQueueService_1 = require(\"./TaskQueueService\");\nconst NotificationService_1 = require(\"./NotificationService\");\nclass AnalysisOrchestrator {\n    constructor(firestore, cloudRunServiceUrl, projectId) {\n        this.activeAnalyses = new Map();\n        this.maxRetries = 3;\n        this.retryDelayMs = 5000; // 5 segundos\n        this.maxRetryDelayMs = 60000; // 1 minuto\n        this.db = firestore;\n        this.documentRepo = new DocumentRepository_1.DocumentRepository(firestore);\n        this.organizationRepo = new OrganizationRepository_1.OrganizationRepository(firestore);\n        this.cloudRunClient = new CloudRunClient_1.CloudRunClient(cloudRunServiceUrl);\n        this.taskQueue = new TaskQueueService_1.TaskQueueService(projectId);\n        this.notificationService = new NotificationService_1.NotificationService(projectId);\n    }\n    /**\n     * Inicia uma nova an√°lise\n     */\n    async startAnalysis(request) {\n        const analysisId = this.generateAnalysisId();\n        // Criar progresso inicial\n        const progress = {\n            analysisId,\n            documentId: request.documentId,\n            status: 'pending',\n            progress: 0,\n            currentStep: 'Iniciando an√°lise',\n            estimatedTimeRemaining: 300, // 5 minutos estimado\n            startedAt: new Date()\n        };\n        this.activeAnalyses.set(analysisId, progress);\n        await this.saveAnalysisProgress(progress);\n        // Processar an√°lise de forma ass√≠ncrona\n        this.processAnalysis(analysisId, request).catch(error => {\n            this.handleAnalysisError(analysisId, error);\n        });\n        return analysisId;\n    }\n    /**\n     * Processa uma an√°lise\n     */\n    async processAnalysis(analysisId, request) {\n        var _a;\n        const progress = await this.getAnalysisProgress(analysisId);\n        const retryCount = (progress === null || progress === void 0 ? void 0 : progress.retryCount) || 0;\n        const maxRetries = (progress === null || progress === void 0 ? void 0 : progress.maxRetries) || this.maxRetries;\n        try {\n            // Atualizar progresso\n            await this.updateProgress(analysisId, {\n                status: 'processing',\n                progress: 10,\n                currentStep: 'Carregando documento',\n                retryCount,\n                maxRetries\n            });\n            // Buscar documento com retry\n            const document = await this.retryOperation(() => this.loadDocument(request.documentId), 'Carregando documento', analysisId);\n            await this.updateProgress(analysisId, {\n                progress: 30,\n                currentStep: 'Carregando configura√ß√µes'\n            });\n            // Configura√ß√£o da organiza√ß√£o com retry\n            const orgConfig = await this.retryOperation(() => this.loadOrganizationConfig(request.organizationId), 'Carregando configura√ß√µes', analysisId);\n            await this.updateProgress(analysisId, {\n                progress: 50,\n                currentStep: 'Enviando para an√°lise'\n            });\n            // Preparar request para Cloud Run\n            const cloudRunRequest = {\n                document_content: document.content || '',\n                document_type: document.type || 'EDITAL',\n                classification: { type: document.type },\n                organization_config: orgConfig || {},\n                analysis_options: {\n                    include_ai: request.options.includeAI,\n                    generate_recommendations: request.options.generateRecommendations,\n                    detailed_metrics: request.options.detailedMetrics,\n                    custom_rules: ((_a = orgConfig === null || orgConfig === void 0 ? void 0 : orgConfig.analysisSettings) === null || _a === void 0 ? void 0 : _a.customRules) || []\n                },\n                metadata: {\n                    document_id: request.documentId,\n                    file_size: document.size || 0,\n                    upload_date: document.uploadedAt || new Date()\n                }\n            };\n            // An√°lise com retry autom√°tico (CloudRunClient j√° tem retry interno)\n            const cloudRunResult = await this.cloudRunClient.analyzeDocument(cloudRunRequest);\n            await this.updateProgress(analysisId, {\n                progress: 90,\n                currentStep: 'Processando resultados'\n            });\n            // Converter resultado para formato interno\n            const analysisResult = this.convertCloudRunResult(cloudRunResult, request);\n            // Salvar resultado com retry\n            await this.retryOperation(() => this.saveAnalysisResult(request.documentId, analysisResult), 'Salvando resultados', analysisId);\n            // Finalizar an√°lise\n            await this.updateProgress(analysisId, {\n                status: 'completed',\n                progress: 100,\n                currentStep: 'An√°lise conclu√≠da',\n                completedAt: new Date()\n            });\n            // Enviar notifica√ß√£o (sem retry cr√≠tico)\n            try {\n                await this.notificationService.notifyAnalysisComplete(request.userId, request.organizationId, analysisId, document.name || 'Documento', analysisResult);\n            }\n            catch (notificationError) {\n                console.warn(`Falha ao enviar notifica√ß√£o para an√°lise ${analysisId}:`, notificationError);\n            }\n            this.activeAnalyses.delete(analysisId);\n        }\n        catch (error) {\n            await this.handleAnalysisErrorWithRetry(analysisId, request, error, retryCount, maxRetries);\n        }\n    }\n    /**\n     * Obt√©m o progresso de uma an√°lise\n     */\n    async getAnalysisProgress(analysisId) {\n        // Verificar cache primeiro\n        const cached = this.activeAnalyses.get(analysisId);\n        if (cached) {\n            return cached;\n        }\n        // Carregar do banco\n        return await this.loadAnalysisProgress(analysisId);\n    }\n    /**\n     * Cancela uma an√°lise\n     */\n    async cancelAnalysis(analysisId, userId) {\n        const progress = await this.getAnalysisProgress(analysisId);\n        if (!progress) {\n            return false;\n        }\n        if (progress.status === 'completed' || progress.status === 'failed') {\n            return false;\n        }\n        await this.updateProgress(analysisId, {\n            status: 'cancelled',\n            currentStep: 'An√°lise cancelada',\n            completedAt: new Date()\n        });\n        this.activeAnalyses.delete(analysisId);\n        return true;\n    }\n    /**\n     * Lista an√°lises ativas\n     */\n    getActiveAnalyses() {\n        return Array.from(this.activeAnalyses.values());\n    }\n    // M√©todos privados\n    generateAnalysisId() {\n        return `analysis_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    convertCloudRunResult(cloudRunResult, request) {\n        return {\n            id: this.generateAnalysisId(),\n            documentId: request.documentId,\n            organizationId: request.organizationId,\n            conformityScore: cloudRunResult.results.conformity_score || 0,\n            confidence: cloudRunResult.results.confidence || 0,\n            problems: cloudRunResult.results.problems || [],\n            recommendations: cloudRunResult.results.recommendations || [],\n            metrics: cloudRunResult.results.metrics || {},\n            categoryResults: cloudRunResult.results.categories || {},\n            processingTime: cloudRunResult.processing_time || 0,\n            aiUsed: cloudRunResult.results.ai_used || false,\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n    }\n    async updateProgress(analysisId, updates) {\n        const current = this.activeAnalyses.get(analysisId);\n        if (current) {\n            const updated = Object.assign(Object.assign({}, current), updates);\n            this.activeAnalyses.set(analysisId, updated);\n            await this.saveAnalysisProgress(updated);\n        }\n    }\n    async saveAnalysisProgress(progress) {\n        await this.db.collection('analysis_progress').doc(progress.analysisId).set(Object.assign(Object.assign({}, progress), { updatedAt: new Date() }));\n    }\n    async loadAnalysisProgress(analysisId) {\n        const doc = await this.db.collection('analysis_progress').doc(analysisId).get();\n        return doc.exists ? doc.data() : null;\n    }\n    async saveAnalysisResult(documentId, result) {\n        await this.db.collection('analysis_results').doc(result.id).set(result);\n        // Atualizar documento com refer√™ncia ao resultado\n        await this.db.collection('documents').doc(documentId).update({\n            lastAnalysisId: result.id,\n            lastAnalysisDate: new Date(),\n            analysisStatus: 'completed'\n        });\n    }\n    async handleAnalysisError(analysisId, error) {\n        await this.updateProgress(analysisId, {\n            status: 'failed',\n            currentStep: 'Erro na an√°lise',\n            error: error.message,\n            completedAt: new Date()\n        });\n        // Log do erro\n        console.error(`An√°lise ${analysisId} falhou:`, {\n            error: error.message,\n            stack: error.stack,\n            timestamp: new Date().toISOString()\n        });\n        this.activeAnalyses.delete(analysisId);\n    }\n    /**\n     * Trata erros com l√≥gica de retry autom√°tico\n     */\n    async handleAnalysisErrorWithRetry(analysisId, request, error, currentRetryCount, maxRetries) {\n        const isRetryableError = this.isRetryableError(error);\n        const canRetry = isRetryableError && currentRetryCount < maxRetries;\n        if (canRetry) {\n            const nextRetryCount = currentRetryCount + 1;\n            const delayMs = this.calculateRetryDelay(nextRetryCount);\n            console.warn(`An√°lise ${analysisId} falhou (tentativa ${nextRetryCount}/${maxRetries}). Reagendando em ${delayMs}ms:`, {\n                error: error.message,\n                retryCount: nextRetryCount,\n                maxRetries,\n                delayMs\n            });\n            await this.updateProgress(analysisId, {\n                status: 'processing',\n                currentStep: `Erro tempor√°rio - reagendando (${nextRetryCount}/${maxRetries})`,\n                error: error.message,\n                retryCount: nextRetryCount,\n                lastRetryAt: new Date()\n            });\n            // Agendar retry\n            setTimeout(async () => {\n                try {\n                    await this.processAnalysis(analysisId, request);\n                }\n                catch (retryError) {\n                    console.error(`Erro no retry da an√°lise ${analysisId}:`, retryError);\n                }\n            }, delayMs);\n        }\n        else {\n            // Falha definitiva\n            await this.updateProgress(analysisId, {\n                status: 'failed',\n                currentStep: isRetryableError ? 'M√°ximo de tentativas excedido' : 'Erro n√£o recuper√°vel',\n                error: error.message,\n                completedAt: new Date(),\n                retryCount: currentRetryCount\n            });\n            console.error(`An√°lise ${analysisId} falhou definitivamente:`, {\n                error: error.message,\n                stack: error.stack,\n                retryCount: currentRetryCount,\n                maxRetries,\n                isRetryableError,\n                timestamp: new Date().toISOString()\n            });\n            this.activeAnalyses.delete(analysisId);\n        }\n    }\n    /**\n     * Executa uma opera√ß√£o com retry autom√°tico\n     */\n    async retryOperation(operation, operationName, analysisId, maxRetries = 3) {\n        let lastError;\n        for (let attempt = 1; attempt <= maxRetries; attempt++) {\n            try {\n                return await operation();\n            }\n            catch (error) {\n                lastError = error;\n                if (attempt === maxRetries || !this.isRetryableError(lastError)) {\n                    throw lastError;\n                }\n                const delayMs = this.calculateRetryDelay(attempt);\n                console.warn(`${operationName} falhou (tentativa ${attempt}/${maxRetries}). Tentando novamente em ${delayMs}ms:`, {\n                    error: lastError.message,\n                    analysisId,\n                    attempt,\n                    maxRetries\n                });\n                await this.sleep(delayMs);\n            }\n        }\n        throw lastError;\n    }\n    /**\n     * Verifica se um erro pode ser retentado\n     */\n    isRetryableError(error) {\n        const message = error.message.toLowerCase();\n        const name = error.name.toLowerCase();\n        // Erros de rede e tempor√°rios\n        const networkErrors = [\n            'network', 'timeout', 'econnreset', 'enotfound', 'econnrefused',\n            'socket hang up', 'request timeout', 'connection reset'\n        ];\n        // Erros HTTP retry√°veis\n        const retryableHttpErrors = [\n            '429', '500', '502', '503', '504', 'rate limit', 'service unavailable',\n            'internal server error', 'bad gateway', 'gateway timeout'\n        ];\n        // Erros do Firestore retry√°veis\n        const firestoreErrors = [\n            'unavailable', 'deadline-exceeded', 'resource-exhausted', 'aborted'\n        ];\n        return networkErrors.some(err => message.includes(err) || name.includes(err)) ||\n            retryableHttpErrors.some(err => message.includes(err)) ||\n            firestoreErrors.some(err => message.includes(err));\n    }\n    /**\n     * Calcula o delay para retry com backoff exponencial\n     */\n    calculateRetryDelay(attempt) {\n        const baseDelay = this.retryDelayMs;\n        const exponentialDelay = baseDelay * Math.pow(2, attempt - 1);\n        const jitter = Math.random() * 1000; // Adiciona jitter para evitar thundering herd\n        return Math.min(exponentialDelay + jitter, this.maxRetryDelayMs);\n    }\n    /**\n     * Utilit√°rio para sleep\n     */\n    sleep(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n    /**\n     * Carrega documento do banco de dados\n     */\n    async loadDocument(documentId) {\n        try {\n            // Tentar carregar do repository primeiro\n            if (this.documentRepo) {\n                const document = await this.documentRepo.findById(documentId);\n                if (document) {\n                    return document;\n                }\n            }\n            // Fallback para busca direta no Firestore\n            const doc = await this.db.collection('documents').doc(documentId).get();\n            if (!doc.exists) {\n                throw new Error(`Documento ${documentId} n√£o encontrado`);\n            }\n            return Object.assign({ id: doc.id }, doc.data());\n        }\n        catch (error) {\n            console.error(`Erro ao carregar documento ${documentId}:`, error);\n            throw error;\n        }\n    }\n    /**\n     * Carrega configura√ß√£o da organiza√ß√£o\n     */\n    async loadOrganizationConfig(organizationId) {\n        try {\n            // Tentar carregar organiza√ß√£o do repository primeiro\n            if (this.organizationRepo) {\n                const organization = await this.organizationRepo.findById(organizationId);\n                if (organization) {\n                    // Extrair configura√ß√µes da organiza√ß√£o\n                    return {\n                        analysisSettings: {\n                            enableAI: true,\n                            strictMode: false,\n                            customRules: []\n                        },\n                        notificationSettings: {\n                            email: true\n                        }\n                    };\n                }\n            }\n            // Fallback para busca direta no Firestore\n            const doc = await this.db.collection('organization_configs').doc(organizationId).get();\n            if (!doc.exists) {\n                // Retornar configura√ß√£o padr√£o se n√£o existir\n                return {\n                    analysisSettings: {\n                        enableAI: true,\n                        strictMode: false,\n                        customRules: []\n                    },\n                    notificationSettings: {\n                        email: true\n                    }\n                };\n            }\n            return doc.data();\n        }\n        catch (error) {\n            console.error(`Erro ao carregar configura√ß√£o da organiza√ß√£o ${organizationId}:`, error);\n            throw error;\n        }\n    }\n}\nexports.AnalysisOrchestrator = AnalysisOrchestrator;\n//# sourceMappingURL=AnalysisOrchestrator.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/services/CloudRunClient.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/services/ComissaoService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/services/NotificationService.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'payload' is defined but never used.","line":145,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":145,"endColumn":43},{"ruleId":"no-unused-vars","severity":2,"message":"'notification' is defined but never used.","line":156,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":156,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'notification' is defined but never used.","line":167,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":167,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":178,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":178,"endColumn":48}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Servi√ßo para gerenciar notifica√ß√µes do sistema\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotificationService = void 0;\nclass NotificationService {\n    constructor(projectId) {\n        this.projectId = projectId;\n    }\n    /**\n     * Envia notifica√ß√£o para um usu√°rio espec√≠fico\n     */\n    async sendNotification(payload) {\n        try {\n            console.log(`Enviando notifica√ß√£o para usu√°rio ${payload.userId}:`, {\n                type: payload.type,\n                title: payload.title,\n                message: payload.message,\n                priority: payload.priority || 'normal'\n            });\n            // Aqui seria implementada a l√≥gica real de envio\n            // Por exemplo, usando Firebase Cloud Messaging, SendGrid, etc.\n            // Simular envio bem-sucedido\n            await this.simulateNotificationSend(payload);\n            console.log(`Notifica√ß√£o enviada com sucesso para ${payload.userId}`);\n        }\n        catch (error) {\n            console.error('Erro ao enviar notifica√ß√£o:', error);\n            throw new Error(`Falha ao enviar notifica√ß√£o: ${error}`);\n        }\n    }\n    /**\n     * Envia notifica√ß√£o por email\n     */\n    async sendEmailNotification(notification) {\n        try {\n            console.log(`Enviando email para: ${notification.to.join(', ')}`);\n            console.log(`Assunto: ${notification.subject}`);\n            // Aqui seria implementada a integra√ß√£o com servi√ßo de email\n            // Por exemplo, SendGrid, AWS SES, etc.\n            await this.simulateEmailSend(notification);\n            console.log('Email enviado com sucesso');\n        }\n        catch (error) {\n            console.error('Erro ao enviar email:', error);\n            throw new Error(`Falha ao enviar email: ${error}`);\n        }\n    }\n    /**\n     * Envia notifica√ß√£o push\n     */\n    async sendPushNotification(notification) {\n        try {\n            console.log(`Enviando push notification para ${notification.tokens.length} dispositivos`);\n            console.log(`T√≠tulo: ${notification.title}`);\n            console.log(`Mensagem: ${notification.body}`);\n            // Aqui seria implementada a integra√ß√£o com Firebase Cloud Messaging\n            await this.simulatePushSend(notification);\n            console.log('Push notification enviado com sucesso');\n        }\n        catch (error) {\n            console.error('Erro ao enviar push notification:', error);\n            throw new Error(`Falha ao enviar push notification: ${error}`);\n        }\n    }\n    /**\n     * Notifica sobre conclus√£o de an√°lise\n     */\n    async notifyAnalysisComplete(userId, organizationId, analysisId, documentName, results) {\n        const payload = {\n            userId,\n            organizationId,\n            type: 'analysis_complete',\n            title: 'An√°lise Conclu√≠da',\n            message: `A an√°lise do documento \"${documentName}\" foi conclu√≠da com sucesso.`,\n            data: {\n                analysisId,\n                documentName,\n                conformityScore: results.conformity_score,\n                confidence: results.confidence\n            },\n            priority: 'normal'\n        };\n        await this.sendNotification(payload);\n    }\n    /**\n     * Notifica sobre falha na an√°lise\n     */\n    async notifyAnalysisFailure(userId, organizationId, analysisId, documentName, error) {\n        const payload = {\n            userId,\n            organizationId,\n            type: 'analysis_failed',\n            title: 'Falha na An√°lise',\n            message: `A an√°lise do documento \"${documentName}\" falhou. Erro: ${error}`,\n            data: {\n                analysisId,\n                documentName,\n                error\n            },\n            priority: 'high'\n        };\n        await this.sendNotification(payload);\n    }\n    /**\n     * Notifica sobre upload de documento\n     */\n    async notifyDocumentUploaded(userId, organizationId, documentId, documentName) {\n        const payload = {\n            userId,\n            organizationId,\n            type: 'document_uploaded',\n            title: 'Documento Carregado',\n            message: `O documento \"${documentName}\" foi carregado com sucesso e est√° sendo processado.`,\n            data: {\n                documentId,\n                documentName\n            },\n            priority: 'low'\n        };\n        await this.sendNotification(payload);\n    }\n    /**\n     * Envia alerta do sistema\n     */\n    async sendSystemAlert(userIds, organizationId, title, message, data) {\n        const promises = userIds.map(userId => {\n            const payload = {\n                userId,\n                organizationId,\n                type: 'system_alert',\n                title,\n                message,\n                data,\n                priority: 'urgent'\n            };\n            return this.sendNotification(payload);\n        });\n        await Promise.all(promises);\n    }\n    /**\n     * Simula envio de notifica√ß√£o (para desenvolvimento/teste)\n     */\n    async simulateNotificationSend(payload) {\n        // Simular delay de rede\n        await new Promise(resolve => setTimeout(resolve, 100));\n        // Simular falha ocasional (5% de chance)\n        if (Math.random() < 0.05) {\n            throw new Error('Falha simulada no envio de notifica√ß√£o');\n        }\n    }\n    /**\n     * Simula envio de email (para desenvolvimento/teste)\n     */\n    async simulateEmailSend(notification) {\n        // Simular delay de rede\n        await new Promise(resolve => setTimeout(resolve, 200));\n        // Simular falha ocasional (3% de chance)\n        if (Math.random() < 0.03) {\n            throw new Error('Falha simulada no envio de email');\n        }\n    }\n    /**\n     * Simula envio de push notification (para desenvolvimento/teste)\n     */\n    async simulatePushSend(notification) {\n        // Simular delay de rede\n        await new Promise(resolve => setTimeout(resolve, 150));\n        // Simular falha ocasional (2% de chance)\n        if (Math.random() < 0.02) {\n            throw new Error('Falha simulada no envio de push notification');\n        }\n    }\n    /**\n     * Obt√©m prefer√™ncias de notifica√ß√£o do usu√°rio\n     */\n    async getUserNotificationPreferences(userId) {\n        // Aqui seria implementada a busca das prefer√™ncias no banco de dados\n        // Por enquanto, retorna prefer√™ncias padr√£o\n        return {\n            email: true,\n            push: true,\n            sms: false,\n            types: ['analysis_complete', 'analysis_failed', 'system_alert']\n        };\n    }\n    /**\n     * Atualiza prefer√™ncias de notifica√ß√£o do usu√°rio\n     */\n    async updateUserNotificationPreferences(userId, preferences) {\n        console.log(`Atualizando prefer√™ncias de notifica√ß√£o para usu√°rio ${userId}:`, preferences);\n        // Aqui seria implementada a atualiza√ß√£o no banco de dados\n        // Por enquanto, apenas log\n    }\n}\nexports.NotificationService = NotificationService;\n//# sourceMappingURL=NotificationService.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/services/OrganizationConfigService.js","messages":[{"ruleId":"no-unreachable","severity":2,"message":"Unreachable code.","line":392,"column":23,"nodeType":"BlockStatement","messageId":"unreachableCode","endLine":398,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Organization Configuration Service\n *\n * Servi√ßo respons√°vel por conectar as configura√ß√µes organizacionais\n * armazenadas no Firestore com o Cloud Run analyzer service.\n *\n * üöÄ CORE DIFFERENTIATOR: Integra√ß√£o entre configura√ß√µes personalizadas\n * e o motor de an√°lise adaptativo.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OrganizationConfigService = void 0;\nexports.createOrganizationConfigService = createOrganizationConfigService;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst OrganizationRepository_1 = require(\"../db/repositories/OrganizationRepository\");\nconst firebase_functions_1 = require(\"firebase-functions\");\nclass OrganizationConfigService {\n    constructor(db, analyzerConfig) {\n        this.configCache = new Map();\n        this.CACHE_TTL = 5 * 60 * 1000; // 5 minutos\n        this.organizationRepo = new OrganizationRepository_1.OrganizationRepository(db);\n        this.customParamsRepo = new OrganizationRepository_1.CustomParametersRepository(db);\n        // Configurar cliente HTTP para o Cloud Run analyzer\n        this.analyzerClient = axios_1.default.create({\n            baseURL: analyzerConfig.baseUrl,\n            timeout: analyzerConfig.timeout,\n            headers: {\n                'Authorization': `Bearer ${analyzerConfig.apiKey}`,\n                'Content-Type': 'application/json'\n            }\n        });\n        // Interceptor para logging de requests\n        this.analyzerClient.interceptors.request.use((config) => {\n            var _a;\n            firebase_functions_1.logger.info('Sending request to analyzer service', {\n                url: config.url,\n                method: config.method,\n                organizationId: (_a = config.data) === null || _a === void 0 ? void 0 : _a.organizationId\n            });\n            return config;\n        }, (error) => {\n            firebase_functions_1.logger.error('Request interceptor error', { error: error.message });\n            return Promise.reject(error);\n        });\n        // Interceptor para logging de responses\n        this.analyzerClient.interceptors.response.use((response) => {\n            firebase_functions_1.logger.info('Received response from analyzer service', {\n                status: response.status,\n                url: response.config.url\n            });\n            return response;\n        }, (error) => {\n            var _a, _b;\n            firebase_functions_1.logger.error('Analyzer service error', {\n                status: (_a = error.response) === null || _a === void 0 ? void 0 : _a.status,\n                message: error.message,\n                url: (_b = error.config) === null || _b === void 0 ? void 0 : _b.url\n            });\n            return Promise.reject(error);\n        });\n    }\n    /**\n     * Obt√©m configura√ß√£o de an√°lise para uma organiza√ß√£o\n     */\n    async getAnalysisConfig(organizationId) {\n        // Verificar cache primeiro\n        const cached = this.configCache.get(organizationId);\n        if (cached && (Date.now() - cached.timestamp) < this.CACHE_TTL) {\n            firebase_functions_1.logger.debug('Returning cached config', { organizationId });\n            return cached.config;\n        }\n        try {\n            // Buscar organiza√ß√£o\n            const organization = await this.organizationRepo.findById(organizationId);\n            if (!organization) {\n                throw new Error(`Organization not found: ${organizationId}`);\n            }\n            // Buscar par√¢metros customizados\n            const customParams = await this.customParamsRepo.findByOrganization(organizationId);\n            // Construir configura√ß√£o de an√°lise\n            const config = await this.buildAnalysisConfig(organization, customParams);\n            // Armazenar no cache\n            this.configCache.set(organizationId, {\n                config,\n                timestamp: Date.now()\n            });\n            firebase_functions_1.logger.info('Built analysis config for organization', {\n                organizationId,\n                preset: config.preset,\n                customRulesCount: config.customRules.length\n            });\n            return config;\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error getting analysis config', {\n                organizationId,\n                error: error instanceof Error ? error.message : 'Unknown error'\n            });\n            throw error;\n        }\n    }\n    /**\n     * Sincroniza configura√ß√£o com o Cloud Run analyzer\n     */\n    async syncConfigWithAnalyzer(organizationId) {\n        try {\n            const config = await this.getAnalysisConfig(organizationId);\n            // Enviar configura√ß√£o para o analyzer service\n            await this.analyzerClient.post('/config/sync', {\n                organizationId,\n                config\n            });\n            firebase_functions_1.logger.info('Config synced with analyzer service', { organizationId });\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error syncing config with analyzer', {\n                organizationId,\n                error: error instanceof Error ? error.message : 'Unknown error'\n            });\n            throw error;\n        }\n    }\n    /**\n     * Valida configura√ß√£o com o analyzer service\n     */\n    async validateConfig(config) {\n        try {\n            const response = await this.analyzerClient.post('/config/validate', config);\n            return response.data;\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error validating config', {\n                organizationId: config.organizationId,\n                error: error instanceof Error ? error.message : 'Unknown error'\n            });\n            throw error;\n        }\n    }\n    /**\n     * Obt√©m presets dispon√≠veis do analyzer service\n     */\n    async getAvailablePresets() {\n        try {\n            const response = await this.analyzerClient.get('/config/presets');\n            return response.data;\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error getting available presets', {\n                error: error instanceof Error ? error.message : 'Unknown error'\n            });\n            throw error;\n        }\n    }\n    /**\n     * Limpa cache de configura√ß√£o\n     */\n    clearConfigCache(organizationId) {\n        if (organizationId) {\n            this.configCache.delete(organizationId);\n            firebase_functions_1.logger.debug('Cleared config cache for organization', { organizationId });\n        }\n        else {\n            this.configCache.clear();\n            firebase_functions_1.logger.debug('Cleared all config cache');\n        }\n    }\n    /**\n     * Alias para clearConfigCache\n     */\n    async clearCache(organizationId) {\n        this.clearConfigCache(organizationId);\n    }\n    /**\n     * Obter presets dispon√≠veis para uma organiza√ß√£o\n     */\n    async getPresets(organizationId) {\n        try {\n            const organization = await this.organizationRepo.findById(organizationId);\n            if (!organization) {\n                throw new Error(`Organization ${organizationId} not found`);\n            }\n            // Retornar presets padr√£o + customizados da organiza√ß√£o\n            const defaultPresets = [\n                { id: 'RIGOROUS', name: 'Rigoroso', description: 'An√°lise detalhada e rigorosa' },\n                { id: 'STANDARD', name: 'Padr√£o', description: 'An√°lise equilibrada' },\n                { id: 'TECHNICAL', name: 'T√©cnico', description: 'Foco em aspectos t√©cnicos' },\n                { id: 'FAST', name: 'R√°pido', description: 'An√°lise r√°pida e b√°sica' }\n            ];\n            // Buscar presets customizados da organiza√ß√£o\n            const customPresets = await this.customParamsRepo.findByOrganization(organizationId);\n            return [\n                ...defaultPresets,\n                ...customPresets.map(preset => ({\n                    id: preset.id,\n                    name: preset.name,\n                    description: preset.description,\n                    custom: true\n                }))\n            ];\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error getting presets:', { error: String(error), organizationId });\n            throw error;\n        }\n    }\n    /**\n     * Criar novo preset customizado\n     */\n    async createPreset(organizationId, presetData) {\n        try {\n            const organization = await this.organizationRepo.findById(organizationId);\n            if (!organization) {\n                throw new Error(`Organization ${organizationId} not found`);\n            }\n            const preset = {\n                id: presetData.id || `custom_${Date.now()}`,\n                organizationId,\n                name: presetData.name,\n                description: presetData.description,\n                weights: presetData.weights,\n                customRules: presetData.customRules || [],\n                presetType: 'CUSTOM',\n                status: 'ACTIVE',\n                isDefault: false,\n                version: '1.0.0',\n                createdBy: 'system',\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            await this.customParamsRepo.create(preset);\n            // Limpar cache\n            this.clearConfigCache(organizationId);\n            return preset;\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error creating preset:', { error: String(error), organizationId });\n            throw error;\n        }\n    }\n    /**\n     * Obter estat√≠sticas de uso das configura√ß√µes\n     */\n    async getUsageStats(organizationId) {\n        try {\n            const organization = await this.organizationRepo.findById(organizationId);\n            if (!organization) {\n                throw new Error(`Organization ${organizationId} not found`);\n            }\n            // Estat√≠sticas b√°sicas (em um cen√°rio real, viria de m√©tricas/analytics)\n            return {\n                organizationId,\n                totalAnalyses: 0, // Seria obtido do banco de dados\n                configChanges: 0, // Seria obtido do hist√≥rico\n                lastConfigUpdate: organization.updatedAt,\n                activePresets: await this.customParamsRepo.findByOrganization(organizationId).then(p => p.length),\n                cacheHits: 0, // Seria obtido de m√©tricas\n                avgAnalysisTime: 0 // Seria calculado das an√°lises\n            };\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error getting usage stats:', { error: String(error), organizationId });\n            throw error;\n        }\n    }\n    /**\n     * Sincronizar configura√ß√µes com o analisador\n     */\n    async syncWithAnalyzer(organizationId) {\n        try {\n            const organization = await this.organizationRepo.findById(organizationId);\n            if (!organization) {\n                throw new Error(`Organization ${organizationId} not found`);\n            }\n            const config = this.buildAnalysisConfig(organization, []);\n            // Enviar configura√ß√£o para o analisador via HTTP\n            const response = await this.analyzerClient.post('/config/sync', {\n                organizationId,\n                config\n            });\n            if (response.status !== 200) {\n                throw new Error(`Failed to sync with analyzer: ${response.statusText}`);\n            }\n            firebase_functions_1.logger.info('Configuration synced with analyzer', { organizationId });\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error syncing with analyzer:', { error: String(error), organizationId });\n            throw error;\n        }\n    }\n    /**\n     * Constr√≥i configura√ß√£o de an√°lise baseada nos dados da organiza√ß√£o\n     */\n    async buildAnalysisConfig(organization, customParams) {\n        // Pesos padr√£o baseados no tipo de organiza√ß√£o\n        const defaultWeights = this.getDefaultWeightsByType(organization.organizationType);\n        // Aplicar pesos customizados se existirem\n        const weights = customParams.length > 0\n            ? this.mergeCustomWeights(defaultWeights, customParams)\n            : defaultWeights;\n        // Construir regras customizadas\n        const customRules = customParams\n            .filter(param => param.customRules && param.customRules.length > 0 && param.status === 'ACTIVE')\n            .flatMap(param => param.customRules.map(ruleId => ({\n            id: ruleId,\n            name: `Regra ${ruleId}`,\n            pattern: '',\n            severity: 'media',\n            category: 'legal',\n            message: `Regra customizada ativada`,\n            suggestion: 'Verificar conformidade',\n            isActive: true\n        })));\n        // Determinar preset baseado no tipo de organiza√ß√£o\n        const preset = this.determinePreset(organization.organizationType, customParams);\n        return {\n            organizationId: organization.id,\n            weights,\n            customRules,\n            preset,\n            timeout: 300, // Default timeout\n            maxRetries: 3 // Default max retries\n        };\n    }\n    /**\n     * Obt√©m pesos padr√£o baseados no tipo de organiza√ß√£o\n     */\n    getDefaultWeightsByType(orgType) {\n        const weightPresets = {\n            'tribunal_contas': { structural: 0.25, legal: 0.50, clarity: 0.20, abnt: 0.05 }, // Rigoroso\n            'prefeitura': { structural: 0.25, legal: 0.25, clarity: 0.25, abnt: 0.25 }, // Padr√£o\n            'secretaria_obras': { structural: 0.40, legal: 0.20, clarity: 0.10, abnt: 0.30 }, // T√©cnico\n            'orgao_federal': { structural: 0.30, legal: 0.40, clarity: 0.20, abnt: 0.10 }, // Rigoroso moderado\n            'empresa_publica': { structural: 0.30, legal: 0.30, clarity: 0.30, abnt: 0.10 } // Flex√≠vel\n        };\n        return weightPresets[orgType] || weightPresets.prefeitura;\n    }\n    /**\n     * Mescla pesos customizados com os padr√£o\n     */\n    mergeCustomWeights(defaultWeights, customParams) {\n        // Encontrar par√¢metros de peso ativos\n        const weightParams = customParams.filter(p => p.weights && p.status === 'ACTIVE');\n        if (weightParams.length === 0) {\n            return defaultWeights;\n        }\n        // Usar os pesos do primeiro par√¢metro ativo encontrado\n        const activeParam = weightParams[0];\n        return {\n            structural: activeParam.weights.structural,\n            legal: activeParam.weights.legal,\n            clarity: activeParam.weights.clarity,\n            abnt: activeParam.weights.abnt\n        };\n    }\n    /**\n     * Determina preset baseado no tipo de organiza√ß√£o e par√¢metros customizados\n     */\n    determinePreset(orgType, customParams) {\n        // Se h√° par√¢metros customizados significativos, usar preset custom\n        const hasCustomWeights = customParams.some(p => p.weights && p.status === 'ACTIVE');\n        const hasCustomRules = customParams.some(p => p.customRules && p.customRules.length > 0 && p.status === 'ACTIVE');\n        if (hasCustomWeights || hasCustomRules) {\n            return 'custom';\n        }\n        // Mapear tipo de organiza√ß√£o para preset\n        const presetMap = {\n            'tribunal_contas': 'rigorous',\n            'prefeitura': 'standard',\n            'secretaria_obras': 'technical',\n            'orgao_federal': 'rigorous',\n            'empresa_publica': 'flexible'\n        };\n        return presetMap[orgType] || 'standard';\n    }\n    /**\n     * Obt√©m estat√≠sticas de uso de configura√ß√µes\n     */\n    async getConfigUsageStats(organizationId) {\n        try {\n            // Implementar busca de estat√≠sticas no AnalysisRepository\n            // Por enquanto, retornar dados mock\n            return {\n                totalAnalyses: 0,\n                avgScore: 0,\n                lastUsed: null,\n                configVersion: 1\n            };\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error getting config usage stats', {\n                organizationId,\n                error: error instanceof Error ? error.message : 'Unknown error'\n            });\n            throw error;\n        }\n    }\n}\nexports.OrganizationConfigService = OrganizationConfigService;\n/**\n * Factory function para criar inst√¢ncia do servi√ßo\n */\nfunction createOrganizationConfigService(db, analyzerConfig) {\n    return new OrganizationConfigService(db, analyzerConfig);\n}\n//# sourceMappingURL=OrganizationConfigService.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/services/ParameterEngine.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":163,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * ParameterEngine - Motor de Par√¢metros de An√°lise\n *\n * Servi√ßo respons√°vel por gerenciar e aplicar par√¢metros de an√°lise\n * personalizados para cada organiza√ß√£o, incluindo pesos, regras customizadas\n * e configura√ß√µes avan√ßadas.\n *\n * üöÄ CORE DIFFERENTIATOR: Engine adaptativo que personaliza an√°lises\n * baseado no perfil e hist√≥rico da organiza√ß√£o.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParameterEngine = void 0;\nconst firebase_functions_1 = require(\"firebase-functions\");\nconst config_types_1 = require(\"../types/config.types\");\nconst OrganizationRepository_1 = require(\"../db/repositories/OrganizationRepository\");\nconst AnalysisRepository_1 = require(\"../db/repositories/AnalysisRepository\");\nclass ParameterEngine {\n    constructor(firestore, config = {}) {\n        this.parameterCache = new Map();\n        this.ENGINE_VERSION = '1.0.0';\n        this.db = firestore;\n        this.organizationRepo = new OrganizationRepository_1.OrganizationRepository(firestore);\n        this.customParamsRepo = new OrganizationRepository_1.CustomParametersRepository(firestore);\n        this.analysisRepo = new AnalysisRepository_1.AnalysisRepository(firestore);\n        // Configura√ß√£o padr√£o\n        this.config = Object.assign({ enableAdaptiveWeights: true, enableLearningMode: true, adaptationThreshold: 10, maxWeightAdjustment: 15.0, cacheTimeout: 30 * 60 * 1000 }, config);\n        firebase_functions_1.logger.info('ParameterEngine initialized', {\n            version: this.ENGINE_VERSION,\n            config: this.config\n        });\n    }\n    /**\n     * Gera par√¢metros de an√°lise otimizados para uma organiza√ß√£o\n     */\n    async generateParameters(organizationId, forceRefresh = false) {\n        const cacheKey = `params_${organizationId}`;\n        // Verificar cache\n        if (!forceRefresh && this.parameterCache.has(cacheKey)) {\n            const cached = this.parameterCache.get(cacheKey);\n            if (Date.now() - cached.timestamp < this.config.cacheTimeout) {\n                firebase_functions_1.logger.debug('Returning cached parameters', { organizationId });\n                return cached.params;\n            }\n        }\n        try {\n            // Buscar dados da organiza√ß√£o\n            const [organization, customParams, recentAnalyses] = await Promise.all([\n                this.organizationRepo.findById(organizationId),\n                this.customParamsRepo.findByOrganization(organizationId),\n                this.getRecentAnalyses(organizationId)\n            ]);\n            if (!organization) {\n                throw new Error(`Organization not found: ${organizationId}`);\n            }\n            // Gerar par√¢metros base\n            const baseParams = await this.generateBaseParameters(organization, customParams);\n            // Aplicar otimiza√ß√µes adaptativas se habilitado\n            let finalParams = baseParams;\n            if (this.config.enableAdaptiveWeights && recentAnalyses.length >= this.config.adaptationThreshold) {\n                finalParams = await this.applyAdaptiveOptimizations(baseParams, recentAnalyses);\n            }\n            // Adicionar metadata\n            const parameters = Object.assign(Object.assign({}, finalParams), { metadata: {\n                    configVersion: customParams.length > 0 ? Math.max(...customParams.map(p => parseInt(p.version) || 1)) : 1,\n                    engineVersion: this.ENGINE_VERSION,\n                    generatedAt: new Date(),\n                    expiresAt: new Date(Date.now() + this.config.cacheTimeout)\n                } });\n            // Atualizar cache\n            this.parameterCache.set(cacheKey, {\n                params: parameters,\n                timestamp: Date.now()\n            });\n            firebase_functions_1.logger.info('Generated analysis parameters', {\n                organizationId,\n                preset: parameters.preset,\n                customRulesCount: parameters.customRules.length,\n                hasAdaptiveAdjustments: !!parameters.adaptiveAdjustments\n            });\n            return parameters;\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error generating parameters', {\n                organizationId,\n                error: error instanceof Error ? error.message : error\n            });\n            throw error;\n        }\n    }\n    /**\n     * Gera par√¢metros base baseados na configura√ß√£o da organiza√ß√£o\n     */\n    async generateBaseParameters(organization, customParams) {\n        // Determinar preset baseado no tipo de organiza√ß√£o\n        const preset = this.determineOptimalPreset(organization, customParams);\n        // Obter pesos base\n        let weights = config_types_1.PRESET_WEIGHTS[preset];\n        // Aplicar customiza√ß√µes de peso se existirem\n        if (customParams.length > 0) {\n            weights = this.mergeCustomWeights(weights, customParams);\n        }\n        // Validar pesos\n        if (!(0, config_types_1.validateWeights)(weights)) {\n            firebase_functions_1.logger.warn('Invalid weights detected, using preset weights', {\n                organizationId: organization.id,\n                invalidWeights: weights,\n                preset\n            });\n            weights = config_types_1.PRESET_WEIGHTS[preset];\n        }\n        // Compilar regras customizadas\n        const customRules = this.compileCustomRules(customParams);\n        return {\n            organizationId: organization.id,\n            weights,\n            customRules,\n            preset\n        };\n    }\n    /**\n     * Aplica otimiza√ß√µes adaptativas baseadas no hist√≥rico de an√°lises\n     */\n    async applyAdaptiveOptimizations(baseParams, recentAnalyses) {\n        if (!this.config.enableLearningMode) {\n            return baseParams;\n        }\n        try {\n            // Analisar padr√µes de performance\n            const optimization = await this.analyzePerformancePatterns(recentAnalyses, baseParams.weights);\n            if (optimization.confidence < 0.7) {\n                firebase_functions_1.logger.debug('Low confidence optimization, skipping adaptive adjustments', {\n                    organizationId: baseParams.organizationId,\n                    confidence: optimization.confidence\n                });\n                return baseParams;\n            }\n            // Aplicar ajustes adaptativos\n            const adaptiveWeights = this.applyWeightAdjustments(baseParams.weights, optimization);\n            return Object.assign(Object.assign({}, baseParams), { weights: adaptiveWeights, adaptiveAdjustments: {\n                    weightAdjustments: this.calculateWeightDifferences(baseParams.weights, adaptiveWeights),\n                    confidenceScore: optimization.confidence,\n                    basedOnAnalyses: recentAnalyses.length,\n                    lastUpdated: new Date()\n                } });\n        }\n        catch (error) {\n            firebase_functions_1.logger.error('Error applying adaptive optimizations', {\n                organizationId: baseParams.organizationId,\n                error: error instanceof Error ? error.message : error\n            });\n            return baseParams;\n        }\n    }\n    /**\n     * Analisa padr√µes de performance para sugerir otimiza√ß√µes\n     */\n    async analyzePerformancePatterns(analyses, currentWeights) {\n        // Calcular m√©tricas de performance por categoria\n        const categoryPerformance = this.calculateCategoryPerformance(analyses);\n        // Identificar categorias com baixa performance\n        const underperformingCategories = Object.entries(categoryPerformance)\n            .filter(([_, performance]) => performance.averageScore < 70)\n            .map(([category]) => category);\n        // Gerar sugest√µes de ajuste\n        const suggestedWeights = Object.assign({}, currentWeights);\n        const improvements = [];\n        for (const category of underperformingCategories) {\n            const currentWeight = currentWeights[category];\n            const performance = categoryPerformance[category];\n            // Calcular ajuste sugerido baseado na performance\n            const adjustmentFactor = Math.min(this.config.maxWeightAdjustment, (70 - performance.averageScore) * 0.3);\n            const suggestedWeight = Math.min(100, currentWeight + adjustmentFactor);\n            improvements.push({\n                category,\n                currentWeight,\n                suggestedWeight,\n                expectedImprovement: adjustmentFactor * 0.5\n            });\n            suggestedWeights[category] = suggestedWeight;\n        }\n        // Normalizar pesos para somar 100%\n        const normalizedWeights = this.normalizeWeights(suggestedWeights);\n        // Calcular confian√ßa baseada no n√∫mero de an√°lises e consist√™ncia\n        const confidence = Math.min(0.95, analyses.length / 50) *\n            (1 - this.calculateWeightVariance(analyses) / 100);\n        return {\n            suggestedWeights: normalizedWeights,\n            reasoning: `Otimiza√ß√£o baseada em ${analyses.length} an√°lises recentes. ` +\n                `Categorias com baixa performance: ${underperformingCategories.join(', ')}`,\n            confidence,\n            basedOnAnalyses: analyses.length,\n            improvements\n        };\n    }\n    /**\n     * Calcula performance por categoria\n     */\n    calculateCategoryPerformance(analyses) {\n        const categories = ['structural', 'legal', 'clarity', 'abnt'];\n        const performance = {};\n        for (const category of categories) {\n            const scores = analyses\n                .filter(a => { var _a, _b; return ((_b = (_a = a.results) === null || _a === void 0 ? void 0 : _a.scores) === null || _b === void 0 ? void 0 : _b[category]) !== undefined; })\n                .map(a => a.results.scores[category]);\n            performance[category] = {\n                averageScore: scores.length > 0 ? scores.reduce((a, b) => a + b, 0) / scores.length : 0,\n                count: scores.length\n            };\n        }\n        return performance;\n    }\n    /**\n     * Determina o preset √≥timo para uma organiza√ß√£o\n     */\n    determineOptimalPreset(organization, customParams) {\n        // Se h√° par√¢metros customizados ativos, usar CUSTOM\n        if (customParams.some(p => p.status === 'ACTIVE' && p.presetType === 'CUSTOM')) {\n            return config_types_1.AnalysisPreset.CUSTOM;\n        }\n        // Determinar baseado no tipo de organiza√ß√£o\n        switch (organization.organizationType) {\n            case 'FEDERAL':\n            case 'ESTADUAL':\n                return config_types_1.AnalysisPreset.RIGOROUS;\n            case 'MUNICIPAL':\n                return config_types_1.AnalysisPreset.STANDARD;\n            case 'EMPRESA_PUBLICA':\n            case 'SOCIEDADE_ECONOMIA_MISTA':\n                return config_types_1.AnalysisPreset.TECHNICAL;\n            default:\n                return config_types_1.AnalysisPreset.STANDARD;\n        }\n    }\n    /**\n     * Mescla pesos customizados com pesos base\n     */\n    mergeCustomWeights(baseWeights, customParams) {\n        const activeParams = customParams.filter(p => p.status === 'ACTIVE');\n        if (activeParams.length === 0) {\n            return baseWeights;\n        }\n        // Usar o par√¢metro mais recente ou o marcado como padr√£o\n        const primaryParam = activeParams.find(p => p.isDefault) ||\n            activeParams.sort((a, b) => b.updatedAt.getTime() - a.updatedAt.getTime())[0];\n        return primaryParam.weights || baseWeights;\n    }\n    /**\n     * Compila regras customizadas ativas\n     */\n    compileCustomRules(customParams) {\n        const rules = [];\n        for (const param of customParams.filter(p => p.status === 'ACTIVE')) {\n            if (param.customRules && param.customRules.length > 0) {\n                // Converter IDs de regras em objetos CustomRule\n                // Por enquanto, criar regras b√°sicas - isso pode ser expandido\n                for (const ruleId of param.customRules) {\n                    rules.push({\n                        id: ruleId,\n                        name: `Regra Customizada ${ruleId}`,\n                        description: `Regra customizada para ${param.name}`,\n                        pattern: '', // Seria preenchido com dados reais\n                        patternType: 'regex',\n                        severity: 'medium',\n                        category: 'legal',\n                        message: 'Regra customizada ativada',\n                        isActive: true,\n                        weight: 1,\n                        createdAt: param.createdAt,\n                        updatedAt: param.updatedAt\n                    });\n                }\n            }\n        }\n        return rules;\n    }\n    /**\n     * Busca an√°lises recentes para aprendizado adaptativo\n     */\n    async getRecentAnalyses(organizationId, limit = 50) {\n        try {\n            return await this.analysisRepo.findByOrganization(organizationId, {\n                orderBy: [{ field: 'createdAt', direction: 'desc' }],\n                limit\n            });\n        }\n        catch (error) {\n            firebase_functions_1.logger.warn('Error fetching recent analyses for adaptive learning', {\n                organizationId,\n                error: error instanceof Error ? error.message : error\n            });\n            return [];\n        }\n    }\n    /**\n     * Aplica ajustes de peso baseados na otimiza√ß√£o\n     */\n    applyWeightAdjustments(baseWeights, optimization) {\n        const adjustedWeights = Object.assign({}, baseWeights);\n        for (const improvement of optimization.improvements) {\n            const category = improvement.category;\n            const maxAdjustment = this.config.maxWeightAdjustment;\n            const adjustment = Math.min(maxAdjustment, improvement.suggestedWeight - improvement.currentWeight);\n            adjustedWeights[category] = Math.max(0, Math.min(100, baseWeights[category] + adjustment));\n        }\n        return this.normalizeWeights(adjustedWeights);\n    }\n    /**\n     * Normaliza pesos para somar 100%\n     */\n    normalizeWeights(weights) {\n        const total = weights.structural + weights.legal + weights.clarity + weights.abnt;\n        if (Math.abs(total - 100) < 0.01) {\n            return weights;\n        }\n        const factor = 100 / total;\n        return {\n            structural: Math.round(weights.structural * factor * 10) / 10,\n            legal: Math.round(weights.legal * factor * 10) / 10,\n            clarity: Math.round(weights.clarity * factor * 10) / 10,\n            abnt: Math.round(weights.abnt * factor * 10) / 10\n        };\n    }\n    /**\n     * Calcula diferen√ßas entre pesos\n     */\n    calculateWeightDifferences(original, adjusted) {\n        return {\n            structural: adjusted.structural - original.structural,\n            legal: adjusted.legal - original.legal,\n            clarity: adjusted.clarity - original.clarity,\n            abnt: adjusted.abnt - original.abnt\n        };\n    }\n    /**\n     * Calcula vari√¢ncia de pesos nas an√°lises\n     */\n    calculateWeightVariance(analyses) {\n        // Implementa√ß√£o simplificada - calcular vari√¢ncia baseada nos scores\n        const scores = analyses.map(a => { var _a, _b; return ((_b = (_a = a.results) === null || _a === void 0 ? void 0 : _a.scores) === null || _b === void 0 ? void 0 : _b.overall) || 0; });\n        const mean = scores.reduce((a, b) => a + b, 0) / scores.length;\n        const variance = scores.reduce((acc, score) => acc + Math.pow(score - mean, 2), 0) / scores.length;\n        return Math.sqrt(variance);\n    }\n    /**\n     * Limpa cache de par√¢metros\n     */\n    clearCache(organizationId) {\n        if (organizationId) {\n            this.parameterCache.delete(`params_${organizationId}`);\n        }\n        else {\n            this.parameterCache.clear();\n        }\n        firebase_functions_1.logger.info('Parameter cache cleared', { organizationId });\n    }\n    /**\n     * Obt√©m estat√≠sticas do engine\n     */\n    getEngineStats() {\n        return {\n            version: this.ENGINE_VERSION,\n            config: this.config,\n            cacheSize: this.parameterCache.size\n        };\n    }\n}\nexports.ParameterEngine = ParameterEngine;\n//# sourceMappingURL=ParameterEngine.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/services/TaskQueueService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/tests/setup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'afterAll' is not defined.","line":115,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":115,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'afterEach' is not defined.","line":119,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":119,"endColumn":10}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n/**\n * Jest Test Setup\n * LicitaReview Cloud Functions\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mockSupertestResponse = exports.createMockAnalysisResult = exports.createMockConfig = exports.createMockDocument = exports.createMockUser = exports.createMockNext = exports.createMockResponse = exports.createMockRequest = void 0;\nconst globals_1 = require(\"@jest/globals\");\n// Mock Firebase Admin SDK globally\nglobals_1.jest.mock(\"firebase-admin\", () => ({\n    initializeApp: globals_1.jest.fn(),\n    credential: {\n        applicationDefault: globals_1.jest.fn()\n    },\n    firestore: globals_1.jest.fn(() => ({\n        collection: globals_1.jest.fn(),\n        doc: globals_1.jest.fn(),\n        batch: globals_1.jest.fn(),\n        runTransaction: globals_1.jest.fn(),\n        settings: globals_1.jest.fn(),\n        FieldValue: {\n            increment: globals_1.jest.fn(),\n            arrayUnion: globals_1.jest.fn(),\n            arrayRemove: globals_1.jest.fn(),\n            serverTimestamp: globals_1.jest.fn()\n        }\n    })),\n    auth: globals_1.jest.fn(() => ({\n        verifyIdToken: globals_1.jest.fn(),\n        getUser: globals_1.jest.fn(),\n        setCustomUserClaims: globals_1.jest.fn(),\n        createUser: globals_1.jest.fn(),\n        updateUser: globals_1.jest.fn(),\n        deleteUser: globals_1.jest.fn()\n    })),\n    storage: globals_1.jest.fn(() => ({\n        bucket: globals_1.jest.fn(() => ({\n            file: globals_1.jest.fn(),\n            upload: globals_1.jest.fn(),\n            getFiles: globals_1.jest.fn(),\n            getMetadata: globals_1.jest.fn()\n        }))\n    })),\n    messaging: globals_1.jest.fn(() => ({\n        send: globals_1.jest.fn(),\n        sendMulticast: globals_1.jest.fn(),\n        sendToTopic: globals_1.jest.fn()\n    })),\n    apps: []\n}));\n// Mock Firebase Functions\nglobals_1.jest.mock(\"firebase-functions\", () => ({\n    logger: {\n        info: globals_1.jest.fn(),\n        warn: globals_1.jest.fn(),\n        error: globals_1.jest.fn(),\n        debug: globals_1.jest.fn()\n    },\n    config: globals_1.jest.fn(() => ({})),\n    region: globals_1.jest.fn(() => ({\n        https: {\n            onRequest: globals_1.jest.fn(),\n            onCall: globals_1.jest.fn()\n        },\n        firestore: {\n            document: globals_1.jest.fn(() => ({\n                onCreate: globals_1.jest.fn(),\n                onUpdate: globals_1.jest.fn(),\n                onDelete: globals_1.jest.fn(),\n                onWrite: globals_1.jest.fn()\n            }))\n        },\n        storage: {\n            object: globals_1.jest.fn(() => ({\n                onFinalize: globals_1.jest.fn(),\n                onDelete: globals_1.jest.fn(),\n                onMetadataUpdate: globals_1.jest.fn()\n            }))\n        }\n    }))\n}));\n// Mock Firebase Functions v2\nglobals_1.jest.mock(\"firebase-functions/v2/https\", () => ({\n    onRequest: globals_1.jest.fn((config, handler) => handler),\n    onCall: globals_1.jest.fn((config, handler) => handler)\n}));\nglobals_1.jest.mock(\"firebase-functions/v2/firestore\", () => ({\n    onDocumentCreated: globals_1.jest.fn((config, handler) => handler),\n    onDocumentUpdated: globals_1.jest.fn((config, handler) => handler),\n    onDocumentDeleted: globals_1.jest.fn((config, handler) => handler),\n    onDocumentWritten: globals_1.jest.fn((config, handler) => handler)\n}));\nglobals_1.jest.mock(\"firebase-functions/v2/storage\", () => ({\n    onObjectFinalized: globals_1.jest.fn((config, handler) => handler),\n    onObjectDeleted: globals_1.jest.fn((config, handler) => handler),\n    onObjectMetadataUpdated: globals_1.jest.fn((config, handler) => handler)\n}));\n// Set up environment variables for testing\nprocess.env.NODE_ENV = \"test\";\nprocess.env.GCLOUD_PROJECT = \"test-project\";\nprocess.env.FIREBASE_PROJECT_ID = \"test-project\";\nprocess.env.FIREBASE_STORAGE_BUCKET = \"test-project.appspot.com\";\nprocess.env.CORS_ORIGIN = \"*\";\nprocess.env.RATE_LIMIT_WINDOW_MS = \"900000\";\nprocess.env.RATE_LIMIT_MAX = \"100\";\nprocess.env.MAX_DOCUMENT_SIZE = \"52428800\";\nprocess.env.ALLOWED_DOCUMENT_TYPES = \"pdf,doc,docx,txt\";\nprocess.env.LOG_LEVEL = \"error\"; // Reduce log noise during tests\n// Global test timeout\nglobals_1.jest.setTimeout(30000);\n// Mock console methods to reduce noise during tests\nconst originalConsole = console;\nglobal.console = Object.assign(Object.assign({}, console), { log: globals_1.jest.fn(), info: globals_1.jest.fn(), warn: globals_1.jest.fn(), error: globals_1.jest.fn(), debug: globals_1.jest.fn() });\n// Restore console after tests if needed\nafterAll(() => {\n    global.console = originalConsole;\n});\n// Clean up after each test\nafterEach(() => {\n    globals_1.jest.clearAllMocks();\n});\n// Global error handler for unhandled rejections in tests\nprocess.on(\"unhandledRejection\", (reason, promise) => {\n    console.error(\"Unhandled Rejection at:\", promise, \"reason:\", reason);\n});\n// Export common test utilities\nconst createMockRequest = (overrides = {}) => (Object.assign({ body: {}, query: {}, params: {}, headers: {}, get: globals_1.jest.fn((header) => { var _a; return (_a = overrides.headers) === null || _a === void 0 ? void 0 : _a[header]; }) }, overrides));\nexports.createMockRequest = createMockRequest;\nconst createMockResponse = () => {\n    const res = {\n        status: globals_1.jest.fn(() => res),\n        json: globals_1.jest.fn(() => res),\n        send: globals_1.jest.fn(() => res),\n        setHeader: globals_1.jest.fn(() => res),\n        end: globals_1.jest.fn(() => res),\n        on: globals_1.jest.fn(() => res)\n    };\n    return res;\n};\nexports.createMockResponse = createMockResponse;\nconst createMockNext = () => globals_1.jest.fn();\nexports.createMockNext = createMockNext;\nconst createMockUser = (overrides = {}) => (Object.assign({ uid: \"test-user-id\", email: \"test@example.com\", organizationId: \"test-org-id\", roles: [\"user\"], permissions: [\"documents:read\"] }, overrides));\nexports.createMockUser = createMockUser;\nconst createMockDocument = (overrides = {}) => (Object.assign({ id: \"test-doc-id\", title: \"Test Document\", content: \"Test content\", organizationId: \"test-org-id\", createdBy: \"test-user-id\", status: \"DRAFT\", createdAt: new Date(), updatedAt: new Date() }, overrides));\nexports.createMockDocument = createMockDocument;\nconst createMockConfig = (overrides = {}) => (Object.assign({ id: \"test-config-id\", organizationId: \"test-org-id\", organizationName: \"Test Organization\", weights: {\n        structural: 25.0,\n        legal: 25.0,\n        clarity: 25.0,\n        abnt: 25.0\n    }, presetType: \"STANDARD\", customRules: [], version: 1, isActive: true, createdAt: new Date(), updatedAt: new Date(), createdBy: \"test-user-id\" }, overrides));\nexports.createMockConfig = createMockConfig;\nconst createMockAnalysisResult = (overrides = {}) => (Object.assign({ id: \"test-analysis-id\", documentId: \"test-doc-id\", organizationId: \"test-org-id\", conformityScores: {\n        structural: 85.0,\n        legal: 92.0,\n        clarity: 78.0,\n        abnt: 88.0,\n        overall: 85.8\n    }, weightedScore: 86.2, findings: [], recommendations: [], status: \"completed\", executionTimeSeconds: 12.5, createdAt: new Date(), completedAt: new Date() }, overrides));\nexports.createMockAnalysisResult = createMockAnalysisResult;\n// Mock supertest for API testing\nconst mockSupertestResponse = (statusCode, body) => ({\n    status: statusCode,\n    body,\n    headers: {},\n    get: globals_1.jest.fn()\n});\nexports.mockSupertestResponse = mockSupertestResponse;\nexports.default = {};\n//# sourceMappingURL=setup.js.map","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/triggers/analysis-complete.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/triggers/document-upload.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/types/analysis.types.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/types/comissoes.types.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/types/config.types.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/types/document.types.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/types/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/utils/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/lib/utils/validation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/scripts/run-migrations.ts","messages":[{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":43,"column":24,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":43,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env npx tsx\n/**\n * Migration Runner Script\n * \n * Usage:\n *   npm run migrate                    # Run all pending migrations\n *   npm run migrate -- --id 001       # Run specific migration\n *   npm run migrate -- --rollback 001 # Rollback specific migration\n *   npm run migrate -- --status       # Show migration status\n *   npm run migrate -- --reset        # Reset all migrations (DANGER)\n *   npm run migrate -- --seed         # Seed development data\n */\n\nimport { initializeDatabase } from '../src/db';\nimport { MigrationRunner } from '../src/db/migrations/migration-runner';\n\nasync function main() {\n  const args = process.argv.slice(2);\n  \n  try {\n    console.log('üîó Initializing database connection...');\n    const db = initializeDatabase();\n    const runner = new MigrationRunner(db);\n    \n    // Parse command line arguments\n    if (args.includes('--status')) {\n      console.log('üìã Migration Status:');\n      const status = await runner.getMigrationStatus();\n      \n      console.table(status.map(m => ({\n        ID: m.id,\n        Name: m.name,\n        Status: m.success === true ? '‚úÖ Completed' : \n                m.success === false ? '‚ùå Failed' : '‚è∏Ô∏è Pending',\n        'Run At': m.runAt ? m.runAt.toISOString() : 'Never',\n        Error: m.error || 'None'\n      })));\n      \n    } else if (args.includes('--reset')) {\n      console.log('‚ö†Ô∏è  WARNING: This will reset all migrations and delete data!');\n      console.log('Type \"RESET\" to confirm:');\n      \n      const readline = require('readline').createInterface({\n        input: process.stdin,\n        output: process.stdout\n      });\n      \n      const confirmation = await new Promise<string>((resolve) => {\n        readline.question('> ', (answer: string) => {\n          readline.close();\n          resolve(answer);\n        });\n      });\n      \n      if (confirmation === 'RESET') {\n        await runner.resetAllMigrations();\n      } else {\n        console.log('‚ùå Reset cancelled');\n      }\n      \n    } else if (args.includes('--rollback')) {\n      const idIndex = args.indexOf('--rollback');\n      const migrationId = args[idIndex + 1];\n      \n      if (!migrationId) {\n        console.error('‚ùå Please specify migration ID: --rollback <id>');\n        process.exit(1);\n      }\n      \n      await runner.rollbackMigration(migrationId);\n      \n    } else if (args.includes('--id')) {\n      const idIndex = args.indexOf('--id');\n      const migrationId = args[idIndex + 1];\n      \n      if (!migrationId) {\n        console.error('‚ùå Please specify migration ID: --id <id>');\n        process.exit(1);\n      }\n      \n      await runner.runMigration(migrationId);\n      \n    } else if (args.includes('--seed')) {\n      await runner.seedDevelopmentData();\n      \n    } else {\n      // Run all migrations\n      await runner.runAllMigrations();\n    }\n    \n    console.log('‚úÖ Migration script completed successfully');\n    \n  } catch (error) {\n    console.error('‚ùå Migration script failed:', error);\n    process.exit(1);\n  }\n}\n\n// Handle script execution\nif (require.main === module) {\n  main().catch(console.error);\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/scripts/set-role.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/analysis-config.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'CreateConfigRequest' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CreateConfigRequest' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'UpdateConfigRequest' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UpdateConfigRequest' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'AnalysisWeights' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalysisWeights' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'CustomRule' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CustomRule' is defined but never used.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'generateConfigHash' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'generateConfigHash' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":206,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":206,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":352,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":352,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":437,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":437,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":518,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":518,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":519,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":519,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":520,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":520,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":521,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":521,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":522,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":522,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":555,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":555,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":556,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":556,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":557,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":557,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":558,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":558,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":609,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":609,"endColumn":95},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'next' is defined but never used.","line":609,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":609,"endColumn":73}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Analysis Configuration API - CORE DIFFERENTIATOR\n * Manage organization-specific analysis configurations\n * LicitaReview Cloud Functions\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\nimport rateLimit from \"express-rate-limit\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { collections } from \"../config/firebase\";\nimport {\n  OrganizationConfig,\n  OrganizationConfigSchema,\n  CreateConfigRequest,\n  CreateConfigRequestSchema,\n  UpdateConfigRequest,\n  UpdateConfigRequestSchema,\n  ConfigSummary,\n  AnalysisPreset,\n  AnalysisWeights,\n  CustomRule,\n  createDefaultConfig,\n  createConfigSummary,\n  generateConfigHash,\n  PRESET_WEIGHTS\n} from \"../types\";\nimport {\n  authenticateUser,\n  requireOrganization,\n  validateOrganizationAccess,\n  requirePermissions,\n  PERMISSIONS\n} from \"../middleware/auth\";\nimport {\n  validateRequestBody,\n  validateQueryParams,\n  validatePathParams,\n  ValidationError,\n  createSuccessResponse,\n  createErrorResponse,\n  generateRequestId,\n  UUIDSchema,\n  PaginationSchema\n} from \"../utils\";\nimport { config } from \"../config\";\n\nconst app = express();\n\n// Middleware\napp.use(helmet());\napp.use(cors({ origin: config.corsOrigin }));\napp.use(express.json({ limit: config.maxRequestSize }));\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: config.rateLimitWindowMs,\n  max: config.rateLimitMax,\n  message: { error: \"Too many requests, please try again later\" },\n  standardHeaders: true,\n  legacyHeaders: false\n});\napp.use(limiter);\n\n// Request ID middleware\napp.use((req, res, next) => {\n  req.requestId = generateRequestId();\n  res.setHeader(\"X-Request-ID\", req.requestId);\n  next();\n});\n\n// Authentication middleware\napp.use(authenticateUser);\napp.use(requireOrganization);\n\n/**\n * GET /configs\n * List organization configurations (admin only)\n */\napp.get(\"/\",\n  requirePermissions([PERMISSIONS.CONFIG_READ]),\n  async (req, res) => {\n    try {\n      const query = validateQueryParams(PaginationSchema, req);\n      \n      // Super admin can see all configs, others only their org\n      let firestoreQuery = collections.configs;\n      \n      if (!req.user!.roles.includes(\"super_admin\")) {\n        firestoreQuery = firestoreQuery.where(\"organizationId\", \"==\", req.user!.organizationId);\n      }\n      \n      // Apply sorting\n      firestoreQuery = firestoreQuery.orderBy(\"updatedAt\", query.sortOrder);\n      \n      // Count total\n      const countQuery = await firestoreQuery.count().get();\n      const total = countQuery.data().count;\n      \n      // Apply pagination\n      const offset = (query.page - 1) * query.limit;\n      firestoreQuery = firestoreQuery.offset(offset).limit(query.limit);\n      \n      const snapshot = await firestoreQuery.get();\n      \n      const configs: ConfigSummary[] = snapshot.docs.map(doc => {\n        const data = { id: doc.id, ...doc.data() } as OrganizationConfig;\n        return createConfigSummary(data);\n      });\n      \n      const totalPages = Math.ceil(total / query.limit);\n      \n      res.json({\n        success: true,\n        data: configs,\n        pagination: {\n          page: query.page,\n          limit: query.limit,\n          total,\n          totalPages,\n          hasNext: query.page < totalPages,\n          hasPrev: query.page > 1\n        },\n        timestamp: new Date().toISOString(),\n        requestId: req.requestId\n      });\n    } catch (error) {\n      console.error(\"Error listing configs:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while listing configs\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * GET /configs/current\n * Get current organization's configuration\n */\napp.get(\"/current\",\n  requirePermissions([PERMISSIONS.CONFIG_READ]),\n  async (req, res) => {\n    try {\n      const snapshot = await collections.configs\n        .where(\"organizationId\", \"==\", req.user!.organizationId)\n        .where(\"isActive\", \"==\", true)\n        .orderBy(\"version\", \"desc\")\n        .limit(1)\n        .get();\n      \n      if (snapshot.empty) {\n        // Create default config if none exists\n        const defaultConfig = createDefaultConfig(\n          req.user!.organizationId,\n          req.user!.organizationId, // Use org ID as name for now\n          AnalysisPreset.STANDARD,\n          req.user!.uid\n        );\n        \n        const configWithId = { id: uuidv4(), ...defaultConfig };\n        await collections.configs.doc(configWithId.id).set(configWithId);\n        \n        res.json(createSuccessResponse(\n          configWithId,\n          \"Default configuration created\",\n          req.requestId\n        ));\n        return;\n      }\n      \n      const configDoc = snapshot.docs[0];\n      const config = { id: configDoc.id, ...configDoc.data() } as OrganizationConfig;\n      \n      res.json(createSuccessResponse(config, undefined, req.requestId));\n    } catch (error) {\n      console.error(\"Error getting current config:\", error);\n      res.status(500).json(createErrorResponse(\n        \"Internal server error while getting config\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * GET /configs/:id\n * Get configuration by ID\n */\napp.get(\"/:id\",\n  requirePermissions([PERMISSIONS.CONFIG_READ]),\n  validateOrganizationAccess(\"organizationId\"),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(\n        z.object({ id: UUIDSchema }),\n        req.params\n      );\n      \n      const configDoc = await collections.configs.doc(id).get();\n      \n      if (!configDoc.exists) {\n        res.status(404).json(createErrorResponse(\n          \"Configuration not found\",\n          { configId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const config = { id: configDoc.id, ...configDoc.data() } as OrganizationConfig;\n      \n      // Verify organization access\n      if (config.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Access denied to configuration\",\n          { configId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      res.json(createSuccessResponse(config, undefined, req.requestId));\n    } catch (error) {\n      console.error(\"Error getting config:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while getting config\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * POST /configs\n * Create new organization configuration\n */\napp.post(\"/\",\n  requirePermissions([PERMISSIONS.CONFIG_WRITE]),\n  async (req, res) => {\n    try {\n      const configData = validateRequestBody(CreateConfigRequestSchema)(req);\n      \n      // Validate organization access\n      if (configData.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Cannot create config for different organization\",\n          { requestedOrg: configData.organizationId, userOrg: req.user!.organizationId },\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Check if active config already exists\n      const existingSnapshot = await collections.configs\n        .where(\"organizationId\", \"==\", configData.organizationId)\n        .where(\"isActive\", \"==\", true)\n        .get();\n      \n      if (!existingSnapshot.empty && !req.body.allowMultiple) {\n        res.status(409).json(createErrorResponse(\n          \"Active configuration already exists for organization\",\n          { \n            existingConfigId: existingSnapshot.docs[0].id,\n            suggestion: \"Update existing config or set allowMultiple=true\" \n          },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const config: OrganizationConfig = {\n        id: uuidv4(),\n        ...configData,\n        version: 1,\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      // Validate complete config\n      const validation = OrganizationConfigSchema.safeParse(config);\n      if (!validation.success) {\n        res.status(400).json(createErrorResponse(\n          \"Invalid configuration data\",\n          validation.error.errors,\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Deactivate existing configs if creating new active one\n      if (config.isActive && !existingSnapshot.empty) {\n        const batch = collections.configs.firestore.batch();\n        existingSnapshot.docs.forEach(doc => {\n          batch.update(doc.ref, { isActive: false, updatedAt: new Date() });\n        });\n        await batch.commit();\n      }\n      \n      // Save new config\n      await collections.configs.doc(config.id).set(config);\n      \n      res.status(201).json(createSuccessResponse(\n        config,\n        \"Configuration created successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      console.error(\"Error creating config:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while creating config\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * PUT /configs/:id\n * Update configuration\n */\napp.put(\"/:id\",\n  requirePermissions([PERMISSIONS.CONFIG_WRITE]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(\n        z.object({ id: UUIDSchema }),\n        req.params\n      );\n      \n      const updateData = validateRequestBody(UpdateConfigRequestSchema)(req);\n      \n      const configDoc = await collections.configs.doc(id).get();\n      \n      if (!configDoc.exists) {\n        res.status(404).json(createErrorResponse(\n          \"Configuration not found\",\n          { configId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const existingConfig = { id: configDoc.id, ...configDoc.data() } as OrganizationConfig;\n      \n      // Verify organization access\n      if (existingConfig.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Access denied to configuration\",\n          { configId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Prepare updated config\n      const updatedConfig: OrganizationConfig = {\n        ...existingConfig,\n        ...updateData,\n        id: existingConfig.id,\n        organizationId: existingConfig.organizationId,\n        version: existingConfig.version + 1,\n        updatedAt: new Date(),\n        lastModifiedBy: req.user!.uid\n      };\n      \n      // Validate updated config\n      const validation = OrganizationConfigSchema.safeParse(updatedConfig);\n      if (!validation.success) {\n        res.status(400).json(createErrorResponse(\n          \"Invalid configuration update data\",\n          validation.error.errors,\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Update in Firestore\n      await configDoc.ref.set(updatedConfig);\n      \n      res.json(createSuccessResponse(\n        updatedConfig,\n        \"Configuration updated successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      console.error(\"Error updating config:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while updating config\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * POST /configs/:id/clone\n * Clone configuration to new version\n */\napp.post(\"/:id/clone\",\n  requirePermissions([PERMISSIONS.CONFIG_WRITE]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(\n        z.object({ id: UUIDSchema }),\n        req.params\n      );\n      \n      const configDoc = await collections.configs.doc(id).get();\n      \n      if (!configDoc.exists) {\n        res.status(404).json(createErrorResponse(\n          \"Configuration not found\",\n          { configId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const sourceConfig = { id: configDoc.id, ...configDoc.data() } as OrganizationConfig;\n      \n      // Verify organization access\n      if (sourceConfig.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Access denied to configuration\",\n          { configId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Create cloned config\n      const clonedConfig: OrganizationConfig = {\n        ...sourceConfig,\n        id: uuidv4(),\n        version: sourceConfig.version + 1,\n        isActive: false, // Cloned configs start as inactive\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        createdBy: req.user!.uid,\n        lastModifiedBy: req.user!.uid\n      };\n      \n      // Save cloned config\n      await collections.configs.doc(clonedConfig.id).set(clonedConfig);\n      \n      res.status(201).json(createSuccessResponse(\n        clonedConfig,\n        \"Configuration cloned successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      console.error(\"Error cloning config:\", error);\n      res.status(500).json(createErrorResponse(\n        \"Internal server error while cloning config\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * GET /presets\n * Get available analysis presets\n */\napp.get(\"/presets\", (req, res) => {\n  const presets = Object.entries(PRESET_WEIGHTS).map(([preset, weights]) => ({\n    preset: preset as AnalysisPreset,\n    weights,\n    name: preset.charAt(0).toUpperCase() + preset.slice(1).toLowerCase(),\n    description: getPresetDescription(preset as AnalysisPreset)\n  }));\n  \n  res.json(createSuccessResponse(presets, undefined, req.requestId));\n});\n\n/**\n * POST /validate-weights\n * Validate analysis weights\n */\napp.post(\"/validate-weights\", (req, res) => {\n  try {\n    const weights = validateRequestBody(\n      z.object({\n        structural: z.number().min(0).max(100),\n        legal: z.number().min(0).max(100),\n        clarity: z.number().min(0).max(100),\n        abnt: z.number().min(0).max(100)\n      })\n    )(req);\n    \n    const total = weights.structural + weights.legal + weights.clarity + weights.abnt;\n    const isValid = Math.abs(total - 100) < 0.01;\n    \n    res.json(createSuccessResponse({\n      isValid,\n      total,\n      weights,\n      error: !isValid ? `Weights must sum to 100%. Current sum: ${total.toFixed(2)}%` : null\n    }, undefined, req.requestId));\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n    } else {\n      res.status(500).json(createErrorResponse(\n        \"Error validating weights\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n});\n\n/**\n * POST /test-rule\n * Test custom rule pattern against text\n */\napp.post(\"/test-rule\", (req, res) => {\n  try {\n    const { pattern, text, patternType } = validateRequestBody(\n      z.object({\n        pattern: z.string(),\n        text: z.string(),\n        patternType: z.enum([\"regex\", \"keyword\", \"phrase\"]).default(\"regex\")\n      })\n    )(req);\n    \n    let matches = false;\n    let error = null;\n    \n    try {\n      if (patternType === \"regex\") {\n        const regex = new RegExp(pattern, \"gi\");\n        matches = regex.test(text);\n      } else if (patternType === \"keyword\" || patternType === \"phrase\") {\n        matches = text.toLowerCase().includes(pattern.toLowerCase());\n      }\n    } catch (err) {\n      error = `Invalid pattern: ${err.message}`;\n    }\n    \n    res.json(createSuccessResponse({\n      matches,\n      pattern,\n      text: text.substring(0, 200) + (text.length > 200 ? \"...\" : \"\"),\n      patternType,\n      error\n    }, undefined, req.requestId));\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n    } else {\n      res.status(500).json(createErrorResponse(\n        \"Error testing rule\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n});\n\n// Helper function for preset descriptions\nfunction getPresetDescription(preset: AnalysisPreset): string {\n  const descriptions = {\n    [AnalysisPreset.RIGOROUS]: \"Foco em conformidade legal rigorosa\",\n    [AnalysisPreset.STANDARD]: \"An√°lise balanceada para uso geral\",\n    [AnalysisPreset.TECHNICAL]: \"Foco em especifica√ß√µes t√©cnicas detalhadas\",\n    [AnalysisPreset.FAST]: \"An√°lise r√°pida com foco em aspectos essenciais\",\n    [AnalysisPreset.CUSTOM]: \"Configura√ß√£o completamente personalizada\"\n  };\n  return descriptions[preset] || \"Preset personalizado\";\n}\n\n// Error handling middleware\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  console.error(\"Unhandled error in analysis-config API:\", error);\n  \n  res.status(500).json(createErrorResponse(\n    \"Internal server error\",\n    process.env.NODE_ENV === \"development\" ? error.stack : null,\n    req.requestId\n  ));\n});\n\n// Export Cloud Function\nexport const analysisConfigApi = onRequest({\n  region: \"us-central1\",\n  memory: \"1GiB\",\n  timeoutSeconds: 300,\n  maxInstances: 50,\n  cors: config.corsOrigin\n}, app);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/analysis.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1403,1406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1403,1406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1588,1591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1588,1591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3201,3204],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3201,3204],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3257,3260],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3257,3260],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'organizationId' is assigned a value but never used.","line":182,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'organizationId' is assigned a value but never used.","line":182,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":182,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":182,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5161,5164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5161,5164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6066,6069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6066,6069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":217,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":217,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6122,6125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6122,6125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'organizationId' is assigned a value but never used.","line":261,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":261,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'organizationId' is assigned a value but never used.","line":261,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":261,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":261,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7345,7348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7345,7348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'status' is assigned a value but never used.","line":264,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'status' is assigned a value but never used.","line":264,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":264,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":305,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8788,8791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8788,8791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Analysis API - Endpoints para an√°lise de documentos\n * LicitaReview Cloud Functions\n */\n\nimport * as express from 'express';\nimport { PERMISSIONS } from '../middleware/auth';\nimport { AnalysisOrchestrator } from '../services/AnalysisOrchestrator';\nimport { firestore, collections } from '../config/firebase';\nimport { z } from 'zod';\nimport { errorHandler } from '../middleware/error';\nimport { authenticateUser, requirePermissions, requireOrganization } from '../middleware/auth';\n\n// Schemas de valida√ß√£o\nconst StartAnalysisRequestSchema = z.object({\n  documentId: z.string().min(1, 'Document ID is required'),\n  analysisType: z.enum(['compliance', 'risk', 'completeness', 'all']).default('all'),\n  options: z.object({\n    priority: z.enum(['low', 'normal', 'high']).default('normal'),\n    includeRecommendations: z.boolean().default(true),\n    detailedReport: z.boolean().default(false)\n  }).default({})\n});\n\nconst AnalysisIdSchema = z.object({\n  analysisId: z.string().min(1, 'Analysis ID is required')\n});\n\nconst DocumentIdSchema = z.object({\n  documentId: z.string().min(1, 'Document ID is required')\n});\n\n// Inicializar o orquestrador de an√°lises\nconst orchestrator = new AnalysisOrchestrator(\n  firestore,\n  process.env.CLOUD_RUN_SERVICE_URL || 'https://analysis-service-url',\n  { projectId: process.env.GOOGLE_CLOUD_PROJECT }\n);\n\n// Helper functions\nfunction createSuccessResponse(data: any, requestId?: string) {\n  return {\n    success: true,\n    data,\n    requestId,\n    timestamp: new Date().toISOString()\n  };\n}\n\nfunction createErrorResponse(message: string, details: any = null, requestId?: string) {\n  return {\n    success: false,\n    error: {\n      message,\n      details\n    },\n    requestId,\n    timestamp: new Date().toISOString()\n  };\n}\n\nfunction validateRequestBody(schema: z.ZodSchema) {\n  return (req: express.Request, res: express.Response, next: express.NextFunction) => {\n    try {\n      req.body = schema.parse(req.body);\n      next();\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json(createErrorResponse(\n          'Invalid request body',\n          error.errors,\n          req.headers['x-request-id'] as string\n        ));\n      } else {\n        next(error);\n      }\n    }\n  };\n}\n\nfunction validatePathParams(schema: z.ZodSchema) {\n  return (req: express.Request, res: express.Response, next: express.NextFunction) => {\n    try {\n      req.params = schema.parse(req.params);\n      next();\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json(createErrorResponse(\n          'Invalid path parameters',\n          error.errors,\n          req.headers['x-request-id'] as string\n        ));\n      } else {\n        next(error);\n      }\n    }\n  };\n}\n\nconst router = express.Router();\n\n/**\n * POST /analysis/start\n * Inicia uma nova an√°lise de documento\n */\nrouter.post('/start',\n  authenticateUser,\n  requireOrganization,\n  requirePermissions([PERMISSIONS.ANALYSIS_WRITE]),\n  validateRequestBody(StartAnalysisRequestSchema),\n  async (req: express.Request, res: express.Response) => {\n    try {\n      const { documentId, analysisType, options } = req.body;\n      const organizationId = (req as any).user?.organizationId;\n      const userId = (req as any).user?.uid;\n\n      if (!organizationId) {\n        return res.status(400).json(createErrorResponse(\n          'Organization ID is required',\n          null,\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      // Verificar se o documento existe e pertence √† organiza√ß√£o\n      const docSnapshot = await collections.documents.doc(documentId).get();\n      if (!docSnapshot.exists) {\n        return res.status(404).json(createErrorResponse(\n          'Document not found',\n          { documentId },\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      const document = docSnapshot.data();\n      if (document?.organizationId !== organizationId) {\n        return res.status(403).json(createErrorResponse(\n          'Access denied to document',\n          { documentId },\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      // Iniciar an√°lise via AnalysisOrchestrator\n      const analysisId = await orchestrator.startAnalysis({\n        documentId,\n        organizationId,\n        userId,\n        options: {\n          analysisType,\n          ...options\n        },\n        priority: options.priority || 'normal'\n      });\n\n      res.status(202).json(createSuccessResponse(\n        {\n          analysisId,\n          status: 'queued',\n          message: 'Analysis started successfully'\n        },\n        req.headers['x-request-id'] as string\n      ));\n    } catch (error) {\n       errorHandler(error as Error, req, res, () => {});\n     }\n  }\n);\n\n/**\n * GET /analysis/:analysisId/progress\n * Obt√©m o progresso de uma an√°lise\n */\nrouter.get('/:analysisId/progress',\n  authenticateUser,\n  requireOrganization,\n  requirePermissions([PERMISSIONS.ANALYSIS_READ]),\n  validatePathParams(AnalysisIdSchema),\n  async (req: express.Request, res: express.Response) => {\n    try {\n      const { analysisId } = req.params;\n      const organizationId = (req as any).user?.organizationId;\n\n      const progress = await orchestrator.getAnalysisProgress(analysisId);\n\n      if (!progress) {\n        return res.status(404).json(createErrorResponse(\n          'Analysis not found',\n          { analysisId },\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      res.json(createSuccessResponse(\n        progress,\n        req.headers['x-request-id'] as string\n      ));\n    } catch (error) {\n       errorHandler(error as Error, req, res, () => {});\n     }\n  }\n);\n\n/**\n * DELETE /analysis/:analysisId\n * Cancela uma an√°lise em andamento\n */\nrouter.delete('/:analysisId',\n  authenticateUser,\n  requireOrganization,\n  requirePermissions([PERMISSIONS.ANALYSIS_WRITE]),\n  validatePathParams(AnalysisIdSchema),\n  async (req: express.Request, res: express.Response) => {\n    try {\n      const { analysisId } = req.params;\n      const organizationId = (req as any).user?.organizationId;\n      const userId = (req as any).user?.uid;\n\n      if (!organizationId) {\n        return res.status(400).json(createErrorResponse(\n          'Organization ID is required',\n          null,\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      // Verificar se a an√°lise existe\n      const activeAnalyses = orchestrator.getActiveAnalyses();\n      const analysis = activeAnalyses.find(a => a.analysisId === analysisId);\n\n      if (!analysis) {\n        return res.status(404).json(createErrorResponse(\n          'Analysis not found or access denied',\n          { analysisId },\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      await orchestrator.cancelAnalysis(analysisId, userId);\n\n      res.json(createSuccessResponse(\n        { message: 'Analysis cancelled successfully' },\n        req.headers['x-request-id'] as string\n      ));\n    } catch (error) {\n       errorHandler(error as Error, req, res, () => {});\n     }\n  }\n);\n\n/**\n * GET /analysis/list\n * Lista an√°lises da organiza√ß√£o\n */\nrouter.get('/list',\n  authenticateUser,\n  requireOrganization,\n  requirePermissions([PERMISSIONS.ANALYSIS_READ]),\n  async (req: express.Request, res: express.Response) => {\n    try {\n      const organizationId = (req as any).user?.organizationId;\n      const page = parseInt(req.query.page as string) || 1;\n      const limit = Math.min(parseInt(req.query.limit as string) || 10, 100);\n      const status = req.query.status as string;\n\n      // Por enquanto, retornamos as an√°lises ativas\n      // TODO: Implementar filtro por organiza√ß√£o quando a propriedade estiver dispon√≠vel\n      const allAnalyses = orchestrator.getActiveAnalyses();\n      const filteredAnalyses = allAnalyses;\n\n      const startIndex = (page - 1) * limit;\n      const endIndex = startIndex + limit;\n      const paginatedAnalyses = filteredAnalyses.slice(startIndex, endIndex);\n\n      const analyses = {\n        data: paginatedAnalyses,\n        total: filteredAnalyses.length,\n        page,\n        limit,\n        totalPages: Math.ceil(filteredAnalyses.length / limit)\n      };\n\n      res.json(createSuccessResponse(\n        analyses,\n        req.headers['x-request-id'] as string\n      ));\n    } catch (error) {\n       errorHandler(error as Error, req, res, () => {});\n     }\n  }\n);\n\n/**\n * GET /analysis/result/:documentId\n * Obt√©m o resultado da an√°lise de um documento\n */\nrouter.get('/result/:documentId',\n  authenticateUser,\n  requireOrganization,\n  requirePermissions([PERMISSIONS.ANALYSIS_READ]),\n  validatePathParams(DocumentIdSchema),\n  async (req: express.Request, res: express.Response) => {\n    try {\n      const { documentId } = req.params;\n      const organizationId = (req as any).user?.organizationId;\n\n      // Verificar se o documento pertence √† organiza√ß√£o\n      const docSnapshot = await collections.documents.doc(documentId).get();\n      if (!docSnapshot.exists) {\n        return res.status(404).json(createErrorResponse(\n          'Document not found',\n          { documentId },\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      const document = docSnapshot.data();\n      if (document?.organizationId !== organizationId) {\n        return res.status(403).json(createErrorResponse(\n          'Access denied to document',\n          { documentId },\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      // Buscar resultado da an√°lise no Firestore\n      const resultQuery = await firestore\n        .collection('analysisResults')\n        .where('documentId', '==', documentId)\n        .orderBy('createdAt', 'desc')\n        .limit(1)\n        .get();\n\n      if (resultQuery.empty) {\n        return res.status(404).json(createErrorResponse(\n          'Analysis result not found',\n          { documentId },\n          req.headers['x-request-id'] as string\n        ));\n      }\n\n      const result = resultQuery.docs[0].data();\n\n      res.json(createSuccessResponse(\n        result,\n        req.headers['x-request-id'] as string\n      ));\n    } catch (error) {\n       errorHandler(error as Error, req, res, () => {});\n     }\n  }\n);\n\nexport default router;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/analytics.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":238,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6811,6814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6811,6814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":338,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":338,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9959,9962],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9959,9962],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":341,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10069,10072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10069,10072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":401,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":401,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11599,11602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11599,11602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'period' is defined but never used.","line":404,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":404,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'period' is defined but never used.","line":404,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":404,"endColumn":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Analytics API\n * LicitaReview Cloud Functions\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport express from \"express\";\nimport { collections } from \"../config/firebase\";\nimport { \n  authenticateUser,\n  requireOrganization,\n  requirePermissions,\n  PERMISSIONS\n} from \"../middleware/auth\";\nimport {\n  createSuccessResponse,\n  createErrorResponse,\n  generateRequestId,\n  validateQueryParams\n} from \"../utils\";\nimport { UsageMetrics, PerformanceMetrics } from \"../types\";\nimport { z } from \"zod\";\n\nconst app = express();\napp.use(express.json());\n\n// Request ID middleware\napp.use((req, res, next) => {\n  req.requestId = generateRequestId();\n  res.setHeader(\"X-Request-ID\", req.requestId);\n  next();\n});\n\napp.use(authenticateUser);\napp.use(requireOrganization);\n\n/**\n * GET /analytics/usage\n * Get usage metrics for organization\n */\napp.get(\"/usage\",\n  requirePermissions([PERMISSIONS.AUDIT_READ]),\n  async (req, res) => {\n    try {\n      const query = validateQueryParams(\n        z.object({\n          period: z.enum([\"day\", \"week\", \"month\", \"year\"]).default(\"month\"),\n          startDate: z.coerce.date().optional(),\n          endDate: z.coerce.date().optional()\n        }),\n        req\n      );\n      \n      const organizationId = req.user!.organizationId;\n      \n      // Calculate date range\n      const endDate = query.endDate || new Date();\n      const startDate = query.startDate || getStartDateForPeriod(query.period, endDate);\n      \n      // Query analytics data\n      const analyticsSnapshot = await collections.firestore\n        .collection(\"organizationAnalytics\")\n        .doc(organizationId)\n        .get();\n      \n      if (!analyticsSnapshot.exists) {\n        res.json(createSuccessResponse({\n          organizationId,\n          period: query.period,\n          startDate,\n          endDate,\n          metrics: getEmptyMetrics()\n        }, undefined, req.requestId));\n        return;\n      }\n      \n      const analyticsData = analyticsSnapshot.data();\n      const metrics = aggregateMetricsForPeriod(\n        analyticsData.daily || {},\n        startDate,\n        endDate,\n        query.period\n      );\n      \n      res.json(createSuccessResponse({\n        organizationId,\n        period: query.period,\n        startDate,\n        endDate,\n        metrics\n      }, undefined, req.requestId));\n      \n    } catch (error) {\n      console.error(\"Error getting usage analytics:\", error);\n      res.status(500).json(createErrorResponse(\n        \"Failed to get usage analytics\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * GET /analytics/documents\n * Get document-related analytics\n */\napp.get(\"/documents\",\n  requirePermissions([PERMISSIONS.AUDIT_READ]),\n  async (req, res) => {\n    try {\n      const query = validateQueryParams(\n        z.object({\n          days: z.coerce.number().min(1).max(365).default(30)\n        }),\n        req\n      );\n      \n      const organizationId = req.user!.organizationId;\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - query.days);\n      \n      // Get document statistics\n      const documentsQuery = collections.documents\n        .where(\"organizationId\", \"==\", organizationId)\n        .where(\"createdAt\", \">=\", startDate);\n      \n      const documentsSnapshot = await documentsQuery.get();\n      \n      const documentStats = {\n        total: documentsSnapshot.size,\n        byStatus: {} as Record<string, number>,\n        byType: {} as Record<string, number>,\n        byDay: {} as Record<string, number>\n      };\n      \n      documentsSnapshot.docs.forEach(doc => {\n        const data = doc.data();\n        const status = data.status || \"unknown\";\n        const type = data.classification?.documentType || \"unknown\";\n        const day = data.createdAt.toDate().toISOString().split('T')[0];\n        \n        documentStats.byStatus[status] = (documentStats.byStatus[status] || 0) + 1;\n        documentStats.byType[type] = (documentStats.byType[type] || 0) + 1;\n        documentStats.byDay[day] = (documentStats.byDay[day] || 0) + 1;\n      });\n      \n      res.json(createSuccessResponse({\n        organizationId,\n        period: `${query.days} days`,\n        documentStats\n      }, undefined, req.requestId));\n      \n    } catch (error) {\n      console.error(\"Error getting document analytics:\", error);\n      res.status(500).json(createErrorResponse(\n        \"Failed to get document analytics\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * GET /analytics/analysis\n * Get analysis-related analytics\n */\napp.get(\"/analysis\",\n  requirePermissions([PERMISSIONS.AUDIT_READ]),\n  async (req, res) => {\n    try {\n      const query = validateQueryParams(\n        z.object({\n          days: z.coerce.number().min(1).max(365).default(30)\n        }),\n        req\n      );\n      \n      const organizationId = req.user!.organizationId;\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - query.days);\n      \n      // Get analysis results statistics\n      const analysisQuery = collections.analysisResults\n        .where(\"organizationId\", \"==\", organizationId)\n        .where(\"createdAt\", \">=\", startDate);\n      \n      const analysisSnapshot = await analysisQuery.get();\n      \n      const analysisStats = {\n        total: analysisSnapshot.size,\n        byStatus: {} as Record<string, number>,\n        scoreDistribution: {\n          excellent: 0, // 90-100\n          good: 0,      // 70-89\n          fair: 0,      // 50-69\n          poor: 0       // 0-49\n        },\n        averageScore: 0,\n        averageProcessingTime: 0,\n        findingsBreakdown: {\n          critical: 0,\n          high: 0,\n          medium: 0,\n          low: 0\n        }\n      };\n      \n      let totalScore = 0;\n      let totalProcessingTime = 0;\n      let completedAnalyses = 0;\n      \n      analysisSnapshot.docs.forEach(doc => {\n        const data = doc.data();\n        const status = data.status || \"unknown\";\n        \n        analysisStats.byStatus[status] = (analysisStats.byStatus[status] || 0) + 1;\n        \n        if (status === \"completed\" && data.weightedScore !== undefined) {\n          completedAnalyses++;\n          totalScore += data.weightedScore;\n          totalProcessingTime += data.executionTimeSeconds || 0;\n          \n          // Score distribution\n          if (data.weightedScore >= 90) {\n            analysisStats.scoreDistribution.excellent++;\n          } else if (data.weightedScore >= 70) {\n            analysisStats.scoreDistribution.good++;\n          } else if (data.weightedScore >= 50) {\n            analysisStats.scoreDistribution.fair++;\n          } else {\n            analysisStats.scoreDistribution.poor++;\n          }\n          \n          // Findings breakdown\n          if (data.findings) {\n            data.findings.forEach((finding: any) => {\n              const severity = finding.severity?.toLowerCase() || \"unknown\";\n              if (severity === \"critica\") {\n                analysisStats.findingsBreakdown.critical++;\n              } else if (severity === \"alta\") {\n                analysisStats.findingsBreakdown.high++;\n              } else if (severity === \"media\") {\n                analysisStats.findingsBreakdown.medium++;\n              } else if (severity === \"baixa\") {\n                analysisStats.findingsBreakdown.low++;\n              }\n            });\n          }\n        }\n      });\n      \n      if (completedAnalyses > 0) {\n        analysisStats.averageScore = totalScore / completedAnalyses;\n        analysisStats.averageProcessingTime = totalProcessingTime / completedAnalyses;\n      }\n      \n      res.json(createSuccessResponse({\n        organizationId,\n        period: `${query.days} days`,\n        analysisStats\n      }, undefined, req.requestId));\n      \n    } catch (error) {\n      console.error(\"Error getting analysis analytics:\", error);\n      res.status(500).json(createErrorResponse(\n        \"Failed to get analysis analytics\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * GET /analytics/performance\n * Get performance metrics\n */\napp.get(\"/performance\",\n  requirePermissions([PERMISSIONS.AUDIT_READ]),\n  async (req, res) => {\n    try {\n      const query = validateQueryParams(\n        z.object({\n          hours: z.coerce.number().min(1).max(168).default(24) // Max 1 week\n        }),\n        req\n      );\n      \n      const startDate = new Date();\n      startDate.setHours(startDate.getHours() - query.hours);\n      \n      // Get performance metrics from logs or metrics collection\n      const metricsSnapshot = await collections.firestore\n        .collection(\"performanceMetrics\")\n        .where(\"timestamp\", \">=\", startDate)\n        .orderBy(\"timestamp\", \"desc\")\n        .limit(1000)\n        .get();\n      \n      const metrics: PerformanceMetrics[] = metricsSnapshot.docs.map(doc => \n        doc.data() as PerformanceMetrics\n      );\n      \n      // Aggregate metrics by function\n      const functionMetrics = metrics.reduce((acc, metric) => {\n        const functionName = metric.functionName;\n        \n        if (!acc[functionName]) {\n          acc[functionName] = {\n            totalCalls: 0,\n            totalExecutionTime: 0,\n            totalMemoryUsed: 0,\n            successCount: 0,\n            errorCount: 0,\n            averageExecutionTime: 0,\n            averageMemoryUsed: 0,\n            successRate: 0,\n            errors: [] as string[]\n          };\n        }\n        \n        acc[functionName].totalCalls++;\n        acc[functionName].totalExecutionTime += metric.executionTime;\n        acc[functionName].totalMemoryUsed += metric.memoryUsed;\n        \n        if (metric.success) {\n          acc[functionName].successCount++;\n        } else {\n          acc[functionName].errorCount++;\n          if (metric.error && !acc[functionName].errors.includes(metric.error)) {\n            acc[functionName].errors.push(metric.error);\n          }\n        }\n        \n        return acc;\n      }, {} as Record<string, any>);\n      \n      // Calculate averages and rates\n      Object.values(functionMetrics).forEach((funcMetric: any) => {\n        funcMetric.averageExecutionTime = funcMetric.totalExecutionTime / funcMetric.totalCalls;\n        funcMetric.averageMemoryUsed = funcMetric.totalMemoryUsed / funcMetric.totalCalls;\n        funcMetric.successRate = (funcMetric.successCount / funcMetric.totalCalls) * 100;\n      });\n      \n      res.json(createSuccessResponse({\n        period: `${query.hours} hours`,\n        totalMetrics: metrics.length,\n        functionMetrics\n      }, undefined, req.requestId));\n      \n    } catch (error) {\n      console.error(\"Error getting performance analytics:\", error);\n      res.status(500).json(createErrorResponse(\n        \"Failed to get performance analytics\",\n        null,\n        req.requestId\n      ));\n    }\n  }\n);\n\n// Helper functions\nfunction getStartDateForPeriod(period: string, endDate: Date): Date {\n  const start = new Date(endDate);\n  \n  switch (period) {\n    case \"day\":\n      start.setDate(start.getDate() - 1);\n      break;\n    case \"week\":\n      start.setDate(start.getDate() - 7);\n      break;\n    case \"month\":\n      start.setMonth(start.getMonth() - 1);\n      break;\n    case \"year\":\n      start.setFullYear(start.getFullYear() - 1);\n      break;\n  }\n  \n  return start;\n}\n\nfunction getEmptyMetrics(): UsageMetrics {\n  return {\n    organizationId: \"\",\n    period: \"\",\n    documentsProcessed: 0,\n    analysesCompleted: 0,\n    storageUsed: 0,\n    apiCalls: 0,\n    errorRate: 0,\n    averageProcessingTime: 0,\n    activeUsers: 0\n  };\n}\n\nfunction aggregateMetricsForPeriod(\n  dailyData: Record<string, any>,\n  startDate: Date,\n  endDate: Date,\n  period: string\n): UsageMetrics {\n  const metrics = getEmptyMetrics();\n  \n  // Iterate through date range and aggregate data\n  const currentDate = new Date(startDate);\n  while (currentDate <= endDate) {\n    const dateKey = currentDate.toISOString().split('T')[0];\n    const dayData = dailyData[dateKey];\n    \n    if (dayData) {\n      metrics.documentsProcessed += dayData.documentsProcessed || 0;\n      metrics.analysesCompleted += dayData.analysesCompleted || 0;\n      metrics.storageUsed += dayData.storageUsed || 0;\n      metrics.apiCalls += dayData.apiCalls || 0;\n    }\n    \n    currentDate.setDate(currentDate.getDate() + 1);\n  }\n  \n  return metrics;\n}\n\n// Export Cloud Function\nexport const analyticsReporter = onRequest({\n  region: \"us-central1\",\n  memory: \"512MiB\",\n  timeoutSeconds: 300,\n  maxInstances: 10,\n  cors: true\n}, app);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/audit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/comissoes-api.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'uuidv4' is defined but never used.","line":11,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uuidv4' is defined but never used.","line":11,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'ComissoesQueryOptionsSchema' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ComissoesQueryOptionsSchema' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'validateOrganizationAccess' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validateOrganizationAccess' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'validateQueryParams' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validateQueryParams' is defined but never used.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'createSuccessResponse' is defined but never used.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createSuccessResponse' is defined but never used.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'UUIDSchema' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UUIDSchema' is defined but never used.","line":36,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'ServidorIdSchema' is assigned a value but never used.","line":57,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ServidorIdSchema' is assigned a value but never used.","line":57,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":111,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":111,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":111,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":111,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":143,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":143,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":143,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":143,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":164,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":164,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":164,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":164,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":186,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":186,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":186,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":186,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":250,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":250,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":250,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":250,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":271,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":271,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":271,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":271,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":285,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":285,"endColumn":95},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'next' is defined but never used.","line":285,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":285,"endColumn":73}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Comiss√µes API - Comiss√µes CRUD operations\n * LicitaReview Cloud Functions\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\nimport rateLimit from \"express-rate-limit\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { z } from \"zod\";\n\nimport { \n  CreateComissaoRequestSchema,\n  UpdateComissaoRequestSchema,\n  AdicionarMembroRequestSchema,\n  AtualizarMembroRequestSchema,\n  ComissoesQueryOptionsSchema\n} from \"../types\";\nimport {\n  authenticateUser,\n  requireOrganization,\n  validateOrganizationAccess,\n  requirePermissions,\n  PERMISSIONS\n} from \"../middleware/auth\";\nimport {\n  validateRequestBody,\n  validateQueryParams,\n  validatePathParams,\n  ValidationError,\n  createSuccessResponse,\n  createErrorResponse,\n  generateRequestId,\n  UUIDSchema\n} from \"../utils\";\nimport { config } from \"../config\";\nimport {\n  listComissoes,\n  getComissaoById,\n  createComissao,\n  updateComissao,\n  deleteComissao,\n  adicionarMembro,\n  removerMembro,\n  atualizarMembro,\n  getComissaoStats,\n  getComissaoHistory\n} from \"./comissoes\";\n\n// Validation schemas for path parameters\nconst ComissaoIdSchema = z.object({\n  id: z.string().uuid()\n});\n\nconst ServidorIdSchema = z.object({\n  servidorId: z.string().uuid()\n});\n\nconst ComissaoServidorSchema = z.object({\n  id: z.string().uuid(),\n  servidorId: z.string().uuid()\n});\n\nconst app = express();\n\n// Middleware\napp.use(helmet());\napp.use(cors({ origin: config.corsOrigin }));\napp.use(express.json({ limit: config.maxRequestSize }));\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: config.rateLimitWindowMs,\n  max: config.rateLimitMax,\n  message: { error: \"Too many requests, please try again later\" },\n  standardHeaders: true,\n  legacyHeaders: false\n});\napp.use(limiter);\n\n// Request ID middleware\napp.use((req, res, next) => {\n  req.requestId = generateRequestId();\n  res.setHeader('X-Request-ID', req.requestId);\n  next();\n});\n\n// Authentication and authorization\napp.use(authenticateUser);\napp.use(requireOrganization);\n\n/**\n * GET /\n * List comiss√µes with filtering and pagination\n */\napp.get(\"/\", \n  requirePermissions([PERMISSIONS.DOCUMENTS_READ]), // Using existing permission for now\n  listComissoes\n);\n\n/**\n * GET /:id\n * Get comiss√£o by ID with detailed information\n */\napp.get(\"/:id\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_READ]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(ComissaoIdSchema, req.params);\n      await getComissaoById(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n/**\n * POST /\n * Create new comiss√£o\n */\napp.post(\"/\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  validateRequestBody(CreateComissaoRequestSchema),\n  createComissao\n);\n\n/**\n * PUT /:id\n * Update comiss√£o\n */\napp.put(\"/:id\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  validateRequestBody(UpdateComissaoRequestSchema),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(ComissaoIdSchema, req.params);\n      await updateComissao(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n/**\n * DELETE /:id\n * Delete comiss√£o\n */\napp.delete(\"/:id\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_DELETE]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(ComissaoIdSchema, req.params);\n      await deleteComissao(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n/**\n * POST /:id/membros\n * Add member to comiss√£o\n */\napp.post(\"/:id/membros\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  validateRequestBody(AdicionarMembroRequestSchema),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(ComissaoIdSchema, req.params);\n      await adicionarMembro(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n/**\n * DELETE /:id/membros/:servidorId\n * Remove member from comiss√£o\n */\napp.delete(\"/:id/membros/:servidorId\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  async (req, res) => {\n    try {\n      validatePathParams(ComissaoServidorSchema, req.params);\n      await removerMembro(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n/**\n * PATCH /:id/membros/:servidorId\n * Update member in comiss√£o\n */\napp.patch(\"/:id/membros/:servidorId\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  validateRequestBody(AtualizarMembroRequestSchema),\n  async (req, res) => {\n    try {\n      validatePathParams(ComissaoServidorSchema, req.params);\n      await atualizarMembro(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n/**\n * GET /:id/stats\n * Get comiss√£o statistics\n */\napp.get(\"/:id/stats\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_READ]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(ComissaoIdSchema, req.params);\n      await getComissaoStats(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n/**\n * GET /:id/history\n * Get comiss√£o history\n */\napp.get(\"/:id/history\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_READ]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(ComissaoIdSchema, req.params);\n      await getComissaoHistory(req, res);\n    } catch (error) {\n      const requestId = req.headers['x-request-id'] as string;\n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, requestId));\n      } else {\n        res.status(500).json(createErrorResponse('Internal server error', undefined, requestId));\n      }\n    }\n  }\n);\n\n// Error handling middleware\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  console.error('Comiss√µes API Error:', error);\n  const errorResponse = createErrorResponse(\n    error.message || 'Internal server error',\n    error instanceof ValidationError ? error.details : undefined,\n    req.requestId\n  );\n  res.status(error instanceof ValidationError ? 400 : 500).json(errorResponse);\n});\n\n// Export the Cloud Function\nexport const comissoesApi = onRequest({\n  region: \"us-central1\",\n  memory: \"1GiB\",\n  timeoutSeconds: 300,\n  maxInstances: 100,\n  cors: config.corsOrigin\n}, app);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/comissoes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/documents.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'CreateDocumentRequest' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CreateDocumentRequest' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'UpdateDocumentRequest' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UpdateDocumentRequest' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'validateOrganizationAccess' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validateOrganizationAccess' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":83,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":84,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":85,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":188,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":188,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":308,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":308,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":392,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":392,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":457,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":457,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":462,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":462,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'z' is not defined.","line":462,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":462,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":517,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":517,"endColumn":95},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'next' is defined but never used.","line":517,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":517,"endColumn":73}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Documents API - Document CRUD operations\n * LicitaReview Cloud Functions\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\nimport rateLimit from \"express-rate-limit\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { collections } from \"../config/firebase\";\nimport { \n  Document,\n  DocumentSchema,\n  CreateDocumentRequest,\n  CreateDocumentRequestSchema,\n  UpdateDocumentRequest,\n  UpdateDocumentRequestSchema,\n  DocumentSummary,\n  DocumentStatus,\n  PaginatedResponse\n} from \"../types\";\nimport {\n  authenticateUser,\n  requireOrganization,\n  validateOrganizationAccess,\n  requirePermissions,\n  PERMISSIONS\n} from \"../middleware/auth\";\nimport {\n  validateRequestBody,\n  validateQueryParams,\n  validatePathParams,\n  ValidationError,\n  createSuccessResponse,\n  createErrorResponse,\n  generateRequestId,\n  UUIDSchema,\n  PaginationSchema\n} from \"../utils\";\nimport { config } from \"../config\";\n\nconst app = express();\n\n// Middleware\napp.use(helmet());\napp.use(cors({ origin: config.corsOrigin }));\napp.use(express.json({ limit: config.maxRequestSize }));\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: config.rateLimitWindowMs,\n  max: config.rateLimitMax,\n  message: { error: \"Too many requests, please try again later\" },\n  standardHeaders: true,\n  legacyHeaders: false\n});\napp.use(limiter);\n\n// Request ID middleware\napp.use((req, res, next) => {\n  req.requestId = generateRequestId();\n  res.setHeader(\"X-Request-ID\", req.requestId);\n  next();\n});\n\n// Authentication middleware\napp.use(authenticateUser);\napp.use(requireOrganization);\n\n/**\n * GET /documents\n * List documents for organization with pagination and filtering\n */\napp.get(\"/\", \n  requirePermissions([PERMISSIONS.DOCUMENTS_READ]),\n  async (req, res) => {\n    try {\n      const query = validateQueryParams(\n        PaginationSchema.extend({\n          status: z.nativeEnum(DocumentStatus).optional(),\n          documentType: z.string().optional(),\n          search: z.string().optional()\n        }),\n        req\n      );\n      \n      let firestoreQuery = collections.documents\n        .where(\"organizationId\", \"==\", req.user!.organizationId);\n      \n      // Apply filters\n      if (query.status) {\n        firestoreQuery = firestoreQuery.where(\"status\", \"==\", query.status);\n      }\n      \n      if (query.documentType) {\n        firestoreQuery = firestoreQuery.where(\"classification.documentType\", \"==\", query.documentType);\n      }\n      \n      // Apply sorting\n      const sortField = query.sortBy === \"title\" ? \"title\" : \n                       query.sortBy === \"status\" ? \"status\" : \"createdAt\";\n      firestoreQuery = firestoreQuery.orderBy(sortField, query.sortOrder);\n      \n      // Count total documents for pagination\n      const countQuery = await firestoreQuery.count().get();\n      const total = countQuery.data().count;\n      \n      // Apply pagination\n      const offset = (query.page - 1) * query.limit;\n      firestoreQuery = firestoreQuery.offset(offset).limit(query.limit);\n      \n      const snapshot = await firestoreQuery.get();\n      \n      const documents: DocumentSummary[] = snapshot.docs.map(doc => {\n        const data = doc.data() as Document;\n        return {\n          id: doc.id,\n          title: data.title,\n          documentType: data.classification.documentType,\n          status: data.status,\n          organizationId: data.organizationId,\n          createdAt: data.createdAt,\n          updatedAt: data.updatedAt,\n          fileInfo: {\n            name: data.metadata.fileName,\n            size: data.metadata.fileSize,\n            type: data.metadata.fileType\n          }\n        };\n      });\n      \n      // Apply text search if needed (post-processing for now)\n      let filteredDocuments = documents;\n      if (query.search) {\n        const searchTerm = query.search.toLowerCase();\n        filteredDocuments = documents.filter(doc => \n          doc.title.toLowerCase().includes(searchTerm) ||\n          doc.fileInfo.name.toLowerCase().includes(searchTerm)\n        );\n      }\n      \n      const totalPages = Math.ceil(total / query.limit);\n      \n      const response: PaginatedResponse<DocumentSummary> = {\n        success: true,\n        data: filteredDocuments,\n        pagination: {\n          page: query.page,\n          limit: query.limit,\n          total,\n          totalPages,\n          hasNext: query.page < totalPages,\n          hasPrev: query.page > 1\n        },\n        timestamp: new Date().toISOString(),\n        requestId: req.requestId\n      };\n      \n      res.json(response);\n    } catch (error) {\n      console.error(\"Error listing documents:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while listing documents\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * GET /documents/:id\n * Get document by ID\n */\napp.get(\"/:id\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_READ]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(\n        z.object({ id: UUIDSchema }),\n        req.params\n      );\n      \n      const docRef = collections.documents.doc(id);\n      const doc = await docRef.get();\n      \n      if (!doc.exists) {\n        res.status(404).json(createErrorResponse(\n          \"Document not found\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const document = { id: doc.id, ...doc.data() } as Document;\n      \n      // Verify organization access\n      if (document.organizationId !== req.user!.organizationId && \n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Access denied to document\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      res.json(createSuccessResponse(document, undefined, req.requestId));\n    } catch (error) {\n      console.error(\"Error getting document:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while getting document\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * POST /documents\n * Create new document\n */\napp.post(\"/\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  async (req, res) => {\n    try {\n      const documentData = validateRequestBody(CreateDocumentRequestSchema)(req);\n      \n      // Validate organization access\n      if (documentData.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Cannot create document for different organization\",\n          { requestedOrg: documentData.organizationId, userOrg: req.user!.organizationId },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const document: Document = {\n        id: uuidv4(),\n        ...documentData,\n        status: DocumentStatus.DRAFT,\n        version: 1,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      // Validate complete document\n      const validation = DocumentSchema.safeParse(document);\n      if (!validation.success) {\n        res.status(400).json(createErrorResponse(\n          \"Invalid document data\",\n          validation.error.errors,\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Save to Firestore\n      await collections.documents.doc(document.id).set(document);\n      \n      res.status(201).json(createSuccessResponse(\n        document,\n        \"Document created successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      console.error(\"Error creating document:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while creating document\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * PUT /documents/:id\n * Update document\n */\napp.put(\"/:id\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(\n        z.object({ id: UUIDSchema }),\n        req.params\n      );\n      \n      const updateData = validateRequestBody(UpdateDocumentRequestSchema)(req);\n      \n      const docRef = collections.documents.doc(id);\n      const doc = await docRef.get();\n      \n      if (!doc.exists) {\n        res.status(404).json(createErrorResponse(\n          \"Document not found\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const existingDocument = { id: doc.id, ...doc.data() } as Document;\n      \n      // Verify organization access\n      if (existingDocument.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Access denied to document\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Prepare updated document\n      const updatedDocument: Document = {\n        ...existingDocument,\n        ...updateData,\n        id: existingDocument.id, // Ensure ID doesn't change\n        organizationId: existingDocument.organizationId, // Prevent org change\n        updatedAt: new Date()\n      };\n      \n      // Validate updated document\n      const validation = DocumentSchema.safeParse(updatedDocument);\n      if (!validation.success) {\n        res.status(400).json(createErrorResponse(\n          \"Invalid document update data\",\n          validation.error.errors,\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Update in Firestore\n      await docRef.set(updatedDocument);\n      \n      res.json(createSuccessResponse(\n        updatedDocument,\n        \"Document updated successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      console.error(\"Error updating document:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while updating document\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * DELETE /documents/:id\n * Delete document (soft delete by setting status to ARCHIVED)\n */\napp.delete(\"/:id\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_DELETE]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(\n        z.object({ id: UUIDSchema }),\n        req.params\n      );\n      \n      const docRef = collections.documents.doc(id);\n      const doc = await docRef.get();\n      \n      if (!doc.exists) {\n        res.status(404).json(createErrorResponse(\n          \"Document not found\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const document = { id: doc.id, ...doc.data() } as Document;\n      \n      // Verify organization access\n      if (document.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Access denied to document\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      // Soft delete by archiving\n      await docRef.update({\n        status: DocumentStatus.ARCHIVED,\n        updatedAt: new Date()\n      });\n      \n      res.json(createSuccessResponse(\n        { id, status: DocumentStatus.ARCHIVED },\n        \"Document archived successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      console.error(\"Error deleting document:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while deleting document\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * PATCH /documents/:id/status\n * Update document status\n */\napp.patch(\"/:id/status\",\n  requirePermissions([PERMISSIONS.DOCUMENTS_WRITE]),\n  async (req, res) => {\n    try {\n      const { id } = validatePathParams(\n        z.object({ id: UUIDSchema }),\n        req.params\n      );\n      \n      const { status } = validateRequestBody(\n        z.object({ status: z.nativeEnum(DocumentStatus) })\n      )(req);\n      \n      const docRef = collections.documents.doc(id);\n      const doc = await docRef.get();\n      \n      if (!doc.exists) {\n        res.status(404).json(createErrorResponse(\n          \"Document not found\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      const document = { id: doc.id, ...doc.data() } as Document;\n      \n      // Verify organization access\n      if (document.organizationId !== req.user!.organizationId &&\n          !req.user!.roles.includes(\"super_admin\")) {\n        res.status(403).json(createErrorResponse(\n          \"Access denied to document\",\n          { documentId: id },\n          req.requestId\n        ));\n        return;\n      }\n      \n      await docRef.update({\n        status,\n        updatedAt: new Date()\n      });\n      \n      res.json(createSuccessResponse(\n        { id, status },\n        \"Document status updated successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      console.error(\"Error updating document status:\", error);\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"Internal server error while updating document status\",\n          null,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n// Error handling middleware\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  console.error(\"Unhandled error in documents API:\", error);\n  \n  res.status(500).json(createErrorResponse(\n    \"Internal server error\",\n    process.env.NODE_ENV === \"development\" ? error.stack : null,\n    req.requestId\n  ));\n});\n\n// Export Cloud Function\nexport const documentsApi = onRequest({\n  region: \"us-central1\",\n  memory: \"1GiB\",\n  timeoutSeconds: 300,\n  maxInstances: 100,\n  cors: config.corsOrigin\n}, app);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/health.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'responseTime' is assigned a value but never used.","line":151,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":151,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'responseTime' is assigned a value but never used.","line":151,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":151,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Health Check API\n * LicitaReview Cloud Functions\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport express from \"express\";\nimport { firestore, storage, auth } from \"../config/firebase\";\nimport { SystemHealth, HealthCheckResult } from \"../types\";\nimport { createSuccessResponse, createErrorResponse } from \"../utils\";\nimport { config } from \"../config\";\n\nconst app = express();\n\napp.use(express.json());\n\n/**\n * GET /health\n * Basic health check endpoint\n */\napp.get(\"/\", async (req, res) => {\n  try {\n    const systemHealth = await checkSystemHealth();\n    \n    const statusCode = systemHealth.overall === \"healthy\" ? 200 : \n                      systemHealth.overall === \"degraded\" ? 200 : 503;\n    \n    res.status(statusCode).json(createSuccessResponse(systemHealth));\n  } catch (error) {\n    console.error(\"Health check failed:\", error);\n    res.status(503).json(createErrorResponse(\n      \"Health check failed\", \n      { error: error.message }\n    ));\n  }\n});\n\n/**\n * GET /health/detailed\n * Detailed health check with all services\n */\napp.get(\"/detailed\", async (req, res) => {\n  try {\n    const services = await Promise.allSettled([\n      checkFirestore(),\n      checkStorage(),\n      checkAuth(),\n      checkMemory(),\n      checkEnvironment()\n    ]);\n    \n    const serviceResults: HealthCheckResult[] = services.map((result, index) => {\n      const serviceNames = [\"firestore\", \"storage\", \"auth\", \"memory\", \"environment\"];\n      \n      if (result.status === \"fulfilled\") {\n        return result.value;\n      } else {\n        return {\n          service: serviceNames[index],\n          status: \"unhealthy\" as const,\n          timestamp: new Date(),\n          details: { error: result.reason?.message || \"Unknown error\" }\n        };\n      }\n    });\n    \n    const overall = determineOverallHealth(serviceResults);\n    \n    const systemHealth: SystemHealth = {\n      overall,\n      services: serviceResults,\n      timestamp: new Date(),\n      version: process.env.npm_package_version || \"1.0.0\",\n      uptime: process.uptime()\n    };\n    \n    const statusCode = overall === \"healthy\" ? 200 : \n                      overall === \"degraded\" ? 200 : 503;\n    \n    res.status(statusCode).json(createSuccessResponse(systemHealth));\n  } catch (error) {\n    console.error(\"Detailed health check failed:\", error);\n    res.status(503).json(createErrorResponse(\n      \"Detailed health check failed\", \n      { error: error.message }\n    ));\n  }\n});\n\n/**\n * GET /health/liveness\n * Kubernetes liveness probe endpoint\n */\napp.get(\"/liveness\", (req, res) => {\n  res.status(200).json({ \n    status: \"alive\", \n    timestamp: new Date().toISOString() \n  });\n});\n\n/**\n * GET /health/readiness  \n * Kubernetes readiness probe endpoint\n */\napp.get(\"/readiness\", async (req, res) => {\n  try {\n    // Check critical services for readiness\n    await Promise.all([\n      checkFirestore(),\n      checkAuth()\n    ]);\n    \n    res.status(200).json({ \n      status: \"ready\", \n      timestamp: new Date().toISOString() \n    });\n  } catch (error) {\n    res.status(503).json({ \n      status: \"not ready\", \n      error: error.message,\n      timestamp: new Date().toISOString() \n    });\n  }\n});\n\n// Individual service health checks\nasync function checkSystemHealth(): Promise<SystemHealth> {\n  const startTime = Date.now();\n  \n  const services = await Promise.allSettled([\n    checkFirestore(),\n    checkStorage(),\n    checkAuth()\n  ]);\n  \n  const serviceResults: HealthCheckResult[] = services.map((result, index) => {\n    const serviceNames = [\"firestore\", \"storage\", \"auth\"];\n    \n    if (result.status === \"fulfilled\") {\n      return result.value;\n    } else {\n      return {\n        service: serviceNames[index],\n        status: \"unhealthy\" as const,\n        timestamp: new Date(),\n        details: { error: result.reason?.message || \"Unknown error\" }\n      };\n    }\n  });\n  \n  const responseTime = Date.now() - startTime;\n  \n  return {\n    overall: determineOverallHealth(serviceResults),\n    services: serviceResults,\n    timestamp: new Date(),\n    version: process.env.npm_package_version || \"1.0.0\",\n    uptime: process.uptime()\n  };\n}\n\nasync function checkFirestore(): Promise<HealthCheckResult> {\n  const startTime = Date.now();\n  \n  try {\n    // Simple read operation to test connectivity\n    await firestore.collection(\"health\").limit(1).get();\n    \n    return {\n      service: \"firestore\",\n      status: \"healthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime\n    };\n  } catch (error) {\n    return {\n      service: \"firestore\",\n      status: \"unhealthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime,\n      details: { error: error.message }\n    };\n  }\n}\n\nasync function checkStorage(): Promise<HealthCheckResult> {\n  const startTime = Date.now();\n  \n  try {\n    // Test bucket accessibility\n    const bucket = storage.bucket();\n    await bucket.getMetadata();\n    \n    return {\n      service: \"storage\",\n      status: \"healthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime\n    };\n  } catch (error) {\n    return {\n      service: \"storage\",\n      status: \"unhealthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime,\n      details: { error: error.message }\n    };\n  }\n}\n\nasync function checkAuth(): Promise<HealthCheckResult> {\n  const startTime = Date.now();\n  \n  try {\n    // Test auth service by getting service config\n    await auth.getUsers([]);\n    \n    return {\n      service: \"auth\",\n      status: \"healthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime\n    };\n  } catch (error) {\n    return {\n      service: \"auth\",\n      status: \"unhealthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime,\n      details: { error: error.message }\n    };\n  }\n}\n\nasync function checkMemory(): Promise<HealthCheckResult> {\n  const startTime = Date.now();\n  \n  try {\n    const used = process.memoryUsage();\n    const totalMB = used.heapTotal / 1024 / 1024;\n    const usedMB = used.heapUsed / 1024 / 1024;\n    const usagePercent = (usedMB / totalMB) * 100;\n    \n    const status = usagePercent > 90 ? \"unhealthy\" : \n                  usagePercent > 75 ? \"degraded\" : \"healthy\";\n    \n    return {\n      service: \"memory\",\n      status,\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime,\n      details: {\n        heapUsed: `${Math.round(usedMB)}MB`,\n        heapTotal: `${Math.round(totalMB)}MB`,\n        usagePercent: `${Math.round(usagePercent)}%`,\n        external: `${Math.round(used.external / 1024 / 1024)}MB`,\n        rss: `${Math.round(used.rss / 1024 / 1024)}MB`\n      }\n    };\n  } catch (error) {\n    return {\n      service: \"memory\",\n      status: \"unhealthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime,\n      details: { error: error.message }\n    };\n  }\n}\n\nasync function checkEnvironment(): Promise<HealthCheckResult> {\n  const startTime = Date.now();\n  \n  try {\n    const requiredEnvVars = [\n      \"GCLOUD_PROJECT\",\n      \"FIREBASE_PROJECT_ID\"\n    ];\n    \n    const missingVars = requiredEnvVars.filter(varName => !process.env[varName]);\n    \n    const status = missingVars.length === 0 ? \"healthy\" : \"unhealthy\";\n    \n    return {\n      service: \"environment\",\n      status,\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime,\n      details: {\n        nodeVersion: process.version,\n        platform: process.platform,\n        environment: process.env.NODE_ENV || \"development\",\n        missingVariables: missingVars.length > 0 ? missingVars : undefined,\n        functionRegion: process.env.FUNCTION_REGION,\n        projectId: config.projectId\n      }\n    };\n  } catch (error) {\n    return {\n      service: \"environment\",\n      status: \"unhealthy\",\n      timestamp: new Date(),\n      responseTime: Date.now() - startTime,\n      details: { error: error.message }\n    };\n  }\n}\n\nfunction determineOverallHealth(services: HealthCheckResult[]): \"healthy\" | \"degraded\" | \"unhealthy\" {\n  const unhealthyServices = services.filter(s => s.status === \"unhealthy\");\n  const degradedServices = services.filter(s => s.status === \"degraded\");\n  \n  if (unhealthyServices.length > 0) {\n    // If critical services are unhealthy, mark as unhealthy\n    const criticalServices = [\"firestore\", \"auth\"];\n    const criticalUnhealthy = unhealthyServices.some(s => \n      criticalServices.includes(s.service)\n    );\n    \n    if (criticalUnhealthy) {\n      return \"unhealthy\";\n    } else {\n      return \"degraded\";\n    }\n  }\n  \n  if (degradedServices.length > 0) {\n    return \"degraded\";\n  }\n  \n  return \"healthy\";\n}\n\n// Export Cloud Function\nexport const healthCheck = onRequest({\n  region: \"us-central1\",\n  memory: \"256MiB\",\n  timeoutSeconds: 60,\n  maxInstances: 10,\n  cors: true\n}, app);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/notifications.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3012,3015],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3012,3015],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3086,3089],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3086,3089],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4130,4133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4130,4133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":239,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6531,6534],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6531,6534],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":278,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":278,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7572,7575],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7572,7575],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":363,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9751,9754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9751,9754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":366,"column":18,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":366,"endColumn":35},{"ruleId":"no-unused-vars","severity":2,"message":"'getUserNotificationPreferences' is defined but never used.","line":378,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":378,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getUserNotificationPreferences' is defined but never used.","line":378,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":378,"endColumn":46}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Notifications Processor\n * LicitaReview Cloud Functions\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport { onDocumentCreated } from \"firebase-functions/v2/firestore\";\nimport express from \"express\";\nimport { logger } from \"firebase-functions\";\nimport { collections, messaging } from \"../config/firebase\";\nimport { NotificationPayload } from \"../types\";\nimport { authenticateService } from \"../middleware/auth\";\nimport { createSuccessResponse, createErrorResponse, generateRequestId } from \"../utils\";\n\nconst app = express();\napp.use(express.json());\n\n// Request ID middleware\napp.use((req, res, next) => {\n  req.requestId = generateRequestId();\n  res.setHeader(\"X-Request-ID\", req.requestId);\n  next();\n});\n\n/**\n * POST /notifications/send\n * Send notification (service-to-service)\n */\napp.post(\"/send\",\n  authenticateService,\n  async (req, res) => {\n    try {\n      const notification = req.body as NotificationPayload;\n      \n      const result = await processNotification(notification);\n      \n      res.json(createSuccessResponse(\n        result,\n        \"Notification processed successfully\",\n        req.requestId\n      ));\n    } catch (error) {\n      logger.error(\"Error sending notification:\", error);\n      res.status(500).json(createErrorResponse(\n        \"Failed to send notification\",\n        { error: error.message },\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * Firestore trigger for new notifications\n */\nexport const onNotificationCreated = onDocumentCreated({\n  document: \"notifications/{notificationId}\",\n  region: \"us-central1\",\n  memory: \"512MiB\",\n  timeoutSeconds: 300,\n  maxInstances: 20\n}, async (event) => {\n  const notificationId = event.params.notificationId;\n  const notificationData = event.data?.data();\n  \n  if (!notificationData || notificationData.processed) {\n    return;\n  }\n  \n  logger.info(`Processing notification: ${notificationId}`, {\n    notificationId,\n    userId: notificationData.userId,\n    organizationId: notificationData.organizationId,\n    type: notificationData.type,\n    channels: notificationData.channels\n  });\n  \n  try {\n    await processNotification(notificationData as NotificationPayload);\n    \n    // Mark as processed\n    await collections.firestore\n      .collection(\"notifications\")\n      .doc(notificationId)\n      .update({\n        processed: true,\n        processedAt: new Date()\n      });\n      \n    logger.info(`Notification processed successfully: ${notificationId}`);\n  } catch (error) {\n    logger.error(`Error processing notification ${notificationId}:`, error);\n    \n    // Mark as failed\n    await collections.firestore\n      .collection(\"notifications\")\n      .doc(notificationId)\n      .update({\n        processed: false,\n        processingError: error.message,\n        failedAt: new Date()\n      });\n  }\n});\n\n/**\n * Process notification through various channels\n */\nasync function processNotification(notification: NotificationPayload): Promise<{\n  channels: Record<string, { success: boolean; details?: any }>\n}> {\n  const results: Record<string, { success: boolean; details?: any }> = {};\n  \n  // Process each channel\n  for (const channel of notification.channels) {\n    try {\n      switch (channel) {\n        case \"push\":\n          results[channel] = await sendPushNotification(notification);\n          break;\n        case \"email\":\n          results[channel] = await sendEmailNotification(notification);\n          break;\n        case \"webhook\":\n          results[channel] = await sendWebhookNotification(notification);\n          break;\n        default:\n          results[channel] = { \n            success: false, \n            details: { error: `Unsupported channel: ${channel}` }\n          };\n      }\n    } catch (error) {\n      logger.error(`Error sending notification via ${channel}:`, error);\n      results[channel] = { \n        success: false, \n        details: { error: error.message }\n      };\n    }\n  }\n  \n  return { channels: results };\n}\n\n/**\n * Send push notification via Firebase Messaging\n */\nasync function sendPushNotification(notification: NotificationPayload): Promise<{\n  success: boolean;\n  details?: any;\n}> {\n  try {\n    // Get user's FCM tokens\n    const userTokensSnapshot = await collections.firestore\n      .collection(\"userTokens\")\n      .doc(notification.userId)\n      .get();\n    \n    if (!userTokensSnapshot.exists) {\n      return {\n        success: false,\n        details: { error: \"No FCM tokens found for user\" }\n      };\n    }\n    \n    const tokens = userTokensSnapshot.data()?.fcmTokens || [];\n    \n    if (tokens.length === 0) {\n      return {\n        success: false,\n        details: { error: \"No active FCM tokens\" }\n      };\n    }\n    \n    // Create FCM message\n    const message = {\n      notification: {\n        title: notification.title,\n        body: notification.message\n      },\n      data: {\n        type: notification.type,\n        organizationId: notification.organizationId || \"\",\n        ...(notification.data ? JSON.stringify(notification.data) : {})\n      },\n      tokens: tokens\n    };\n    \n    // Send multicast message\n    const response = await messaging.sendMulticast(message);\n    \n    logger.info(`Push notification sent`, {\n      userId: notification.userId,\n      successCount: response.successCount,\n      failureCount: response.failureCount\n    });\n    \n    // Clean up invalid tokens\n    if (response.failureCount > 0) {\n      const invalidTokens: string[] = [];\n      \n      response.responses.forEach((resp, idx) => {\n        if (!resp.success && \n            (resp.error?.code === \"messaging/invalid-registration-token\" ||\n             resp.error?.code === \"messaging/registration-token-not-registered\")) {\n          invalidTokens.push(tokens[idx]);\n        }\n      });\n      \n      if (invalidTokens.length > 0) {\n        const validTokens = tokens.filter((token: string) => !invalidTokens.includes(token));\n        await userTokensSnapshot.ref.update({ fcmTokens: validTokens });\n      }\n    }\n    \n    return {\n      success: response.successCount > 0,\n      details: {\n        successCount: response.successCount,\n        failureCount: response.failureCount,\n        invalidTokensRemoved: response.failureCount\n      }\n    };\n    \n  } catch (error) {\n    logger.error(\"Error sending push notification:\", error);\n    return {\n      success: false,\n      details: { error: error.message }\n    };\n  }\n}\n\n/**\n * Send email notification\n */\nasync function sendEmailNotification(notification: NotificationPayload): Promise<{\n  success: boolean;\n  details?: any;\n}> {\n  try {\n    // In a real implementation, you would integrate with an email service\n    // like SendGrid, AWS SES, or similar\n    \n    // For now, just store the email request\n    await collections.firestore.collection(\"emailQueue\").add({\n      userId: notification.userId,\n      organizationId: notification.organizationId,\n      subject: notification.title,\n      body: notification.message,\n      type: notification.type,\n      data: notification.data,\n      createdAt: new Date(),\n      processed: false\n    });\n    \n    logger.info(`Email notification queued for user: ${notification.userId}`);\n    \n    return {\n      success: true,\n      details: { message: \"Email queued for delivery\" }\n    };\n    \n  } catch (error) {\n    logger.error(\"Error queuing email notification:\", error);\n    return {\n      success: false,\n      details: { error: error.message }\n    };\n  }\n}\n\n/**\n * Send webhook notification\n */\nasync function sendWebhookNotification(notification: NotificationPayload): Promise<{\n  success: boolean;\n  details?: any;\n}> {\n  try {\n    // Get organization webhook configuration\n    const orgConfigSnapshot = await collections.configs\n      .where(\"organizationId\", \"==\", notification.organizationId)\n      .where(\"isActive\", \"==\", true)\n      .limit(1)\n      .get();\n    \n    if (orgConfigSnapshot.empty) {\n      return {\n        success: false,\n        details: { error: \"No webhook configuration found\" }\n      };\n    }\n    \n    const config = orgConfigSnapshot.docs[0].data();\n    const webhookUrl = config.settings?.webhookUrl;\n    \n    if (!webhookUrl) {\n      return {\n        success: false,\n        details: { error: \"No webhook URL configured\" }\n      };\n    }\n    \n    // Prepare webhook payload\n    const webhookPayload = {\n      id: generateRequestId(),\n      timestamp: new Date().toISOString(),\n      type: \"notification\",\n      data: {\n        userId: notification.userId,\n        organizationId: notification.organizationId,\n        notification: {\n          title: notification.title,\n          message: notification.message,\n          type: notification.type,\n          data: notification.data\n        }\n      }\n    };\n    \n    // Send webhook (in production, consider using a queue for retry logic)\n    const response = await fetch(webhookUrl, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"User-Agent\": \"LicitaReview-Webhook/1.0\",\n        \"X-Webhook-Signature\": generateWebhookSignature(webhookPayload, config.settings?.webhookSecret)\n      },\n      body: JSON.stringify(webhookPayload)\n    });\n    \n    const success = response.ok;\n    \n    logger.info(`Webhook notification sent`, {\n      userId: notification.userId,\n      webhookUrl,\n      status: response.status,\n      success\n    });\n    \n    return {\n      success,\n      details: {\n        status: response.status,\n        statusText: response.statusText,\n        url: webhookUrl\n      }\n    };\n    \n  } catch (error) {\n    logger.error(\"Error sending webhook notification:\", error);\n    return {\n      success: false,\n      details: { error: error.message }\n    };\n  }\n}\n\n/**\n * Generate webhook signature for security\n */\nfunction generateWebhookSignature(payload: any, secret?: string): string {\n  if (!secret) return \"\";\n  \n  const crypto = require(\"crypto\");\n  const payloadString = JSON.stringify(payload);\n  \n  return crypto\n    .createHmac(\"sha256\", secret)\n    .update(payloadString)\n    .digest(\"hex\");\n}\n\n/**\n * Get user notification preferences\n */\nasync function getUserNotificationPreferences(userId: string): Promise<{\n  push: boolean;\n  email: boolean;\n  webhook: boolean;\n  types: string[];\n}> {\n  try {\n    const userPrefsSnapshot = await collections.firestore\n      .collection(\"userPreferences\")\n      .doc(userId)\n      .get();\n    \n    if (!userPrefsSnapshot.exists) {\n      // Default preferences\n      return {\n        push: true,\n        email: true,\n        webhook: false,\n        types: [\"success\", \"error\", \"warning\", \"info\"]\n      };\n    }\n    \n    const prefs = userPrefsSnapshot.data()?.notifications || {};\n    \n    return {\n      push: prefs.push !== false,\n      email: prefs.email !== false,\n      webhook: prefs.webhook === true,\n      types: prefs.types || [\"success\", \"error\", \"warning\", \"info\"]\n    };\n    \n  } catch (error) {\n    logger.error(`Error getting user notification preferences for ${userId}:`, error);\n    \n    // Return defaults on error\n    return {\n      push: true,\n      email: false,\n      webhook: false,\n      types: [\"error\"] // Only critical notifications on error\n    };\n  }\n}\n\n// Export Cloud Function\nexport const notificationProcessor = onRequest({\n  region: \"us-central1\",\n  memory: \"512MiB\",\n  timeoutSeconds: 300,\n  maxInstances: 20,\n  cors: false // Only service-to-service calls\n}, app);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/organization-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/parameter-engine.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ParameterEngineConfig' is defined but never used.","line":18,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ParameterEngineConfig' is defined but never used.","line":18,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":48},{"ruleId":"no-unused-vars","severity":2,"message":"'ROLES' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ROLES' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":8},{"ruleId":"no-unused-vars","severity":2,"message":"'GenerateParametersQuerySchema' is assigned a value but never used.","line":66,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GenerateParametersQuerySchema' is assigned a value but never used.","line":66,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'forceRefresh' is assigned a value but never used.","line":91,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used.","line":91,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'newConfig' is assigned a value but never used.","line":251,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":251,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'newConfig' is assigned a value but never used.","line":251,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":251,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":303,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":303,"endColumn":95},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'next' is defined but never used.","line":303,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":303,"endColumn":73}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Parameter Engine API - Gerenciamento de Par√¢metros de An√°lise\n * \n * API para gerenciar e otimizar par√¢metros de an√°lise usando o ParameterEngine.\n * Permite configura√ß√£o adaptativa e otimiza√ß√£o baseada em hist√≥rico.\n * \n * üöÄ CORE DIFFERENTIATOR: Engine adaptativo de par√¢metros\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\nimport rateLimit from \"express-rate-limit\";\nimport { z } from \"zod\";\n\nimport { firestore } from \"../config/firebase\";\nimport { ParameterEngine, ParameterEngineConfig } from \"../services/ParameterEngine\";\nimport {\n  authenticateUser,\n  requireOrganization,\n  requirePermissions,\n  PERMISSIONS,\n  ROLES\n} from \"../middleware/auth\";\nimport {\n  ValidationError,\n  createSuccessResponse,\n  createErrorResponse,\n  generateRequestId,\n  validateData\n} from \"../utils\";\nimport { config } from \"../config\";\nimport { logger } from \"firebase-functions\";\n\nconst app = express();\n\n// Middleware\napp.use(helmet());\napp.use(cors({ origin: config.corsOrigin }));\napp.use(express.json({ limit: config.maxRequestSize }));\napp.use(generateRequestId);\napp.use(authenticateUser);\napp.use(requireOrganization);\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: config.rateLimitWindowMs,\n  max: config.rateLimitMax,\n  message: { error: \"Too many requests, please try again later\" },\n  standardHeaders: true,\n  legacyHeaders: false\n});\napp.use(limiter);\n\n// Initialize ParameterEngine\nconst parameterEngine = new ParameterEngine(firestore, {\n  enableAdaptiveWeights: true,\n  enableLearningMode: true,\n  adaptationThreshold: 10,\n  maxWeightAdjustment: 15.0,\n  cacheTimeout: 30 * 60 * 1000 // 30 minutos\n});\n\n// Schemas de valida√ß√£o\nconst GenerateParametersQuerySchema = z.object({\n  forceRefresh: z.string().optional().transform(val => val === 'true')\n});\n\nconst OptimizeParametersRequestSchema = z.object({\n  analysisCount: z.number().int().min(1).max(100).optional().default(50),\n  includeRecommendations: z.boolean().optional().default(true)\n});\n\nconst UpdateEngineConfigRequestSchema = z.object({\n  enableAdaptiveWeights: z.boolean().optional(),\n  enableLearningMode: z.boolean().optional(),\n  adaptationThreshold: z.number().int().min(1).max(100).optional(),\n  maxWeightAdjustment: z.number().min(0).max(50).optional(),\n  cacheTimeout: z.number().int().min(60000).max(3600000).optional() // 1min - 1h\n});\n\n/**\n * GET /parameters\n * Gera par√¢metros de an√°lise otimizados para a organiza√ß√£o\n */\napp.get(\"/parameters\",\n  requirePermissions([PERMISSIONS.CONFIG_READ]),\n  async (req, res) => {\n    try {\n      const forceRefresh = req.query.forceRefresh === 'true';\n      const organizationId = req.user!.organizationId;\n      \n      const parameters = await parameterEngine.generateParameters(\n        organizationId\n      );\n      \n      res.status(200).json(createSuccessResponse(parameters, req.requestId));\n    } catch (error) {\n      logger.error(\"Error generating parameters\", {\n        organizationId: req.user?.organizationId,\n        error: error instanceof Error ? error.message : error,\n        requestId: req.requestId\n      });\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(\"VALIDATION_ERROR\", error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"INTERNAL_ERROR\",\n          \"Internal server error while generating parameters\",\n          undefined,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * POST /optimize\n * Analisa hist√≥rico e sugere otimiza√ß√µes de par√¢metros\n */\napp.post(\"/optimize\",\n  requirePermissions([PERMISSIONS.CONFIG_WRITE]),\n  async (req, res) => {\n    try {\n      const bodyValidation = validateData(OptimizeParametersRequestSchema, req.body);\n      if (!bodyValidation.success) {\n        throw new ValidationError(bodyValidation.error!, bodyValidation.details);\n      }\n      const requestData = bodyValidation.data!;\n      const organizationId = req.user!.organizationId;\n      \n      // Gerar par√¢metros atuais\n      const currentParameters = await parameterEngine.generateParameters(organizationId);\n      \n      // Simular otimiza√ß√£o (o ParameterEngine j√° faz isso internamente)\n      // Aqui podemos expor mais detalhes sobre as otimiza√ß√µes\n      const optimizationResult = {\n        currentParameters,\n        hasOptimizations: !!currentParameters.adaptiveAdjustments,\n        optimizationDetails: currentParameters.adaptiveAdjustments ? {\n          confidence: currentParameters.adaptiveAdjustments.confidenceScore,\n          basedOnAnalyses: currentParameters.adaptiveAdjustments.basedOnAnalyses,\n          weightAdjustments: currentParameters.adaptiveAdjustments.weightAdjustments,\n          lastUpdated: currentParameters.adaptiveAdjustments.lastUpdated\n        } : null,\n        recommendations: requestData.includeRecommendations ? [\n          \"Continue usando o sistema para melhorar as otimiza√ß√µes adaptativas\",\n          \"Considere revisar regras customizadas baseadas no hist√≥rico de an√°lises\",\n          \"Monitore a performance das categorias com menor pontua√ß√£o\"\n        ] : []\n      };\n      \n      res.status(200).json(createSuccessResponse(optimizationResult, req.requestId));\n    } catch (error) {\n      logger.error(\"Error optimizing parameters\", {\n        organizationId: req.user?.organizationId,\n        error: error instanceof Error ? error.message : error,\n        requestId: req.requestId\n      });\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(\"VALIDATION_ERROR\", error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"INTERNAL_ERROR\",\n          \"Internal server error while optimizing parameters\",\n          undefined,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * POST /refresh-cache\n * Limpa cache de par√¢metros para for√ßar regenera√ß√£o\n */\napp.post(\"/refresh-cache\",\n  requirePermissions([PERMISSIONS.CONFIG_WRITE]),\n  async (req, res) => {\n    try {\n      const organizationId = req.user!.organizationId;\n      \n      parameterEngine.clearCache(organizationId);\n      \n      res.status(200).json(createSuccessResponse({ cleared: true }, req.requestId));\n    } catch (error) {\n      logger.error(\"Error clearing parameter cache\", {\n        organizationId: req.user?.organizationId,\n        error: error instanceof Error ? error.message : error,\n        requestId: req.requestId\n      });\n      \n      res.status(500).json(createErrorResponse(\n        \"INTERNAL_ERROR\",\n        \"Internal server error while clearing cache\",\n        undefined,\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * GET /engine/stats\n * Obt√©m estat√≠sticas do ParameterEngine\n */\napp.get(\"/engine/stats\",\n  requirePermissions([PERMISSIONS.CONFIG_READ]),\n  async (req, res) => {\n    try {\n      const stats = parameterEngine.getEngineStats();\n      \n      res.status(200).json(createSuccessResponse(stats, req.requestId));\n    } catch (error) {\n      logger.error(\"Error getting engine stats\", {\n        error: error instanceof Error ? error.message : error,\n        requestId: req.requestId\n      });\n      \n      res.status(500).json(createErrorResponse(\n        \"INTERNAL_ERROR\",\n        \"Internal server error while getting engine stats\",\n        undefined,\n        req.requestId\n      ));\n    }\n  }\n);\n\n/**\n * PUT /engine/config\n * Atualiza configura√ß√£o do ParameterEngine (apenas super admins)\n */\napp.put(\"/engine/config\",\n  requirePermissions([PERMISSIONS.CONFIG_WRITE]), // Using CONFIG_WRITE since SUPER_ADMIN doesn't exist\n  async (req, res) => {\n    try {\n      const configValidation = validateData(UpdateEngineConfigRequestSchema, req.body);\n      if (!configValidation.success) {\n        throw new ValidationError(configValidation.error!, configValidation.details);\n      }\n      const configUpdate = configValidation.data!;\n      \n      // Criar novo engine com configura√ß√£o atualizada\n      const currentStats = parameterEngine.getEngineStats();\n      const newConfig = { ...currentStats.config, ...configUpdate };\n      \n      // Limpar cache para aplicar nova configura√ß√£o\n      parameterEngine.clearCache();\n      \n      res.status(200).json(createSuccessResponse({ updated: true }, req.requestId));\n    } catch (error) {\n      logger.error(\"Error updating engine config\", {\n        error: error instanceof Error ? error.message : error,\n        requestId: req.requestId\n      });\n      \n      if (error instanceof ValidationError) {\n        res.status(400).json(createErrorResponse(\"VALIDATION_ERROR\", error.message, error.details, req.requestId));\n      } else {\n        res.status(500).json(createErrorResponse(\n          \"INTERNAL_ERROR\",\n          \"Internal server error while updating engine config\",\n          undefined,\n          req.requestId\n        ));\n      }\n    }\n  }\n);\n\n/**\n * GET /health\n * Health check do ParameterEngine\n */\napp.get(\"/health\", async (req, res) => {\n  try {\n    const stats = parameterEngine.getEngineStats();\n    \n    res.json({\n      status: \"healthy\",\n      timestamp: new Date().toISOString(),\n      engine: {\n        version: stats.version,\n        cacheSize: stats.cacheSize\n      }\n    });\n  } catch (error) {\n    res.status(503).json({\n      status: \"unhealthy\",\n      timestamp: new Date().toISOString(),\n      error: error instanceof Error ? error.message : \"Unknown error\"\n    });\n  }\n});\n\n// Error handling middleware\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  logger.error(\"Unhandled error in parameter-engine API\", {\n    error: error.message,\n    stack: error.stack,\n    requestId: req.requestId\n  });\n  \n  res.status(500).json(createErrorResponse(\n    \"INTERNAL_ERROR\",\n    \"Internal server error\",\n    undefined,\n    req.requestId\n  ));\n});\n\nexport const parameterEngineApi = onRequest({\n  region: \"us-central1\",\n  memory: \"512MiB\",\n  timeoutSeconds: 60,\n  maxInstances: 10\n}, app);","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/process-analysis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/api/routes/comissoes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/config/firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/config/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[858,861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[858,861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Database Module Index\n * \n * Exports all database-related functionality including:\n * - Schemas and types\n * - Repository patterns\n * - Migration utilities\n */\n\n// Schemas\nexport * from './schemas/organization.schema';\nexport * from './schemas/document.schema';\n\n// Repositories\nexport * from './repositories/BaseRepository';\nexport * from './repositories/OrganizationRepository';\nexport * from './repositories/DocumentRepository';\n\n// Migrations\nexport * from './migrations/migration-runner';\nexport * from './migrations/001-initial-data';\n\n// Database initialization utility\nimport { Firestore, getFirestore } from 'firebase-admin/firestore';\nimport { getApps } from 'firebase-admin/app';\nimport * as admin from 'firebase-admin';\n\nlet db: Firestore;\n\n/**\n * Initialize Firestore connection\n */\nexport function initializeDatabase(serviceAccountKey?: any): Firestore {\n  if (db) {\n    return db;\n  }\n\n  try {\n    // Check if Firebase app is already initialized\n    if (getApps().length === 0) {\n      if (serviceAccountKey) {\n        admin.initializeApp({\n          credential: admin.credential.cert(serviceAccountKey),\n          projectId: serviceAccountKey.project_id\n        });\n      } else {\n        // Use default credentials (for Cloud Functions/Cloud Run)\n        admin.initializeApp();\n      }\n    }\n\n    db = getFirestore();\n    \n    console.log('‚úÖ Firestore database initialized successfully');\n    return db;\n    \n  } catch (error) {\n    console.error('‚ùå Failed to initialize Firestore:', error);\n    throw new Error(`Database initialization failed: ${error}`);\n  }\n}\n\n/**\n * Get database instance\n */\nexport function getDatabase(): Firestore {\n  if (!db) {\n    throw new Error('Database not initialized. Call initializeDatabase() first.');\n  }\n  return db;\n}\n\n/**\n * Close database connection\n */\nexport async function closeDatabase(): Promise<void> {\n  if (db) {\n    await db.terminate();\n    console.log('‚úÖ Database connection closed');\n  }\n}\n\n/**\n * Database health check\n */\nexport async function healthCheck(): Promise<boolean> {\n  try {\n    if (!db) {\n      return false;\n    }\n\n    // Try to read from a system collection\n    await db.collection('_health').limit(1).get();\n    return true;\n    \n  } catch (error) {\n    console.error('Database health check failed:', error);\n    return false;\n  }\n}\n\n// Repository factory functions for easy access\nexport async function createOrganizationRepository(database?: Firestore) {\n  const dbInstance = database || getDatabase();\n  return {\n    organizations: new (await import('./repositories/OrganizationRepository')).OrganizationRepository(dbInstance),\n    templates: new (await import('./repositories/OrganizationRepository')).TemplateRepository(dbInstance),\n    rules: new (await import('./repositories/OrganizationRepository')).AnalysisRuleRepository(dbInstance),\n    parameters: new (await import('./repositories/OrganizationRepository')).CustomParametersRepository(dbInstance),\n    users: new (await import('./repositories/OrganizationRepository')).OrganizationUserRepository(dbInstance)\n  };\n}\n\nexport async function createDocumentRepository(database?: Firestore) {\n  const dbInstance = database || getDatabase();\n  return {\n    documents: new (await import('./repositories/DocumentRepository')).DocumentRepository(dbInstance),\n    analyses: new (await import('./repositories/DocumentRepository')).AnalysisRepository(dbInstance),\n    versions: new (await import('./repositories/DocumentRepository')).DocumentVersionRepository(dbInstance),\n    comments: new (await import('./repositories/DocumentRepository')).ReviewCommentRepository(dbInstance)\n  };\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/migrations/001-initial-data.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":170,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5309,5312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5309,5312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":356,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":356,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10927,10930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10927,10930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":530,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":530,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15769,15772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15769,15772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":647,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":647,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18762,18765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18762,18765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Initial Data Migration Script\n * \n * Populates Firestore with:\n * - Default analysis rules by document type\n * - Official GOV.BR templates\n * - Example organizations\n * - Default analysis configurations\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { \n  OrganizationRepository, \n  TemplateRepository, \n  AnalysisRuleRepository, \n  CustomParametersRepository \n} from '../repositories/OrganizationRepository';\nimport { \n  OrganizationProfile, \n  DocumentTemplate, \n  AnalysisRule, \n  CustomParameters \n} from '../schemas/organization.schema';\n\nexport class InitialDataMigration {\n  private db: Firestore;\n  private orgRepo: OrganizationRepository;\n  private templateRepo: TemplateRepository;\n  private ruleRepo: AnalysisRuleRepository;\n  private paramsRepo: CustomParametersRepository;\n\n  constructor(db: Firestore) {\n    this.db = db;\n    this.orgRepo = new OrganizationRepository(db);\n    this.templateRepo = new TemplateRepository(db);\n    this.ruleRepo = new AnalysisRuleRepository(db);\n    this.paramsRepo = new CustomParametersRepository(db);\n  }\n\n  /**\n   * Run the complete migration\n   */\n  async run(): Promise<void> {\n    console.log('üöÄ Starting initial data migration...');\n    \n    try {\n      // 1. Create example organizations\n      const organizations = await this.createExampleOrganizations();\n      console.log(`‚úÖ Created ${organizations.length} example organizations`);\n      \n      // 2. Create default analysis rules for each organization\n      let totalRules = 0;\n      for (const org of organizations) {\n        const rules = await this.createDefaultAnalysisRules(org.id);\n        totalRules += rules.length;\n      }\n      console.log(`‚úÖ Created ${totalRules} default analysis rules`);\n      \n      // 3. Create GOV.BR official templates for each organization\n      let totalTemplates = 0;\n      for (const org of organizations) {\n        const templates = await this.createGovBRTemplates(org.id);\n        totalTemplates += templates.length;\n      }\n      console.log(`‚úÖ Created ${totalTemplates} GOV.BR templates`);\n      \n      // 4. Create default analysis configurations (üöÄ CORE DIFFERENTIATOR)\n      let totalConfigs = 0;\n      for (const org of organizations) {\n        const configs = await this.createDefaultConfigurations(org.id);\n        totalConfigs += configs.length;\n      }\n      console.log(`‚úÖ Created ${totalConfigs} default configurations`);\n      \n      console.log('üéâ Initial data migration completed successfully!');\n      \n    } catch (error) {\n      console.error('‚ùå Migration failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create example organizations\n   */\n  private async createExampleOrganizations(): Promise<OrganizationProfile[]> {\n    const organizations = [\n      {\n        name: 'Tribunal de Contas da Uni√£o',\n        displayName: 'TCU',\n        cnpj: '00.000.000/0001-91',\n        governmentLevel: 'FEDERAL' as const,\n        organizationType: 'TRIBUNAL_CONTAS' as const,\n        contact: {\n          email: 'contato@tcu.gov.br',\n          phone: '(61) 3316-5000',\n          website: 'https://portal.tcu.gov.br',\n          address: {\n            street: 'SAFS Quadra 4, Lote 1',\n            city: 'Bras√≠lia',\n            state: 'DF',\n            zipCode: '70042-900',\n            country: 'BR'\n          }\n        },\n        settings: {\n          defaultAnalysisPreset: 'RIGOROUS' as const,\n          strictMode: true,\n          requireDualApproval: true\n        },\n        createdBy: 'migration-script'\n      },\n      {\n        name: 'Prefeitura Municipal de S√£o Paulo',\n        displayName: 'PMSP',\n        cnpj: '46.395.000/0001-39',\n        governmentLevel: 'MUNICIPAL' as const,\n        organizationType: 'PREFEITURA' as const,\n        contact: {\n          email: 'licitacoes@capital.sp.gov.br',\n          phone: '(11) 3113-9000',\n          website: 'https://capital.sp.gov.br',\n          address: {\n            street: 'Viaduto do Ch√°, 15',\n            city: 'S√£o Paulo',\n            state: 'SP',\n            zipCode: '01002-020',\n            country: 'BR'\n          }\n        },\n        settings: {\n          defaultAnalysisPreset: 'STANDARD' as const,\n          strictMode: false,\n          requireDualApproval: false\n        },\n        createdBy: 'migration-script'\n      },\n      {\n        name: 'Instituto Nacional de Tecnologia da Informa√ß√£o',\n        displayName: 'ITI',\n        cnpj: '04.384.008/0001-81',\n        governmentLevel: 'FEDERAL' as const,\n        organizationType: 'AUTARQUIA' as const,\n        contact: {\n          email: 'contato@iti.gov.br',\n          phone: '(61) 3411-2500',\n          website: 'https://www.iti.gov.br',\n          address: {\n            street: 'Quadra 515 Sul, Bloco C, Lote 4',\n            city: 'Bras√≠lia',\n            state: 'DF',\n            zipCode: '70770-503',\n            country: 'BR'\n          }\n        },\n        settings: {\n          defaultAnalysisPreset: 'TECHNICAL' as const,\n          enableAIAnalysis: true,\n          strictMode: false\n        },\n        createdBy: 'migration-script'\n      }\n    ];\n\n    const createdOrgs: OrganizationProfile[] = [];\n    \n    for (const orgData of organizations) {\n      const existing = await this.orgRepo.findByCNPJ(orgData.cnpj);\n      if (!existing) {\n        const org = await this.orgRepo.create(orgData as any);\n        createdOrgs.push(org);\n      }\n    }\n\n    return createdOrgs;\n  }\n\n  /**\n   * Create default analysis rules by document type\n   */\n  private async createDefaultAnalysisRules(organizationId: string): Promise<AnalysisRule[]> {\n    const rules = [\n      // ESTRUTURAL Rules\n      {\n        name: 'Verifica√ß√£o de Se√ß√µes Obrigat√≥rias',\n        description: 'Verifica se todas as se√ß√µes obrigat√≥rias est√£o presentes no documento',\n        category: 'ESTRUTURAL',\n        severity: 'CRITICA',\n        pattern: '(objeto|finalidade|prazo|valor|pagamento)',\n        patternType: 'regex',\n        condition: {\n          type: 'CONTAINS',\n          value: 'objeto'\n        },\n        action: {\n          type: 'FLAG',\n          message: 'Se√ß√£o obrigat√≥ria pode estar ausente',\n          suggestion: 'Verifique se todas as se√ß√µes obrigat√≥rias est√£o inclu√≠das'\n        },\n        appliesToDocumentTypes: ['EDITAL', 'TERMO_REFERENCIA'],\n        weight: 8,\n        priority: 5\n      },\n      {\n        name: 'Numera√ß√£o Sequencial',\n        description: 'Verifica se os itens est√£o numerados sequencialmente',\n        category: 'ESTRUTURAL',\n        severity: 'MEDIA',\n        pattern: '\\\\d+\\\\.\\\\d+',\n        patternType: 'regex',\n        condition: {\n          type: 'MATCHES',\n          value: '\\\\d+\\\\.\\\\d+'\n        },\n        action: {\n          type: 'SUGGEST',\n          message: 'Numera√ß√£o pode estar inconsistente',\n          suggestion: 'Verifique a numera√ß√£o sequencial dos itens'\n        },\n        weight: 5,\n        priority: 3\n      },\n\n      // JUR√çDICO Rules\n      {\n        name: 'Refer√™ncia √† Lei 14.133/2021',\n        description: 'Verifica refer√™ncia √† nova Lei de Licita√ß√µes',\n        category: 'JURIDICO',\n        severity: 'CRITICA',\n        pattern: 'lei\\\\s*14\\\\.133',\n        patternType: 'regex',\n        caseSensitive: false,\n        condition: {\n          type: 'CONTAINS',\n          value: 'lei 14.133'\n        },\n        action: {\n          type: 'FLAG',\n          message: 'Refer√™ncia √† Lei 14.133/2021 n√£o encontrada',\n          suggestion: 'Inclua refer√™ncia √† nova Lei de Licita√ß√µes (Lei 14.133/2021)'\n        },\n        appliesToDocumentTypes: ['EDITAL', 'CONTRATO'],\n        weight: 10,\n        priority: 5\n      },\n      {\n        name: 'Modalidade de Licita√ß√£o',\n        description: 'Verifica se a modalidade de licita√ß√£o est√° especificada',\n        category: 'JURIDICO',\n        severity: 'ALTA',\n        pattern: '(preg√£o|concorr√™ncia|tomada de pre√ßos|convite|concurso|leil√£o)',\n        patternType: 'regex',\n        caseSensitive: false,\n        condition: {\n          type: 'CONTAINS',\n          value: 'modalidade'\n        },\n        action: {\n          type: 'FLAG',\n          message: 'Modalidade de licita√ß√£o n√£o identificada claramente',\n          suggestion: 'Especifique claramente a modalidade de licita√ß√£o'\n        },\n        appliesToDocumentTypes: ['EDITAL'],\n        weight: 9,\n        priority: 4\n      },\n\n      // CLAREZA Rules\n      {\n        name: 'Linguagem T√©cnica Excessiva',\n        description: 'Identifica uso excessivo de termos t√©cnicos sem explica√ß√£o',\n        category: 'CLAREZA',\n        severity: 'MEDIA',\n        pattern: '([A-Z]{3,})',\n        patternType: 'regex',\n        condition: {\n          type: 'MATCHES',\n          value: '[A-Z]{3,}'\n        },\n        action: {\n          type: 'SUGGEST',\n          message: 'Poss√≠vel uso de siglas ou termos t√©cnicos',\n          suggestion: 'Considere explicar siglas e termos t√©cnicos para melhor compreens√£o'\n        },\n        weight: 6,\n        priority: 3\n      },\n      {\n        name: 'Frases Muito Longas',\n        description: 'Identifica frases excessivamente longas que podem prejudicar a clareza',\n        category: 'CLAREZA',\n        severity: 'BAIXA',\n        pattern: '[^.!?]{150,}[.!?]',\n        patternType: 'regex',\n        condition: {\n          type: 'MATCHES',\n          value: '[^.!?]{150,}[.!?]'\n        },\n        action: {\n          type: 'SUGGEST',\n          message: 'Frase muito longa detectada',\n          suggestion: 'Considere dividir frases longas para melhorar a legibilidade'\n        },\n        weight: 4,\n        priority: 2\n      },\n\n      // ABNT Rules\n      {\n        name: 'Formata√ß√£o de Datas',\n        description: 'Verifica se as datas seguem o padr√£o ABNT (dd/mm/aaaa)',\n        category: 'ABNT',\n        severity: 'MEDIA',\n        pattern: '\\\\d{2}/\\\\d{2}/\\\\d{4}',\n        patternType: 'regex',\n        condition: {\n          type: 'MATCHES',\n          value: '\\\\d{2}/\\\\d{2}/\\\\d{4}'\n        },\n        action: {\n          type: 'SUGGEST',\n          message: 'Verificar formata√ß√£o de datas',\n          suggestion: 'Use o formato dd/mm/aaaa conforme padr√£o ABNT'\n        },\n        weight: 3,\n        priority: 2\n      },\n      {\n        name: 'Numera√ß√£o de P√°ginas',\n        description: 'Verifica se h√° indica√ß√£o de numera√ß√£o de p√°ginas',\n        category: 'ABNT',\n        severity: 'BAIXA',\n        pattern: '(p√°gina|p√°g|p\\\\.)',\n        patternType: 'regex',\n        caseSensitive: false,\n        condition: {\n          type: 'CONTAINS',\n          value: 'p√°gina'\n        },\n        action: {\n          type: 'SUGGEST',\n          message: 'Verificar numera√ß√£o de p√°ginas',\n          suggestion: 'Certifique-se de que as p√°ginas est√£o numeradas conforme ABNT'\n        },\n        weight: 2,\n        priority: 1\n      }\n    ];\n\n    const createdRules: AnalysisRule[] = [];\n    \n    for (const ruleData of rules) {\n      const rule = await this.ruleRepo.createForOrganization(organizationId, {\n        ...ruleData,\n        createdBy: 'migration-script'\n      } as any);\n      createdRules.push(rule);\n    }\n\n    return createdRules;\n  }\n\n  /**\n   * Create official GOV.BR templates\n   */\n  private async createGovBRTemplates(organizationId: string): Promise<DocumentTemplate[]> {\n    const templates = [\n      {\n        name: 'Edital de Preg√£o Eletr√¥nico - Padr√£o',\n        description: 'Template padr√£o para editais de preg√£o eletr√¥nico conforme legisla√ß√£o vigente',\n        documentType: 'EDITAL',\n        version: '1.0.0',\n        sections: [\n          {\n            id: 'preambulo',\n            name: 'Pre√¢mbulo',\n            description: 'Identifica√ß√£o do √≥rg√£o e modalidade',\n            order: 1,\n            required: true,\n            fields: [\n              {\n                id: 'orgao_nome',\n                name: 'Nome do √ìrg√£o',\n                type: 'TEXT',\n                required: true,\n                description: 'Nome completo do √≥rg√£o licitante'\n              },\n              {\n                id: 'cnpj',\n                name: 'CNPJ',\n                type: 'TEXT',\n                required: true,\n                validation: {\n                  pattern: '\\\\d{2}\\\\.\\\\d{3}\\\\.\\\\d{3}/\\\\d{4}-\\\\d{2}'\n                }\n              },\n              {\n                id: 'modalidade',\n                name: 'Modalidade',\n                type: 'SELECT',\n                required: true,\n                validation: {\n                  options: ['Preg√£o Eletr√¥nico', 'Concorr√™ncia', 'Tomada de Pre√ßos']\n                }\n              }\n            ]\n          },\n          {\n            id: 'objeto',\n            name: 'Objeto da Licita√ß√£o',\n            description: 'Descri√ß√£o detalhada do objeto',\n            order: 2,\n            required: true,\n            fields: [\n              {\n                id: 'descricao_objeto',\n                name: 'Descri√ß√£o do Objeto',\n                type: 'TEXT',\n                required: true,\n                validation: {\n                  minLength: 50\n                }\n              },\n              {\n                id: 'valor_estimado',\n                name: 'Valor Estimado',\n                type: 'NUMBER',\n                required: true,\n                validation: {\n                  min: 0\n                }\n              }\n            ]\n          },\n          {\n            id: 'participacao',\n            name: 'Condi√ß√µes de Participa√ß√£o',\n            description: 'Requisitos para participa√ß√£o',\n            order: 3,\n            required: true,\n            fields: [\n              {\n                id: 'habilitacao',\n                name: 'Documentos de Habilita√ß√£o',\n                type: 'TEXT',\n                required: true\n              }\n            ]\n          }\n        ],\n        isDefault: true,\n        isPublic: true\n      },\n      {\n        name: 'Termo de Refer√™ncia - Servi√ßos',\n        description: 'Template para termo de refer√™ncia de contrata√ß√£o de servi√ßos',\n        documentType: 'TERMO_REFERENCIA',\n        version: '1.0.0',\n        sections: [\n          {\n            id: 'introducao',\n            name: 'Introdu√ß√£o',\n            order: 1,\n            required: true,\n            fields: [\n              {\n                id: 'justificativa',\n                name: 'Justificativa',\n                type: 'TEXT',\n                required: true,\n                description: 'Justificativa para a contrata√ß√£o'\n              }\n            ]\n          },\n          {\n            id: 'especificacoes',\n            name: 'Especifica√ß√µes T√©cnicas',\n            order: 2,\n            required: true,\n            fields: [\n              {\n                id: 'detalhamento',\n                name: 'Detalhamento T√©cnico',\n                type: 'TEXT',\n                required: true\n              }\n            ]\n          }\n        ],\n        isDefault: true,\n        isPublic: true\n      },\n      {\n        name: 'Ata de Sess√£o P√∫blica',\n        description: 'Template para registro de sess√£o p√∫blica de licita√ß√£o',\n        documentType: 'ATA_SESSAO',\n        version: '1.0.0',\n        sections: [\n          {\n            id: 'identificacao',\n            name: 'Identifica√ß√£o',\n            order: 1,\n            required: true,\n            fields: [\n              {\n                id: 'data_sessao',\n                name: 'Data da Sess√£o',\n                type: 'DATE',\n                required: true\n              },\n              {\n                id: 'local',\n                name: 'Local',\n                type: 'TEXT',\n                required: true\n              }\n            ]\n          }\n        ],\n        isDefault: true\n      }\n    ];\n\n    const createdTemplates: DocumentTemplate[] = [];\n    \n    for (const templateData of templates) {\n      const template = await this.templateRepo.createForOrganization(organizationId, {\n        ...templateData,\n        createdBy: 'migration-script'\n      } as any);\n      createdTemplates.push(template);\n    }\n\n    return createdTemplates;\n  }\n\n  /**\n   * Create default analysis configurations (üöÄ CORE DIFFERENTIATOR)\n   */\n  private async createDefaultConfigurations(organizationId: string): Promise<CustomParameters[]> {\n    const configs = [\n      {\n        name: 'Rigoroso (Foco Jur√≠dico)',\n        description: 'Configura√ß√£o com √™nfase em conformidade jur√≠dica e regulamenta√ß√£o',\n        presetType: 'RIGOROUS',\n        weights: {\n          structural: 15.0,\n          legal: 60.0,\n          clarity: 20.0,\n          abnt: 5.0\n        },\n        thresholds: {\n          excellent: 90,\n          good: 80,\n          acceptable: 70,\n          poor: 50,\n          critical: 30\n        },\n        advanced: {\n          strictCompliance: true,\n          enableContextualAnalysis: true,\n          analysisTimeout: 600\n        },\n        isDefault: false,\n        status: 'ACTIVE'\n      },\n      {\n        name: 'Padr√£o (Balanceado)',\n        description: 'Configura√ß√£o balanceada para an√°lise geral de documentos',\n        presetType: 'STANDARD',\n        weights: {\n          structural: 25.0,\n          legal: 25.0,\n          clarity: 25.0,\n          abnt: 25.0\n        },\n        thresholds: {\n          excellent: 90,\n          good: 75,\n          acceptable: 60,\n          poor: 40,\n          critical: 25\n        },\n        advanced: {\n          enableContextualAnalysis: true,\n          analysisTimeout: 300\n        },\n        isDefault: true,\n        status: 'ACTIVE'\n      },\n      {\n        name: 'T√©cnico (Foco Estrutural)',\n        description: 'Configura√ß√£o com √™nfase na estrutura e organiza√ß√£o do documento',\n        presetType: 'TECHNICAL',\n        weights: {\n          structural: 35.0,\n          legal: 25.0,\n          clarity: 15.0,\n          abnt: 25.0\n        },\n        thresholds: {\n          excellent: 85,\n          good: 70,\n          acceptable: 55,\n          poor: 35,\n          critical: 20\n        },\n        advanced: {\n          enableSemanticAnalysis: true,\n          parallelProcessing: true\n        },\n        isDefault: false,\n        status: 'ACTIVE'\n      },\n      {\n        name: 'R√°pido (An√°lise Essencial)',\n        description: 'Configura√ß√£o otimizada para an√°lise r√°pida focada nos pontos essenciais',\n        presetType: 'FAST',\n        weights: {\n          structural: 30.0,\n          legal: 40.0,\n          clarity: 20.0,\n          abnt: 10.0\n        },\n        thresholds: {\n          excellent: 85,\n          good: 70,\n          acceptable: 55,\n          poor: 40,\n          critical: 25\n        },\n        advanced: {\n          analysisTimeout: 120,\n          batchSize: 20\n        },\n        isDefault: false,\n        status: 'ACTIVE'\n      }\n    ];\n\n    const createdConfigs: CustomParameters[] = [];\n    \n    for (const configData of configs) {\n      const config = await this.paramsRepo.createForOrganization(organizationId, {\n        ...configData,\n        createdBy: 'migration-script'\n      } as any);\n      createdConfigs.push(config);\n    }\n\n    return createdConfigs;\n  }\n\n  /**\n   * Rollback migration (for testing)\n   */\n  async rollback(): Promise<void> {\n    console.log('üîÑ Rolling back initial data migration...');\n    \n    try {\n      // Get all organizations created by migration\n      const organizations = await this.orgRepo.find({\n        where: [{ field: 'createdBy', operator: '==', value: 'migration-script' }]\n      });\n\n      // Delete all related data for each organization\n      for (const org of organizations) {\n        // Delete templates\n        const templates = await this.templateRepo.findByOrganization(org.id);\n        for (const template of templates) {\n          await this.db.doc(`organizations/${org.id}/templates/${template.id}`).delete();\n        }\n\n        // Delete rules\n        const rules = await this.ruleRepo.findByOrganization(org.id);\n        for (const rule of rules) {\n          await this.db.doc(`organizations/${org.id}/analysis_rules/${rule.id}`).delete();\n        }\n\n        // Delete configurations\n        const configs = await this.paramsRepo.findByOrganization(org.id);\n        for (const config of configs) {\n          await this.db.doc(`organizations/${org.id}/custom_params/${config.id}`).delete();\n        }\n\n        // Delete organization\n        await this.orgRepo.delete(org.id);\n      }\n\n      console.log('‚úÖ Migration rollback completed');\n      \n    } catch (error) {\n      console.error('‚ùå Rollback failed:', error);\n      throw error;\n    }\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/migrations/migration-runner.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[692,695],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[692,695],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Migration Runner\n * \n * Executes and manages database migrations for LicitaReview\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { InitialDataMigration } from './001-initial-data';\n\nexport interface MigrationInfo {\n  id: string;\n  name: string;\n  description: string;\n  version: string;\n  runAt?: Date;\n  success?: boolean;\n  error?: string;\n}\n\nexport class MigrationRunner {\n  private db: Firestore;\n  private migrationsCollection = 'migrations';\n\n  constructor(db: Firestore) {\n    this.db = db;\n  }\n\n  /**\n   * Get list of available migrations\n   */\n  private getMigrations(): Array<{ \n    id: string; \n    name: string; \n    description: string; \n    migration: any \n  }> {\n    return [\n      {\n        id: '001',\n        name: 'Initial Data',\n        description: 'Creates initial organizations, templates, rules, and configurations',\n        migration: InitialDataMigration\n      }\n    ];\n  }\n\n  /**\n   * Check if migration has been run\n   */\n  private async isMigrationRun(migrationId: string): Promise<boolean> {\n    const doc = await this.db.collection(this.migrationsCollection).doc(migrationId).get();\n    return doc.exists && doc.data()?.success === true;\n  }\n\n  /**\n   * Record migration execution\n   */\n  private async recordMigration(\n    migrationId: string, \n    name: string, \n    description: string, \n    success: boolean, \n    error?: string\n  ): Promise<void> {\n    const migrationInfo: MigrationInfo = {\n      id: migrationId,\n      name,\n      description,\n      version: '1.0.0',\n      runAt: new Date(),\n      success\n    };\n\n    // Only add error field if it has a value\n    if (error) {\n      migrationInfo.error = error;\n    }\n\n    await this.db.collection(this.migrationsCollection).doc(migrationId).set(migrationInfo);\n  }\n\n  /**\n   * Run a specific migration\n   */\n  async runMigration(migrationId: string): Promise<void> {\n    const availableMigrations = this.getMigrations();\n    const migrationConfig = availableMigrations.find(m => m.id === migrationId);\n    \n    if (!migrationConfig) {\n      throw new Error(`Migration ${migrationId} not found`);\n    }\n\n    // Check if already run\n    const alreadyRun = await this.isMigrationRun(migrationId);\n    if (alreadyRun) {\n      console.log(`‚ö†Ô∏è  Migration ${migrationId} has already been run`);\n      return;\n    }\n\n    console.log(`üöÄ Running migration ${migrationId}: ${migrationConfig.name}`);\n    \n    try {\n      const migration = new migrationConfig.migration(this.db);\n      await migration.run();\n      \n      await this.recordMigration(\n        migrationId, \n        migrationConfig.name, \n        migrationConfig.description, \n        true\n      );\n      \n      console.log(`‚úÖ Migration ${migrationId} completed successfully`);\n      \n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      \n      await this.recordMigration(\n        migrationId, \n        migrationConfig.name, \n        migrationConfig.description, \n        false, \n        errorMessage\n      );\n      \n      console.error(`‚ùå Migration ${migrationId} failed: ${errorMessage}`);\n      throw error;\n    }\n  }\n\n  /**\n   * Run all pending migrations\n   */\n  async runAllMigrations(): Promise<void> {\n    const migrations = this.getMigrations();\n    \n    console.log(`üìã Found ${migrations.length} migrations`);\n    \n    for (const migration of migrations) {\n      const alreadyRun = await this.isMigrationRun(migration.id);\n      \n      if (!alreadyRun) {\n        await this.runMigration(migration.id);\n      } else {\n        console.log(`‚è≠Ô∏è  Skipping migration ${migration.id} (already run)`);\n      }\n    }\n    \n    console.log('üéâ All migrations completed!');\n  }\n\n  /**\n   * Rollback a specific migration\n   */\n  async rollbackMigration(migrationId: string): Promise<void> {\n    const availableMigrations = this.getMigrations();\n    const migrationConfig = availableMigrations.find(m => m.id === migrationId);\n    \n    if (!migrationConfig) {\n      throw new Error(`Migration ${migrationId} not found`);\n    }\n\n    console.log(`üîÑ Rolling back migration ${migrationId}: ${migrationConfig.name}`);\n    \n    try {\n      const migration = new migrationConfig.migration(this.db);\n      \n      if (typeof migration.rollback === 'function') {\n        await migration.rollback();\n        \n        // Remove migration record\n        await this.db.collection(this.migrationsCollection).doc(migrationId).delete();\n        \n        console.log(`‚úÖ Migration ${migrationId} rolled back successfully`);\n      } else {\n        console.log(`‚ö†Ô∏è  Migration ${migrationId} does not support rollback`);\n      }\n      \n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error(`‚ùå Rollback of migration ${migrationId} failed: ${errorMessage}`);\n      throw error;\n    }\n  }\n\n  /**\n   * Get migration status\n   */\n  async getMigrationStatus(): Promise<Array<MigrationInfo & { available: boolean }>> {\n    const availableMigrations = this.getMigrations();\n    const results: Array<MigrationInfo & { available: boolean }> = [];\n    \n    for (const migration of availableMigrations) {\n      const doc = await this.db.collection(this.migrationsCollection).doc(migration.id).get();\n      \n      if (doc.exists) {\n        const data = doc.data() as MigrationInfo;\n        results.push({\n          ...data,\n          available: true\n        });\n      } else {\n        results.push({\n          id: migration.id,\n          name: migration.name,\n          description: migration.description,\n          version: '1.0.0',\n          available: true\n        });\n      }\n    }\n    \n    return results;\n  }\n\n  /**\n   * Reset all migrations (for testing)\n   */\n  async resetAllMigrations(): Promise<void> {\n    console.log('üßπ Resetting all migrations...');\n    \n    const migrations = this.getMigrations();\n    \n    // Rollback in reverse order\n    for (const migration of migrations.reverse()) {\n      try {\n        await this.rollbackMigration(migration.id);\n      } catch (error) {\n        console.warn(`‚ö†Ô∏è  Could not rollback migration ${migration.id}:`, error);\n      }\n    }\n    \n    // Clear migration records\n    const migrationDocs = await this.db.collection(this.migrationsCollection).get();\n    const batch = this.db.batch();\n    \n    migrationDocs.forEach(doc => {\n      batch.delete(doc.ref);\n    });\n    \n    await batch.commit();\n    \n    console.log('‚úÖ All migrations reset');\n  }\n\n  /**\n   * Seed development data\n   */\n  async seedDevelopmentData(): Promise<void> {\n    console.log('üå± Seeding development data...');\n    \n    // Run initial data migration if not already run\n    const initialDataRun = await this.isMigrationRun('001');\n    if (!initialDataRun) {\n      await this.runMigration('001');\n    }\n    \n    // Add additional development-specific data here\n    // For example: test documents, additional users, etc.\n    \n    console.log('‚úÖ Development data seeded');\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/repositories/AnalysisRepository.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'PaginatedResult' is defined but never used.","line":12,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PaginatedResult' is defined but never used.","line":12,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":222,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6158,6161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6158,6161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":230,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6409,6412],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6409,6412],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":247,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":247,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6916,6919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6916,6919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":266,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7350,7353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7350,7353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":304,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":304,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8253,8256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8253,8256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'FirebaseFirestore' is not defined.","line":305,"column":61,"nodeType":"Identifier","messageId":"undef","endLine":305,"endColumn":78},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":305,"column":101,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":104,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8360,8363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8360,8363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":466,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":466,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13332,13335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13332,13335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":467,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":467,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13352,13355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13352,13355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":468,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":468,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13372,13375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13372,13375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":474,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":474,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13523,13526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13523,13526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Analysis Repository\n * \n * Handles all analysis-related data operations including:\n * - Independent analysis records\n * - Analysis history tracking\n * - Analysis statistics and analytics\n * - Performance monitoring\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { BaseRepository, QueryOptions, PaginatedResult } from './BaseRepository';\nimport {\n  Analysis,\n  AnalysisHistoryEntry,\n  AnalysisStatistics,\n  AnalysisSchema,\n  AnalysisHistoryEntrySchema,\n  AnalysisStatisticsSchema,\n  ANALYSIS_COLLECTIONS\n} from '../schemas/analysis.schema';\n\n/**\n * Main Analysis Repository\n */\nexport class AnalysisRepository extends BaseRepository<Analysis> {\n  constructor(db: Firestore) {\n    super(db, ANALYSIS_COLLECTIONS.ANALYSES, AnalysisSchema);\n  }\n\n  /**\n   * Find analyses by organization\n   */\n  async findByOrganization(organizationId: string, options: QueryOptions = {}): Promise<Analysis[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find analyses by document\n   */\n  async findByDocument(documentId: string, options: QueryOptions = {}): Promise<Analysis[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'documentId', operator: '==', value: documentId },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find analyses by user\n   */\n  async findByUser(userId: string, organizationId: string, options: QueryOptions = {}): Promise<Analysis[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'userId', operator: '==', value: userId },\n        { field: 'organizationId', operator: '==', value: organizationId },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find analyses by status\n   */\n  async findByStatus(organizationId: string, status: string, options: QueryOptions = {}): Promise<Analysis[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'processing.status', operator: '==', value: status },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'updatedAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find active/running analyses\n   */\n  async findActive(organizationId: string): Promise<Analysis[]> {\n    return this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'processing.status', operator: 'in', value: ['PENDING', 'INITIALIZING', 'PROCESSING'] }\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'asc' }]\n    });\n  }\n\n  /**\n   * Find completed analyses\n   */\n  async findCompleted(organizationId: string, options: QueryOptions = {}): Promise<Analysis[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'processing.status', operator: '==', value: 'COMPLETED' },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'processing.completedAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find failed analyses\n   */\n  async findFailed(organizationId: string, options: QueryOptions = {}): Promise<Analysis[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'processing.status', operator: 'in', value: ['FAILED', 'TIMEOUT'] },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'updatedAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find analyses by score range\n   */\n  async findByScoreRange(\n    organizationId: string, \n    minScore: number, \n    maxScore: number,\n    options: QueryOptions = {}\n  ): Promise<Analysis[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'processing.status', operator: '==', value: 'COMPLETED' },\n        { field: 'results.scores.overall', operator: '>=', value: minScore },\n        { field: 'results.scores.overall', operator: '<=', value: maxScore },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'results.scores.overall', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find analyses by configuration\n   */\n  async findByConfiguration(organizationId: string, configurationId: string): Promise<Analysis[]> {\n    return this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'configurationId', operator: '==', value: configurationId }\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find recent analyses\n   */\n  async findRecent(organizationId: string, limit: number = 10): Promise<Analysis[]> {\n    return this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId }\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }],\n      limit\n    });\n  }\n\n  /**\n   * Create new analysis\n   */\n  async createAnalysis(data: Partial<Analysis>): Promise<Analysis> {\n    const analysisData = {\n      ...data,\n      processing: {\n        status: 'PENDING' as const,\n        progress: 0,\n        ...data.processing\n      },\n      engine: {\n        name: 'licitareview-v2',\n        version: '2.0.0',\n        fallbackUsed: false,\n        cacheHit: false,\n        ...data.engine\n      },\n      request: {\n        priority: 'NORMAL' as const,\n        options: {\n          includeAI: true,\n          generateRecommendations: true,\n          detailedMetrics: false,\n          customRules: []\n        },\n        timeout: 300,\n        ...data.request\n      }\n    };\n\n    return this.create(analysisData);\n  }\n\n  /**\n   * Update analysis status\n   */\n  async updateStatus(\n    id: string, \n    status: string, \n    progress?: number, \n    currentStep?: string,\n    error?: any\n  ): Promise<Analysis | null> {\n    // Get current analysis to merge processing data\n    const current = await this.findById(id);\n    if (!current) return null;\n\n    const updatedProcessing = {\n      ...current.processing,\n      status: status as any,\n      ...(progress !== undefined && { progress }),\n      ...(currentStep && { currentStep }),\n      ...(status === 'PROCESSING' && !current.processing.startedAt && { startedAt: new Date() }),\n      ...(status === 'COMPLETED' && { completedAt: new Date(), progress: 100 }),\n      ...(error && { error })\n    };\n\n    return this.update(id, {\n      processing: updatedProcessing,\n      updatedAt: new Date()\n    });\n  }\n\n  /**\n   * Update analysis results\n   */\n  async updateResults(id: string, results: any): Promise<Analysis | null> {\n    const current = await this.findById(id);\n    if (!current) return null;\n\n    return this.update(id, {\n      results,\n      processing: {\n        ...current.processing,\n        status: 'COMPLETED' as const,\n        completedAt: new Date(),\n        progress: 100\n      },\n      updatedAt: new Date()\n    });\n  }\n\n  /**\n   * Update processing metrics\n   */\n  async updateMetrics(id: string, metrics: any): Promise<Analysis | null> {\n    const current = await this.findById(id);\n    if (!current) return null;\n\n    return this.update(id, {\n      processing: {\n        ...current.processing,\n        metrics\n      },\n      updatedAt: new Date()\n    });\n  }\n\n  /**\n   * Cancel analysis\n   */\n  async cancelAnalysis(id: string, cancelledBy: string): Promise<Analysis | null> {\n    const current = await this.findById(id);\n    if (!current) return null;\n\n    return this.update(id, {\n      processing: {\n        ...current.processing,\n        status: 'CANCELLED' as const,\n        completedAt: new Date()\n      },\n      updatedAt: new Date(),\n      metadata: {\n        ...current.metadata,\n        cancelledBy,\n        cancelledAt: new Date().toISOString()\n      }\n    });\n  }\n\n  /**\n   * Get analysis statistics for organization\n   */\n  async getStatistics(organizationId: string, fromDate?: Date): Promise<any> {\n    const whereConditions: Array<{ field: string; operator: FirebaseFirestore.WhereFilterOp; value: any }> = [\n      { field: 'organizationId', operator: '==', value: organizationId }\n    ];\n\n    if (fromDate) {\n      whereConditions.push(\n        { field: 'createdAt', operator: '>=', value: fromDate }\n      );\n    }\n\n    const analyses = await this.find({\n      where: whereConditions\n    });\n\n    const completedAnalyses = analyses.filter(a => a.processing.status === 'COMPLETED');\n    const failedAnalyses = analyses.filter(a => a.processing.status === 'FAILED' || a.processing.status === 'TIMEOUT');\n    \n    const totalAnalyses = analyses.length;\n    const completedCount = completedAnalyses.length;\n    const failedCount = failedAnalyses.length;\n    const successRate = totalAnalyses > 0 ? (completedCount / totalAnalyses) * 100 : 0;\n\n    // Calculate average score\n    const scoresSum = completedAnalyses\n      .filter(a => a.results?.scores?.overall)\n      .reduce((sum, a) => sum + (a.results?.scores?.overall || 0), 0);\n    const averageScore = completedCount > 0 ? scoresSum / completedCount : 0;\n\n    // Calculate average processing time\n    const processingTimes = completedAnalyses\n      .filter(a => a.processing.metrics?.totalProcessingTime)\n      .map(a => a.processing.metrics?.totalProcessingTime || 0);\n    const averageProcessingTime = processingTimes.length > 0 \n      ? processingTimes.reduce((sum, time) => sum + time, 0) / processingTimes.length \n      : 0;\n\n    // Score distribution\n    const scoreDistribution = {\n      excellent: 0, // 90-100\n      good: 0,      // 75-89\n      acceptable: 0, // 60-74\n      poor: 0,      // 40-59\n      critical: 0   // 0-39\n    };\n\n    completedAnalyses.forEach(analysis => {\n      const score = analysis.results?.scores?.overall || 0;\n      if (score >= 90) scoreDistribution.excellent++;\n      else if (score >= 75) scoreDistribution.good++;\n      else if (score >= 60) scoreDistribution.acceptable++;\n      else if (score >= 40) scoreDistribution.poor++;\n      else scoreDistribution.critical++;\n    });\n\n    // Common problems\n    const problemCounts: { [key: string]: number } = {};\n    completedAnalyses.forEach(analysis => {\n      analysis.results?.problems?.forEach(problem => {\n        const key = `${problem.category}:${problem.severity}`;\n        problemCounts[key] = (problemCounts[key] || 0) + 1;\n      });\n    });\n\n    const commonProblems = Object.entries(problemCounts)\n      .map(([key, count]) => {\n        const [category, severity] = key.split(':');\n        return { category, severity, count };\n      })\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10);\n\n    return {\n      totalAnalyses,\n      completedAnalyses: completedCount,\n      failedAnalyses: failedCount,\n      successRate,\n      averageScore,\n      averageProcessingTime,\n      scoreDistribution,\n      commonProblems,\n      mostUsedConfiguration: this.getMostUsedConfiguration(analyses),\n      peakUsageHours: this.getPeakUsageHours(analyses)\n    };\n  }\n\n  /**\n   * Get most used configuration\n   */\n  private getMostUsedConfiguration(analyses: Analysis[]): string | null {\n    const configCounts: { [key: string]: number } = {};\n    \n    analyses.forEach(analysis => {\n      if (analysis.configurationId) {\n        configCounts[analysis.configurationId] = (configCounts[analysis.configurationId] || 0) + 1;\n      }\n    });\n\n    const entries = Object.entries(configCounts);\n    if (entries.length === 0) return null;\n    \n    return entries.reduce((a, b) => a[1] > b[1] ? a : b)[0];\n  }\n\n  /**\n   * Get peak usage hours\n   */\n  private getPeakUsageHours(analyses: Analysis[]): number[] {\n    const hourCounts = new Array(24).fill(0);\n    \n    analyses.forEach(analysis => {\n      const hour = analysis.createdAt.getHours();\n      hourCounts[hour]++;\n    });\n\n    // Return top 3 peak hours\n    return hourCounts\n      .map((count, hour) => ({ hour, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 3)\n      .map(item => item.hour);\n  }\n\n  /**\n   * Clean up old analyses\n   */\n  async cleanupOldAnalyses(organizationId: string, daysOld: number = 90): Promise<number> {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\n\n    const oldAnalyses = await this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'createdAt', operator: '<', value: cutoffDate }\n      ]\n    });\n\n    const deletePromises = oldAnalyses.map(analysis => this.delete(analysis.id));\n    await Promise.all(deletePromises);\n\n    return oldAnalyses.length;\n  }\n}\n\n/**\n * Analysis History Repository\n */\nexport class AnalysisHistoryRepository extends BaseRepository<AnalysisHistoryEntry> {\n  constructor(db: Firestore) {\n    super(db, ANALYSIS_COLLECTIONS.HISTORY, AnalysisHistoryEntrySchema);\n  }\n\n  /**\n   * Add history entry\n   */\n  async addEntry(\n    analysisId: string,\n    documentId: string,\n    organizationId: string,\n    changeType: string,\n    description: string,\n    triggeredBy: string,\n    previousValue?: any,\n    newValue?: any,\n    metadata?: any\n  ): Promise<AnalysisHistoryEntry> {\n    const entry = {\n      analysisId,\n      documentId,\n      organizationId,\n      changeType: changeType as any,\n      description,\n      triggeredBy,\n      previousValue,\n      newValue,\n      timestamp: new Date(),\n      metadata\n    };\n\n    return this.create(entry);\n  }\n\n  /**\n   * Get history for analysis\n   */\n  async getAnalysisHistory(analysisId: string): Promise<AnalysisHistoryEntry[]> {\n    return this.find({\n      where: [\n        { field: 'analysisId', operator: '==', value: analysisId }\n      ],\n      orderBy: [{ field: 'timestamp', direction: 'asc' }]\n    });\n  }\n\n  /**\n   * Get history for document\n   */\n  async getDocumentHistory(documentId: string): Promise<AnalysisHistoryEntry[]> {\n    return this.find({\n      where: [\n        { field: 'documentId', operator: '==', value: documentId }\n      ],\n      orderBy: [{ field: 'timestamp', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Get recent history for organization\n   */\n  async getRecentHistory(organizationId: string, limit: number = 50): Promise<AnalysisHistoryEntry[]> {\n    return this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId }\n      ],\n      orderBy: [{ field: 'timestamp', direction: 'desc' }],\n      limit\n    });\n  }\n}\n\n/**\n * Analysis Statistics Repository\n */\nexport class AnalysisStatisticsRepository extends BaseRepository<AnalysisStatistics> {\n  constructor(db: Firestore) {\n    super(db, ANALYSIS_COLLECTIONS.STATISTICS, AnalysisStatisticsSchema);\n  }\n\n  /**\n   * Generate statistics for period\n   */\n  async generateStatistics(\n    organizationId: string,\n    period: 'DAILY' | 'WEEKLY' | 'MONTHLY' | 'YEARLY',\n    startDate: Date,\n    endDate: Date\n  ): Promise<AnalysisStatistics> {\n    // This would typically aggregate data from the main analysis collection\n    // For now, we'll create a placeholder implementation\n    \n    const stats = {\n      organizationId,\n      period,\n      startDate,\n      endDate,\n      totalAnalyses: 0,\n      completedAnalyses: 0,\n      failedAnalyses: 0,\n      cancelledAnalyses: 0,\n      averageProcessingTime: 0,\n      averageScore: 0,\n      scoreDistribution: {\n        excellent: 0,\n        good: 0,\n        acceptable: 0,\n        poor: 0,\n        critical: 0\n      },\n      commonProblems: [],\n      analysisTypeDistribution: {},\n      peakUsageHours: [],\n      generatedAt: new Date()\n    };\n\n    return this.create(stats);\n  }\n\n  /**\n   * Get statistics for period\n   */\n  async getStatistics(\n    organizationId: string,\n    period: 'DAILY' | 'WEEKLY' | 'MONTHLY' | 'YEARLY',\n    date: Date\n  ): Promise<AnalysisStatistics | null> {\n    const results = await this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'period', operator: '==', value: period },\n        { field: 'startDate', operator: '<=', value: date },\n        { field: 'endDate', operator: '>=', value: date }\n      ],\n      limit: 1\n    });\n\n    return results.length > 0 ? results[0] : null;\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/repositories/BaseRepository.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'WriteBatch' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WriteBatch' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'FirebaseFirestore' is not defined.","line":24,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[581,584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[581,584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1590,1593],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1590,1593],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1596,1599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1596,1599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2114,2117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2114,2117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2120,2123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2120,2123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'transaction' is defined but never used.","line":345,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":345,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":354,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":354,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":355,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":355,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":394,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":394,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":395,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":395,"endColumn":34}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Base Repository Pattern for Firestore Operations\n * \n * Provides common CRUD operations and query functionality for all repositories\n */\n\nimport { \n  Firestore, \n  DocumentReference, \n  CollectionReference, \n  Query, \n  WriteBatch,\n  Transaction,\n  DocumentSnapshot,\n  QuerySnapshot,\n  Timestamp\n} from 'firebase-admin/firestore';\nimport { z } from 'zod';\n\nexport interface QueryOptions {\n  limit?: number;\n  offset?: number;\n  orderBy?: Array<{ field: string; direction: 'asc' | 'desc' }>;\n  where?: Array<{ field: string; operator: FirebaseFirestore.WhereFilterOp; value: any }>;\n}\n\nexport interface PaginatedResult<T> {\n  data: T[];\n  total: number;\n  hasMore: boolean;\n  nextPageToken?: string;\n}\n\nexport abstract class BaseRepository<T, CreateT = Partial<T>, UpdateT = Partial<T>> {\n  protected db: Firestore;\n  protected collectionPath: string;\n  protected schema: z.ZodSchema<T>;\n\n  constructor(\n    db: Firestore,\n    collectionPath: string, \n    schema: z.ZodSchema<T>\n  ) {\n    this.db = db;\n    this.collectionPath = collectionPath;\n    this.schema = schema;\n  }\n\n  /**\n   * Get collection reference\n   */\n  protected getCollection(): CollectionReference {\n    return this.db.collection(this.collectionPath);\n  }\n\n  /**\n   * Get document reference\n   */\n  protected getDocRef(id: string): DocumentReference {\n    return this.getCollection().doc(id);\n  }\n\n  /**\n   * Validate data against schema\n   */\n  protected validate(data: unknown): T {\n    return this.schema.parse(data);\n  }\n\n  /**\n   * Convert Firestore timestamp to Date\n   */\n  protected convertTimestamps(data: any): any {\n    if (!data) return data;\n    \n    const converted = { ...data };\n    \n    Object.keys(converted).forEach(key => {\n      if (converted[key] instanceof Timestamp) {\n        converted[key] = converted[key].toDate();\n      } else if (typeof converted[key] === 'object' && converted[key] !== null) {\n        converted[key] = this.convertTimestamps(converted[key]);\n      }\n    });\n    \n    return converted;\n  }\n\n  /**\n   * Convert Date to Firestore timestamp for storage\n   */\n  protected prepareForStorage(data: any): any {\n    if (!data) return data;\n    \n    const prepared = { ...data };\n    \n    Object.keys(prepared).forEach(key => {\n      if (prepared[key] instanceof Date) {\n        prepared[key] = Timestamp.fromDate(prepared[key]);\n      } else if (typeof prepared[key] === 'object' && prepared[key] !== null) {\n        prepared[key] = this.prepareForStorage(prepared[key]);\n      }\n    });\n    \n    return prepared;\n  }\n\n  /**\n   * Create a new document\n   */\n  async create(data: CreateT, id?: string): Promise<T> {\n    const docRef = id ? this.getDocRef(id) : this.getCollection().doc();\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n\n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate({ ...createData, id: docRef.id });\n  }\n\n  /**\n   * Get document by ID\n   */\n  async findById(id: string): Promise<T | null> {\n    const doc = await this.getDocRef(id).get();\n    \n    if (!doc.exists) {\n      return null;\n    }\n    \n    const data = this.convertTimestamps(doc.data());\n    return this.validate({ ...data, id: doc.id });\n  }\n\n  /**\n   * Update document\n   */\n  async update(id: string, data: UpdateT): Promise<T | null> {\n    const docRef = this.getDocRef(id);\n    \n    const updateData = {\n      ...data,\n      updatedAt: new Date()\n    };\n\n    const prepared = this.prepareForStorage(updateData);\n    await docRef.update(prepared);\n    \n    return this.findById(id);\n  }\n\n  /**\n   * Delete document\n   */\n  async delete(id: string): Promise<void> {\n    await this.getDocRef(id).delete();\n  }\n\n  /**\n   * Check if document exists\n   */\n  async exists(id: string): Promise<boolean> {\n    const doc = await this.getDocRef(id).get();\n    return doc.exists;\n  }\n\n  /**\n   * Find documents with query options\n   */\n  async find(options: QueryOptions = {}): Promise<T[]> {\n    let query: Query = this.getCollection();\n    \n    // Apply where clauses\n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value);\n      });\n    }\n    \n    // Apply ordering\n    if (options.orderBy) {\n      options.orderBy.forEach(order => {\n        query = query.orderBy(order.field, order.direction);\n      });\n    }\n    \n    // Apply offset\n    if (options.offset) {\n      query = query.offset(options.offset);\n    }\n    \n    // Apply limit\n    if (options.limit) {\n      query = query.limit(options.limit);\n    }\n    \n    const snapshot = await query.get();\n    \n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find documents with pagination\n   */\n  async findPaginated(options: QueryOptions & { pageSize?: number; pageToken?: string } = {}): Promise<PaginatedResult<T>> {\n    const pageSize = options.pageSize || 20;\n    let query: Query = this.getCollection();\n    \n    // Apply where clauses\n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value);\n      });\n    }\n    \n    // Apply ordering\n    if (options.orderBy) {\n      options.orderBy.forEach(order => {\n        query = query.orderBy(order.field, order.direction);\n      });\n    } else {\n      // Default ordering by createdAt for consistent pagination\n      query = query.orderBy('createdAt', 'desc');\n    }\n    \n    // Handle pagination\n    if (options.pageToken) {\n      const tokenDoc = await this.getDocRef(options.pageToken).get();\n      if (tokenDoc.exists) {\n        query = query.startAfter(tokenDoc);\n      }\n    }\n    \n    // Get one extra document to check if there are more pages\n    query = query.limit(pageSize + 1);\n    \n    const snapshot = await query.get();\n    const docs = snapshot.docs.slice(0, pageSize);\n    const hasMore = snapshot.docs.length > pageSize;\n    \n    const data = docs.map(doc => {\n      const docData = this.convertTimestamps(doc.data());\n      return this.validate({ ...docData, id: doc.id });\n    });\n    \n    const nextPageToken = hasMore && docs.length > 0 ? docs[docs.length - 1].id : undefined;\n    \n    return {\n      data,\n      total: snapshot.size, // This is approximate for Firestore\n      hasMore,\n      nextPageToken\n    };\n  }\n\n  /**\n   * Count documents matching query\n   */\n  async count(options: Omit<QueryOptions, 'limit' | 'offset' | 'orderBy'> = {}): Promise<number> {\n    let query: Query = this.getCollection();\n    \n    // Apply where clauses\n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value);\n      });\n    }\n    \n    const snapshot = await query.count().get();\n    return snapshot.data().count;\n  }\n\n  /**\n   * Batch operations\n   */\n  async batchCreate(items: CreateT[]): Promise<T[]> {\n    const batch = this.db.batch();\n    const results: T[] = [];\n    \n    for (const item of items) {\n      const docRef = this.getCollection().doc();\n      const createData = {\n        ...item,\n        id: docRef.id,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      const prepared = this.prepareForStorage(createData);\n      batch.set(docRef, prepared);\n      results.push(this.validate(createData));\n    }\n    \n    await batch.commit();\n    return results;\n  }\n\n  /**\n   * Batch update\n   */\n  async batchUpdate(updates: Array<{ id: string; data: UpdateT }>): Promise<void> {\n    const batch = this.db.batch();\n    \n    for (const update of updates) {\n      const docRef = this.getDocRef(update.id);\n      const updateData = {\n        ...update.data,\n        updatedAt: new Date()\n      };\n      \n      const prepared = this.prepareForStorage(updateData);\n      batch.update(docRef, prepared);\n    }\n    \n    await batch.commit();\n  }\n\n  /**\n   * Batch delete\n   */\n  async batchDelete(ids: string[]): Promise<void> {\n    const batch = this.db.batch();\n    \n    for (const id of ids) {\n      const docRef = this.getDocRef(id);\n      batch.delete(docRef);\n    }\n    \n    await batch.commit();\n  }\n\n  /**\n   * Transaction support\n   */\n  async runTransaction<R>(\n    updateFunction: (transaction: Transaction) => Promise<R>\n  ): Promise<R> {\n    return this.db.runTransaction(updateFunction);\n  }\n\n  /**\n   * Listen to real-time changes\n   */\n  onSnapshot(\n    callback: (data: T[]) => void,\n    errorCallback?: (error: Error) => void,\n    options: QueryOptions = {}\n  ): () => void {\n    let query: Query = this.getCollection();\n    \n    // Apply query options\n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value);\n      });\n    }\n    \n    if (options.orderBy) {\n      options.orderBy.forEach(order => {\n        query = query.orderBy(order.field, order.direction);\n      });\n    }\n    \n    if (options.limit) {\n      query = query.limit(options.limit);\n    }\n    \n    return query.onSnapshot(\n      (snapshot: QuerySnapshot) => {\n        const data = snapshot.docs.map(doc => {\n          const docData = this.convertTimestamps(doc.data());\n          return this.validate({ ...docData, id: doc.id });\n        });\n        callback(data);\n      },\n      errorCallback\n    );\n  }\n\n  /**\n   * Listen to single document changes\n   */\n  onDocumentSnapshot(\n    id: string,\n    callback: (data: T | null) => void,\n    errorCallback?: (error: Error) => void\n  ): () => void {\n    return this.getDocRef(id).onSnapshot(\n      (doc: DocumentSnapshot) => {\n        if (doc.exists) {\n          const data = this.convertTimestamps(doc.data());\n          callback(this.validate({ ...data, id: doc.id }));\n        } else {\n          callback(null);\n        }\n      },\n      errorCallback\n    );\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/repositories/ComissaoRepository.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'QueryOptions' is defined but never used.","line":7,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'QueryOptions' is defined but never used.","line":7,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'PapelMembro' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PapelMembro' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":327,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":327,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9295,9298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9295,9298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Comiss√£o Repository - Data access layer for Comiss√µes\n * LicitaReview Cloud Functions\n */\n\nimport { Firestore, Query, FieldValue } from 'firebase-admin/firestore';\nimport { BaseRepository, QueryOptions } from './BaseRepository';\nimport { \n  Comissao, \n  ComissaoSchema, \n  CreateComissaoRequest, \n  UpdateComissaoRequest,\n  MembroComissao,\n  TipoComissao,\n  StatusComissao,\n  PapelMembro,\n  ComissoesQueryOptions,\n  ComissaoDetalhada\n} from '../../types';\n\nexport class ComissaoRepository extends BaseRepository<Comissao, CreateComissaoRequest, UpdateComissaoRequest> {\n  constructor(db: Firestore, organizationId: string) {\n    super(\n      db,\n      `organizations/${organizationId}/comissoes`,\n      ComissaoSchema\n    );\n  }\n\n  /**\n   * Find comiss√µes with advanced filtering\n   */\n  async findWithFilters(options: ComissoesQueryOptions): Promise<{\n    data: Comissao[];\n    total: number;\n    hasMore: boolean;\n  }> {\n    let query: Query = this.getCollection();\n\n    // Apply filters\n    if (options.tipo) {\n      query = query.where('tipo', '==', options.tipo);\n    }\n\n    if (options.status) {\n      query = query.where('status', '==', options.status);\n    }\n\n    // Search by name (case-insensitive)\n    if (options.search) {\n      const searchLower = options.search.toLowerCase();\n      query = query.where('nomeDaComissao', '>=', searchLower)\n                   .where('nomeDaComissao', '<=', searchLower + '\\uf8ff');\n    }\n\n    // Apply sorting\n    const sortField = options.sortBy || 'dataDeCriacao';\n    const sortDirection = options.sortOrder || 'desc';\n    query = query.orderBy(sortField, sortDirection);\n\n    // Apply pagination\n    const limit = options.limit || 20;\n    const offset = ((options.page || 1) - 1) * limit;\n    \n    if (offset > 0) {\n      query = query.offset(offset);\n    }\n    query = query.limit(limit + 1); // +1 to check if there are more results\n\n    const snapshot = await query.get();\n    const docs = snapshot.docs.slice(0, limit); // Remove the extra doc\n    const hasMore = snapshot.docs.length > limit;\n\n    const data = docs.map(doc => {\n      const docData = this.convertTimestamps(doc.data());\n      return this.validate({ id: doc.id, ...docData });\n    });\n\n    // Get total count for pagination\n    let countQuery: Query = this.getCollection();\n    // Apply same filters for count\n    if (options.tipo) {\n      countQuery = countQuery.where('tipo', '==', options.tipo);\n    }\n    if (options.status) {\n      countQuery = countQuery.where('status', '==', options.status);\n    }\n    if (options.search) {\n      const searchLower = options.search.toLowerCase();\n      countQuery = countQuery.where('nomeDaComissao', '>=', searchLower)\n                            .where('nomeDaComissao', '<=', searchLower + '\\uf8ff');\n    }\n    \n    const countSnapshot = await countQuery.count().get();\n    const total = countSnapshot.data().count;\n\n    return { data, total, hasMore };\n  }\n\n  /**\n   * Get comiss√£o with detailed member information\n   */\n  async findByIdDetailed(id: string): Promise<ComissaoDetalhada | null> {\n    const comissao = await this.findById(id);\n    if (!comissao) {\n      return null;\n    }\n\n    // Get detailed member information\n    const membrosDetalhados = await Promise.all(\n      comissao.membros.map(async (membro) => {\n        try {\n          // Get servidor details from servidores collection\n          const servidorDoc = await this.db\n            .collection(`organizations/${comissao.organizationId}/servidores`)\n            .doc(membro.servidorId)\n            .get();\n\n          if (servidorDoc.exists) {\n            const servidorData = servidorDoc.data()!;\n            return {\n              ...membro,\n              servidor: {\n                id: servidorDoc.id,\n                nome: servidorData.nome || 'Nome n√£o dispon√≠vel',\n                email: servidorData.email || 'Email n√£o dispon√≠vel',\n                cargo: servidorData.cargo || 'Cargo n√£o dispon√≠vel'\n              }\n            };\n          } else {\n            // Servidor not found, return with placeholder data\n            return {\n              ...membro,\n              servidor: {\n                id: membro.servidorId,\n                nome: 'Servidor n√£o encontrado',\n                email: 'N/A',\n                cargo: 'N/A'\n              }\n            };\n          }\n        } catch (error) {\n          console.error(`Error fetching servidor ${membro.servidorId}:`, error);\n          return {\n            ...membro,\n            servidor: {\n              id: membro.servidorId,\n              nome: 'Erro ao carregar',\n              email: 'N/A',\n              cargo: 'N/A'\n            }\n          };\n        }\n      })\n    );\n\n    return {\n      ...comissao,\n      membrosDetalhados\n    };\n  }\n\n  /**\n   * Check if comiss√£o name is unique within organization\n   */\n  async isNameUnique(name: string, excludeId?: string): Promise<boolean> {\n    let query = this.getCollection().where('nomeDaComissao', '==', name);\n    \n    const snapshot = await query.get();\n    \n    if (excludeId) {\n      // Exclude the current document when updating\n      return snapshot.docs.every(doc => doc.id === excludeId);\n    }\n    \n    return snapshot.empty;\n  }\n\n  /**\n   * Add member to comiss√£o\n   */\n  async adicionarMembro(comissaoId: string, membro: Omit<MembroComissao, 'dataDeIngresso' | 'ativo'>): Promise<void> {\n    const docRef = this.getDocRef(comissaoId);\n    \n    const novoMembro: MembroComissao = {\n      ...membro,\n      dataDeIngresso: new Date(),\n      ativo: true\n    };\n\n    await docRef.update({\n      membros: FieldValue.arrayUnion(this.prepareForStorage(novoMembro)),\n      updatedAt: FieldValue.serverTimestamp()\n    });\n  }\n\n  /**\n   * Remove member from comiss√£o\n   */\n  async removerMembro(comissaoId: string, servidorId: string): Promise<void> {\n    const comissao = await this.findById(comissaoId);\n    if (!comissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    const membrosAtualizados = comissao.membros.filter(m => m.servidorId !== servidorId);\n    \n    await this.update(comissaoId, {\n      membros: membrosAtualizados\n    } as UpdateComissaoRequest);\n  }\n\n  /**\n   * Update member in comiss√£o\n   */\n  async atualizarMembro(\n    comissaoId: string, \n    servidorId: string, \n    updates: Partial<Pick<MembroComissao, 'papel' | 'observacoes' | 'ativo' | 'dataDeSaida'>>\n  ): Promise<void> {\n    const comissao = await this.findById(comissaoId);\n    if (!comissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    const membroIndex = comissao.membros.findIndex(m => m.servidorId === servidorId);\n    if (membroIndex === -1) {\n      throw new Error('Membro n√£o encontrado na comiss√£o');\n    }\n\n    const membrosAtualizados = [...comissao.membros];\n    membrosAtualizados[membroIndex] = {\n      ...membrosAtualizados[membroIndex],\n      ...updates\n    };\n\n    await this.update(comissaoId, {\n      membros: membrosAtualizados\n    } as UpdateComissaoRequest);\n  }\n\n  /**\n   * Get comiss√µes by servidor ID\n   */\n  async findByServidorId(servidorId: string): Promise<Comissao[]> {\n    const query = this.getCollection()\n      .where('membros', 'array-contains-any', [{ servidorId }]);\n    \n    const snapshot = await query.get();\n    \n    return snapshot.docs.map(doc => {\n      const docData = this.convertTimestamps(doc.data());\n      return this.validate({ id: doc.id, ...docData });\n    });\n  }\n\n  /**\n   * Get active comiss√µes\n   */\n  async findActive(): Promise<Comissao[]> {\n    const query = this.getCollection()\n      .where('status', '==', StatusComissao.ATIVA)\n      .orderBy('dataDeCriacao', 'desc');\n    \n    const snapshot = await query.get();\n    \n    return snapshot.docs.map(doc => {\n      const docData = this.convertTimestamps(doc.data());\n      return this.validate({ id: doc.id, ...docData });\n    });\n  }\n\n  /**\n   * Get comiss√µes expiring soon (for tempor√°rias)\n   */\n  async findExpiringSoon(days: number = 30): Promise<Comissao[]> {\n    const futureDate = new Date();\n    futureDate.setDate(futureDate.getDate() + days);\n\n    const query = this.getCollection()\n      .where('tipo', '==', TipoComissao.TEMPORARIA)\n      .where('status', '==', StatusComissao.ATIVA)\n      .where('dataDeEncerramento', '<=', futureDate)\n      .orderBy('dataDeEncerramento', 'asc');\n    \n    const snapshot = await query.get();\n    \n    return snapshot.docs.map(doc => {\n      const docData = this.convertTimestamps(doc.data());\n      return this.validate({ id: doc.id, ...docData });\n    });\n  }\n\n  /**\n   * Get statistics for organization\n   */\n  async getOrganizationStats(): Promise<{\n    total: number;\n    ativas: number;\n    permanentes: number;\n    temporarias: number;\n    membrosTotal: number;\n  }> {\n    const snapshot = await this.getCollection().get();\n    \n    let total = 0;\n    let ativas = 0;\n    let permanentes = 0;\n    let temporarias = 0;\n    let membrosTotal = 0;\n\n    snapshot.docs.forEach(doc => {\n      const data = doc.data();\n      total++;\n      \n      if (data.status === StatusComissao.ATIVA) {\n        ativas++;\n      }\n      \n      if (data.tipo === TipoComissao.PERMANENTE) {\n        permanentes++;\n      } else {\n        temporarias++;\n      }\n      \n      if (data.membros && Array.isArray(data.membros)) {\n        membrosTotal += data.membros.filter((m: any) => m.ativo).length;\n      }\n    });\n\n    return {\n      total,\n      ativas,\n      permanentes,\n      temporarias,\n      membrosTotal\n    };\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/repositories/DocumentRepository.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'PaginatedResult' is defined but never used.","line":12,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PaginatedResult' is defined but never used.","line":12,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3847,3850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3847,3850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":140,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4026,4029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4026,4029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6207,6210],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6207,6210],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":225,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6302,6305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6302,6305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":311,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":311,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8883,8886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8883,8886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":325,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":325,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9261,9264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9261,9264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":339,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":339,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9655,9658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9655,9658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":373,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":373,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10964,10967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10964,10967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11404,11407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11404,11407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":422,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":422,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12518,12521],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12518,12521],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":427,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":427,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12613,12616],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12613,12616],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":515,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":515,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15126,15129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15126,15129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":520,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":520,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15221,15224],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15221,15224],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":602,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":602,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17430,17433],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17430,17433],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Document Repository\n * \n * Handles all document-related data operations including:\n * - Document metadata\n * - Analysis results (üöÄ with personalized scoring)\n * - Document versions\n * - Review comments\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { BaseRepository, QueryOptions, PaginatedResult } from './BaseRepository';\nimport {\n  DocumentMetadata,\n  AnalysisResult,\n  DocumentVersion,\n  ReviewComment,\n  DocumentMetadataSchema,\n  AnalysisResultSchema,\n  DocumentVersionSchema,\n  ReviewCommentSchema,\n  DOCUMENT_COLLECTIONS\n} from '../schemas/document.schema';\n\n/**\n * Document Metadata Repository\n */\nexport class DocumentRepository extends BaseRepository<DocumentMetadata> {\n  constructor(db: Firestore) {\n    super(db, 'documents', DocumentMetadataSchema);\n  }\n\n  /**\n   * Find documents by organization\n   */\n  async findByOrganization(organizationId: string, options: QueryOptions = {}): Promise<DocumentMetadata[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        ...(options.where || [])\n      ]\n    });\n  }\n\n  /**\n   * Find documents by type\n   */\n  async findByDocumentType(organizationId: string, documentType: string, options: QueryOptions = {}): Promise<DocumentMetadata[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'documentType', operator: '==', value: documentType },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find documents by status\n   */\n  async findByStatus(organizationId: string, status: string, options: QueryOptions = {}): Promise<DocumentMetadata[]> {\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'status', operator: '==', value: status },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'updatedAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Search documents by title\n   */\n  async searchByTitle(organizationId: string, title: string): Promise<DocumentMetadata[]> {\n    const searchTerm = title.toLowerCase();\n    \n    return this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'title', operator: '>=', value: searchTerm },\n        { field: 'title', operator: '<', value: searchTerm + '\\uf8ff' }\n      ],\n      orderBy: [{ field: 'title', direction: 'asc' }]\n    });\n  }\n\n  /**\n   * Find documents by tags\n   */\n  async findByTag(organizationId: string, tag: string): Promise<DocumentMetadata[]> {\n    return this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'tags', operator: 'array-contains', value: tag }\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find documents requiring review\n   */\n  async findPendingReview(organizationId: string): Promise<DocumentMetadata[]> {\n    return this.findByStatus(organizationId, 'UNDER_REVIEW');\n  }\n\n  /**\n   * Find recently analyzed documents\n   */\n  async findRecentlyAnalyzed(organizationId: string, limit: number = 10): Promise<DocumentMetadata[]> {\n    return this.find({\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        { field: 'status', operator: '==', value: 'ANALYZED' }\n      ],\n      orderBy: [{ field: 'updatedAt', direction: 'desc' }],\n      limit\n    });\n  }\n\n  /**\n   * Update document status\n   */\n  async updateStatus(id: string, status: string, updatedBy: string): Promise<DocumentMetadata | null> {\n    return this.update(id, { \n      status, \n      lastModifiedBy: updatedBy \n    } as any);\n  }\n\n  /**\n   * Update processing progress\n   */\n  async updateProcessingProgress(id: string, progress: number, currentStep?: string): Promise<void> {\n    const updateData: any = {\n      'processing.progress': progress,\n      updatedAt: new Date()\n    };\n    \n    if (currentStep) {\n      updateData['processing.currentStep'] = currentStep;\n    }\n    \n    if (progress === 100) {\n      updateData['processing.completedAt'] = new Date();\n    }\n    \n    await this.getDocRef(id).update(updateData);\n  }\n\n  /**\n   * Add processing error\n   */\n  async addProcessingError(id: string, error: { code: string; message: string; step?: string }): Promise<void> {\n    const docRef = this.getDocRef(id);\n    const doc = await docRef.get();\n    \n    if (doc.exists) {\n      const currentErrors = doc.data()?.processing?.errors || [];\n      const newError = {\n        ...error,\n        timestamp: new Date()\n      };\n      \n      await docRef.update({\n        'processing.errors': [...currentErrors, newError],\n        updatedAt: new Date()\n      });\n    }\n  }\n\n  /**\n   * Update view statistics\n   */\n  async incrementViewCount(id: string): Promise<void> {\n    const docRef = this.getDocRef(id);\n    const doc = await docRef.get();\n    \n    if (doc.exists) {\n      const currentCount = doc.data()?.statistics?.viewCount || 0;\n      \n      await docRef.update({\n        'statistics.viewCount': currentCount + 1,\n        'statistics.lastViewed': new Date(),\n        updatedAt: new Date()\n      });\n    }\n  }\n}\n\n/**\n * Analysis Result Repository (üöÄ CORE DIFFERENTIATOR)\n */\nexport class AnalysisRepository extends BaseRepository<AnalysisResult> {\n  constructor(db: Firestore) {\n    super(db, 'analyses', AnalysisResultSchema);\n  }\n\n  /**\n   * Get full collection path for document analyses\n   */\n  protected getCollectionPath(documentId: string): string {\n    return `documents/${documentId}/${DOCUMENT_COLLECTIONS.ANALYSES}`;\n  }\n\n  /**\n   * Find analyses by document\n   */\n  async findByDocument(documentId: string, options: QueryOptions = {}): Promise<AnalysisResult[]> {\n    const collection = this.db.collection(this.getCollectionPath(documentId));\n    let query = collection.orderBy('createdAt', 'desc');\n    \n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value) as any;\n      });\n    }\n    \n    if (options.limit) {\n      query = query.limit(options.limit) as any;\n    }\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find latest analysis for document\n   */\n  async findLatest(documentId: string): Promise<AnalysisResult | null> {\n    const results = await this.findByDocument(documentId, { limit: 1 });\n    return results.length > 0 ? results[0] : null;\n  }\n\n  /**\n   * Find analyses by organization\n   */\n  async findByOrganization(organizationId: string, options: QueryOptions = {}): Promise<AnalysisResult[]> {\n    // Note: This requires a composite index on organizationId and createdAt\n    return this.find({\n      ...options,\n      where: [\n        { field: 'organizationId', operator: '==', value: organizationId },\n        ...(options.where || [])\n      ],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find analyses by configuration (üöÄ CORE: Track which custom parameters were used)\n   */\n  async findByConfiguration(organizationId: string, configurationId: string): Promise<AnalysisResult[]> {\n    return this.findByOrganization(organizationId, {\n      where: [{ field: 'configurationId', operator: '==', value: configurationId }]\n    });\n  }\n\n  /**\n   * Find analyses by score range\n   */\n  async findByScoreRange(organizationId: string, minScore: number, maxScore: number): Promise<AnalysisResult[]> {\n    return this.findByOrganization(organizationId, {\n      where: [\n        { field: 'scores.overall', operator: '>=', value: minScore },\n        { field: 'scores.overall', operator: '<=', value: maxScore }\n      ]\n    });\n  }\n\n  /**\n   * Find failed analyses\n   */\n  async findFailed(organizationId: string): Promise<AnalysisResult[]> {\n    return this.findByOrganization(organizationId, {\n      where: [{ field: 'status', operator: '==', value: 'FAILED' }]\n    });\n  }\n\n  /**\n   * Create analysis for document\n   */\n  async createForDocument(documentId: string, data: Partial<AnalysisResult>): Promise<AnalysisResult> {\n    const collection = this.db.collection(this.getCollectionPath(documentId));\n    const docRef = collection.doc();\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      documentId,\n      createdAt: new Date()\n    };\n    \n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate(createData);\n  }\n\n  /**\n   * Update analysis status and completion\n   */\n  async complete(documentId: string, analysisId: string, results: any): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(documentId)).doc(analysisId);\n    \n    await docRef.update({\n      status: 'COMPLETED',\n      results,\n      'analysis.completedAt': new Date(),\n      updatedAt: new Date()\n    });\n  }\n\n  /**\n   * Mark analysis as failed\n   */\n  async markAsFailed(documentId: string, analysisId: string, error: any): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(documentId)).doc(analysisId);\n    \n    await docRef.update({\n      status: 'FAILED',\n      error,\n      'analysis.completedAt': new Date(),\n      updatedAt: new Date()\n    });\n  }\n\n  /**\n   * Get analysis statistics for organization\n   */\n  async getStatistics(organizationId: string, fromDate?: Date): Promise<any> {\n    let query = this.db.collectionGroup(DOCUMENT_COLLECTIONS.ANALYSES)\n      .where('organizationId', '==', organizationId)\n      .where('status', '==', 'COMPLETED');\n    \n    if (fromDate) {\n      query = query.where('createdAt', '>=', fromDate);\n    }\n    \n    const snapshot = await query.get();\n    const analyses = snapshot.docs.map(doc => doc.data());\n    \n    // Calculate statistics\n    const totalAnalyses = analyses.length;\n    const averageScore = totalAnalyses > 0 \n      ? analyses.reduce((sum, a) => sum + (a.scores?.overall || 0), 0) / totalAnalyses \n      : 0;\n    \n    const scoreDistribution = {\n      excellent: analyses.filter(a => (a.scores?.overall || 0) >= 90).length,\n      good: analyses.filter(a => (a.scores?.overall || 0) >= 75 && (a.scores?.overall || 0) < 90).length,\n      acceptable: analyses.filter(a => (a.scores?.overall || 0) >= 60 && (a.scores?.overall || 0) < 75).length,\n      poor: analyses.filter(a => (a.scores?.overall || 0) < 60).length\n    };\n    \n    return {\n      totalAnalyses,\n      averageScore: Math.round(averageScore * 100) / 100,\n      scoreDistribution,\n      mostUsedConfiguration: this.getMostUsedConfiguration(analyses),\n      averageAnalysisTime: this.getAverageAnalysisTime(analyses)\n    };\n  }\n\n  private getMostUsedConfiguration(analyses: any[]): string | null {\n    const configCounts = analyses.reduce((acc, analysis) => {\n      const configId = analysis.configurationId;\n      if (configId) {\n        acc[configId] = (acc[configId] || 0) + 1;\n      }\n      return acc;\n    }, {} as Record<string, number>);\n    \n    return Object.keys(configCounts).reduce((a, b) => \n      configCounts[a] > configCounts[b] ? a : b, null\n    );\n  }\n\n  private getAverageAnalysisTime(analyses: any[]): number {\n    const validDurations = analyses\n      .filter(a => a.analysis?.duration)\n      .map(a => a.analysis.duration);\n    \n    return validDurations.length > 0\n      ? validDurations.reduce((sum, d) => sum + d, 0) / validDurations.length\n      : 0;\n  }\n}\n\n/**\n * Document Version Repository\n */\nexport class DocumentVersionRepository extends BaseRepository<DocumentVersion> {\n  constructor(db: Firestore) {\n    super(db, 'versions', DocumentVersionSchema);\n  }\n\n  /**\n   * Get full collection path for document versions\n   */\n  protected getCollectionPath(documentId: string): string {\n    return `documents/${documentId}/${DOCUMENT_COLLECTIONS.VERSIONS}`;\n  }\n\n  /**\n   * Find versions by document\n   */\n  async findByDocument(documentId: string, options: QueryOptions = {}): Promise<DocumentVersion[]> {\n    const collection = this.db.collection(this.getCollectionPath(documentId));\n    let query = collection.orderBy('createdAt', 'desc');\n    \n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value) as any;\n      });\n    }\n    \n    if (options.limit) {\n      query = query.limit(options.limit) as any;\n    }\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find active version for document\n   */\n  async findActive(documentId: string): Promise<DocumentVersion | null> {\n    const results = await this.findByDocument(documentId, {\n      where: [{ field: 'isActive', operator: '==', value: true }],\n      limit: 1\n    });\n    \n    return results.length > 0 ? results[0] : null;\n  }\n\n  /**\n   * Create version for document\n   */\n  async createForDocument(documentId: string, data: Partial<DocumentVersion>): Promise<DocumentVersion> {\n    const collection = this.db.collection(this.getCollectionPath(documentId));\n    const docRef = collection.doc();\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      documentId,\n      createdAt: new Date()\n    };\n    \n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate(createData);\n  }\n\n  /**\n   * Set version as active\n   */\n  async setAsActive(documentId: string, versionId: string): Promise<void> {\n    const collection = this.db.collection(this.getCollectionPath(documentId));\n    \n    // First, deactivate all versions\n    const allVersions = await collection.get();\n    const batch = this.db.batch();\n    \n    allVersions.forEach(doc => {\n      batch.update(doc.ref, { isActive: false });\n    });\n    \n    // Then activate the specified version\n    const versionRef = collection.doc(versionId);\n    batch.update(versionRef, { isActive: true });\n    \n    await batch.commit();\n  }\n}\n\n/**\n * Review Comment Repository\n */\nexport class ReviewCommentRepository extends BaseRepository<ReviewComment> {\n  constructor(db: Firestore) {\n    super(db, 'comments', ReviewCommentSchema);\n  }\n\n  /**\n   * Get full collection path for document comments\n   */\n  protected getCollectionPath(documentId: string): string {\n    return `documents/${documentId}/${DOCUMENT_COLLECTIONS.COMMENTS}`;\n  }\n\n  /**\n   * Find comments by document\n   */\n  async findByDocument(documentId: string, options: QueryOptions = {}): Promise<ReviewComment[]> {\n    const collection = this.db.collection(this.getCollectionPath(documentId));\n    let query = collection.orderBy('createdAt', 'asc');\n    \n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value) as any;\n      });\n    }\n    \n    if (options.limit) {\n      query = query.limit(options.limit) as any;\n    }\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find comments by thread\n   */\n  async findByThread(documentId: string, threadId: string): Promise<ReviewComment[]> {\n    return this.findByDocument(documentId, {\n      where: [{ field: 'threadId', operator: '==', value: threadId }]\n    });\n  }\n\n  /**\n   * Find open comments\n   */\n  async findOpen(documentId: string): Promise<ReviewComment[]> {\n    return this.findByDocument(documentId, {\n      where: [{ field: 'status', operator: '==', value: 'OPEN' }]\n    });\n  }\n\n  /**\n   * Find comments by user\n   */\n  async findByUser(documentId: string, userId: string): Promise<ReviewComment[]> {\n    return this.findByDocument(documentId, {\n      where: [{ field: 'createdBy', operator: '==', value: userId }]\n    });\n  }\n\n  /**\n   * Create comment for document\n   */\n  async createForDocument(documentId: string, data: Partial<ReviewComment>): Promise<ReviewComment> {\n    const collection = this.db.collection(this.getCollectionPath(documentId));\n    const docRef = collection.doc();\n    \n    // Generate thread ID if not provided and it's not a reply\n    const threadId = data.parentCommentId ? data.threadId : (data.threadId || docRef.id);\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      documentId,\n      threadId,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate(createData);\n  }\n\n  /**\n   * Resolve comment\n   */\n  async resolve(documentId: string, commentId: string, resolvedBy: string, resolution: string): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(documentId)).doc(commentId);\n    \n    await docRef.update({\n      status: 'RESOLVED',\n      resolution: {\n        resolvedBy,\n        resolvedAt: new Date(),\n        resolution\n      },\n      updatedAt: new Date()\n    });\n  }\n\n  /**\n   * Get comment statistics for document\n   */\n  async getStatistics(documentId: string): Promise<any> {\n    const comments = await this.findByDocument(documentId);\n    \n    return {\n      total: comments.length,\n      open: comments.filter(c => c.status === 'OPEN').length,\n      resolved: comments.filter(c => c.status === 'RESOLVED').length,\n      byType: {\n        general: comments.filter(c => c.type === 'GENERAL').length,\n        suggestion: comments.filter(c => c.type === 'SUGGESTION').length,\n        issue: comments.filter(c => c.type === 'ISSUE').length,\n        question: comments.filter(c => c.type === 'QUESTION').length\n      },\n      threads: new Set(comments.map(c => c.threadId)).size\n    };\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/repositories/OrganizationRepository.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'PaginatedResult' is defined but never used.","line":13,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PaginatedResult' is defined but never used.","line":13,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2523,2526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2523,2526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":120,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3417,3420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3417,3420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":125,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3512,3515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3512,3515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6627,6630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6627,6630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":232,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6722,6725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6722,6725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":463,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14065,14068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14065,14068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":468,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":468,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14160,14163],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14160,14163],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Organization Repository\n * \n * Handles all organization-related data operations including:\n * - Organization profiles\n * - Templates management\n * - Analysis rules\n * - Custom parameters (üöÄ CORE DIFFERENTIATOR)\n * - User management\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { BaseRepository, QueryOptions, PaginatedResult } from './BaseRepository';\nimport {\n  OrganizationProfile,\n  DocumentTemplate,\n  AnalysisRule,\n  CustomParameters,\n  OrganizationUser,\n  OrganizationProfileSchema,\n  DocumentTemplateSchema,\n  AnalysisRuleSchema,\n  CustomParametersSchema,\n  OrganizationUserSchema,\n  ORGANIZATION_COLLECTIONS\n} from '../schemas/organization.schema';\n\n/**\n * Organization Profile Repository\n */\nexport class OrganizationRepository extends BaseRepository<OrganizationProfile> {\n  constructor(db: Firestore) {\n    super(db, 'organizations', OrganizationProfileSchema);\n  }\n\n  /**\n   * Find organization by CNPJ\n   */\n  async findByCNPJ(cnpj: string): Promise<OrganizationProfile | null> {\n    const results = await this.find({\n      where: [{ field: 'cnpj', operator: '==', value: cnpj }],\n      limit: 1\n    });\n    \n    return results.length > 0 ? results[0] : null;\n  }\n\n  /**\n   * Find organizations by type\n   */\n  async findByType(organizationType: string): Promise<OrganizationProfile[]> {\n    return this.find({\n      where: [{ field: 'organizationType', operator: '==', value: organizationType }],\n      orderBy: [{ field: 'name', direction: 'asc' }]\n    });\n  }\n\n  /**\n   * Find active organizations\n   */\n  async findActive(): Promise<OrganizationProfile[]> {\n    return this.find({\n      where: [{ field: 'status', operator: '==', value: 'ACTIVE' }],\n      orderBy: [{ field: 'createdAt', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Search organizations by name\n   */\n  async searchByName(name: string): Promise<OrganizationProfile[]> {\n    // Note: Firestore doesn't support full-text search natively\n    // This is a simple starts-with search\n    const searchTerm = name.toLowerCase();\n    \n    return this.find({\n      where: [\n        { field: 'name', operator: '>=', value: searchTerm },\n        { field: 'name', operator: '<', value: searchTerm + '\\uf8ff' }\n      ],\n      orderBy: [{ field: 'name', direction: 'asc' }]\n    });\n  }\n\n  /**\n   * Update organization status\n   */\n  async updateStatus(id: string, status: string, updatedBy: string): Promise<OrganizationProfile | null> {\n    return this.update(id, { \n      status, \n      lastModifiedBy: updatedBy \n    } as any);\n  }\n}\n\n/**\n * Document Template Repository\n */\nexport class TemplateRepository extends BaseRepository<DocumentTemplate> {\n  constructor(db: Firestore) {\n    super(db, 'templates', DocumentTemplateSchema);\n  }\n\n  /**\n   * Get full collection path for organization templates\n   */\n  protected getCollectionPath(organizationId: string): string {\n    return `organizations/${organizationId}/${ORGANIZATION_COLLECTIONS.TEMPLATES}`;\n  }\n\n  /**\n   * Find templates by organization\n   */\n  async findByOrganization(organizationId: string, options: QueryOptions = {}): Promise<DocumentTemplate[]> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    let query = collection.orderBy('createdAt', 'desc');\n    \n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value) as any;\n      });\n    }\n    \n    if (options.limit) {\n      query = query.limit(options.limit) as any;\n    }\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find templates by document type\n   */\n  async findByDocumentType(organizationId: string, documentType: string): Promise<DocumentTemplate[]> {\n    return this.findByOrganization(organizationId, {\n      where: [{ field: 'documentType', operator: '==', value: documentType }]\n    });\n  }\n\n  /**\n   * Find active templates\n   */\n  async findActive(organizationId: string): Promise<DocumentTemplate[]> {\n    return this.findByOrganization(organizationId, {\n      where: [{ field: 'status', operator: '==', value: 'ACTIVE' }]\n    });\n  }\n\n  /**\n   * Find default template for document type\n   */\n  async findDefault(organizationId: string, documentType: string): Promise<DocumentTemplate | null> {\n    const results = await this.findByOrganization(organizationId, {\n      where: [\n        { field: 'documentType', operator: '==', value: documentType },\n        { field: 'isDefault', operator: '==', value: true }\n      ],\n      limit: 1\n    });\n    \n    return results.length > 0 ? results[0] : null;\n  }\n\n  /**\n   * Create template for organization\n   */\n  async createForOrganization(organizationId: string, data: Partial<DocumentTemplate>): Promise<DocumentTemplate> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    const docRef = collection.doc();\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      organizationId,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate(createData);\n  }\n\n  /**\n   * Update template usage statistics\n   */\n  async updateUsageStats(organizationId: string, templateId: string): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(organizationId)).doc(templateId);\n    \n    await docRef.update({\n      'usage.documentsCreated': (await docRef.get()).data()?.usage?.documentsCreated + 1 || 1,\n      'usage.lastUsed': new Date(),\n      updatedAt: new Date()\n    });\n  }\n}\n\n/**\n * Analysis Rule Repository  \n */\nexport class AnalysisRuleRepository extends BaseRepository<AnalysisRule> {\n  constructor(db: Firestore) {\n    super(db, 'analysis_rules', AnalysisRuleSchema);\n  }\n\n  /**\n   * Get full collection path for organization rules\n   */\n  protected getCollectionPath(organizationId: string): string {\n    return `organizations/${organizationId}/${ORGANIZATION_COLLECTIONS.ANALYSIS_RULES}`;\n  }\n\n  /**\n   * Find rules by organization\n   */\n  async findByOrganization(organizationId: string, options: QueryOptions = {}): Promise<AnalysisRule[]> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    let query = collection.orderBy('createdAt', 'desc');\n    \n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value) as any;\n      });\n    }\n    \n    if (options.limit) {\n      query = query.limit(options.limit) as any;\n    }\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find enabled rules by category\n   */\n  async findEnabledByCategory(organizationId: string, category: string): Promise<AnalysisRule[]> {\n    return this.findByOrganization(organizationId, {\n      where: [\n        { field: 'category', operator: '==', value: category },\n        { field: 'enabled', operator: '==', value: true }\n      ],\n      orderBy: [{ field: 'priority', direction: 'desc' }]\n    });\n  }\n\n  /**\n   * Find rules applicable to document type\n   */\n  async findByDocumentType(organizationId: string, documentType: string): Promise<AnalysisRule[]> {\n    return this.findByOrganization(organizationId, {\n      where: [\n        { field: 'appliesToDocumentTypes', operator: 'array-contains', value: documentType },\n        { field: 'enabled', operator: '==', value: true }\n      ]\n    });\n  }\n\n  /**\n   * Create rule for organization\n   */\n  async createForOrganization(organizationId: string, data: Partial<AnalysisRule>): Promise<AnalysisRule> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    const docRef = collection.doc();\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      organizationId,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate(createData);\n  }\n\n  /**\n   * Update rule performance stats\n   */\n  async updatePerformanceStats(\n    organizationId: string, \n    ruleId: string, \n    executionTime: number\n  ): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(organizationId)).doc(ruleId);\n    const doc = await docRef.get();\n    \n    if (doc.exists) {\n      const currentData = doc.data();\n      const currentCount = currentData?.performance?.executionCount || 0;\n      const currentAverage = currentData?.performance?.averageExecutionTime || 0;\n      \n      // Calculate new average\n      const newAverage = (currentAverage * currentCount + executionTime) / (currentCount + 1);\n      \n      await docRef.update({\n        'performance.executionCount': currentCount + 1,\n        'performance.averageExecutionTime': newAverage,\n        'performance.lastExecuted': new Date(),\n        updatedAt: new Date()\n      });\n    }\n  }\n}\n\n/**\n * Custom Parameters Repository (üöÄ CORE DIFFERENTIATOR)\n */\nexport class CustomParametersRepository extends BaseRepository<CustomParameters> {\n  constructor(db: Firestore) {\n    super(db, 'custom_params', CustomParametersSchema);\n  }\n\n  /**\n   * Get full collection path for organization parameters\n   */\n  protected getCollectionPath(organizationId: string): string {\n    return `organizations/${organizationId}/${ORGANIZATION_COLLECTIONS.CUSTOM_PARAMS}`;\n  }\n\n  /**\n   * Find parameters by organization\n   */\n  async findByOrganization(organizationId: string): Promise<CustomParameters[]> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    const query = collection.orderBy('createdAt', 'desc');\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find active parameters\n   */\n  async findActive(organizationId: string): Promise<CustomParameters[]> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    const query = collection.where('status', '==', 'ACTIVE').orderBy('createdAt', 'desc');\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find default parameters for organization\n   */\n  async findDefault(organizationId: string): Promise<CustomParameters | null> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    const query = collection.where('isDefault', '==', true).limit(1);\n    \n    const snapshot = await query.get();\n    if (snapshot.empty) return null;\n    \n    const doc = snapshot.docs[0];\n    const data = this.convertTimestamps(doc.data());\n    return this.validate({ ...data, id: doc.id });\n  }\n\n  /**\n   * Create parameters for organization\n   */\n  async createForOrganization(organizationId: string, data: Partial<CustomParameters>): Promise<CustomParameters> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    const docRef = collection.doc();\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      organizationId,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate(createData);\n  }\n\n  /**\n   * Set as default parameters\n   */\n  async setAsDefault(organizationId: string, parametersId: string): Promise<void> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    \n    // First, unset all current defaults\n    const currentDefaults = await collection.where('isDefault', '==', true).get();\n    const batch = this.db.batch();\n    \n    currentDefaults.forEach(doc => {\n      batch.update(doc.ref, { isDefault: false, updatedAt: new Date() });\n    });\n    \n    // Set new default\n    const newDefaultRef = collection.doc(parametersId);\n    batch.update(newDefaultRef, { isDefault: true, updatedAt: new Date() });\n    \n    await batch.commit();\n  }\n\n  /**\n   * Update usage statistics\n   */\n  async updateUsageStats(organizationId: string, parametersId: string, analysisTime: number): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(organizationId)).doc(parametersId);\n    const doc = await docRef.get();\n    \n    if (doc.exists) {\n      const currentData = doc.data();\n      const currentCount = currentData?.usage?.documentsAnalyzed || 0;\n      const currentTotal = currentData?.usage?.totalAnalysisTime || 0;\n      \n      await docRef.update({\n        'usage.documentsAnalyzed': currentCount + 1,\n        'usage.totalAnalysisTime': currentTotal + analysisTime,\n        'usage.lastUsed': new Date(),\n        updatedAt: new Date()\n      });\n    }\n  }\n}\n\n/**\n * Organization User Repository\n */\nexport class OrganizationUserRepository extends BaseRepository<OrganizationUser> {\n  constructor(db: Firestore) {\n    super(db, 'users', OrganizationUserSchema);\n  }\n\n  /**\n   * Get full collection path for organization users\n   */\n  protected getCollectionPath(organizationId: string): string {\n    return `organizations/${organizationId}/${ORGANIZATION_COLLECTIONS.USERS}`;\n  }\n\n  /**\n   * Find users by organization\n   */\n  async findByOrganization(organizationId: string, options: QueryOptions = {}): Promise<OrganizationUser[]> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    let query = collection.orderBy('createdAt', 'desc');\n    \n    if (options.where) {\n      options.where.forEach(condition => {\n        query = query.where(condition.field, condition.operator, condition.value) as any;\n      });\n    }\n    \n    if (options.limit) {\n      query = query.limit(options.limit) as any;\n    }\n    \n    const snapshot = await query.get();\n    return snapshot.docs.map(doc => {\n      const data = this.convertTimestamps(doc.data());\n      return this.validate({ ...data, id: doc.id });\n    });\n  }\n\n  /**\n   * Find user by UID\n   */\n  async findByUID(organizationId: string, uid: string): Promise<OrganizationUser | null> {\n    const results = await this.findByOrganization(organizationId, {\n      where: [{ field: 'uid', operator: '==', value: uid }],\n      limit: 1\n    });\n    \n    return results.length > 0 ? results[0] : null;\n  }\n\n  /**\n   * Find users by role\n   */\n  async findByRole(organizationId: string, role: string): Promise<OrganizationUser[]> {\n    return this.findByOrganization(organizationId, {\n      where: [{ field: 'role', operator: '==', value: role }]\n    });\n  }\n\n  /**\n   * Find active users\n   */\n  async findActive(organizationId: string): Promise<OrganizationUser[]> {\n    return this.findByOrganization(organizationId, {\n      where: [{ field: 'status', operator: '==', value: 'ACTIVE' }]\n    });\n  }\n\n  /**\n   * Create user for organization\n   */\n  async createForOrganization(organizationId: string, data: Partial<OrganizationUser>): Promise<OrganizationUser> {\n    const collection = this.db.collection(this.getCollectionPath(organizationId));\n    const docRef = collection.doc();\n    \n    const createData = {\n      ...data,\n      id: docRef.id,\n      organizationId,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    const prepared = this.prepareForStorage(createData);\n    await docRef.set(prepared);\n    \n    return this.validate(createData);\n  }\n\n  /**\n   * Update user activity\n   */\n  async updateActivity(organizationId: string, userId: string): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(organizationId)).doc(userId);\n    \n    await docRef.update({\n      'activity.lastLogin': new Date(),\n      updatedAt: new Date()\n    });\n  }\n\n  /**\n   * Update user permissions\n   */\n  async updatePermissions(organizationId: string, userId: string, permissions: string[]): Promise<void> {\n    const docRef = this.db.collection(this.getCollectionPath(organizationId)).doc(userId);\n    \n    await docRef.update({\n      permissions,\n      updatedAt: new Date()\n    });\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/schemas/analysis.schema.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Timestamp' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Firestore Schema: Analysis Collection\n * \n * Collection: /analyses/{analysisId}/\n * Structure for independent analysis records and history\n */\n\nimport { z } from 'zod';\nimport { Timestamp } from 'firebase-admin/firestore';\n\n// Analysis Schema for independent analysis records\nexport const AnalysisSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  documentId: z.string(),\n  organizationId: z.string(),\n  userId: z.string(), // User who requested the analysis\n  \n  // Analysis Configuration\n  analysisType: z.enum(['FULL', 'QUICK', 'CUSTOM', 'COMPLIANCE_ONLY']),\n  configurationId: z.string(), // Custom parameters used\n  templateId: z.string().optional(),\n  \n  // Analysis Request Details\n  request: z.object({\n    priority: z.enum(['LOW', 'NORMAL', 'HIGH', 'URGENT']).default('NORMAL'),\n    options: z.object({\n      includeAI: z.boolean(),\n      generateRecommendations: z.boolean(),\n      detailedMetrics: z.boolean(),\n      customRules: z.array(z.string()) // Rule IDs\n    }),\n    webhook: z.string().url().optional(),\n    timeout: z.number().int().positive().default(300) // seconds\n  }),\n  \n  // Processing Information\n  processing: z.object({\n    status: z.enum(['PENDING', 'INITIALIZING', 'PROCESSING', 'COMPLETED', 'FAILED', 'CANCELLED', 'TIMEOUT']),\n    progress: z.number().min(0).max(100),\n    currentStep: z.string().optional(),\n    estimatedTimeRemaining: z.number().optional(), // seconds\n    \n    // Timestamps\n    startedAt: z.date().optional(),\n    completedAt: z.date().optional(),\n    \n    // Processing Metrics\n    metrics: z.object({\n      totalProcessingTime: z.number().optional(), // milliseconds\n      preprocessingTime: z.number().optional(),\n      analysisTime: z.number().optional(),\n      postprocessingTime: z.number().optional(),\n      \n      // Resource Usage\n      cpuTime: z.number().optional(),\n      memoryUsed: z.number().optional(), // bytes\n      apiCallsCount: z.number().int().min(0).optional(),\n      \n      // Analysis Specific\n      rulesProcessed: z.number().int().min(0).optional(),\n      sectionsAnalyzed: z.number().int().min(0).optional(),\n      patternsMatched: z.number().int().min(0).optional()\n    }).optional(),\n    \n    // Error Information\n    error: z.object({\n      code: z.string(),\n      message: z.string(),\n      details: z.record(z.any()).optional(),\n      stack: z.string().optional(),\n      retryCount: z.number().int().min(0).default(0)\n    }).optional()\n  }),\n  \n  // Analysis Results (when completed)\n  results: z.object({\n    // Overall Scores\n    scores: z.object({\n      overall: z.number().min(0).max(100),\n      \n      // Category Scores\n      structural: z.number().min(0).max(100),\n      legal: z.number().min(0).max(100),\n      clarity: z.number().min(0).max(100),\n      abnt: z.number().min(0).max(100),\n      \n      // Weighted Scores (using organization weights)\n      weightedStructural: z.number().min(0).max(100),\n      weightedLegal: z.number().min(0).max(100),\n      weightedClarity: z.number().min(0).max(100),\n      weightedAbnt: z.number().min(0).max(100),\n      \n      // Confidence Metrics\n      confidence: z.number().min(0).max(1),\n      reliability: z.number().min(0).max(1).optional()\n    }),\n    \n    // Problems Found\n    problems: z.array(z.object({\n      id: z.string(),\n      ruleId: z.string().optional(),\n      category: z.enum(['ESTRUTURAL', 'JURIDICO', 'CLAREZA', 'ABNT', 'CONFORMIDADE', 'COMPLETUDE']),\n      severity: z.enum(['CRITICA', 'ALTA', 'MEDIA', 'BAIXA']),\n      \n      // Problem Details\n      title: z.string(),\n      description: z.string(),\n      suggestion: z.string().optional(),\n      \n      // Location Information\n      location: z.object({\n        page: z.number().int().positive().optional(),\n        paragraph: z.number().int().positive().optional(),\n        section: z.string().optional(),\n        startPosition: z.number().int().optional(),\n        endPosition: z.number().int().optional(),\n        context: z.string().optional() // Surrounding text\n      }).optional(),\n      \n      // Impact and Confidence\n      impact: z.number().min(0).max(10),\n      confidence: z.number().min(0).max(1),\n      autoFixAvailable: z.boolean().default(false),\n      \n      // Status\n      status: z.enum(['OPEN', 'ACKNOWLEDGED', 'FIXED', 'IGNORED', 'FALSE_POSITIVE']).default('OPEN'),\n      resolvedBy: z.string().optional(),\n      resolvedAt: z.date().optional(),\n      resolution: z.string().optional()\n    })),\n    \n    // Recommendations\n    recommendations: z.array(z.object({\n      id: z.string(),\n      title: z.string(),\n      description: z.string(),\n      priority: z.enum(['LOW', 'MEDIUM', 'HIGH', 'CRITICAL']),\n      category: z.string(),\n      \n      // Action Information\n      actionRequired: z.string(),\n      estimatedEffort: z.string().optional(), // \"5 minutes\", \"1 hour\", etc.\n      \n      // Expected Impact\n      expectedImprovement: z.number().min(0).max(100).optional(),\n      complianceImprovement: z.boolean().default(false)\n    })),\n    \n    // Compliance Information\n    compliance: z.object({\n      overallCompliance: z.number().min(0).max(100),\n      requiredItems: z.array(z.object({\n        item: z.string(),\n        present: z.boolean(),\n        location: z.string().optional(),\n        notes: z.string().optional()\n      })),\n      missingRequirements: z.array(z.string()),\n      additionalNotes: z.string().optional()\n    }).optional(),\n    \n    // Quality Metrics\n    quality: z.object({\n      readability: z.number().min(0).max(100),\n      consistency: z.number().min(0).max(100),\n      completeness: z.number().min(0).max(100),\n      clarity: z.number().min(0).max(100),\n      \n      // Text Statistics\n      averageSentenceLength: z.number().optional(),\n      complexWordsPercentage: z.number().min(0).max(100).optional(),\n      passiveVoicePercentage: z.number().min(0).max(100).optional(),\n      \n      // Document Statistics\n      wordCount: z.number().int().min(0),\n      sentenceCount: z.number().int().min(0),\n      paragraphCount: z.number().int().min(0)\n    }).optional(),\n    \n    // Executive Summary\n    executiveSummary: z.object({\n      overallAssessment: z.string(),\n      keyFindings: z.array(z.string()),\n      keyRisks: z.array(z.string()),\n      priorityRecommendations: z.array(z.string()),\n      nextSteps: z.array(z.string()),\n      conclusion: z.string()\n    }).optional()\n  }).optional(),\n  \n  // Analysis Engine Information\n  engine: z.object({\n    name: z.string().default('licitareview-v2'),\n    version: z.string().default('2.0.0'),\n    cloudRunEndpoint: z.string().url().optional(),\n    fallbackUsed: z.boolean().default(false),\n    cacheHit: z.boolean().default(false)\n  }),\n  \n  // Audit and Metadata\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  \n  // Additional Metadata\n  metadata: z.record(z.any()).optional(),\n  tags: z.array(z.string()).default([])\n});\n\n// Analysis History Entry Schema\nexport const AnalysisHistoryEntrySchema = z.object({\n  id: z.string(),\n  analysisId: z.string(),\n  documentId: z.string(),\n  organizationId: z.string(),\n  \n  // Change Information\n  changeType: z.enum(['STATUS_CHANGE', 'PROGRESS_UPDATE', 'ERROR_OCCURRED', 'RESULT_UPDATED', 'CANCELLED']),\n  previousValue: z.any().optional(),\n  newValue: z.any().optional(),\n  \n  // Context\n  description: z.string(),\n  triggeredBy: z.string(), // User ID or system\n  \n  // Timestamps\n  timestamp: z.date(),\n  \n  // Additional Data\n  metadata: z.record(z.any()).optional()\n});\n\n// Analysis Statistics Schema\nexport const AnalysisStatisticsSchema = z.object({\n  id: z.string(),\n  organizationId: z.string(),\n  period: z.enum(['DAILY', 'WEEKLY', 'MONTHLY', 'YEARLY']),\n  \n  // Time Range\n  startDate: z.date(),\n  endDate: z.date(),\n  \n  // Analysis Counts\n  totalAnalyses: z.number().int().min(0),\n  completedAnalyses: z.number().int().min(0),\n  failedAnalyses: z.number().int().min(0),\n  cancelledAnalyses: z.number().int().min(0),\n  \n  // Performance Metrics\n  averageProcessingTime: z.number().min(0), // seconds\n  averageScore: z.number().min(0).max(100),\n  \n  // Score Distribution\n  scoreDistribution: z.object({\n    excellent: z.number().int().min(0), // 90-100\n    good: z.number().int().min(0),      // 75-89\n    acceptable: z.number().int().min(0), // 60-74\n    poor: z.number().int().min(0),      // 40-59\n    critical: z.number().int().min(0)   // 0-39\n  }),\n  \n  // Common Issues\n  commonProblems: z.array(z.object({\n    category: z.string(),\n    type: z.string(),\n    count: z.number().int().min(0),\n    percentage: z.number().min(0).max(100)\n  })),\n  \n  // Usage Patterns\n  analysisTypeDistribution: z.record(z.number().int().min(0)),\n  peakUsageHours: z.array(z.number().int().min(0).max(23)),\n  \n  // Generated timestamp\n  generatedAt: z.date(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional()\n});\n\n// Type exports\nexport type Analysis = z.infer<typeof AnalysisSchema>;\nexport type AnalysisHistoryEntry = z.infer<typeof AnalysisHistoryEntrySchema>;\nexport type AnalysisStatistics = z.infer<typeof AnalysisStatisticsSchema>;\n\n// Collection constants\nexport const ANALYSIS_COLLECTIONS = {\n  ANALYSES: 'analyses',\n  HISTORY: 'analysis_history',\n  STATISTICS: 'analysis_statistics'\n} as const;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/schemas/document.schema.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Timestamp' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Firestore Schema: Documents Collection\n * \n * Collection: /documents/{docId}/\n * Structure for document-level data including metadata, analyses, versions, and comments\n */\n\nimport { z } from 'zod';\nimport { Timestamp } from 'firebase-admin/firestore';\n\n// Document Metadata Schema\nexport const DocumentMetadataSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  organizationId: z.string(),\n  title: z.string().min(1, 'Document title is required'),\n  description: z.string().optional(),\n  \n  // Document Classification\n  documentType: z.enum([\n    'EDITAL',\n    'TERMO_REFERENCIA',\n    'ATA_SESSAO', \n    'CONTRATO',\n    'PROJETO_BASICO',\n    'RECURSO',\n    'IMPUGNACAO',\n    'ESCLARECIMENTO'\n  ]),\n  category: z.string().optional(),\n  subcategory: z.string().optional(),\n  \n  // File Information\n  file: z.object({\n    originalName: z.string(),\n    filename: z.string(), // Stored filename\n    mimeType: z.string(),\n    size: z.number().int().positive(),\n    extension: z.string(),\n    \n    // Storage Information\n    storagePath: z.string(),\n    downloadURL: z.string().url(),\n    \n    // File Processing\n    checksum: z.string().optional(), // MD5 or SHA256\n    encoding: z.string().optional(),\n    \n    // OCR Results\n    extractedText: z.string().optional(),\n    ocrConfidence: z.number().min(0).max(1).optional(),\n    pageCount: z.number().int().min(1).optional()\n  }),\n  \n  // Document Status\n  status: z.enum([\n    'UPLOADED',\n    'PROCESSING', \n    'ANALYZED',\n    'UNDER_REVIEW',\n    'APPROVED',\n    'REJECTED',\n    'ARCHIVED',\n    'DELETED'\n  ]).default('UPLOADED'),\n  \n  // Processing Information\n  processing: z.object({\n    currentStep: z.string().optional(),\n    progress: z.number().min(0).max(100).default(0),\n    startedAt: z.date().optional(),\n    completedAt: z.date().optional(),\n    estimatedCompletion: z.date().optional(),\n    \n    // Error Handling\n    errors: z.array(z.object({\n      code: z.string(),\n      message: z.string(),\n      timestamp: z.date(),\n      step: z.string().optional()\n    })).default([]),\n    \n    // Processing Metrics\n    metrics: z.object({\n      ocrTime: z.number().optional(), // milliseconds\n      analysisTime: z.number().optional(),\n      totalProcessingTime: z.number().optional()\n    }).optional()\n  }).optional(),\n  \n  // Template Reference\n  templateId: z.string().optional(),\n  templateVersion: z.string().optional(),\n  \n  // Tags & Classification\n  tags: z.array(z.string()).default([]),\n  keywords: z.array(z.string()).default([]),\n  \n  // Compliance & Legal\n  compliance: z.object({\n    requiredByLaw: z.boolean().default(false),\n    legalBasis: z.array(z.string()).default([]), // Legal references\n    complianceStatus: z.enum(['COMPLIANT', 'NON_COMPLIANT', 'PARTIAL', 'UNDER_REVIEW']).optional(),\n    expirationDate: z.date().optional(),\n    retentionPeriod: z.number().int().positive().optional() // days\n  }).optional(),\n  \n  // Workflow Information\n  workflow: z.object({\n    currentStage: z.string().optional(),\n    assignedTo: z.string().optional(), // User ID\n    dueDate: z.date().optional(),\n    priority: z.enum(['LOW', 'NORMAL', 'HIGH', 'URGENT']).default('NORMAL'),\n    \n    // Approval Chain\n    approvers: z.array(z.object({\n      userId: z.string(),\n      role: z.string(),\n      required: z.boolean(),\n      approvedAt: z.date().optional(),\n      comments: z.string().optional()\n    })).default([])\n  }).optional(),\n  \n  // Statistics\n  statistics: z.object({\n    viewCount: z.number().int().min(0).default(0),\n    downloadCount: z.number().int().min(0).default(0),\n    analysisCount: z.number().int().min(0).default(0),\n    commentCount: z.number().int().min(0).default(0),\n    shareCount: z.number().int().min(0).default(0),\n    \n    // Timing Statistics\n    averageReviewTime: z.number().optional(), // minutes\n    lastViewed: z.date().optional(),\n    lastDownloaded: z.date().optional()\n  }).optional(),\n  \n  // Security & Access\n  security: z.object({\n    accessLevel: z.enum(['PUBLIC', 'INTERNAL', 'RESTRICTED', 'CONFIDENTIAL']).default('INTERNAL'),\n    encryptionStatus: z.boolean().default(false),\n    \n    // Access Control\n    allowedRoles: z.array(z.string()).default([]),\n    allowedUsers: z.array(z.string()).default([]),\n    \n    // Audit Requirements\n    auditRequired: z.boolean().default(false),\n    dataClassification: z.string().optional()\n  }).optional(),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  lastModifiedBy: z.string().optional(),\n  \n  // Version Control\n  version: z.string().default('1.0.0'),\n  parentDocumentId: z.string().optional(), // For document revisions\n  \n  // Metadata\n  metadata: z.record(z.any()).optional()\n});\n\n// Analysis Result Schema\nexport const AnalysisResultSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  documentId: z.string(),\n  organizationId: z.string(),\n  \n  // Analysis Configuration\n  analysisType: z.enum(['FULL', 'QUICK', 'CUSTOM', 'COMPLIANCE_ONLY']),\n  configurationId: z.string(), // Custom parameters used\n  templateId: z.string().optional(),\n  \n  // üöÄ CORE: Weighted Scoring System\n  scores: z.object({\n    overall: z.number().min(0).max(100),\n    \n    // Category Scores\n    structural: z.number().min(0).max(100),\n    legal: z.number().min(0).max(100),\n    clarity: z.number().min(0).max(100),\n    abnt: z.number().min(0).max(100),\n    \n    // Weighted Scores (using organization weights)\n    weightedStructural: z.number().min(0).max(100),\n    weightedLegal: z.number().min(0).max(100),\n    weightedClarity: z.number().min(0).max(100),\n    weightedAbnt: z.number().min(0).max(100),\n    \n    // Confidence Metrics\n    confidence: z.number().min(0).max(1),\n    reliability: z.number().min(0).max(1).optional()\n  }),\n  \n  // Analysis Results\n  results: z.object({\n    // Problems Found\n    problems: z.array(z.object({\n      id: z.string(),\n      ruleId: z.string().optional(),\n      category: z.enum(['ESTRUTURAL', 'JURIDICO', 'CLAREZA', 'ABNT', 'CONFORMIDADE', 'COMPLETUDE']),\n      severity: z.enum(['CRITICA', 'ALTA', 'MEDIA', 'BAIXA']),\n      \n      // Problem Details\n      title: z.string(),\n      description: z.string(),\n      suggestion: z.string().optional(),\n      \n      // Location Information\n      location: z.object({\n        page: z.number().int().positive().optional(),\n        paragraph: z.number().int().positive().optional(),\n        section: z.string().optional(),\n        startPosition: z.number().int().optional(),\n        endPosition: z.number().int().optional(),\n        context: z.string().optional() // Surrounding text\n      }).optional(),\n      \n      // Problem Metadata\n      impact: z.number().min(0).max(10),\n      confidence: z.number().min(0).max(1),\n      autoFixAvailable: z.boolean().default(false),\n      \n      // Resolution\n      status: z.enum(['OPEN', 'ACKNOWLEDGED', 'FIXED', 'IGNORED', 'FALSE_POSITIVE']).default('OPEN'),\n      resolvedBy: z.string().optional(),\n      resolvedAt: z.date().optional(),\n      resolution: z.string().optional()\n    })),\n    \n    // Recommendations\n    recommendations: z.array(z.object({\n      id: z.string(),\n      title: z.string(),\n      description: z.string(),\n      priority: z.enum(['LOW', 'MEDIUM', 'HIGH', 'CRITICAL']),\n      category: z.string(),\n      \n      // Implementation\n      actionRequired: z.string(),\n      estimatedEffort: z.string().optional(), // \"5 minutes\", \"1 hour\", etc.\n      \n      // Benefits\n      expectedImprovement: z.number().min(0).max(100).optional(),\n      complianceImprovement: z.boolean().default(false)\n    })),\n    \n    // Compliance Check\n    compliance: z.object({\n      overallCompliance: z.number().min(0).max(100),\n      requiredItems: z.array(z.object({\n        item: z.string(),\n        present: z.boolean(),\n        location: z.string().optional(),\n        notes: z.string().optional()\n      })),\n      missingRequirements: z.array(z.string()),\n      additionalNotes: z.string().optional()\n    }).optional(),\n    \n    // Quality Metrics\n    quality: z.object({\n      readability: z.number().min(0).max(100),\n      consistency: z.number().min(0).max(100),\n      completeness: z.number().min(0).max(100),\n      clarity: z.number().min(0).max(100),\n      \n      // Detailed Metrics\n      averageSentenceLength: z.number().optional(),\n      complexWordsPercentage: z.number().min(0).max(100).optional(),\n      passiveVoicePercentage: z.number().min(0).max(100).optional(),\n      \n      // Text Statistics\n      wordCount: z.number().int().min(0),\n      sentenceCount: z.number().int().min(0),\n      paragraphCount: z.number().int().min(0)\n    }).optional()\n  }),\n  \n  // Analysis Metadata\n  analysis: z.object({\n    // Timing Information\n    startedAt: z.date(),\n    completedAt: z.date(),\n    duration: z.number().min(0), // milliseconds\n    \n    // Processing Details\n    engine: z.string().default('licitareview-v1'),\n    engineVersion: z.string().default('1.0.0'),\n    \n    // Resource Usage\n    resourceUsage: z.object({\n      cpuTime: z.number().optional(), // milliseconds\n      memoryUsed: z.number().optional(), // bytes\n      apiCallsCount: z.number().int().min(0).optional()\n    }).optional(),\n    \n    // Analysis Statistics\n    rulesApplied: z.number().int().min(0),\n    patternsMatched: z.number().int().min(0),\n    sectionsAnalyzed: z.number().int().min(0)\n  }),\n  \n  // Status\n  status: z.enum(['RUNNING', 'COMPLETED', 'FAILED', 'CANCELLED']).default('RUNNING'),\n  \n  // Error Information\n  error: z.object({\n    code: z.string(),\n    message: z.string(),\n    details: z.record(z.any()).optional(),\n    stack: z.string().optional()\n  }).optional(),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  createdBy: z.string()\n});\n\n// Document Version Schema\nexport const DocumentVersionSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  documentId: z.string(),\n  versionNumber: z.string(), // e.g., \"1.0.0\", \"1.1.0\"\n  \n  // Version Details\n  title: z.string().optional(),\n  description: z.string().optional(),\n  changeLog: z.string().optional(),\n  \n  // File Information\n  file: z.object({\n    filename: z.string(),\n    size: z.number().int().positive(),\n    checksum: z.string(),\n    storagePath: z.string(),\n    downloadURL: z.string().url()\n  }),\n  \n  // Version Type\n  versionType: z.enum(['MAJOR', 'MINOR', 'PATCH', 'DRAFT']),\n  \n  // Comparison Data\n  changes: z.object({\n    addedSections: z.array(z.string()).default([]),\n    modifiedSections: z.array(z.string()).default([]),\n    deletedSections: z.array(z.string()).default([]),\n    \n    // Text Changes\n    addedText: z.number().int().min(0).default(0), // characters\n    deletedText: z.number().int().min(0).default(0),\n    modifiedText: z.number().int().min(0).default(0),\n    \n    // Change Summary\n    changePercentage: z.number().min(0).max(100).optional(),\n    significantChanges: z.boolean().default(false)\n  }).optional(),\n  \n  // Status\n  status: z.enum(['DRAFT', 'PUBLISHED', 'ARCHIVED', 'DEPRECATED']).default('DRAFT'),\n  isActive: z.boolean().default(false), // Only one version can be active\n  \n  // Approval Information\n  approval: z.object({\n    required: z.boolean().default(false),\n    approvedBy: z.string().optional(),\n    approvedAt: z.date().optional(),\n    approvalNotes: z.string().optional()\n  }).optional(),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional()\n});\n\n// Review Comment Schema\nexport const ReviewCommentSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  documentId: z.string(),\n  organizationId: z.string(),\n  \n  // Comment Details\n  content: z.string().min(1, 'Comment content is required'),\n  type: z.enum(['GENERAL', 'SUGGESTION', 'ISSUE', 'APPROVAL', 'QUESTION']),\n  \n  // Location Information\n  location: z.object({\n    page: z.number().int().positive().optional(),\n    section: z.string().optional(),\n    paragraph: z.number().int().positive().optional(),\n    \n    // Text Selection\n    startPosition: z.number().int().optional(),\n    endPosition: z.number().int().optional(),\n    selectedText: z.string().optional(),\n    \n    // Visual Coordinates (for annotations)\n    coordinates: z.object({\n      x: z.number(),\n      y: z.number(),\n      width: z.number().optional(),\n      height: z.number().optional()\n    }).optional()\n  }).optional(),\n  \n  // Threading\n  parentCommentId: z.string().optional(), // For reply threads\n  threadId: z.string().optional(),\n  \n  // Status & Resolution\n  status: z.enum(['OPEN', 'RESOLVED', 'ACKNOWLEDGED', 'DISMISSED']).default('OPEN'),\n  priority: z.enum(['LOW', 'NORMAL', 'HIGH', 'URGENT']).default('NORMAL'),\n  \n  // Resolution Information\n  resolution: z.object({\n    resolvedBy: z.string(),\n    resolvedAt: z.date(),\n    resolution: z.string(),\n    actionTaken: z.string().optional()\n  }).optional(),\n  \n  // Metadata\n  visibility: z.enum(['PUBLIC', 'INTERNAL', 'PRIVATE']).default('INTERNAL'),\n  mentions: z.array(z.string()).default([]), // User IDs mentioned\n  attachments: z.array(z.object({\n    filename: z.string(),\n    url: z.string(),\n    size: z.number().int().positive(),\n    mimeType: z.string()\n  })).default([]),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  lastModifiedBy: z.string().optional(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional()\n});\n\n// Type exports\nexport type DocumentMetadata = z.infer<typeof DocumentMetadataSchema>;\nexport type AnalysisResult = z.infer<typeof AnalysisResultSchema>;\nexport type DocumentVersion = z.infer<typeof DocumentVersionSchema>;\nexport type ReviewComment = z.infer<typeof ReviewCommentSchema>;\n\n// Collection References\nexport const DOCUMENT_COLLECTIONS = {\n  METADATA: 'metadata',\n  ANALYSES: 'analyses',\n  VERSIONS: 'versions',\n  COMMENTS: 'comments'\n} as const;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/db/schemas/organization.schema.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Timestamp' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Firestore Schema: Organizations Collection\n * \n * Collection: /organizations/{orgId}/\n * Structure for organization-level data including profile, templates, rules, and parameters\n */\n\nimport { z } from 'zod';\nimport { Timestamp } from 'firebase-admin/firestore';\n\n// Base Organization Profile Schema\nexport const OrganizationProfileSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  name: z.string().min(1, 'Organization name is required'),\n  displayName: z.string().optional(),\n  description: z.string().optional(),\n  \n  // Government Information\n  cnpj: z.string().regex(/^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/, 'Invalid CNPJ format'),\n  governmentLevel: z.enum(['FEDERAL', 'ESTADUAL', 'MUNICIPAL']),\n  organizationType: z.enum([\n    'TRIBUNAL_CONTAS',\n    'PREFEITURA', \n    'GOVERNO_ESTADUAL',\n    'MINISTERIO',\n    'AUTARQUIA',\n    'FUNDACAO',\n    'EMPRESA_PUBLICA',\n    'OUTROS'\n  ]),\n  \n  // Contact Information\n  contact: z.object({\n    email: z.string().email(),\n    phone: z.string().optional(),\n    website: z.string().url().optional(),\n    address: z.object({\n      street: z.string(),\n      city: z.string(),\n      state: z.string(),\n      zipCode: z.string(),\n      country: z.string().default('BR')\n    }).optional()\n  }),\n  \n  // Settings\n  settings: z.object({\n    timezone: z.string().default('America/Sao_Paulo'),\n    language: z.string().default('pt-BR'),\n    defaultAnalysisPreset: z.enum(['RIGOROUS', 'STANDARD', 'TECHNICAL', 'FAST', 'CUSTOM']).default('STANDARD'),\n    enableAIAnalysis: z.boolean().default(true),\n    enableCustomRules: z.boolean().default(true),\n    strictMode: z.boolean().default(false),\n    autoApproval: z.boolean().default(false),\n    requireDualApproval: z.boolean().default(false),\n    retentionDays: z.number().int().positive().default(365),\n    maxDocumentSize: z.number().positive().default(52428800), // 50MB\n    allowedDocumentTypes: z.array(z.string()).default(['pdf', 'doc', 'docx'])\n  }),\n  \n  // Status & Metadata\n  status: z.enum(['ACTIVE', 'INACTIVE', 'SUSPENDED', 'PENDING_APPROVAL']).default('PENDING_APPROVAL'),\n  subscriptionTier: z.enum(['FREE', 'BASIC', 'PREMIUM', 'ENTERPRISE']).default('FREE'),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  lastModifiedBy: z.string().optional(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional(),\n  tags: z.array(z.string()).default([])\n});\n\n// Document Template Schema\nexport const DocumentTemplateSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  organizationId: z.string(),\n  name: z.string().min(1, 'Template name is required'),\n  description: z.string().optional(),\n  version: z.string().default('1.0.0'),\n  \n  // Template Configuration\n  documentType: z.enum([\n    'EDITAL',\n    'TERMO_REFERENCIA', \n    'ATA_SESSAO',\n    'CONTRATO',\n    'PROJETO_BASICO',\n    'RECURSO',\n    'IMPUGNACAO',\n    'ESCLARECIMENTO'\n  ]),\n  \n  // Template Structure\n  sections: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string().optional(),\n    order: z.number().int().min(0),\n    required: z.boolean().default(false),\n    \n    // Field Definitions\n    fields: z.array(z.object({\n      id: z.string(),\n      name: z.string(),\n      type: z.enum(['TEXT', 'NUMBER', 'DATE', 'BOOLEAN', 'SELECT', 'MULTISELECT', 'FILE']),\n      required: z.boolean().default(false),\n      description: z.string().optional(),\n      placeholder: z.string().optional(),\n      validation: z.object({\n        minLength: z.number().optional(),\n        maxLength: z.number().optional(),\n        pattern: z.string().optional(),\n        min: z.number().optional(),\n        max: z.number().optional(),\n        options: z.array(z.string()).optional()\n      }).optional(),\n      defaultValue: z.any().optional()\n    })),\n    \n    // Validation Rules for Section\n    validationRules: z.array(z.string()).default([]),\n    conditionalLogic: z.record(z.any()).optional()\n  })),\n  \n  // Template Rules\n  analysisRules: z.array(z.string()).default([]), // References to analysis rule IDs\n  requiredFields: z.array(z.string()).default([]),\n  \n  // Status & Metadata  \n  status: z.enum(['DRAFT', 'ACTIVE', 'ARCHIVED', 'DEPRECATED']).default('DRAFT'),\n  isDefault: z.boolean().default(false),\n  isPublic: z.boolean().default(false), // Can be shared with other orgs\n  \n  // Usage Statistics\n  usage: z.object({\n    documentsCreated: z.number().int().min(0).default(0),\n    lastUsed: z.date().optional(),\n    averageCompletionTime: z.number().optional() // in minutes\n  }).optional(),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  lastModifiedBy: z.string().optional(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional(),\n  tags: z.array(z.string()).default([])\n});\n\n// Analysis Rule Schema  \nexport const AnalysisRuleSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  organizationId: z.string(),\n  name: z.string().min(1, 'Rule name is required'),\n  description: z.string(),\n  \n  // Rule Configuration\n  category: z.enum(['ESTRUTURAL', 'JURIDICO', 'CLAREZA', 'ABNT', 'CONFORMIDADE', 'COMPLETUDE']),\n  severity: z.enum(['CRITICA', 'ALTA', 'MEDIA', 'BAIXA']),\n  \n  // Pattern Matching\n  pattern: z.string(), // Regex or keyword pattern\n  patternType: z.enum(['regex', 'keyword', 'phrase', 'nlp']).default('regex'),\n  caseSensitive: z.boolean().default(false),\n  \n  // Rule Logic\n  condition: z.object({\n    type: z.enum(['CONTAINS', 'NOT_CONTAINS', 'MATCHES', 'NOT_MATCHES', 'CUSTOM']),\n    value: z.string(),\n    flags: z.array(z.string()).optional()\n  }),\n  \n  // Action Configuration\n  action: z.object({\n    type: z.enum(['FLAG', 'SUGGEST', 'AUTO_FIX', 'BLOCK']),\n    message: z.string(),\n    suggestion: z.string().optional(),\n    autoFixTemplate: z.string().optional()\n  }),\n  \n  // Applicability\n  appliesToDocumentTypes: z.array(z.string()).optional(),\n  appliesToSections: z.array(z.string()).optional(),\n  \n  // Rule Weighting\n  weight: z.number().min(0).max(10).default(1),\n  priority: z.number().int().min(1).max(5).default(3),\n  \n  // Advanced Configuration\n  enabled: z.boolean().default(true),\n  testMode: z.boolean().default(false), // For testing rules without affecting scores\n  \n  // Performance & Statistics\n  performance: z.object({\n    executionCount: z.number().int().min(0).default(0),\n    averageExecutionTime: z.number().min(0).default(0), // milliseconds\n    falsePositiveRate: z.number().min(0).max(1).optional(),\n    lastExecuted: z.date().optional()\n  }).optional(),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  lastModifiedBy: z.string().optional(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional(),\n  tags: z.array(z.string()).default([])\n});\n\n// Custom Parameters Schema (üöÄ CORE DIFFERENTIATOR)\nexport const CustomParametersSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  organizationId: z.string(),\n  name: z.string().min(1, 'Configuration name is required'),\n  description: z.string().optional(),\n  version: z.string().default('1.0.0'),\n  \n  // Analysis Weights (Must sum to 100%)\n  weights: z.object({\n    structural: z.number().min(0).max(100),\n    legal: z.number().min(0).max(100), \n    clarity: z.number().min(0).max(100),\n    abnt: z.number().min(0).max(100)\n  }).refine(\n    (data) => {\n      const total = data.structural + data.legal + data.clarity + data.abnt;\n      return Math.abs(total - 100) < 0.01;\n    },\n    {\n      message: 'Analysis weights must sum to exactly 100%',\n      path: ['weights']\n    }\n  ),\n  \n  // Preset Configuration\n  presetType: z.enum(['RIGOROUS', 'STANDARD', 'TECHNICAL', 'FAST', 'CUSTOM']),\n  \n  // Scoring Thresholds\n  thresholds: z.object({\n    excellent: z.number().min(0).max(100).default(90),\n    good: z.number().min(0).max(100).default(75),\n    acceptable: z.number().min(0).max(100).default(60),\n    poor: z.number().min(0).max(100).default(40),\n    critical: z.number().min(0).max(100).default(25)\n  }),\n  \n  // Advanced Settings\n  advanced: z.object({\n    enableContextualAnalysis: z.boolean().default(true),\n    enableSemanticAnalysis: z.boolean().default(false),\n    strictCompliance: z.boolean().default(false),\n    autoCorrection: z.boolean().default(false),\n    \n    // Timeout Settings\n    analysisTimeout: z.number().int().min(30).max(600).default(300), // seconds\n    maxRetries: z.number().int().min(0).max(5).default(3),\n    \n    // Performance Settings\n    batchSize: z.number().int().min(1).max(100).default(10),\n    parallelProcessing: z.boolean().default(true)\n  }).optional(),\n  \n  // Referenced Rules\n  customRules: z.array(z.string()).default([]), // Array of rule IDs\n  \n  // Status & Usage\n  status: z.enum(['DRAFT', 'ACTIVE', 'ARCHIVED']).default('DRAFT'),\n  isDefault: z.boolean().default(false),\n  \n  // Usage Statistics\n  usage: z.object({\n    documentsAnalyzed: z.number().int().min(0).default(0),\n    totalAnalysisTime: z.number().min(0).default(0), // minutes\n    averageScore: z.number().min(0).max(100).optional(),\n    lastUsed: z.date().optional()\n  }).optional(),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  createdBy: z.string(),\n  lastModifiedBy: z.string().optional(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional(),\n  tags: z.array(z.string()).default([])\n});\n\n// Organization User Schema\nexport const OrganizationUserSchema = z.object({\n  // Basic Information\n  id: z.string(),\n  organizationId: z.string(),\n  uid: z.string(), // Firebase Auth UID\n  email: z.string().email(),\n  displayName: z.string().optional(),\n  photoURL: z.string().url().optional(),\n  \n  // Role & Permissions\n  role: z.enum(['OWNER', 'ADMIN', 'EDITOR', 'VIEWER', 'GUEST']),\n  permissions: z.array(z.enum([\n    'READ_DOCUMENTS',\n    'WRITE_DOCUMENTS', \n    'DELETE_DOCUMENTS',\n    'MANAGE_TEMPLATES',\n    'MANAGE_RULES',\n    'MANAGE_CONFIGS',\n    'MANAGE_USERS',\n    'VIEW_ANALYTICS',\n    'EXPORT_DATA',\n    'MANAGE_BILLING'\n  ])).default(['READ_DOCUMENTS']),\n  \n  // Status\n  status: z.enum(['ACTIVE', 'INACTIVE', 'PENDING_INVITATION', 'SUSPENDED']).default('PENDING_INVITATION'),\n  \n  // User Preferences\n  preferences: z.object({\n    language: z.string().default('pt-BR'),\n    timezone: z.string().default('America/Sao_Paulo'),\n    emailNotifications: z.boolean().default(true),\n    dashboardLayout: z.string().optional(),\n    defaultView: z.string().optional()\n  }).optional(),\n  \n  // Activity Tracking\n  activity: z.object({\n    lastLogin: z.date().optional(),\n    documentCount: z.number().int().min(0).default(0),\n    analysisCount: z.number().int().min(0).default(0),\n    averageSessionTime: z.number().min(0).optional() // minutes\n  }).optional(),\n  \n  // Audit Fields\n  createdAt: z.date().default(() => new Date()),\n  updatedAt: z.date().default(() => new Date()),\n  invitedBy: z.string().optional(),\n  invitedAt: z.date().optional(),\n  \n  // Metadata\n  metadata: z.record(z.any()).optional()\n});\n\n// Type exports\nexport type OrganizationProfile = z.infer<typeof OrganizationProfileSchema>;\nexport type DocumentTemplate = z.infer<typeof DocumentTemplateSchema>;\nexport type AnalysisRule = z.infer<typeof AnalysisRuleSchema>;\nexport type CustomParameters = z.infer<typeof CustomParametersSchema>;\nexport type OrganizationUser = z.infer<typeof OrganizationUserSchema>;\n\n// Collection References\nexport const ORGANIZATION_COLLECTIONS = {\n  PROFILE: 'profile',\n  TEMPLATES: 'templates',\n  ANALYSIS_RULES: 'analysis_rules',\n  CUSTOM_PARAMS: 'custom_params',\n  USERS: 'users'\n} as const;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/middleware/auth.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ErrorResponse' is defined but never used.","line":8,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorResponse' is defined but never used.","line":8,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":36},{"ruleId":"@typescript-eslint/no-namespace","severity":2,"message":"ES2015 module syntax is preferred over namespaces.","line":13,"column":3,"nodeType":"TSModuleDeclaration","messageId":"moduleSyntaxIsPreferred","endLine":18,"endColumn":4}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Authentication Middleware\n * LicitaReview Cloud Functions\n */\n\nimport { Request, Response, NextFunction } from \"express\";\nimport { auth } from \"../config/firebase\";\nimport { UserContext, ErrorResponse } from \"../types\";\nimport { createErrorResponse } from \"../utils\";\n\n// Extend Request type to include user context\ndeclare global {\n  namespace Express {\n    interface Request {\n      user?: UserContext;\n      requestId?: string;\n    }\n  }\n}\n\n/**\n * Verify Firebase ID Token and extract user context\n */\nexport const authenticateUser = async (\n  req: Request,\n  res: Response,\n  next: NextFunction\n): Promise<void> => {\n  try {\n    const authHeader = req.headers.authorization;\n    \n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n      res.status(401).json(createErrorResponse(\n        \"AUTH_MISSING_TOKEN\",\n        \"Missing or invalid authorization header\",\n        { expected: \"Bearer <token>\" },\n        req.requestId\n      ));\n      return;\n    }\n    \n    const token = authHeader.split(\"Bearer \")[1];\n    \n    try {\n      // Verify the Firebase ID token\n      const decodedToken = await auth.verifyIdToken(token);\n      \n      // Get user record for additional claims\n      const userRecord = await auth.getUser(decodedToken.uid);\n      \n      // Extract organization ID and roles from custom claims\n      const customClaims = userRecord.customClaims || {};\n      \n      // Set user context\n      req.user = {\n        uid: decodedToken.uid,\n        email: decodedToken.email,\n        organizationId: customClaims.organizationId || \"\",\n        roles: customClaims.roles || [\"user\"],\n        permissions: customClaims.permissions || []\n      };\n      \n      next();\n    } catch (tokenError) {\n      console.error(\"Token verification failed:\", tokenError);\n      res.status(401).json(createErrorResponse(\n        \"AUTH_INVALID_TOKEN\",\n        \"Invalid or expired token\",\n        { error: String(tokenError) },\n        req.requestId\n      ));\n      return;\n    }\n  } catch (error) {\n    console.error(\"Authentication middleware error:\", error);\n    res.status(500).json(createErrorResponse(\n      \"AUTH_FAILED\",\n      \"Authentication service error\",\n      { error: String(error) },\n      req.requestId\n    ));\n    return;\n  }\n};\n\n/**\n * Require specific roles\n */\nexport const requireRoles = (requiredRoles: string[]) => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    if (!req.user) {\n      res.status(401).json(createErrorResponse(\n        \"AUTH_USER_NOT_AUTHENTICATED\",\n        \"User not authenticated\",\n        undefined,\n        req.requestId\n      ));\n      return;\n    }\n    \n    const hasRequiredRole = requiredRoles.some(role => \n      req.user!.roles.includes(role)\n    );\n    \n    if (!hasRequiredRole) {\n      res.status(403).json(createErrorResponse(\n        \"AUTH_INSUFFICIENT_PERMISSIONS\",\n        \"Insufficient permissions\",\n        { \n          required: requiredRoles,\n          current: req.user.roles\n        },\n        req.requestId\n      ));\n      return;\n    }\n    \n    next();\n  };\n};\n\n/**\n * Require specific permissions\n */\nexport const requirePermissions = (requiredPermissions: string[]) => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    if (!req.user) {\n      res.status(401).json(createErrorResponse(\n        \"AUTH_USER_NOT_AUTHENTICATED\",\n        \"User not authenticated\",\n        undefined,\n        req.requestId\n      ));\n      return;\n    }\n    \n    const hasAllPermissions = requiredPermissions.every(permission =>\n      req.user!.permissions.includes(permission)\n    );\n    \n    if (!hasAllPermissions) {\n      res.status(403).json(createErrorResponse(\n        \"AUTH_MISSING_PERMISSIONS\",\n        \"Missing required permissions\",\n        {\n          required: requiredPermissions,\n          current: req.user.permissions\n        },\n        req.requestId\n      ));\n      return;\n    }\n    \n    next();\n  };\n};\n\n/**\n * Require organization access\n */\nexport const requireOrganization = (req: Request, res: Response, next: NextFunction): void => {\n  if (!req.user) {\n    res.status(401).json(createErrorResponse(\n      \"AUTH_USER_NOT_AUTHENTICATED\",\n      \"User not authenticated\",\n      undefined,\n      req.requestId\n    ));\n    return;\n  }\n  \n  if (!req.user.organizationId) {\n    res.status(403).json(createErrorResponse(\n      \"AUTH_NO_ORGANIZATION\",\n      \"No organization associated with user\",\n      undefined,\n      req.requestId\n    ));\n    return;\n  }\n  \n  next();\n};\n\n/**\n * Validate organization access for resource\n */\nexport const validateOrganizationAccess = (orgIdParam: string = \"organizationId\") => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    if (!req.user) {\n      res.status(401).json(createErrorResponse(\n        \"AUTH_USER_NOT_AUTHENTICATED\",\n        \"User not authenticated\",\n        undefined,\n        req.requestId\n      ));\n      return;\n    }\n    \n    const resourceOrgId = req.params[orgIdParam] || req.body[orgIdParam];\n    \n    if (!resourceOrgId) {\n      res.status(400).json(createErrorResponse(\n        \"AUTH_MISSING_ORG_ID\",\n        \"Organization ID not provided in request\",\n        { parameter: orgIdParam },\n        req.requestId\n      ));\n      return;\n    }\n    \n    // Super admin can access any organization\n    if (req.user.roles.includes(\"super_admin\")) {\n      next();\n      return;\n    }\n    \n    // User must belong to the same organization\n    if (req.user.organizationId !== resourceOrgId) {\n      res.status(403).json(createErrorResponse(\n        \"AUTH_ORG_ACCESS_DENIED\",\n        \"Access denied to organization resource\",\n        {\n          userOrganization: req.user.organizationId,\n          requestedOrganization: resourceOrgId\n        },\n        req.requestId\n      ));\n      return;\n    }\n    \n    next();\n  };\n};\n\n/**\n * Optional authentication - sets user if token is valid but doesn't require it\n */\nexport const optionalAuth = async (\n  req: Request,\n  res: Response,\n  next: NextFunction\n): Promise<void> => {\n  try {\n    const authHeader = req.headers.authorization;\n    \n    if (authHeader && authHeader.startsWith(\"Bearer \")) {\n      const token = authHeader.split(\"Bearer \")[1];\n      \n      try {\n        const decodedToken = await auth.verifyIdToken(token);\n        const userRecord = await auth.getUser(decodedToken.uid);\n        const customClaims = userRecord.customClaims || {};\n        \n        req.user = {\n          uid: decodedToken.uid,\n          email: decodedToken.email,\n          organizationId: customClaims.organizationId || \"\",\n          roles: customClaims.roles || [\"user\"],\n          permissions: customClaims.permissions || []\n        };\n      } catch (tokenError) {\n        // Ignore token errors in optional auth\n        console.warn(\"Optional auth token verification failed:\", String(tokenError));\n      }\n    }\n    \n    next();\n  } catch (error) {\n    // Log error but don't fail the request\n    console.error(\"Optional auth middleware error:\", error);\n    next();\n  }\n};\n\n/**\n * Service-to-service authentication using API keys\n */\nexport const authenticateService = (req: Request, res: Response, next: NextFunction): void => {\n  const apiKey = req.headers[\"x-api-key\"] as string;\n  \n  if (!apiKey) {\n    res.status(401).json(createErrorResponse(\n      \"AUTH_API_KEY_REQUIRED\",\n      \"API key required for service authentication\",\n      undefined,\n      req.requestId\n    ));\n    return;\n  }\n  \n  // In production, validate against a secure API key store\n  const validApiKeys = process.env.VALID_API_KEYS?.split(\",\") || [];\n  \n  if (!validApiKeys.includes(apiKey)) {\n    res.status(401).json(createErrorResponse(\n      \"AUTH_INVALID_API_KEY\",\n      \"Invalid API key\",\n      undefined,\n      req.requestId\n    ));\n    return;\n  }\n  \n  // Set service context\n  req.user = {\n    uid: \"service\",\n    organizationId: \"system\",\n    roles: [\"service\"],\n    permissions: [\"*\"]\n  };\n  \n  next();\n};\n\n// Common role definitions\nexport const ROLES = {\n  SUPER_ADMIN: \"super_admin\",\n  ORG_ADMIN: \"org_admin\", \n  MANAGER: \"manager\",\n  ANALYST: \"analyst\",\n  USER: \"user\",\n  SERVICE: \"service\"\n} as const;\n\n// Common permission definitions\nexport const PERMISSIONS = {\n  DOCUMENTS_READ: \"documents:read\",\n  DOCUMENTS_WRITE: \"documents:write\",\n  DOCUMENTS_DELETE: \"documents:delete\",\n  ANALYSIS_READ: \"analysis:read\",\n  ANALYSIS_WRITE: \"analysis:write\",\n  CONFIG_READ: \"config:read\",\n  CONFIG_WRITE: \"config:write\",\n  USERS_READ: \"users:read\",\n  USERS_WRITE: \"users:write\",\n  AUDIT_READ: \"audit:read\"\n} as const;\n\nexport type Role = typeof ROLES[keyof typeof ROLES];\nexport type Permission = typeof PERMISSIONS[keyof typeof PERMISSIONS];","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/middleware/error.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[438,441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[438,441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[511,514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[511,514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1267,1270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1267,1270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1404,1407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1404,1407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":74,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'next' is defined but never used.","line":74,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'req' is defined but never used.","line":179,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'res' is defined but never used.","line":179,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":35},{"ruleId":"no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":179,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4637,4640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4637,4640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":230,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5867,5870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5867,5870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":259,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6911,6914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6911,6914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":334,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":334,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8674,8677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8674,8677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":334,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":334,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8696,8699],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8696,8699],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":363,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9371,9374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9371,9374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":369,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":369,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9459,9462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9459,9462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":376,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":376,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9577,9580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9577,9580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Error Handling Middleware\n * LicitaReview Cloud Functions\n */\n\nimport { Request, Response, NextFunction } from \"express\";\nimport { logger } from \"firebase-functions\";\nimport { ValidationError, createErrorResponse, generateRequestId } from \"../utils\";\nimport { config } from \"../config\";\n\n// Custom error classes\nexport class AppError extends Error {\n  public statusCode: number;\n  public isOperational: boolean;\n  public details?: any;\n\n  constructor(message: string, statusCode: number = 500, details?: any) {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = true;\n    this.details = details;\n    \n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nexport class NotFoundError extends AppError {\n  constructor(resource: string, id?: string) {\n    super(\n      `${resource}${id ? ` with id ${id}` : \"\"} not found`,\n      404,\n      { resource, id }\n    );\n  }\n}\n\nexport class UnauthorizedError extends AppError {\n  constructor(message: string = \"Unauthorized access\") {\n    super(message, 401);\n  }\n}\n\nexport class ForbiddenError extends AppError {\n  constructor(message: string = \"Forbidden access\") {\n    super(message, 403);\n  }\n}\n\nexport class ConflictError extends AppError {\n  constructor(message: string, details?: any) {\n    super(message, 409, details);\n  }\n}\n\nexport class BadRequestError extends AppError {\n  constructor(message: string, details?: any) {\n    super(message, 400, details);\n  }\n}\n\nexport class ServiceUnavailableError extends AppError {\n  constructor(message: string = \"Service temporarily unavailable\") {\n    super(message, 503);\n  }\n}\n\n/**\n * Error handling middleware - should be the last middleware\n */\nexport const errorHandler = (\n  error: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n): void => {\n  // Ensure request ID exists\n  if (!req.requestId) {\n    req.requestId = generateRequestId();\n  }\n\n  // Log error with context\n  const errorContext = {\n    requestId: req.requestId,\n    method: req.method,\n    path: req.path,\n    userAgent: req.get(\"User-Agent\"),\n    ip: req.ip,\n    userId: req.user?.uid,\n    organizationId: req.user?.organizationId,\n    error: {\n      name: error.name,\n      message: error.message,\n      stack: error.stack\n    }\n  };\n\n  // Determine log level based on error type\n  if (error instanceof AppError && error.statusCode < 500) {\n    logger.warn(\"Client error occurred\", errorContext);\n  } else if (error instanceof ValidationError) {\n    logger.warn(\"Validation error occurred\", errorContext);\n  } else {\n    logger.error(\"Server error occurred\", errorContext);\n  }\n\n  // Handle specific error types\n  let statusCode = 500;\n  let message = \"Internal server error\";\n  let details = undefined;\n\n  if (error instanceof AppError) {\n    statusCode = error.statusCode;\n    message = error.message;\n    details = error.details;\n  } else if (error instanceof ValidationError) {\n    statusCode = 400;\n    message = error.message;\n    details = error.details;\n  } else if (error.name === \"UnauthorizedError\" || error.message.includes(\"unauthorized\")) {\n    statusCode = 401;\n    message = \"Unauthorized access\";\n  } else if (error.name === \"ForbiddenError\" || error.message.includes(\"forbidden\")) {\n    statusCode = 403;\n    message = \"Forbidden access\";\n  } else if (error.message.includes(\"not found\")) {\n    statusCode = 404;\n    message = \"Resource not found\";\n  } else if (error.message.includes(\"timeout\")) {\n    statusCode = 408;\n    message = \"Request timeout\";\n  } else if (error.message.includes(\"too many\")) {\n    statusCode = 429;\n    message = \"Too many requests\";\n  }\n\n  // Create error response\n  const errorResponse = createErrorResponse(\n    'INTERNAL_ERROR',\n    message,\n    config.isDevelopment ? details || error.stack : details,\n    req.requestId\n  );\n\n  // Add additional error metadata in development\n  if (config.isDevelopment) {\n    errorResponse.debug = {\n      name: error.name,\n      stack: error.stack,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  // Send response\n  res.status(statusCode).json(errorResponse);\n};\n\n/**\n * Not found handler - for unmatched routes\n */\nexport const notFoundHandler = (req: Request, res: Response): void => {\n  const error = createErrorResponse(\n    \"NOT_FOUND\",\n    `Route not found: ${req.method} ${req.path}`,\n    {\n      method: req.method,\n      path: req.path,\n      availableRoutes: \"Check API documentation for available routes\"\n    },\n    req.requestId\n  );\n\n  res.status(404).json(error);\n};\n\n/**\n * Async error wrapper for route handlers\n */\nexport const asyncHandler = (\n  fn: (req: Request, res: Response, next: NextFunction) => Promise<any>\n) => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    Promise.resolve(fn(req, res, next)).catch(next);\n  };\n};\n\n/**\n * Timeout handler\n */\nexport const timeoutHandler = (timeoutMs: number = 30000) => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    const timeout = setTimeout(() => {\n      const error = new AppError(\n        `Request timeout after ${timeoutMs}ms`,\n        408,\n        { timeout: timeoutMs }\n      );\n      next(error);\n    }, timeoutMs);\n\n    // Clear timeout when response is sent\n    res.on(\"finish\", () => clearTimeout(timeout));\n    res.on(\"close\", () => clearTimeout(timeout));\n\n    next();\n  };\n};\n\n/**\n * Health check error handler\n */\nexport const healthCheckError = (serviceName: string, error: Error) => {\n  logger.error(`Health check failed for ${serviceName}`, {\n    service: serviceName,\n    error: error.message,\n    stack: error.stack\n  });\n\n  return {\n    service: serviceName,\n    status: \"unhealthy\" as const,\n    timestamp: new Date(),\n    error: error.message,\n    details: config.isDevelopment ? error.stack : undefined\n  };\n};\n\n/**\n * Database connection error handler\n */\nexport const dbErrorHandler = (operation: string, error: any) => {\n  const errorMessage = `Database operation failed: ${operation}`;\n  \n  logger.error(errorMessage, {\n    operation,\n    error: error?.message || error,\n    code: error?.code,\n    details: error?.details\n  });\n\n  // Map Firestore errors to appropriate HTTP status codes\n  if (error?.code === \"not-found\") {\n    throw new NotFoundError(\"Resource\");\n  } else if (error?.code === \"permission-denied\") {\n    throw new ForbiddenError(\"Insufficient permissions for database operation\");\n  } else if (error?.code === \"already-exists\") {\n    throw new ConflictError(\"Resource already exists\");\n  } else if (error?.code === \"resource-exhausted\") {\n    throw new ServiceUnavailableError(\"Database resources exhausted\");\n  } else if (error?.code === \"deadline-exceeded\") {\n    throw new AppError(\"Database operation timeout\", 408);\n  } else {\n    throw new AppError(errorMessage, 500, { operation, originalError: error?.message });\n  }\n};\n\n/**\n * External service error handler\n */\nexport const externalServiceError = (serviceName: string, error: any) => {\n  const errorMessage = `External service error: ${serviceName}`;\n  \n  logger.error(errorMessage, {\n    service: serviceName,\n    error: error?.message || error,\n    status: error?.status || error?.statusCode,\n    response: error?.response?.data\n  });\n\n  if (error?.status >= 400 && error?.status < 500) {\n    throw new AppError(\n      `${serviceName} service error: ${error.message}`,\n      error.status,\n      { service: serviceName }\n    );\n  } else {\n    throw new ServiceUnavailableError(`${serviceName} service is currently unavailable`);\n  }\n};\n\n/**\n * Rate limit error handler\n */\nexport const rateLimitError = (req: Request, res: Response) => {\n  const error = createErrorResponse(\n    \"RATE_LIMIT_EXCEEDED\",\n    \"Rate limit exceeded\",\n    {\n      limit: \"100 requests per 15 minutes\",\n      retryAfter: \"15 minutes\",\n      documentation: \"https://docs.api.com/rate-limits\"\n    },\n    req.requestId\n  );\n\n  res.status(429).json(error);\n};\n\n/**\n * CORS error handler\n */\nexport const corsError = (req: Request, res: Response) => {\n  const error = createErrorResponse(\n    \"CORS_VIOLATION\",\n    \"CORS policy violation\",\n    {\n      origin: req.headers.origin,\n      allowedOrigins: config.corsOrigin,\n      documentation: \"https://docs.api.com/cors\"\n    },\n    req.requestId\n  );\n\n  res.status(403).json(error);\n};\n\n/**\n * Validation error formatter\n */\nexport const formatValidationError = (error: ValidationError) => {\n  return createErrorResponse(\n    \"VALIDATION_ERROR\",\n    error.message,\n    {\n      validationErrors: error.details,\n      documentation: \"https://docs.api.com/validation\"\n    }\n  );\n};\n\n/**\n * Global unhandled rejection handler\n */\nexport const setupGlobalErrorHandlers = () => {\n  process.on(\"unhandledRejection\", (reason: any, promise: Promise<any>) => {\n    logger.error(\"Unhandled Rejection at:\", {\n      promise: promise.toString(),\n      reason: reason?.message || reason\n    });\n\n    // In production, you might want to exit the process\n    if (config.nodeEnv === \"production\") {\n      process.exit(1);\n    }\n  });\n\n  process.on(\"uncaughtException\", (error: Error) => {\n    logger.error(\"Uncaught Exception:\", {\n      name: error.name,\n      message: error.message,\n      stack: error.stack\n    });\n\n    // Exit the process for uncaught exceptions\n    process.exit(1);\n  });\n};\n\n// Error response types for TypeScript\nexport interface ErrorDetails {\n  field?: string;\n  message: string;\n  code?: string;\n  value?: any;\n}\n\nexport interface DatabaseError {\n  code: string;\n  message: string;\n  details?: any;\n}\n\nexport interface ExternalServiceError {\n  service: string;\n  status?: number;\n  message: string;\n  response?: any;\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/middleware/index.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'config' is defined but never used.","line":12,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4412,4415],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4412,4415],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":166,"column":20,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":166,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5453,5456],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5453,5456],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-namespace","severity":2,"message":"ES2015 module syntax is preferred over namespaces.","line":288,"column":3,"nodeType":"TSModuleDeclaration","messageId":"moduleSyntaxIsPreferred","endLine":294,"endColumn":4}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Middleware Index - Export all middleware\n * LicitaReview Cloud Functions\n */\n\nexport * from \"./auth\";\nexport * from \"./error\";\n\nimport { Request, Response, NextFunction } from \"express\";\nimport { logger } from \"firebase-functions\";\nimport { generateRequestId } from \"../utils\";\nimport { config } from \"../config\";\n\n/**\n * Request logging middleware\n */\nexport const requestLogger = (req: Request, res: Response, next: NextFunction): void => {\n  // Generate request ID if not exists\n  if (!req.requestId) {\n    req.requestId = generateRequestId();\n    res.setHeader(\"X-Request-ID\", req.requestId);\n  }\n\n  const startTime = Date.now();\n  \n  // Log request start\n  logger.info(\"Request started\", {\n    requestId: req.requestId,\n    method: req.method,\n    path: req.path,\n    query: req.query,\n    userAgent: req.get(\"User-Agent\"),\n    ip: req.ip,\n    userId: req.user?.uid,\n    organizationId: req.user?.organizationId\n  });\n\n  // Log response when finished\n  res.on(\"finish\", () => {\n    const duration = Date.now() - startTime;\n    \n    logger.info(\"Request completed\", {\n      requestId: req.requestId,\n      method: req.method,\n      path: req.path,\n      statusCode: res.statusCode,\n      duration: `${duration}ms`,\n      contentLength: res.get(\"content-length\")\n    });\n  });\n\n  next();\n};\n\n/**\n * Security headers middleware\n */\nexport const securityHeaders = (req: Request, res: Response, next: NextFunction): void => {\n  // Set security headers\n  res.setHeader(\"X-Content-Type-Options\", \"nosniff\");\n  res.setHeader(\"X-Frame-Options\", \"DENY\");\n  res.setHeader(\"X-XSS-Protection\", \"1; mode=block\");\n  res.setHeader(\"Referrer-Policy\", \"strict-origin-when-cross-origin\");\n  \n  // HSTS header for HTTPS\n  if (req.secure || req.get(\"x-forwarded-proto\") === \"https\") {\n    res.setHeader(\"Strict-Transport-Security\", \"max-age=31536000; includeSubDomains\");\n  }\n  \n  // Content Security Policy\n  res.setHeader(\n    \"Content-Security-Policy\",\n    \"default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self'\"\n  );\n\n  next();\n};\n\n/**\n * Request size limiter\n */\nexport const requestSizeLimiter = (maxSize: string = \"10mb\") => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    const contentLength = parseInt(req.get(\"content-length\") || \"0\", 10);\n    const maxSizeBytes = parseSize(maxSize);\n    \n    if (contentLength > maxSizeBytes) {\n      res.status(413).json({\n        success: false,\n        error: \"Request entity too large\",\n        details: {\n          maxSize: maxSize,\n          receivedSize: formatBytes(contentLength)\n        },\n        timestamp: new Date().toISOString(),\n        requestId: req.requestId\n      });\n      return;\n    }\n    \n    next();\n  };\n};\n\n/**\n * API version middleware\n */\nexport const apiVersion = (version: string = \"v1\") => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    res.setHeader(\"API-Version\", version);\n    req.apiVersion = version;\n    next();\n  };\n};\n\n/**\n * Maintenance mode middleware\n */\nexport const maintenanceMode = (req: Request, res: Response, next: NextFunction): void => {\n  const isMaintenanceMode = process.env.MAINTENANCE_MODE === \"true\";\n  \n  if (isMaintenanceMode) {\n    // Allow certain endpoints during maintenance\n    const allowedPaths = [\"/health\", \"/status\"];\n    \n    if (!allowedPaths.includes(req.path)) {\n      res.status(503).json({\n        success: false,\n        error: \"Service temporarily unavailable for maintenance\",\n        details: {\n          message: \"The service is currently undergoing maintenance. Please try again later.\",\n          estimatedDowntime: process.env.MAINTENANCE_ETA || \"Unknown\"\n        },\n        timestamp: new Date().toISOString(),\n        requestId: req.requestId\n      });\n      return;\n    }\n  }\n  \n  next();\n};\n\n/**\n * Cache control middleware\n */\nexport const cacheControl = (maxAge: number = 300) => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    if (req.method === \"GET\") {\n      res.setHeader(\"Cache-Control\", `public, max-age=${maxAge}`);\n    } else {\n      res.setHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n    }\n    next();\n  };\n};\n\n/**\n * ETag middleware for caching\n */\nexport const etag = (req: Request, res: Response, next: NextFunction): void => {\n  const originalSend = res.send;\n  \n  res.send = function(body: any) {\n    if (req.method === \"GET\" && res.statusCode === 200) {\n      const hash = require(\"crypto\")\n        .createHash(\"md5\")\n        .update(body)\n        .digest(\"hex\");\n      \n      res.setHeader(\"ETag\", `\"${hash}\"`);\n      \n      // Check if client has cached version\n      if (req.get(\"If-None-Match\") === `\"${hash}\"`) {\n        res.status(304).end();\n        return res;\n      }\n    }\n    \n    return originalSend.call(this, body);\n  };\n  \n  next();\n};\n\n/**\n * Request correlation middleware for distributed tracing\n */\nexport const correlation = (req: Request, res: Response, next: NextFunction): void => {\n  // Use existing correlation ID from headers or generate new one\n  const correlationId = req.get(\"x-correlation-id\") || \n                       req.get(\"x-trace-id\") || \n                       generateRequestId();\n  \n  req.correlationId = correlationId;\n  res.setHeader(\"X-Correlation-ID\", correlationId);\n  \n  // Add to all logs for this request\n  const originalLog = logger.info;\n  logger.info = (message: string, data?: any) => {\n    originalLog(message, { ...data, correlationId });\n  };\n  \n  next();\n};\n\n/**\n * Feature flag middleware\n */\nexport const featureFlag = (flagName: string, defaultValue: boolean = false) => {\n  return (req: Request, res: Response, next: NextFunction): void => {\n    const isEnabled = process.env[`FEATURE_${flagName.toUpperCase()}`] === \"true\" || defaultValue;\n    \n    if (!isEnabled) {\n      res.status(404).json({\n        success: false,\n        error: \"Feature not available\",\n        details: {\n          feature: flagName,\n          message: \"This feature is currently disabled\"\n        },\n        timestamp: new Date().toISOString(),\n        requestId: req.requestId\n      });\n      return;\n    }\n    \n    next();\n  };\n};\n\n/**\n * Response time middleware\n */\nexport const responseTime = (req: Request, res: Response, next: NextFunction): void => {\n  const start = Date.now();\n  \n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    res.setHeader(\"X-Response-Time\", `${duration}ms`);\n    \n    // Log slow requests\n    if (duration > 5000) { // 5 seconds\n      logger.warn(\"Slow request detected\", {\n        requestId: req.requestId,\n        method: req.method,\n        path: req.path,\n        duration: `${duration}ms`\n      });\n    }\n  });\n  \n  next();\n};\n\n// Helper functions\nfunction parseSize(size: string): number {\n  const units: Record<string, number> = {\n    b: 1,\n    kb: 1024,\n    mb: 1024 * 1024,\n    gb: 1024 * 1024 * 1024\n  };\n  \n  const match = size.toLowerCase().match(/^(\\d+)(b|kb|mb|gb)$/);\n  if (!match) {\n    throw new Error(`Invalid size format: ${size}`);\n  }\n  \n  const value = parseInt(match[1], 10);\n  const unit = match[2];\n  \n  return value * units[unit];\n}\n\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return \"0 B\";\n  \n  const k = 1024;\n  const sizes = [\"B\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n}\n\n// Extend Express Request type\ndeclare global {\n  namespace Express {\n    interface Request {\n      requestId?: string;\n      correlationId?: string;\n      apiVersion?: string;\n    }\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/services/AnalysisOrchestrator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[947,950],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[947,950],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[987,990],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[987,990],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1423,1426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1423,1426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":69,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1648,1651],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1648,1651],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":274,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":274,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userId' is defined but never used.","line":274,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":274,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":307,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":307,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8649,8652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8649,8652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":525,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":525,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15615,15618],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15615,15618],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":551,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":551,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16375,16378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16375,16378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * AnalysisOrchestrator - Orquestra√ß√£o de an√°lises entre Cloud Functions e Cloud Run\n * LicitaReview Cloud Functions\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { DocumentRepository } from '../db/repositories/DocumentRepository';\nimport { OrganizationRepository } from '../db/repositories/OrganizationRepository';\nimport { CloudRunClient } from './CloudRunClient';\nimport { TaskQueueService } from './TaskQueueService';\nimport { NotificationService } from './NotificationService';\n\n// Tipos b√°sicos\nexport interface Document {\n  id: string;\n  name: string;\n  organizationId: string;\n  uploadedBy: string;\n  uploadedAt: Date;\n  size: number;\n  type: string;\n  status: string;\n  content?: string;\n}\n\nexport interface AnalysisResult {\n  id: string;\n  documentId: string;\n  organizationId: string;\n  conformityScore: number;\n  confidence: number;\n  problems: Problem[];\n  recommendations: string[];\n  metrics: Record<string, any>;\n  categoryResults: Record<string, any>;\n  processingTime: number;\n  aiUsed: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface Problem {\n  id: string;\n  type: string;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  description: string;\n  location?: string;\n  suggestion?: string;\n}\n\nexport interface OrganizationConfig {\n  id: string;\n  organizationId: string;\n  analysisSettings: {\n    enableAI: boolean;\n    strictMode: boolean;\n    customRules: any[];\n  };\n  notificationSettings: {\n    email: boolean;\n    webhook?: string;\n  };\n}\n\nexport interface AnalysisOptions {\n  includeAI: boolean;\n  generateRecommendations: boolean;\n  detailedMetrics: boolean;\n  customRules?: any[];\n}\n\nexport type AnalysisStatus = 'pending' | 'processing' | 'completed' | 'failed' | 'cancelled';\n\nexport interface AnalysisRequest {\n  documentId: string;\n  organizationId: string;\n  userId: string;\n  options: AnalysisOptions;\n  priority: 'low' | 'normal' | 'high';\n}\n\nexport interface AnalysisProgress {\n  analysisId: string;\n  documentId: string;\n  status: AnalysisStatus;\n  progress: number; // 0-100\n  currentStep: string;\n  estimatedTimeRemaining: number;\n  startedAt: Date;\n  completedAt?: Date;\n  error?: string;\n  retryCount?: number;\n  lastRetryAt?: Date;\n  maxRetries?: number;\n}\n\nexport class AnalysisOrchestrator {\n  private db: Firestore;\n  private documentRepo: DocumentRepository;\n  private organizationRepo: OrganizationRepository;\n  private cloudRunClient: CloudRunClient;\n  private taskQueue: TaskQueueService;\n  private notificationService: NotificationService;\n  private activeAnalyses: Map<string, AnalysisProgress> = new Map();\n  private readonly maxRetries: number = 3;\n  private readonly retryDelayMs: number = 5000; // 5 segundos\n  private readonly maxRetryDelayMs: number = 60000; // 1 minuto\n\n  constructor(\n    firestore: Firestore,\n    cloudRunServiceUrl: string,\n    projectId: string\n  ) {\n    this.db = firestore;\n    this.documentRepo = new DocumentRepository(firestore);\n    this.organizationRepo = new OrganizationRepository(firestore);\n    this.cloudRunClient = new CloudRunClient(cloudRunServiceUrl);\n    this.taskQueue = new TaskQueueService(projectId);\n    this.notificationService = new NotificationService(projectId);\n  }\n\n  /**\n   * Inicia uma nova an√°lise\n   */\n  async startAnalysis(request: AnalysisRequest): Promise<string> {\n    const analysisId = this.generateAnalysisId();\n    \n    // Criar progresso inicial\n    const progress: AnalysisProgress = {\n      analysisId,\n      documentId: request.documentId,\n      status: 'pending',\n      progress: 0,\n      currentStep: 'Iniciando an√°lise',\n      estimatedTimeRemaining: 300, // 5 minutos estimado\n      startedAt: new Date()\n    };\n\n    this.activeAnalyses.set(analysisId, progress);\n    await this.saveAnalysisProgress(progress);\n\n    // Processar an√°lise de forma ass√≠ncrona\n    this.processAnalysis(analysisId, request).catch(error => {\n      this.handleAnalysisError(analysisId, error);\n    });\n\n    return analysisId;\n  }\n\n  /**\n   * Processa uma an√°lise\n   */\n  async processAnalysis(analysisId: string, request: AnalysisRequest): Promise<void> {\n    const progress = await this.getAnalysisProgress(analysisId);\n    const retryCount = progress?.retryCount || 0;\n    const maxRetries = progress?.maxRetries || this.maxRetries;\n\n    try {\n      // Atualizar progresso\n      await this.updateProgress(analysisId, {\n        status: 'processing',\n        progress: 10,\n        currentStep: 'Carregando documento',\n        retryCount,\n        maxRetries\n      });\n\n      // Buscar documento com retry\n      const document = await this.retryOperation(\n        () => this.loadDocument(request.documentId),\n        'Carregando documento',\n        analysisId\n      );\n\n      await this.updateProgress(analysisId, {\n        progress: 30,\n        currentStep: 'Carregando configura√ß√µes'\n      });\n\n      // Configura√ß√£o da organiza√ß√£o com retry\n      const orgConfig = await this.retryOperation(\n        () => this.loadOrganizationConfig(request.organizationId),\n        'Carregando configura√ß√µes',\n        analysisId\n      );\n      \n      await this.updateProgress(analysisId, {\n        progress: 50,\n        currentStep: 'Enviando para an√°lise'\n      });\n\n      // Preparar request para Cloud Run\n      const cloudRunRequest = {\n        document_content: document.content || '',\n        document_type: document.type || 'EDITAL',\n        classification: { type: document.type },\n        organization_config: orgConfig || {},\n        analysis_options: {\n          include_ai: request.options.includeAI,\n          generate_recommendations: request.options.generateRecommendations,\n          detailed_metrics: request.options.detailedMetrics,\n          custom_rules: orgConfig?.analysisSettings?.customRules || []\n        },\n        metadata: {\n          document_id: request.documentId,\n          file_size: document.size || 0,\n          upload_date: document.uploadedAt || new Date()\n        }\n      };\n\n      // An√°lise com retry autom√°tico (CloudRunClient j√° tem retry interno)\n      const cloudRunResult = await this.cloudRunClient.analyzeDocument(cloudRunRequest);\n\n      await this.updateProgress(analysisId, {\n        progress: 90,\n        currentStep: 'Processando resultados'\n      });\n\n      // Converter resultado para formato interno\n      const analysisResult = this.convertCloudRunResult(cloudRunResult, request);\n      \n      // Salvar resultado com retry\n      await this.retryOperation(\n        () => this.saveAnalysisResult(request.documentId, analysisResult),\n        'Salvando resultados',\n        analysisId\n      );\n\n      // Finalizar an√°lise\n      await this.updateProgress(analysisId, {\n        status: 'completed',\n        progress: 100,\n        currentStep: 'An√°lise conclu√≠da',\n        completedAt: new Date()\n      });\n\n      // Enviar notifica√ß√£o (sem retry cr√≠tico)\n      try {\n        await this.notificationService.notifyAnalysisComplete(\n          request.userId,\n          request.organizationId,\n          analysisId,\n          document.name || 'Documento',\n          analysisResult\n        );\n      } catch (notificationError) {\n        console.warn(`Falha ao enviar notifica√ß√£o para an√°lise ${analysisId}:`, notificationError);\n      }\n\n      this.activeAnalyses.delete(analysisId);\n\n    } catch (error) {\n      await this.handleAnalysisErrorWithRetry(analysisId, request, error as Error, retryCount, maxRetries);\n    }\n  }\n\n  /**\n   * Obt√©m o progresso de uma an√°lise\n   */\n  async getAnalysisProgress(analysisId: string): Promise<AnalysisProgress | null> {\n    // Verificar cache primeiro\n    const cached = this.activeAnalyses.get(analysisId);\n    if (cached) {\n      return cached;\n    }\n\n    // Carregar do banco\n    return await this.loadAnalysisProgress(analysisId);\n  }\n\n  /**\n   * Cancela uma an√°lise\n   */\n  async cancelAnalysis(analysisId: string, userId: string): Promise<boolean> {\n    const progress = await this.getAnalysisProgress(analysisId);\n    if (!progress) {\n      return false;\n    }\n\n    if (progress.status === 'completed' || progress.status === 'failed') {\n      return false;\n    }\n\n    await this.updateProgress(analysisId, {\n      status: 'cancelled',\n      currentStep: 'An√°lise cancelada',\n      completedAt: new Date()\n    });\n\n    this.activeAnalyses.delete(analysisId);\n    return true;\n  }\n\n  /**\n   * Lista an√°lises ativas\n   */\n  getActiveAnalyses(): AnalysisProgress[] {\n    return Array.from(this.activeAnalyses.values());\n  }\n\n  // M√©todos privados\n\n  private generateAnalysisId(): string {\n    return `analysis_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private convertCloudRunResult(cloudRunResult: any, request: AnalysisRequest): AnalysisResult {\n    return {\n      id: this.generateAnalysisId(),\n      documentId: request.documentId,\n      organizationId: request.organizationId,\n      conformityScore: cloudRunResult.results.conformity_score || 0,\n      confidence: cloudRunResult.results.confidence || 0,\n      problems: cloudRunResult.results.problems || [],\n      recommendations: cloudRunResult.results.recommendations || [],\n      metrics: cloudRunResult.results.metrics || {},\n      categoryResults: cloudRunResult.results.categories || {},\n      processingTime: cloudRunResult.processing_time || 0,\n      aiUsed: cloudRunResult.results.ai_used || false,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n  }\n\n  private async updateProgress(analysisId: string, updates: Partial<AnalysisProgress>): Promise<void> {\n    const current = this.activeAnalyses.get(analysisId);\n    if (current) {\n      const updated = { ...current, ...updates };\n      this.activeAnalyses.set(analysisId, updated);\n      await this.saveAnalysisProgress(updated);\n    }\n  }\n\n  private async saveAnalysisProgress(progress: AnalysisProgress): Promise<void> {\n    await this.db.collection('analysis_progress').doc(progress.analysisId).set({\n      ...progress,\n      updatedAt: new Date()\n    });\n  }\n\n  private async loadAnalysisProgress(analysisId: string): Promise<AnalysisProgress | null> {\n    const doc = await this.db.collection('analysis_progress').doc(analysisId).get();\n    return doc.exists ? doc.data() as AnalysisProgress : null;\n  }\n\n  private async saveAnalysisResult(documentId: string, result: AnalysisResult): Promise<void> {\n    await this.db.collection('analysis_results').doc(result.id).set(result);\n    \n    // Atualizar documento com refer√™ncia ao resultado\n    await this.db.collection('documents').doc(documentId).update({\n      lastAnalysisId: result.id,\n      lastAnalysisDate: new Date(),\n      analysisStatus: 'completed'\n    });\n  }\n\n  private async handleAnalysisError(analysisId: string, error: Error): Promise<void> {\n    await this.updateProgress(analysisId, {\n      status: 'failed',\n      currentStep: 'Erro na an√°lise',\n      error: error.message,\n      completedAt: new Date()\n    });\n\n    // Log do erro\n    console.error(`An√°lise ${analysisId} falhou:`, {\n      error: error.message,\n      stack: error.stack,\n      timestamp: new Date().toISOString()\n    });\n\n    this.activeAnalyses.delete(analysisId);\n  }\n\n  /**\n   * Trata erros com l√≥gica de retry autom√°tico\n   */\n  private async handleAnalysisErrorWithRetry(\n    analysisId: string, \n    request: AnalysisRequest, \n    error: Error, \n    currentRetryCount: number, \n    maxRetries: number\n  ): Promise<void> {\n    const isRetryableError = this.isRetryableError(error);\n    const canRetry = isRetryableError && currentRetryCount < maxRetries;\n\n    if (canRetry) {\n      const nextRetryCount = currentRetryCount + 1;\n      const delayMs = this.calculateRetryDelay(nextRetryCount);\n\n      console.warn(`An√°lise ${analysisId} falhou (tentativa ${nextRetryCount}/${maxRetries}). Reagendando em ${delayMs}ms:`, {\n        error: error.message,\n        retryCount: nextRetryCount,\n        maxRetries,\n        delayMs\n      });\n\n      await this.updateProgress(analysisId, {\n        status: 'processing',\n        currentStep: `Erro tempor√°rio - reagendando (${nextRetryCount}/${maxRetries})`,\n        error: error.message,\n        retryCount: nextRetryCount,\n        lastRetryAt: new Date()\n      });\n\n      // Agendar retry\n      setTimeout(async () => {\n        try {\n          await this.processAnalysis(analysisId, request);\n        } catch (retryError) {\n          console.error(`Erro no retry da an√°lise ${analysisId}:`, retryError);\n        }\n      }, delayMs);\n\n    } else {\n      // Falha definitiva\n      await this.updateProgress(analysisId, {\n        status: 'failed',\n        currentStep: isRetryableError ? 'M√°ximo de tentativas excedido' : 'Erro n√£o recuper√°vel',\n        error: error.message,\n        completedAt: new Date(),\n        retryCount: currentRetryCount\n      });\n\n      console.error(`An√°lise ${analysisId} falhou definitivamente:`, {\n        error: error.message,\n        stack: error.stack,\n        retryCount: currentRetryCount,\n        maxRetries,\n        isRetryableError,\n        timestamp: new Date().toISOString()\n      });\n\n      this.activeAnalyses.delete(analysisId);\n    }\n  }\n\n  /**\n   * Executa uma opera√ß√£o com retry autom√°tico\n   */\n  private async retryOperation<T>(\n    operation: () => Promise<T>,\n    operationName: string,\n    analysisId: string,\n    maxRetries: number = 3\n  ): Promise<T> {\n    let lastError: Error;\n    \n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        return await operation();\n      } catch (error) {\n        lastError = error as Error;\n        \n        if (attempt === maxRetries || !this.isRetryableError(lastError)) {\n          throw lastError;\n        }\n\n        const delayMs = this.calculateRetryDelay(attempt);\n        console.warn(`${operationName} falhou (tentativa ${attempt}/${maxRetries}). Tentando novamente em ${delayMs}ms:`, {\n          error: lastError.message,\n          analysisId,\n          attempt,\n          maxRetries\n        });\n\n        await this.sleep(delayMs);\n      }\n    }\n\n    throw lastError!;\n  }\n\n  /**\n   * Verifica se um erro pode ser retentado\n   */\n  private isRetryableError(error: Error): boolean {\n    const message = error.message.toLowerCase();\n    const name = error.name.toLowerCase();\n\n    // Erros de rede e tempor√°rios\n    const networkErrors = [\n      'network', 'timeout', 'econnreset', 'enotfound', 'econnrefused',\n      'socket hang up', 'request timeout', 'connection reset'\n    ];\n\n    // Erros HTTP retry√°veis\n    const retryableHttpErrors = [\n      '429', '500', '502', '503', '504', 'rate limit', 'service unavailable',\n      'internal server error', 'bad gateway', 'gateway timeout'\n    ];\n\n    // Erros do Firestore retry√°veis\n    const firestoreErrors = [\n      'unavailable', 'deadline-exceeded', 'resource-exhausted', 'aborted'\n    ];\n\n    return networkErrors.some(err => message.includes(err) || name.includes(err)) ||\n           retryableHttpErrors.some(err => message.includes(err)) ||\n           firestoreErrors.some(err => message.includes(err));\n  }\n\n  /**\n   * Calcula o delay para retry com backoff exponencial\n   */\n  private calculateRetryDelay(attempt: number): number {\n    const baseDelay = this.retryDelayMs;\n    const exponentialDelay = baseDelay * Math.pow(2, attempt - 1);\n    const jitter = Math.random() * 1000; // Adiciona jitter para evitar thundering herd\n    \n    return Math.min(exponentialDelay + jitter, this.maxRetryDelayMs);\n  }\n\n  /**\n   * Utilit√°rio para sleep\n   */\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Carrega documento do banco de dados\n   */\n  private async loadDocument(documentId: string): Promise<any> {\n    try {\n      // Tentar carregar do repository primeiro\n      if (this.documentRepo) {\n        const document = await this.documentRepo.findById(documentId);\n        if (document) {\n          return document;\n        }\n      }\n\n      // Fallback para busca direta no Firestore\n      const doc = await this.db.collection('documents').doc(documentId).get();\n      if (!doc.exists) {\n        throw new Error(`Documento ${documentId} n√£o encontrado`);\n      }\n\n      return { id: doc.id, ...doc.data() };\n    } catch (error) {\n      console.error(`Erro ao carregar documento ${documentId}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Carrega configura√ß√£o da organiza√ß√£o\n   */\n  private async loadOrganizationConfig(organizationId: string): Promise<any> {\n    try {\n      // Tentar carregar organiza√ß√£o do repository primeiro\n      if (this.organizationRepo) {\n        const organization = await this.organizationRepo.findById(organizationId);\n        if (organization) {\n          // Extrair configura√ß√µes da organiza√ß√£o\n          return {\n            analysisSettings: {\n              enableAI: true,\n              strictMode: false,\n              customRules: []\n            },\n            notificationSettings: {\n              email: true\n            }\n          };\n        }\n      }\n\n      // Fallback para busca direta no Firestore\n      const doc = await this.db.collection('organization_configs').doc(organizationId).get();\n      if (!doc.exists) {\n        // Retornar configura√ß√£o padr√£o se n√£o existir\n        return {\n          analysisSettings: {\n            enableAI: true,\n            strictMode: false,\n            customRules: []\n          },\n          notificationSettings: {\n            email: true\n          }\n        };\n      }\n\n      return doc.data();\n    } catch (error) {\n      console.error(`Erro ao carregar configura√ß√£o da organiza√ß√£o ${organizationId}:`, error);\n      throw error;\n    }\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/services/CloudRunClient.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AxiosRequestConfig' is defined but never used.","line":7,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AxiosRequestConfig' is defined but never used.","line":7,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[397,400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[397,400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[425,428],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[425,428],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[450,453],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[450,453],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[795,798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[795,798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[861,864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[861,864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[898,901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[898,901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3350,3353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3350,3353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3364,3367],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3364,3367],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4472,4475],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4472,4475],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":240,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6208,6211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6208,6211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":283,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7523,7526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7523,7526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":302,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7964,7967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7964,7967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CloudRunClient - Cliente para comunica√ß√£o com servi√ßos Cloud Run\n * LicitaReview Cloud Functions\n */\n\nimport { GoogleAuth } from 'google-auth-library';\nimport axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, InternalAxiosRequestConfig, AxiosHeaders } from 'axios';\n\nexport interface CloudRunAnalysisRequest {\n  document_content: string;\n  document_type: string;\n  classification: any;\n  organization_config: any;\n  analysis_options: any;\n  metadata: {\n    document_id: string;\n    file_size: number;\n    upload_date: Date;\n  };\n}\n\nexport interface CloudRunAnalysisResponse {\n  analysis_id: string;\n  document_id: string;\n  organization_id: string;\n  status: 'processing' | 'completed' | 'failed';\n  results: {\n    conformity_score: number;\n    confidence: number;\n    problems: any[];\n    recommendations: string[];\n    metrics: Record<string, any>;\n    categories: Record<string, any>;\n    ai_used: boolean;\n  };\n  processing_time: number;\n  error?: string;\n}\n\nexport interface CloudRunHealthResponse {\n  status: 'healthy' | 'unhealthy';\n  version: string;\n  timestamp: string;\n  services: {\n    ocr: boolean;\n    classification: boolean;\n    analysis: boolean;\n  };\n}\n\nexport interface CircuitBreakerConfig {\n  failureThreshold: number;\n  resetTimeout: number;\n  monitoringPeriod: number;\n}\n\nexport interface RetryConfig {\n  maxRetries: number;\n  initialDelay: number;\n  maxDelay: number;\n  backoffMultiplier: number;\n}\n\nexport class CloudRunClient {\n  private httpClient: AxiosInstance | null = null;\n  private auth: GoogleAuth;\n  private serviceUrl: string;\n  private circuitBreaker: CircuitBreaker;\n  private retryConfig: RetryConfig;\n  private httpClientPromise: Promise<void> | null = null;\n\n  constructor(\n    serviceUrl: string,\n    circuitBreakerConfig: CircuitBreakerConfig = {\n      failureThreshold: 5,\n      resetTimeout: 60000,\n      monitoringPeriod: 10000\n    },\n    retryConfig: RetryConfig = {\n      maxRetries: 3,\n      initialDelay: 1000,\n      maxDelay: 10000,\n      backoffMultiplier: 2\n    }\n  ) {\n    this.serviceUrl = serviceUrl;\n    this.retryConfig = retryConfig;\n    this.auth = new GoogleAuth({\n      scopes: ['https://www.googleapis.com/auth/cloud-platform']\n    });\n    \n    this.circuitBreaker = new CircuitBreaker(circuitBreakerConfig);\n  }\n\n  /**\n   * Garante que o httpClient esteja inicializado\n   */\n  private async ensureHttpClient(): Promise<void> {\n    if (this.httpClient) {\n      return;\n    }\n    \n    if (!this.httpClientPromise) {\n      this.httpClientPromise = this.setupHttpClient();\n    }\n    \n    await this.httpClientPromise;\n  }\n\n  /**\n   * Analisa um documento via Cloud Run\n   */\n  async analyzeDocument(request: CloudRunAnalysisRequest): Promise<CloudRunAnalysisResponse> {\n    await this.ensureHttpClient();\n    return await this.circuitBreaker.execute(async () => {\n      return await this.retryWithBackoff(async () => {\n        const response = await this.httpClient!.post<CloudRunAnalysisResponse>(\n          '/analyze',\n          request,\n          {\n            timeout: 120000, // 2 minutos timeout\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n        \n        return response.data;\n      });\n    });\n  }\n\n  /**\n   * Classifica um documento\n   */\n  async classifyDocument(documentContent: string, metadata: any): Promise<any> {\n    await this.ensureHttpClient();\n    return await this.circuitBreaker.execute(async () => {\n      return await this.retryWithBackoff(async () => {\n        const response = await this.httpClient!.post(\n          '/classify',\n          {\n            document_content: documentContent,\n            metadata\n          },\n          {\n            timeout: 30000, // 30 segundos timeout\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n        \n        return response.data;\n      });\n    });\n  }\n\n  /**\n   * Verifica a sa√∫de do servi√ßo Cloud Run\n   */\n  async healthCheck(): Promise<CloudRunHealthResponse> {\n    await this.ensureHttpClient();\n    try {\n      const response = await this.httpClient!.get<CloudRunHealthResponse>('/health', {\n        timeout: 5000 // 5 segundos timeout\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.error('Health check falhou:', error);\n      throw new Error('Servi√ßo Cloud Run indispon√≠vel');\n    }\n  }\n\n  /**\n   * Obt√©m m√©tricas do servi√ßo\n   */\n  async getMetrics(): Promise<any> {\n    await this.ensureHttpClient();\n    try {\n      const response = await this.httpClient!.get('/metrics', {\n        timeout: 10000\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.error('Erro ao obter m√©tricas:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Verifica se o servi√ßo est√° dispon√≠vel\n   */\n  async isAvailable(): Promise<boolean> {\n    try {\n      const health = await this.healthCheck();\n      return health.status === 'healthy';\n    } catch {\n      return false;\n    }\n  }\n\n  // M√©todos privados\n\n  private async setupHttpClient(): Promise<void> {\n    const client = await this.auth.getIdTokenClient(this.serviceUrl);\n    \n    this.httpClient = axios.create({\n      baseURL: this.serviceUrl,\n      timeout: 60000, // 1 minuto timeout padr√£o\n      headers: {\n        'User-Agent': 'LicitaReview-CloudFunctions/1.0'\n      }\n    });\n\n    // Interceptor para adicionar token de autentica√ß√£o\n    this.httpClient.interceptors.request.use(async (config: InternalAxiosRequestConfig) => {\n      try {\n        const token = await client.getAccessToken();\n        if (token.token) {\n          if (!config.headers) {\n            config.headers = new AxiosHeaders();\n          }\n          config.headers.Authorization = `Bearer ${token.token}`;\n        }\n      } catch (error) {\n        console.error('Erro ao obter token de autentica√ß√£o:', error);\n      }\n      return config;\n    });\n\n    // Interceptor para logging e tratamento de erros\n    this.httpClient.interceptors.response.use(\n      (response: AxiosResponse) => {\n        console.log(`Cloud Run request successful: ${response.config.method?.toUpperCase()} ${response.config.url}`);\n        return response;\n      },\n      (error: any) => {\n        console.error(`Cloud Run request failed: ${error.config?.method?.toUpperCase()} ${error.config?.url}`, {\n          status: error.response?.status,\n          statusText: error.response?.statusText,\n          data: error.response?.data\n        });\n        return Promise.reject(this.handleHttpError(error));\n      }\n    );\n  }\n\n  private async retryWithBackoff<T>(operation: () => Promise<T>): Promise<T> {\n    let lastError: Error;\n    \n    for (let attempt = 0; attempt <= this.retryConfig.maxRetries; attempt++) {\n      try {\n        return await operation();\n      } catch (error) {\n        lastError = error as Error;\n        \n        if (attempt === this.retryConfig.maxRetries) {\n          break;\n        }\n        \n        // Verificar se o erro √© retryable\n        if (!this.isRetryableError(error)) {\n          throw error;\n        }\n        \n        // Calcular delay com backoff exponencial\n        const delay = Math.min(\n          this.retryConfig.initialDelay * Math.pow(this.retryConfig.backoffMultiplier, attempt),\n          this.retryConfig.maxDelay\n        );\n        \n        console.log(`Tentativa ${attempt + 1} falhou, tentando novamente em ${delay}ms:`, error);\n        await this.sleep(delay);\n      }\n    }\n    \n    throw lastError!;\n  }\n\n  private isRetryableError(error: any): boolean {\n    // Erros de rede ou timeouts s√£o retryable\n    if (error.code === 'ECONNRESET' || error.code === 'ETIMEDOUT') {\n      return true;\n    }\n    \n    // Status HTTP 5xx s√£o retryable\n    if (error.response?.status >= 500) {\n      return true;\n    }\n    \n    // Status 429 (rate limit) √© retryable\n    if (error.response?.status === 429) {\n      return true;\n    }\n    \n    return false;\n  }\n\n  private handleHttpError(error: any): Error {\n    if (error.response) {\n      // Erro HTTP com resposta\n      const status = error.response.status;\n      const message = error.response.data?.error || error.response.statusText;\n      \n      switch (status) {\n        case 400:\n          return new Error(`Requisi√ß√£o inv√°lida: ${message}`);\n        case 401:\n          return new Error('N√£o autorizado para acessar o servi√ßo Cloud Run');\n        case 403:\n          return new Error('Acesso negado ao servi√ßo Cloud Run');\n        case 404:\n          return new Error('Endpoint n√£o encontrado no servi√ßo Cloud Run');\n        case 429:\n          return new Error('Rate limit excedido no servi√ßo Cloud Run');\n        case 500:\n          return new Error(`Erro interno do servi√ßo Cloud Run: ${message}`);\n        case 503:\n          return new Error('Servi√ßo Cloud Run temporariamente indispon√≠vel');\n        default:\n          return new Error(`Erro HTTP ${status}: ${message}`);\n      }\n    } else if (error.request) {\n      // Erro de rede\n      return new Error('N√£o foi poss√≠vel conectar ao servi√ßo Cloud Run');\n    } else {\n      // Erro de configura√ß√£o\n      return new Error(`Erro na configura√ß√£o da requisi√ß√£o: ${error.message}`);\n    }\n  }\n\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n\n/**\n * Circuit Breaker para proteger contra falhas em cascata\n */\nclass CircuitBreaker {\n  private state: 'CLOSED' | 'OPEN' | 'HALF_OPEN' = 'CLOSED';\n  private failureCount = 0;\n  private lastFailureTime = 0;\n  private config: CircuitBreakerConfig;\n\n  constructor(config: CircuitBreakerConfig) {\n    this.config = config;\n  }\n\n  async execute<T>(operation: () => Promise<T>): Promise<T> {\n    if (this.state === 'OPEN') {\n      if (Date.now() - this.lastFailureTime > this.config.resetTimeout) {\n        this.state = 'HALF_OPEN';\n        console.log('Circuit breaker mudou para HALF_OPEN');\n      } else {\n        throw new Error('Circuit breaker est√° OPEN - servi√ßo indispon√≠vel');\n      }\n    }\n\n    try {\n      const result = await operation();\n      this.onSuccess();\n      return result;\n    } catch (error) {\n      this.onFailure();\n      throw error;\n    }\n  }\n\n  private onSuccess(): void {\n    this.failureCount = 0;\n    if (this.state === 'HALF_OPEN') {\n      this.state = 'CLOSED';\n      console.log('Circuit breaker mudou para CLOSED');\n    }\n  }\n\n  private onFailure(): void {\n    this.failureCount++;\n    this.lastFailureTime = Date.now();\n\n    if (this.failureCount >= this.config.failureThreshold) {\n      this.state = 'OPEN';\n      console.log('Circuit breaker mudou para OPEN');\n    }\n  }\n\n  getState(): string {\n    return this.state;\n  }\n\n  getFailureCount(): number {\n    return this.failureCount;\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/services/ComissaoService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2733,2736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2733,2736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2803,2806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2803,2806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":122,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3278,3281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3278,3281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":241,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6723,6726],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6723,6726],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":291,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":291,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8414,8417],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8414,8417],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":364,"column":101,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":364,"endColumn":104,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10933,10936],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10933,10936],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":445,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":445,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13766,13769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13766,13769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Comiss√£o Service - Business logic for Comiss√µes\n * LicitaReview Cloud Functions\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { ComissaoRepository } from '../db/repositories/ComissaoRepository';\nimport { \n  Comissao, \n  CreateComissaoRequest, \n  UpdateComissaoRequest,\n  ComissaoDetalhada,\n  ComissoesQueryOptions,\n  MembroComissao,\n  AdicionarMembroRequest,\n  AtualizarMembroRequest,\n  TipoComissao,\n  StatusComissao,\n  PapelMembro,\n  ComissaoStats,\n  ComissaoHistoryEntry\n} from '../types';\n\nexport class ComissaoService {\n  private repository: ComissaoRepository;\n  private db: Firestore;\n  private organizationId: string;\n\n  constructor(db: Firestore, organizationId: string) {\n    this.db = db;\n    this.organizationId = organizationId;\n    this.repository = new ComissaoRepository(db, organizationId);\n  }\n\n  /**\n   * List comiss√µes with filtering and pagination\n   */\n  async listComissoes(options: ComissoesQueryOptions): Promise<{\n    data: Comissao[];\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      totalPages: number;\n      hasNext: boolean;\n      hasPrev: boolean;\n    };\n  }> {\n    const result = await this.repository.findWithFilters(options);\n    \n    const page = options.page || 1;\n    const limit = options.limit || 20;\n    const totalPages = Math.ceil(result.total / limit);\n    \n    return {\n      data: result.data,\n      pagination: {\n        page,\n        limit,\n        total: result.total,\n        totalPages,\n        hasNext: result.hasMore,\n        hasPrev: page > 1\n      }\n    };\n  }\n\n  /**\n   * Get comiss√£o by ID with detailed member information\n   */\n  async getComissaoById(id: string): Promise<ComissaoDetalhada | null> {\n    return await this.repository.findByIdDetailed(id);\n  }\n\n  /**\n   * Create new comiss√£o\n   */\n  async createComissao(data: CreateComissaoRequest, createdBy: string): Promise<Comissao> {\n    // Validate business rules\n    await this.validateCreateRequest(data);\n\n    // Prepare data for creation\n    const now = new Date();\n    const comissaoData = {\n      nomeDaComissao: data.nomeDaComissao,\n      tipo: data.tipo,\n      dataDeCriacao: new Date(data.dataDeCriacao),\n      dataDeEncerramento: data.dataDeEncerramento ? new Date(data.dataDeEncerramento) : undefined,\n      descricao: data.descricao,\n      objetivo: data.objetivo,\n      membros: data.membros.map(membro => ({\n        ...membro,\n        dataDeIngresso: now,\n        ativo: true\n      })),\n      status: StatusComissao.ATIVA,\n      organizationId: this.organizationId,\n      createdBy,\n      createdAt: now,\n      updatedAt: now,\n      configuracoes: data.configuracoes\n    };\n\n    const comissao = await this.repository.create(comissaoData as any);\n    \n    // Log creation\n    await this.logHistory((comissao as any).id, 'created', {}, createdBy, 'Comiss√£o criada');\n    \n    return comissao;\n  }\n\n  /**\n   * Update comiss√£o\n   */\n  async updateComissao(id: string, data: UpdateComissaoRequest, updatedBy: string): Promise<Comissao | null> {\n    const existingComissao = await this.repository.findById(id);\n    if (!existingComissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    // Validate business rules\n    await this.validateUpdateRequest(existingComissao, data as any);\n\n    // Prepare update data\n    const updateData = {\n      ...data,\n      dataDeEncerramento: data.dataDeEncerramento,\n      lastModifiedBy: updatedBy,\n      updatedAt: new Date()\n    };\n\n    const updatedComissao = await this.repository.update(id, updateData);\n    \n    // Log update\n    await this.logHistory(id, 'updated', data, updatedBy, 'Comiss√£o atualizada');\n    \n    return updatedComissao;\n  }\n\n  /**\n   * Delete comiss√£o\n   */\n  async deleteComissao(id: string, deletedBy: string): Promise<void> {\n    const existingComissao = await this.repository.findById(id);\n    if (!existingComissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    // Check if can be deleted\n    if (existingComissao.status === StatusComissao.ATIVA) {\n      throw new Error('N√£o √© poss√≠vel deletar uma comiss√£o ativa. Altere o status primeiro.');\n    }\n\n    await this.repository.delete(id);\n    \n    // Log deletion\n    await this.logHistory(id, 'updated', { status: 'deleted' }, deletedBy, 'Comiss√£o deletada');\n  }\n\n  /**\n   * Add member to comiss√£o\n   */\n  async adicionarMembro(comissaoId: string, data: AdicionarMembroRequest, addedBy: string): Promise<void> {\n    const comissao = await this.repository.findById(comissaoId);\n    if (!comissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    // Validate business rules\n    await this.validateAddMember(comissao, data);\n\n    await this.repository.adicionarMembro(comissaoId, data);\n    \n    // Log member addition\n    await this.logHistory(\n      comissaoId, \n      'member_added', \n      { servidorId: data.servidorId, papel: data.papel }, \n      addedBy, \n      `Membro ${data.servidorId} adicionado como ${data.papel}`\n    );\n  }\n\n  /**\n   * Remove member from comiss√£o\n   */\n  async removerMembro(comissaoId: string, servidorId: string, removedBy: string): Promise<void> {\n    const comissao = await this.repository.findById(comissaoId);\n    if (!comissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    const membro = comissao.membros.find(m => m.servidorId === servidorId);\n    if (!membro) {\n      throw new Error('Membro n√£o encontrado na comiss√£o');\n    }\n\n    // Check if can remove (e.g., must have at least one member)\n    const membrosAtivos = comissao.membros.filter(m => m.ativo && m.servidorId !== servidorId);\n    if (membrosAtivos.length === 0) {\n      throw new Error('N√£o √© poss√≠vel remover o √∫ltimo membro ativo da comiss√£o');\n    }\n\n    await this.repository.removerMembro(comissaoId, servidorId);\n    \n    // Log member removal\n    await this.logHistory(\n      comissaoId, \n      'member_removed', \n      { servidorId, papel: membro.papel }, \n      removedBy, \n      `Membro ${servidorId} removido`\n    );\n  }\n\n  /**\n   * Update member in comiss√£o\n   */\n  async atualizarMembro(\n    comissaoId: string, \n    servidorId: string, \n    data: AtualizarMembroRequest, \n    updatedBy: string\n  ): Promise<void> {\n    const comissao = await this.repository.findById(comissaoId);\n    if (!comissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    const membro = comissao.membros.find(m => m.servidorId === servidorId);\n    if (!membro) {\n      throw new Error('Membro n√£o encontrado na comiss√£o');\n    }\n\n    // Validate business rules for member update\n    if (data.papel) {\n      await this.validateMemberRole(comissao, data.papel, servidorId);\n    }\n\n    // If deactivating member, set dataDeSaida\n    const updateData: any = { ...data };\n    if (data.ativo === false && !membro.dataDeSaida) {\n      updateData.dataDeSaida = new Date();\n    }\n\n    await this.repository.atualizarMembro(comissaoId, servidorId, updateData);\n    \n    // Log member update\n    await this.logHistory(\n      comissaoId, \n      'member_updated', \n      { servidorId, changes: data }, \n      updatedBy, \n      `Membro ${servidorId} atualizado`\n    );\n  }\n\n  /**\n   * Get comiss√£o statistics\n   */\n  async getComissaoStats(comissaoId: string): Promise<ComissaoStats> {\n    const comissao = await this.repository.findById(comissaoId);\n    if (!comissao) {\n      throw new Error('Comiss√£o n√£o encontrada');\n    }\n\n    const membrosAtivos = comissao.membros.filter(m => m.ativo);\n    const membrosInativos = comissao.membros.filter(m => !m.ativo);\n    \n    const distribuicaoPorPapel = comissao.membros.reduce((acc, membro) => {\n      acc[membro.papel] = (acc[membro.papel] || 0) + 1;\n      return acc;\n    }, {} as Record<PapelMembro, number>);\n\n    // Calculate average participation time\n    const now = new Date();\n    const temposParticipacao = comissao.membros.map(membro => {\n      const fim = membro.dataDeSaida || now;\n      return Math.floor((fim.getTime() - membro.dataDeIngresso.getTime()) / (1000 * 60 * 60 * 24));\n    });\n    const tempoMedioParticipacao = temposParticipacao.length > 0 \n      ? temposParticipacao.reduce((a, b) => a + b, 0) / temposParticipacao.length \n      : 0;\n\n    return {\n      totalMembros: comissao.membros.length,\n      membrosAtivos: membrosAtivos.length,\n      membrosInativos: membrosInativos.length,\n      distribuicaoPorPapel,\n      tempoMedioParticipacao,\n      ultimaAlteracao: (comissao as any).updatedAt || new Date()\n    };\n  }\n\n  /**\n   * Get comiss√£o history\n   */\n  async getComissaoHistory(comissaoId: string, page: number = 1, limit: number = 20): Promise<{\n    data: ComissaoHistoryEntry[];\n    total: number;\n    hasMore: boolean;\n  }> {\n    const historyCollection = this.db\n      .collection(`organizations/${this.organizationId}/comissoes/${comissaoId}/history`)\n      .orderBy('timestamp', 'desc')\n      .limit(limit + 1)\n      .offset((page - 1) * limit);\n\n    const snapshot = await historyCollection.get();\n    const docs = snapshot.docs.slice(0, limit);\n    const hasMore = snapshot.docs.length > limit;\n\n    const data = docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    })) as ComissaoHistoryEntry[];\n\n    // Get total count\n    const totalSnapshot = await this.db\n      .collection(`organizations/${this.organizationId}/comissoes/${comissaoId}/history`)\n      .count()\n      .get();\n    const total = totalSnapshot.data().count;\n\n    return { data, total, hasMore };\n  }\n\n  // Private validation methods\n  private async validateCreateRequest(data: CreateComissaoRequest): Promise<void> {\n    // Check name uniqueness\n    const isUnique = await this.repository.isNameUnique(data.nomeDaComissao);\n    if (!isUnique) {\n      throw new Error('J√° existe uma comiss√£o com este nome na organiza√ß√£o');\n    }\n\n    // Validate dates\n    const dataCriacao = new Date(data.dataDeCriacao);\n    if (dataCriacao > new Date()) {\n      throw new Error('Data de cria√ß√£o n√£o pode ser futura');\n    }\n\n    if (data.tipo === TipoComissao.TEMPORARIA) {\n      if (!data.dataDeEncerramento) {\n        throw new Error('Data de encerramento √© obrigat√≥ria para comiss√µes tempor√°rias');\n      }\n      const dataEncerramento = new Date(data.dataDeEncerramento);\n      if (dataEncerramento <= dataCriacao) {\n        throw new Error('Data de encerramento deve ser posterior √† data de cria√ß√£o');\n      }\n    }\n\n    // Validate members\n    await this.validateMembers(data.membros);\n  }\n\n  private async validateUpdateRequest(existingComissao: Comissao, data: UpdateComissaoRequest): Promise<void> {\n    // Check if can be updated\n    if (existingComissao.status === StatusComissao.ENCERRADA) {\n      throw new Error('N√£o √© poss√≠vel atualizar uma comiss√£o encerrada');\n    }\n\n    // Check name uniqueness if changing name\n    if (data.nomeDaComissao && data.nomeDaComissao !== existingComissao.nomeDaComissao) {\n      const isUnique = await this.repository.isNameUnique(data.nomeDaComissao, (existingComissao as any).id);\n      if (!isUnique) {\n        throw new Error('J√° existe uma comiss√£o com este nome na organiza√ß√£o');\n      }\n    }\n\n    // Validate dates if changing\n    if (data.dataDeEncerramento) {\n      const dataEncerramento = new Date(data.dataDeEncerramento);\n      if (dataEncerramento <= existingComissao.dataDeCriacao) {\n        throw new Error('Data de encerramento deve ser posterior √† data de cria√ß√£o');\n      }\n    }\n  }\n\n  private async validateAddMember(comissao: Comissao, data: AdicionarMembroRequest): Promise<void> {\n    // Check if comiss√£o can have new members\n    if (comissao.status !== StatusComissao.ATIVA) {\n      throw new Error('Apenas comiss√µes ativas podem receber novos membros');\n    }\n\n    // Check if servidor is already a member\n    const existingMember = comissao.membros.find(m => m.servidorId === data.servidorId && m.ativo);\n    if (existingMember) {\n      throw new Error('Servidor j√° √© membro ativo desta comiss√£o');\n    }\n\n    // Validate role constraints\n    await this.validateMemberRole(comissao, data.papel);\n\n    // Check if servidor exists\n    await this.validateServidorExists(data.servidorId);\n  }\n\n  private async validateMemberRole(comissao: Comissao, papel: PapelMembro, excludeServidorId?: string): Promise<void> {\n    if (papel === PapelMembro.PRESIDENTE) {\n      const existingPresidente = comissao.membros.find(m => \n        m.papel === PapelMembro.PRESIDENTE && \n        m.ativo && \n        m.servidorId !== excludeServidorId\n      );\n      if (existingPresidente) {\n        throw new Error('Comiss√£o j√° possui um presidente ativo');\n      }\n    }\n  }\n\n  private async validateMembers(membros: Omit<MembroComissao, 'dataDeIngresso' | 'ativo'>[]): Promise<void> {\n    // Check for duplicate members\n    const servidorIds = membros.map(m => m.servidorId);\n    const uniqueIds = new Set(servidorIds);\n    if (servidorIds.length !== uniqueIds.size) {\n      throw new Error('N√£o √© poss√≠vel adicionar o mesmo servidor m√∫ltiplas vezes');\n    }\n\n    // Check for multiple presidents\n    const presidentes = membros.filter(m => m.papel === PapelMembro.PRESIDENTE);\n    if (presidentes.length > 1) {\n      throw new Error('Comiss√£o pode ter apenas um presidente');\n    }\n\n    // Validate all servidores exist\n    for (const membro of membros) {\n      await this.validateServidorExists(membro.servidorId);\n    }\n  }\n\n  private async validateServidorExists(servidorId: string): Promise<void> {\n    const servidorDoc = await this.db\n      .collection(`organizations/${this.organizationId}/servidores`)\n      .doc(servidorId)\n      .get();\n    \n    if (!servidorDoc.exists) {\n      throw new Error(`Servidor ${servidorId} n√£o encontrado na organiza√ß√£o`);\n    }\n  }\n\n  private async logHistory(\n    comissaoId: string, \n    action: ComissaoHistoryEntry['action'], \n    changes: Record<string, any>, \n    performedBy: string, \n    details?: string\n  ): Promise<void> {\n    const historyEntry: Omit<ComissaoHistoryEntry, 'id'> = {\n      comissaoId,\n      action,\n      changes,\n      performedBy,\n      timestamp: new Date(),\n      details\n    };\n\n    await this.db\n      .collection(`organizations/${this.organizationId}/comissoes/${comissaoId}/history`)\n      .add(historyEntry);\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/services/NotificationService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[290,293],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[290,293],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[718,721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[718,721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3269,3272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3269,3272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":198,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5133,5136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5133,5136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'payload' is defined but never used.","line":219,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":219,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'payload' is defined but never used.","line":219,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":219,"endColumn":49},{"ruleId":"no-unused-vars","severity":2,"message":"'notification' is defined but never used.","line":232,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":232,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'notification' is defined but never used.","line":232,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":232,"endColumn":47},{"ruleId":"no-unused-vars","severity":2,"message":"'notification' is defined but never used.","line":245,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":245,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'notification' is defined but never used.","line":245,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":245,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":258,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":258,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userId' is defined but never used.","line":258,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":258,"endColumn":46}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo para gerenciar notifica√ß√µes do sistema\n */\n\nexport interface NotificationPayload {\n  userId: string;\n  organizationId: string;\n  type: 'analysis_complete' | 'analysis_failed' | 'document_uploaded' | 'system_alert';\n  title: string;\n  message: string;\n  data?: Record<string, any>;\n  priority?: 'low' | 'normal' | 'high' | 'urgent';\n}\n\nexport interface EmailNotification {\n  to: string[];\n  cc?: string[];\n  bcc?: string[];\n  subject: string;\n  htmlContent: string;\n  textContent?: string;\n  attachments?: Array<{\n    filename: string;\n    content: Buffer;\n    contentType: string;\n  }>;\n}\n\nexport interface PushNotification {\n  tokens: string[];\n  title: string;\n  body: string;\n  data?: Record<string, any>;\n  badge?: number;\n  sound?: string;\n}\n\nexport class NotificationService {\n  private projectId: string;\n\n  constructor(projectId: string) {\n    this.projectId = projectId;\n  }\n\n  /**\n   * Envia notifica√ß√£o para um usu√°rio espec√≠fico\n   */\n  async sendNotification(payload: NotificationPayload): Promise<void> {\n    try {\n      console.log(`Enviando notifica√ß√£o para usu√°rio ${payload.userId}:`, {\n        type: payload.type,\n        title: payload.title,\n        message: payload.message,\n        priority: payload.priority || 'normal'\n      });\n\n      // Aqui seria implementada a l√≥gica real de envio\n      // Por exemplo, usando Firebase Cloud Messaging, SendGrid, etc.\n      \n      // Simular envio bem-sucedido\n      await this.simulateNotificationSend(payload);\n      \n      console.log(`Notifica√ß√£o enviada com sucesso para ${payload.userId}`);\n    } catch (error) {\n      console.error('Erro ao enviar notifica√ß√£o:', error);\n      throw new Error(`Falha ao enviar notifica√ß√£o: ${error}`);\n    }\n  }\n\n  /**\n   * Envia notifica√ß√£o por email\n   */\n  async sendEmailNotification(notification: EmailNotification): Promise<void> {\n    try {\n      console.log(`Enviando email para: ${notification.to.join(', ')}`);\n      console.log(`Assunto: ${notification.subject}`);\n      \n      // Aqui seria implementada a integra√ß√£o com servi√ßo de email\n      // Por exemplo, SendGrid, AWS SES, etc.\n      \n      await this.simulateEmailSend(notification);\n      \n      console.log('Email enviado com sucesso');\n    } catch (error) {\n      console.error('Erro ao enviar email:', error);\n      throw new Error(`Falha ao enviar email: ${error}`);\n    }\n  }\n\n  /**\n   * Envia notifica√ß√£o push\n   */\n  async sendPushNotification(notification: PushNotification): Promise<void> {\n    try {\n      console.log(`Enviando push notification para ${notification.tokens.length} dispositivos`);\n      console.log(`T√≠tulo: ${notification.title}`);\n      console.log(`Mensagem: ${notification.body}`);\n      \n      // Aqui seria implementada a integra√ß√£o com Firebase Cloud Messaging\n      \n      await this.simulatePushSend(notification);\n      \n      console.log('Push notification enviado com sucesso');\n    } catch (error) {\n      console.error('Erro ao enviar push notification:', error);\n      throw new Error(`Falha ao enviar push notification: ${error}`);\n    }\n  }\n\n  /**\n   * Notifica sobre conclus√£o de an√°lise\n   */\n  async notifyAnalysisComplete(\n    userId: string,\n    organizationId: string,\n    analysisId: string,\n    documentName: string,\n    results: any\n  ): Promise<void> {\n    const payload: NotificationPayload = {\n      userId,\n      organizationId,\n      type: 'analysis_complete',\n      title: 'An√°lise Conclu√≠da',\n      message: `A an√°lise do documento \"${documentName}\" foi conclu√≠da com sucesso.`,\n      data: {\n        analysisId,\n        documentName,\n        conformityScore: results.conformity_score,\n        confidence: results.confidence\n      },\n      priority: 'normal'\n    };\n\n    await this.sendNotification(payload);\n  }\n\n  /**\n   * Notifica sobre falha na an√°lise\n   */\n  async notifyAnalysisFailure(\n    userId: string,\n    organizationId: string,\n    analysisId: string,\n    documentName: string,\n    error: string\n  ): Promise<void> {\n    const payload: NotificationPayload = {\n      userId,\n      organizationId,\n      type: 'analysis_failed',\n      title: 'Falha na An√°lise',\n      message: `A an√°lise do documento \"${documentName}\" falhou. Erro: ${error}`,\n      data: {\n        analysisId,\n        documentName,\n        error\n      },\n      priority: 'high'\n    };\n\n    await this.sendNotification(payload);\n  }\n\n  /**\n   * Notifica sobre upload de documento\n   */\n  async notifyDocumentUploaded(\n    userId: string,\n    organizationId: string,\n    documentId: string,\n    documentName: string\n  ): Promise<void> {\n    const payload: NotificationPayload = {\n      userId,\n      organizationId,\n      type: 'document_uploaded',\n      title: 'Documento Carregado',\n      message: `O documento \"${documentName}\" foi carregado com sucesso e est√° sendo processado.`,\n      data: {\n        documentId,\n        documentName\n      },\n      priority: 'low'\n    };\n\n    await this.sendNotification(payload);\n  }\n\n  /**\n   * Envia alerta do sistema\n   */\n  async sendSystemAlert(\n    userIds: string[],\n    organizationId: string,\n    title: string,\n    message: string,\n    data?: Record<string, any>\n  ): Promise<void> {\n    const promises = userIds.map(userId => {\n      const payload: NotificationPayload = {\n        userId,\n        organizationId,\n        type: 'system_alert',\n        title,\n        message,\n        data,\n        priority: 'urgent'\n      };\n      return this.sendNotification(payload);\n    });\n\n    await Promise.all(promises);\n  }\n\n  /**\n   * Simula envio de notifica√ß√£o (para desenvolvimento/teste)\n   */\n  private async simulateNotificationSend(payload: NotificationPayload): Promise<void> {\n    // Simular delay de rede\n    await new Promise(resolve => setTimeout(resolve, 100));\n    \n    // Simular falha ocasional (5% de chance)\n    if (Math.random() < 0.05) {\n      throw new Error('Falha simulada no envio de notifica√ß√£o');\n    }\n  }\n\n  /**\n   * Simula envio de email (para desenvolvimento/teste)\n   */\n  private async simulateEmailSend(notification: EmailNotification): Promise<void> {\n    // Simular delay de rede\n    await new Promise(resolve => setTimeout(resolve, 200));\n    \n    // Simular falha ocasional (3% de chance)\n    if (Math.random() < 0.03) {\n      throw new Error('Falha simulada no envio de email');\n    }\n  }\n\n  /**\n   * Simula envio de push notification (para desenvolvimento/teste)\n   */\n  private async simulatePushSend(notification: PushNotification): Promise<void> {\n    // Simular delay de rede\n    await new Promise(resolve => setTimeout(resolve, 150));\n    \n    // Simular falha ocasional (2% de chance)\n    if (Math.random() < 0.02) {\n      throw new Error('Falha simulada no envio de push notification');\n    }\n  }\n\n  /**\n   * Obt√©m prefer√™ncias de notifica√ß√£o do usu√°rio\n   */\n  async getUserNotificationPreferences(userId: string): Promise<{\n    email: boolean;\n    push: boolean;\n    sms: boolean;\n    types: string[];\n  }> {\n    // Aqui seria implementada a busca das prefer√™ncias no banco de dados\n    // Por enquanto, retorna prefer√™ncias padr√£o\n    return {\n      email: true,\n      push: true,\n      sms: false,\n      types: ['analysis_complete', 'analysis_failed', 'system_alert']\n    };\n  }\n\n  /**\n   * Atualiza prefer√™ncias de notifica√ß√£o do usu√°rio\n   */\n  async updateUserNotificationPreferences(\n    userId: string,\n    preferences: {\n      email?: boolean;\n      push?: boolean;\n      sms?: boolean;\n      types?: string[];\n    }\n  ): Promise<void> {\n    console.log(`Atualizando prefer√™ncias de notifica√ß√£o para usu√°rio ${userId}:`, preferences);\n    \n    // Aqui seria implementada a atualiza√ß√£o no banco de dados\n    // Por enquanto, apenas log\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/services/OrganizationConfigService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":194,"column":104,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":107,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5952,5955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5952,5955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":229,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":229,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6887,6890],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6887,6890],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":265,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8154,8157],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8154,8157],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":265,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8168,8171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8168,8171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":303,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9283,9286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9283,9286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unreachable","severity":2,"message":"Unreachable code.","line":481,"column":21,"nodeType":"BlockStatement","messageId":"unreachableCode","endLine":487,"endColumn":6}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Organization Configuration Service\n * \n * Servi√ßo respons√°vel por conectar as configura√ß√µes organizacionais\n * armazenadas no Firestore com o Cloud Run analyzer service.\n * \n * üöÄ CORE DIFFERENTIATOR: Integra√ß√£o entre configura√ß√µes personalizadas\n * e o motor de an√°lise adaptativo.\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport axios, { AxiosInstance } from 'axios';\nimport { OrganizationRepository, CustomParametersRepository } from '../db/repositories/OrganizationRepository';\nimport { OrganizationProfile, CustomParameters } from '../db/schemas/organization.schema';\nimport { logger } from 'firebase-functions';\n\nexport interface AnalysisConfig {\n  organizationId: string;\n  weights: {\n    structural: number;\n    legal: number;\n    clarity: number;\n    abnt: number;\n  };\n  customRules: Array<{\n    id: string;\n    name: string;\n    pattern: string;\n    severity: 'baixa' | 'media' | 'alta';\n    category: 'structural' | 'legal' | 'clarity' | 'abnt';\n    message: string;\n    suggestion: string;\n    isActive: boolean;\n  }>;\n  preset: 'rigorous' | 'standard' | 'technical' | 'flexible' | 'custom';\n  timeout: number;\n  maxRetries: number;\n}\n\nexport interface AnalyzerServiceConfig {\n  baseUrl: string;\n  apiKey: string;\n  timeout: number;\n}\n\nexport class OrganizationConfigService {\n  private organizationRepo: OrganizationRepository;\n  private customParamsRepo: CustomParametersRepository;\n  private analyzerClient: AxiosInstance;\n  private configCache: Map<string, { config: AnalysisConfig; timestamp: number }> = new Map();\n  private readonly CACHE_TTL = 5 * 60 * 1000; // 5 minutos\n\n  constructor(\n    db: Firestore,\n    analyzerConfig: AnalyzerServiceConfig\n  ) {\n    this.organizationRepo = new OrganizationRepository(db);\n    this.customParamsRepo = new CustomParametersRepository(db);\n    \n    // Configurar cliente HTTP para o Cloud Run analyzer\n    this.analyzerClient = axios.create({\n      baseURL: analyzerConfig.baseUrl,\n      timeout: analyzerConfig.timeout,\n      headers: {\n        'Authorization': `Bearer ${analyzerConfig.apiKey}`,\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Interceptor para logging de requests\n    this.analyzerClient.interceptors.request.use(\n      (config) => {\n        logger.info('Sending request to analyzer service', {\n          url: config.url,\n          method: config.method,\n          organizationId: config.data?.organizationId\n        });\n        return config;\n      },\n      (error) => {\n        logger.error('Request interceptor error', { error: error.message });\n        return Promise.reject(error);\n      }\n    );\n\n    // Interceptor para logging de responses\n    this.analyzerClient.interceptors.response.use(\n      (response) => {\n        logger.info('Received response from analyzer service', {\n          status: response.status,\n          url: response.config.url\n        });\n        return response;\n      },\n      (error) => {\n        logger.error('Analyzer service error', {\n          status: error.response?.status,\n          message: error.message,\n          url: error.config?.url\n        });\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  /**\n   * Obt√©m configura√ß√£o de an√°lise para uma organiza√ß√£o\n   */\n  async getAnalysisConfig(organizationId: string): Promise<AnalysisConfig> {\n    // Verificar cache primeiro\n    const cached = this.configCache.get(organizationId);\n    if (cached && (Date.now() - cached.timestamp) < this.CACHE_TTL) {\n      logger.debug('Returning cached config', { organizationId });\n      return cached.config;\n    }\n\n    try {\n      // Buscar organiza√ß√£o\n      const organization = await this.organizationRepo.findById(organizationId);\n      if (!organization) {\n        throw new Error(`Organization not found: ${organizationId}`);\n      }\n\n      // Buscar par√¢metros customizados\n      const customParams = await this.customParamsRepo.findByOrganization(organizationId);\n\n      // Construir configura√ß√£o de an√°lise\n      const config = await this.buildAnalysisConfig(organization, customParams);\n\n      // Armazenar no cache\n      this.configCache.set(organizationId, {\n        config,\n        timestamp: Date.now()\n      });\n\n      logger.info('Built analysis config for organization', {\n        organizationId,\n        preset: config.preset,\n        customRulesCount: config.customRules.length\n      });\n\n      return config;\n    } catch (error) {\n      logger.error('Error getting analysis config', {\n        organizationId,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Sincroniza configura√ß√£o com o Cloud Run analyzer\n   */\n  async syncConfigWithAnalyzer(organizationId: string): Promise<void> {\n    try {\n      const config = await this.getAnalysisConfig(organizationId);\n      \n      // Enviar configura√ß√£o para o analyzer service\n      await this.analyzerClient.post('/config/sync', {\n        organizationId,\n        config\n      });\n\n      logger.info('Config synced with analyzer service', { organizationId });\n    } catch (error) {\n      logger.error('Error syncing config with analyzer', {\n        organizationId,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Valida configura√ß√£o com o analyzer service\n   */\n  async validateConfig(config: AnalysisConfig): Promise<{ isValid: boolean; errors: string[] }> {\n    try {\n      const response = await this.analyzerClient.post('/config/validate', config);\n      return response.data;\n    } catch (error) {\n      logger.error('Error validating config', {\n        organizationId: config.organizationId,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Obt√©m presets dispon√≠veis do analyzer service\n   */\n  async getAvailablePresets(): Promise<Array<{ id: string; name: string; description: string; weights: any }>> {\n    try {\n      const response = await this.analyzerClient.get('/config/presets');\n      return response.data;\n    } catch (error) {\n      logger.error('Error getting available presets', {\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Limpa cache de configura√ß√£o\n   */\n  clearConfigCache(organizationId?: string): void {\n    if (organizationId) {\n      this.configCache.delete(organizationId);\n      logger.debug('Cleared config cache for organization', { organizationId });\n    } else {\n      this.configCache.clear();\n      logger.debug('Cleared all config cache');\n    }\n  }\n\n  /**\n   * Alias para clearConfigCache\n   */\n  async clearCache(organizationId: string): Promise<void> {\n    this.clearConfigCache(organizationId);\n  }\n\n  /**\n   * Obter presets dispon√≠veis para uma organiza√ß√£o\n   */\n  async getPresets(organizationId: string): Promise<any[]> {\n    try {\n      const organization = await this.organizationRepo.findById(organizationId);\n      if (!organization) {\n        throw new Error(`Organization ${organizationId} not found`);\n      }\n\n      // Retornar presets padr√£o + customizados da organiza√ß√£o\n      const defaultPresets = [\n        { id: 'RIGOROUS', name: 'Rigoroso', description: 'An√°lise detalhada e rigorosa' },\n        { id: 'STANDARD', name: 'Padr√£o', description: 'An√°lise equilibrada' },\n        { id: 'TECHNICAL', name: 'T√©cnico', description: 'Foco em aspectos t√©cnicos' },\n        { id: 'FAST', name: 'R√°pido', description: 'An√°lise r√°pida e b√°sica' }\n      ];\n\n      // Buscar presets customizados da organiza√ß√£o\n      const customPresets = await this.customParamsRepo.findByOrganization(organizationId);\n      \n      return [\n        ...defaultPresets,\n        ...customPresets.map(preset => ({\n          id: preset.id,\n          name: preset.name,\n          description: preset.description,\n          custom: true\n        }))\n      ];\n    } catch (error) {\n      logger.error('Error getting presets:', { error: String(error), organizationId });\n      throw error;\n    }\n  }\n\n  /**\n   * Criar novo preset customizado\n   */\n  async createPreset(organizationId: string, presetData: any): Promise<any> {\n    try {\n      const organization = await this.organizationRepo.findById(organizationId);\n      if (!organization) {\n        throw new Error(`Organization ${organizationId} not found`);\n      }\n\n      const preset = {\n         id: presetData.id || `custom_${Date.now()}`,\n         organizationId,\n         name: presetData.name,\n         description: presetData.description,\n         weights: presetData.weights,\n         customRules: presetData.customRules || [],\n         presetType: 'CUSTOM' as const,\n         status: 'ACTIVE' as const,\n         isDefault: false,\n         version: '1.0.0',\n         createdBy: 'system',\n         createdAt: new Date(),\n         updatedAt: new Date()\n       };\n\n      await this.customParamsRepo.create(preset);\n      \n      // Limpar cache\n      this.clearConfigCache(organizationId);\n      \n      return preset;\n    } catch (error) {\n      logger.error('Error creating preset:', { error: String(error), organizationId });\n      throw error;\n    }\n  }\n\n  /**\n   * Obter estat√≠sticas de uso das configura√ß√µes\n   */\n  async getUsageStats(organizationId: string): Promise<any> {\n    try {\n      const organization = await this.organizationRepo.findById(organizationId);\n      if (!organization) {\n        throw new Error(`Organization ${organizationId} not found`);\n      }\n\n      // Estat√≠sticas b√°sicas (em um cen√°rio real, viria de m√©tricas/analytics)\n      return {\n        organizationId,\n        totalAnalyses: 0, // Seria obtido do banco de dados\n        configChanges: 0, // Seria obtido do hist√≥rico\n        lastConfigUpdate: organization.updatedAt,\n        activePresets: await this.customParamsRepo.findByOrganization(organizationId).then(p => p.length),\n        cacheHits: 0, // Seria obtido de m√©tricas\n        avgAnalysisTime: 0 // Seria calculado das an√°lises\n      };\n    } catch (error) {\n      logger.error('Error getting usage stats:', { error: String(error), organizationId });\n      throw error;\n    }\n  }\n\n  /**\n   * Sincronizar configura√ß√µes com o analisador\n   */\n  async syncWithAnalyzer(organizationId: string): Promise<void> {\n     try {\n       const organization = await this.organizationRepo.findById(organizationId);\n       if (!organization) {\n         throw new Error(`Organization ${organizationId} not found`);\n       }\n\n       const config = this.buildAnalysisConfig(organization, []);\n       \n       // Enviar configura√ß√£o para o analisador via HTTP\n       const response = await this.analyzerClient.post('/config/sync', {\n         organizationId,\n         config\n       });\n       \n       if (response.status !== 200) {\n         throw new Error(`Failed to sync with analyzer: ${response.statusText}`);\n       }\n       \n       logger.info('Configuration synced with analyzer', { organizationId });\n     } catch (error) {\n       logger.error('Error syncing with analyzer:', { error: String(error), organizationId });\n       throw error;\n     }\n   }\n\n  /**\n   * Constr√≥i configura√ß√£o de an√°lise baseada nos dados da organiza√ß√£o\n   */\n  private async buildAnalysisConfig(\n    organization: OrganizationProfile,\n    customParams: CustomParameters[]\n  ): Promise<AnalysisConfig> {\n    // Pesos padr√£o baseados no tipo de organiza√ß√£o\n    const defaultWeights = this.getDefaultWeightsByType(organization.organizationType);\n    \n    // Aplicar pesos customizados se existirem\n    const weights = customParams.length > 0 \n      ? this.mergeCustomWeights(defaultWeights, customParams)\n      : defaultWeights;\n\n    // Construir regras customizadas\n    const customRules = customParams\n      .filter(param => param.customRules && param.customRules.length > 0 && param.status === 'ACTIVE')\n      .flatMap(param => param.customRules.map(ruleId => ({\n        id: ruleId,\n        name: `Regra ${ruleId}`,\n        pattern: '',\n        severity: 'media' as const,\n        category: 'legal' as const,\n        message: `Regra customizada ativada`,\n        suggestion: 'Verificar conformidade',\n        isActive: true\n      })));\n\n    // Determinar preset baseado no tipo de organiza√ß√£o\n    const preset = this.determinePreset(organization.organizationType, customParams);\n\n    return {\n      organizationId: organization.id!,\n      weights,\n      customRules,\n      preset,\n      timeout: 300, // Default timeout\n      maxRetries: 3 // Default max retries\n    };\n  }\n\n  /**\n   * Obt√©m pesos padr√£o baseados no tipo de organiza√ß√£o\n   */\n  private getDefaultWeightsByType(orgType: string): AnalysisConfig['weights'] {\n    const weightPresets = {\n      'tribunal_contas': { structural: 0.25, legal: 0.50, clarity: 0.20, abnt: 0.05 }, // Rigoroso\n      'prefeitura': { structural: 0.25, legal: 0.25, clarity: 0.25, abnt: 0.25 },      // Padr√£o\n      'secretaria_obras': { structural: 0.40, legal: 0.20, clarity: 0.10, abnt: 0.30 }, // T√©cnico\n      'orgao_federal': { structural: 0.30, legal: 0.40, clarity: 0.20, abnt: 0.10 },   // Rigoroso moderado\n      'empresa_publica': { structural: 0.30, legal: 0.30, clarity: 0.30, abnt: 0.10 }  // Flex√≠vel\n    };\n\n    return weightPresets[orgType as keyof typeof weightPresets] || weightPresets.prefeitura;\n  }\n\n  /**\n   * Mescla pesos customizados com os padr√£o\n   */\n  private mergeCustomWeights(\n    defaultWeights: AnalysisConfig['weights'],\n    customParams: CustomParameters[]\n  ): AnalysisConfig['weights'] {\n    // Encontrar par√¢metros de peso ativos\n    const weightParams = customParams.filter(p => p.weights && p.status === 'ACTIVE');\n    \n    if (weightParams.length === 0) {\n      return defaultWeights;\n    }\n\n    // Usar os pesos do primeiro par√¢metro ativo encontrado\n    const activeParam = weightParams[0];\n    return {\n      structural: activeParam.weights.structural,\n      legal: activeParam.weights.legal,\n      clarity: activeParam.weights.clarity,\n      abnt: activeParam.weights.abnt\n    };\n  }\n\n  /**\n   * Determina preset baseado no tipo de organiza√ß√£o e par√¢metros customizados\n   */\n  private determinePreset(\n    orgType: string,\n    customParams: CustomParameters[]\n  ): AnalysisConfig['preset'] {\n    // Se h√° par√¢metros customizados significativos, usar preset custom\n    const hasCustomWeights = customParams.some(p => p.weights && p.status === 'ACTIVE');\n    const hasCustomRules = customParams.some(p => p.customRules && p.customRules.length > 0 && p.status === 'ACTIVE');\n    \n    if (hasCustomWeights || hasCustomRules) {\n      return 'custom';\n    }\n\n    // Mapear tipo de organiza√ß√£o para preset\n    const presetMap = {\n      'tribunal_contas': 'rigorous' as const,\n      'prefeitura': 'standard' as const,\n      'secretaria_obras': 'technical' as const,\n      'orgao_federal': 'rigorous' as const,\n      'empresa_publica': 'flexible' as const\n    };\n\n    return presetMap[orgType as keyof typeof presetMap] || 'standard';\n  }\n\n  /**\n   * Obt√©m estat√≠sticas de uso de configura√ß√µes\n   */\n  async getConfigUsageStats(organizationId: string): Promise<{\n    totalAnalyses: number;\n    avgScore: number;\n    lastUsed: Date | null;\n    configVersion: number;\n  }> {\n    try {\n      // Implementar busca de estat√≠sticas no AnalysisRepository\n      // Por enquanto, retornar dados mock\n      return {\n        totalAnalyses: 0,\n        avgScore: 0,\n        lastUsed: null,\n        configVersion: 1\n      };\n    } catch (error) {\n      logger.error('Error getting config usage stats', {\n        organizationId,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n      throw error;\n    }\n  }\n}\n\n/**\n * Factory function para criar inst√¢ncia do servi√ßo\n */\nexport function createOrganizationConfigService(\n  db: Firestore,\n  analyzerConfig: AnalyzerServiceConfig\n): OrganizationConfigService {\n  return new OrganizationConfigService(db, analyzerConfig);\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/services/ParameterEngine.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'OrganizationConfig' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'OrganizationConfig' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'getDominantCategory' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDominantCategory' is defined but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":268,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":268,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":268,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":268,"endColumn":18}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ParameterEngine - Motor de Par√¢metros de An√°lise\n * \n * Servi√ßo respons√°vel por gerenciar e aplicar par√¢metros de an√°lise\n * personalizados para cada organiza√ß√£o, incluindo pesos, regras customizadas\n * e configura√ß√µes avan√ßadas.\n * \n * üöÄ CORE DIFFERENTIATOR: Engine adaptativo que personaliza an√°lises\n * baseado no perfil e hist√≥rico da organiza√ß√£o.\n */\n\nimport { Firestore } from 'firebase-admin/firestore';\nimport { logger } from 'firebase-functions';\nimport { \n  OrganizationConfig, \n  AnalysisWeights, \n  CustomRule, \n  AnalysisPreset,\n  PRESET_WEIGHTS,\n  validateWeights,\n  getDominantCategory\n} from '../types/config.types';\nimport { OrganizationRepository, CustomParametersRepository } from '../db/repositories/OrganizationRepository';\nimport { OrganizationProfile, CustomParameters } from '../db/schemas/organization.schema';\nimport { AnalysisRepository } from '../db/repositories/AnalysisRepository';\nimport { Analysis } from '../db/schemas/analysis.schema';\n\nexport interface ParameterEngineConfig {\n  enableAdaptiveWeights: boolean;\n  enableLearningMode: boolean;\n  adaptationThreshold: number; // N√∫mero m√≠nimo de an√°lises para adapta√ß√£o\n  maxWeightAdjustment: number; // M√°ximo ajuste de peso (em %)\n  cacheTimeout: number; // Timeout do cache em ms\n}\n\nexport interface AnalysisParameters {\n  organizationId: string;\n  weights: AnalysisWeights;\n  customRules: CustomRule[];\n  preset: AnalysisPreset;\n  adaptiveAdjustments?: {\n    weightAdjustments: Partial<AnalysisWeights>;\n    confidenceScore: number;\n    basedOnAnalyses: number;\n    lastUpdated: Date;\n  };\n  metadata: {\n    configVersion: number;\n    engineVersion: string;\n    generatedAt: Date;\n    expiresAt: Date;\n  };\n}\n\nexport interface ParameterOptimization {\n  suggestedWeights: AnalysisWeights;\n  reasoning: string;\n  confidence: number;\n  basedOnAnalyses: number;\n  improvements: {\n    category: string;\n    currentWeight: number;\n    suggestedWeight: number;\n    expectedImprovement: number;\n  }[];\n}\n\nexport class ParameterEngine {\n  private db: Firestore;\n  private organizationRepo: OrganizationRepository;\n  private customParamsRepo: CustomParametersRepository;\n  private analysisRepo: AnalysisRepository;\n  private config: ParameterEngineConfig;\n  private parameterCache: Map<string, { params: AnalysisParameters; timestamp: number }> = new Map();\n  private readonly ENGINE_VERSION = '1.0.0';\n\n  constructor(\n    firestore: Firestore,\n    config: Partial<ParameterEngineConfig> = {}\n  ) {\n    this.db = firestore;\n    this.organizationRepo = new OrganizationRepository(firestore);\n    this.customParamsRepo = new CustomParametersRepository(firestore);\n    this.analysisRepo = new AnalysisRepository(firestore);\n    \n    // Configura√ß√£o padr√£o\n    this.config = {\n      enableAdaptiveWeights: true,\n      enableLearningMode: true,\n      adaptationThreshold: 10,\n      maxWeightAdjustment: 15.0,\n      cacheTimeout: 30 * 60 * 1000, // 30 minutos\n      ...config\n    };\n\n    logger.info('ParameterEngine initialized', {\n      version: this.ENGINE_VERSION,\n      config: this.config\n    });\n  }\n\n  /**\n   * Gera par√¢metros de an√°lise otimizados para uma organiza√ß√£o\n   */\n  async generateParameters(organizationId: string, forceRefresh = false): Promise<AnalysisParameters> {\n    const cacheKey = `params_${organizationId}`;\n    \n    // Verificar cache\n    if (!forceRefresh && this.parameterCache.has(cacheKey)) {\n      const cached = this.parameterCache.get(cacheKey)!;\n      if (Date.now() - cached.timestamp < this.config.cacheTimeout) {\n        logger.debug('Returning cached parameters', { organizationId });\n        return cached.params;\n      }\n    }\n\n    try {\n      // Buscar dados da organiza√ß√£o\n      const [organization, customParams, recentAnalyses] = await Promise.all([\n        this.organizationRepo.findById(organizationId),\n        this.customParamsRepo.findByOrganization(organizationId),\n        this.getRecentAnalyses(organizationId)\n      ]);\n\n      if (!organization) {\n        throw new Error(`Organization not found: ${organizationId}`);\n      }\n\n      // Gerar par√¢metros base\n      const baseParams = await this.generateBaseParameters(organization, customParams);\n      \n      // Aplicar otimiza√ß√µes adaptativas se habilitado\n      let finalParams = baseParams;\n      if (this.config.enableAdaptiveWeights && recentAnalyses.length >= this.config.adaptationThreshold) {\n        finalParams = await this.applyAdaptiveOptimizations(baseParams, recentAnalyses);\n      }\n\n      // Adicionar metadata\n      const parameters: AnalysisParameters = {\n        ...finalParams,\n        metadata: {\n          configVersion: customParams.length > 0 ? Math.max(...customParams.map(p => parseInt(p.version) || 1)) : 1,\n          engineVersion: this.ENGINE_VERSION,\n          generatedAt: new Date(),\n          expiresAt: new Date(Date.now() + this.config.cacheTimeout)\n        }\n      };\n\n      // Atualizar cache\n      this.parameterCache.set(cacheKey, {\n        params: parameters,\n        timestamp: Date.now()\n      });\n\n      logger.info('Generated analysis parameters', {\n        organizationId,\n        preset: parameters.preset,\n        customRulesCount: parameters.customRules.length,\n        hasAdaptiveAdjustments: !!parameters.adaptiveAdjustments\n      });\n\n      return parameters;\n    } catch (error) {\n      logger.error('Error generating parameters', {\n        organizationId,\n        error: error instanceof Error ? error.message : error\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Gera par√¢metros base baseados na configura√ß√£o da organiza√ß√£o\n   */\n  private async generateBaseParameters(\n    organization: OrganizationProfile,\n    customParams: CustomParameters[]\n  ): Promise<Omit<AnalysisParameters, 'metadata'>> {\n    // Determinar preset baseado no tipo de organiza√ß√£o\n    const preset = this.determineOptimalPreset(organization, customParams);\n    \n    // Obter pesos base\n    let weights = PRESET_WEIGHTS[preset];\n    \n    // Aplicar customiza√ß√µes de peso se existirem\n    if (customParams.length > 0) {\n      weights = this.mergeCustomWeights(weights, customParams);\n    }\n\n    // Validar pesos\n    if (!validateWeights(weights)) {\n      logger.warn('Invalid weights detected, using preset weights', {\n        organizationId: organization.id,\n        invalidWeights: weights,\n        preset\n      });\n      weights = PRESET_WEIGHTS[preset];\n    }\n\n    // Compilar regras customizadas\n    const customRules = this.compileCustomRules(customParams);\n\n    return {\n      organizationId: organization.id!,\n      weights,\n      customRules,\n      preset\n    };\n  }\n\n  /**\n   * Aplica otimiza√ß√µes adaptativas baseadas no hist√≥rico de an√°lises\n   */\n  private async applyAdaptiveOptimizations(\n    baseParams: Omit<AnalysisParameters, 'metadata'>,\n    recentAnalyses: Analysis[]\n  ): Promise<Omit<AnalysisParameters, 'metadata'>> {\n    if (!this.config.enableLearningMode) {\n      return baseParams;\n    }\n\n    try {\n      // Analisar padr√µes de performance\n      const optimization = await this.analyzePerformancePatterns(recentAnalyses, baseParams.weights);\n      \n      if (optimization.confidence < 0.7) {\n        logger.debug('Low confidence optimization, skipping adaptive adjustments', {\n          organizationId: baseParams.organizationId,\n          confidence: optimization.confidence\n        });\n        return baseParams;\n      }\n\n      // Aplicar ajustes adaptativos\n      const adaptiveWeights = this.applyWeightAdjustments(baseParams.weights, optimization);\n      \n      return {\n        ...baseParams,\n        weights: adaptiveWeights,\n        adaptiveAdjustments: {\n          weightAdjustments: this.calculateWeightDifferences(baseParams.weights, adaptiveWeights),\n          confidenceScore: optimization.confidence,\n          basedOnAnalyses: recentAnalyses.length,\n          lastUpdated: new Date()\n        }\n      };\n    } catch (error) {\n      logger.error('Error applying adaptive optimizations', {\n        organizationId: baseParams.organizationId,\n        error: error instanceof Error ? error.message : error\n      });\n      return baseParams;\n    }\n  }\n\n  /**\n   * Analisa padr√µes de performance para sugerir otimiza√ß√µes\n   */\n  private async analyzePerformancePatterns(\n    analyses: Analysis[],\n    currentWeights: AnalysisWeights\n  ): Promise<ParameterOptimization> {\n    // Calcular m√©tricas de performance por categoria\n    const categoryPerformance = this.calculateCategoryPerformance(analyses);\n    \n    // Identificar categorias com baixa performance\n    const underperformingCategories = Object.entries(categoryPerformance)\n      .filter(([_, performance]) => performance.averageScore < 70)\n      .map(([category]) => category);\n\n    // Gerar sugest√µes de ajuste\n    const suggestedWeights = { ...currentWeights };\n    const improvements: ParameterOptimization['improvements'] = [];\n    \n    for (const category of underperformingCategories) {\n      const currentWeight = currentWeights[category as keyof AnalysisWeights];\n      const performance = categoryPerformance[category];\n      \n      // Calcular ajuste sugerido baseado na performance\n      const adjustmentFactor = Math.min(\n        this.config.maxWeightAdjustment,\n        (70 - performance.averageScore) * 0.3\n      );\n      \n      const suggestedWeight = Math.min(100, currentWeight + adjustmentFactor);\n      \n      improvements.push({\n        category,\n        currentWeight,\n        suggestedWeight,\n        expectedImprovement: adjustmentFactor * 0.5\n      });\n      \n      suggestedWeights[category as keyof AnalysisWeights] = suggestedWeight;\n    }\n\n    // Normalizar pesos para somar 100%\n    const normalizedWeights = this.normalizeWeights(suggestedWeights);\n    \n    // Calcular confian√ßa baseada no n√∫mero de an√°lises e consist√™ncia\n    const confidence = Math.min(0.95, analyses.length / 50) * \n                      (1 - this.calculateWeightVariance(analyses) / 100);\n\n    return {\n      suggestedWeights: normalizedWeights,\n      reasoning: `Otimiza√ß√£o baseada em ${analyses.length} an√°lises recentes. ` +\n                `Categorias com baixa performance: ${underperformingCategories.join(', ')}`,\n      confidence,\n      basedOnAnalyses: analyses.length,\n      improvements\n    };\n  }\n\n  /**\n   * Calcula performance por categoria\n   */\n  private calculateCategoryPerformance(analyses: Analysis[]): Record<string, { averageScore: number; count: number }> {\n    const categories = ['structural', 'legal', 'clarity', 'abnt'];\n    const performance: Record<string, { averageScore: number; count: number }> = {};\n    \n    for (const category of categories) {\n      const scores = analyses\n        .filter(a => a.results?.scores?.[category as keyof typeof a.results.scores] !== undefined)\n        .map(a => a.results!.scores![category as keyof typeof a.results.scores]);\n      \n      performance[category] = {\n        averageScore: scores.length > 0 ? scores.reduce((a, b) => a + b, 0) / scores.length : 0,\n        count: scores.length\n      };\n    }\n    \n    return performance;\n  }\n\n  /**\n   * Determina o preset √≥timo para uma organiza√ß√£o\n   */\n  private determineOptimalPreset(\n    organization: OrganizationProfile,\n    customParams: CustomParameters[]\n  ): AnalysisPreset {\n    // Se h√° par√¢metros customizados ativos, usar CUSTOM\n    if (customParams.some(p => p.status === 'ACTIVE' && p.presetType === 'CUSTOM')) {\n      return AnalysisPreset.CUSTOM;\n    }\n\n    // Determinar baseado no tipo de organiza√ß√£o\n    switch (organization.organizationType) {\n      case 'FEDERAL':\n      case 'ESTADUAL':\n        return AnalysisPreset.RIGOROUS;\n      case 'MUNICIPAL':\n        return AnalysisPreset.STANDARD;\n      case 'EMPRESA_PUBLICA':\n      case 'SOCIEDADE_ECONOMIA_MISTA':\n        return AnalysisPreset.TECHNICAL;\n      default:\n        return AnalysisPreset.STANDARD;\n    }\n  }\n\n  /**\n   * Mescla pesos customizados com pesos base\n   */\n  private mergeCustomWeights(\n    baseWeights: AnalysisWeights,\n    customParams: CustomParameters[]\n  ): AnalysisWeights {\n    const activeParams = customParams.filter(p => p.status === 'ACTIVE');\n    \n    if (activeParams.length === 0) {\n      return baseWeights;\n    }\n\n    // Usar o par√¢metro mais recente ou o marcado como padr√£o\n    const primaryParam = activeParams.find(p => p.isDefault) || \n                        activeParams.sort((a, b) => b.updatedAt.getTime() - a.updatedAt.getTime())[0];\n    \n    return primaryParam.weights || baseWeights;\n  }\n\n  /**\n   * Compila regras customizadas ativas\n   */\n  private compileCustomRules(customParams: CustomParameters[]): CustomRule[] {\n    const rules: CustomRule[] = [];\n    \n    for (const param of customParams.filter(p => p.status === 'ACTIVE')) {\n      if (param.customRules && param.customRules.length > 0) {\n        // Converter IDs de regras em objetos CustomRule\n        // Por enquanto, criar regras b√°sicas - isso pode ser expandido\n        for (const ruleId of param.customRules) {\n          rules.push({\n            id: ruleId,\n            name: `Regra Customizada ${ruleId}`,\n            description: `Regra customizada para ${param.name}`,\n            pattern: '', // Seria preenchido com dados reais\n            patternType: 'regex',\n            severity: 'medium',\n            category: 'legal',\n            message: 'Regra customizada ativada',\n            isActive: true,\n            weight: 1,\n            createdAt: param.createdAt,\n            updatedAt: param.updatedAt\n          });\n        }\n      }\n    }\n    \n    return rules;\n  }\n\n  /**\n   * Busca an√°lises recentes para aprendizado adaptativo\n   */\n  private async getRecentAnalyses(organizationId: string, limit = 50): Promise<Analysis[]> {\n    try {\n      return await this.analysisRepo.findByOrganization(organizationId, {\n        orderBy: [{ field: 'createdAt', direction: 'desc' }],\n        limit\n      });\n    } catch (error) {\n      logger.warn('Error fetching recent analyses for adaptive learning', {\n        organizationId,\n        error: error instanceof Error ? error.message : error\n      });\n      return [];\n    }\n  }\n\n  /**\n   * Aplica ajustes de peso baseados na otimiza√ß√£o\n   */\n  private applyWeightAdjustments(\n    baseWeights: AnalysisWeights,\n    optimization: ParameterOptimization\n  ): AnalysisWeights {\n    const adjustedWeights = { ...baseWeights };\n    \n    for (const improvement of optimization.improvements) {\n      const category = improvement.category as keyof AnalysisWeights;\n      const maxAdjustment = this.config.maxWeightAdjustment;\n      const adjustment = Math.min(maxAdjustment, improvement.suggestedWeight - improvement.currentWeight);\n      \n      adjustedWeights[category] = Math.max(0, Math.min(100, baseWeights[category] + adjustment));\n    }\n    \n    return this.normalizeWeights(adjustedWeights);\n  }\n\n  /**\n   * Normaliza pesos para somar 100%\n   */\n  private normalizeWeights(weights: AnalysisWeights): AnalysisWeights {\n    const total = weights.structural + weights.legal + weights.clarity + weights.abnt;\n    \n    if (Math.abs(total - 100) < 0.01) {\n      return weights;\n    }\n    \n    const factor = 100 / total;\n    \n    return {\n      structural: Math.round(weights.structural * factor * 10) / 10,\n      legal: Math.round(weights.legal * factor * 10) / 10,\n      clarity: Math.round(weights.clarity * factor * 10) / 10,\n      abnt: Math.round(weights.abnt * factor * 10) / 10\n    };\n  }\n\n  /**\n   * Calcula diferen√ßas entre pesos\n   */\n  private calculateWeightDifferences(\n    original: AnalysisWeights,\n    adjusted: AnalysisWeights\n  ): Partial<AnalysisWeights> {\n    return {\n      structural: adjusted.structural - original.structural,\n      legal: adjusted.legal - original.legal,\n      clarity: adjusted.clarity - original.clarity,\n      abnt: adjusted.abnt - original.abnt\n    };\n  }\n\n  /**\n   * Calcula vari√¢ncia de pesos nas an√°lises\n   */\n  private calculateWeightVariance(analyses: Analysis[]): number {\n    // Implementa√ß√£o simplificada - calcular vari√¢ncia baseada nos scores\n    const scores = analyses.map(a => a.results?.scores?.overall || 0);\n    const mean = scores.reduce((a, b) => a + b, 0) / scores.length;\n    const variance = scores.reduce((acc, score) => acc + Math.pow(score - mean, 2), 0) / scores.length;\n    \n    return Math.sqrt(variance);\n  }\n\n  /**\n   * Otimiza par√¢metros baseado no hist√≥rico de an√°lises\n   */\n  async optimizeParameters(\n    organizationId: string,\n    analysisHistory?: Analysis[]\n  ): Promise<ParameterOptimization> {\n    try {\n      logger.info(`Otimizando par√¢metros para organiza√ß√£o: ${organizationId}`);\n      \n      // Buscar an√°lises recentes se n√£o fornecidas\n      const analyses = analysisHistory || await this.getRecentAnalyses(organizationId, 100);\n      \n      if (analyses.length < this.config.adaptationThreshold) {\n        throw new Error(`Hist√≥rico insuficiente para otimiza√ß√£o. M√≠nimo: ${this.config.adaptationThreshold}, atual: ${analyses.length}`);\n      }\n      \n      // Obter par√¢metros atuais\n      const currentParams = await this.generateParameters(organizationId);\n      \n      // Analisar padr√µes de performance\n      const optimization = await this.analyzePerformancePatterns(analyses, currentParams.weights);\n      \n      logger.info(`Otimiza√ß√£o gerada para ${organizationId}:`, {\n        confidence: optimization.confidence,\n        basedOnAnalyses: optimization.basedOnAnalyses,\n        improvements: optimization.improvements.length\n      });\n      \n      return optimization;\n    } catch (error) {\n      logger.error(`Erro ao otimizar par√¢metros para ${organizationId}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Limpa cache de par√¢metros\n   */\n  clearCache(organizationId?: string): void {\n    if (organizationId) {\n      this.parameterCache.delete(`params_${organizationId}`);\n    } else {\n      this.parameterCache.clear();\n    }\n    \n    logger.info('Parameter cache cleared', { organizationId });\n  }\n\n  /**\n   * Obt√©m estat√≠sticas do engine\n   */\n  getEngineStats(): {\n    version: string;\n    config: ParameterEngineConfig;\n    cacheSize: number;\n    cacheHitRate?: number;\n  } {\n    return {\n      version: this.ENGINE_VERSION,\n      config: this.config,\n      cacheSize: this.parameterCache.size\n    };\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/services/TaskQueueService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[320,323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[320,323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1169,1172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1169,1172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2766,2769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2766,2769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":166,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4182,4185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4182,4185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":207,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5211,5214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5211,5214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Servi√ßo para gerenciar filas de tarefas usando Cloud Tasks\n */\n\nimport { CloudTasksClient } from '@google-cloud/tasks';\n\nexport interface TaskPayload {\n  analysisId: string;\n  documentId: string;\n  organizationId: string;\n  priority?: 'low' | 'normal' | 'high';\n  retryCount?: number;\n  metadata?: Record<string, any>;\n}\n\nexport interface TaskOptions {\n  delay?: number; // em segundos\n  maxRetries?: number;\n  timeout?: number; // em segundos\n}\n\nexport class TaskQueueService {\n  private client: CloudTasksClient;\n  private projectId: string;\n  private location: string;\n  private queueName: string;\n\n  constructor(\n    projectId: string,\n    location: string = 'us-central1',\n    queueName: string = 'analysis-queue'\n  ) {\n    this.client = new CloudTasksClient();\n    this.projectId = projectId;\n    this.location = location;\n    this.queueName = queueName;\n  }\n\n  /**\n   * Adiciona uma tarefa √† fila\n   */\n  async enqueueTask(\n    payload: TaskPayload,\n    options: TaskOptions = {}\n  ): Promise<string> {\n    try {\n      const parent = this.client.queuePath(\n        this.projectId,\n        this.location,\n        this.queueName\n      );\n\n      const task: any = {\n        httpRequest: {\n          httpMethod: 'POST',\n          url: `https://${this.location}-${this.projectId}.cloudfunctions.net/processAnalysis`,\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: Buffer.from(JSON.stringify(payload)).toString('base64'),\n        },\n      };\n\n      // Configurar delay se especificado\n      if (options.delay && options.delay > 0) {\n        const scheduleTime = new Date();\n        scheduleTime.setSeconds(scheduleTime.getSeconds() + options.delay);\n        task.scheduleTime = {\n          seconds: Math.floor(scheduleTime.getTime() / 1000),\n        };\n      }\n\n      // Configurar retry policy\n      if (options.maxRetries) {\n        task.retryConfig = {\n          maxAttempts: options.maxRetries,\n        };\n      }\n\n      const [response] = await this.client.createTask({\n        parent,\n        task,\n      });\n\n      console.log(`Tarefa criada: ${response.name}`);\n      return response.name || '';\n    } catch (error) {\n      console.error('Erro ao criar tarefa:', error);\n      throw new Error(`Falha ao enfileirar tarefa: ${error}`);\n    }\n  }\n\n  /**\n   * Cancela uma tarefa espec√≠fica\n   */\n  async cancelTask(taskName: string): Promise<void> {\n    try {\n      await this.client.deleteTask({ name: taskName });\n      console.log(`Tarefa cancelada: ${taskName}`);\n    } catch (error) {\n      console.error('Erro ao cancelar tarefa:', error);\n      throw new Error(`Falha ao cancelar tarefa: ${error}`);\n    }\n  }\n\n  /**\n   * Lista tarefas pendentes na fila\n   */\n  async listPendingTasks(): Promise<any[]> {\n    try {\n      const parent = this.client.queuePath(\n        this.projectId,\n        this.location,\n        this.queueName\n      );\n\n      const [tasks] = await this.client.listTasks({ parent });\n      return tasks;\n    } catch (error) {\n      console.error('Erro ao listar tarefas:', error);\n      throw new Error(`Falha ao listar tarefas: ${error}`);\n    }\n  }\n\n  /**\n   * Pausa a fila (impede processamento de novas tarefas)\n   */\n  async pauseQueue(): Promise<void> {\n    try {\n      const name = this.client.queuePath(\n        this.projectId,\n        this.location,\n        this.queueName\n      );\n\n      await this.client.pauseQueue({ name });\n      console.log(`Fila pausada: ${this.queueName}`);\n    } catch (error) {\n      console.error('Erro ao pausar fila:', error);\n      throw new Error(`Falha ao pausar fila: ${error}`);\n    }\n  }\n\n  /**\n   * Resume a fila (permite processamento de tarefas)\n   */\n  async resumeQueue(): Promise<void> {\n    try {\n      const name = this.client.queuePath(\n        this.projectId,\n        this.location,\n        this.queueName\n      );\n\n      await this.client.resumeQueue({ name });\n      console.log(`Fila resumida: ${this.queueName}`);\n    } catch (error) {\n      console.error('Erro ao resumir fila:', error);\n      throw new Error(`Falha ao resumir fila: ${error}`);\n    }\n  }\n\n  /**\n   * Obt√©m estat√≠sticas da fila\n   */\n  async getQueueStats(): Promise<any> {\n    try {\n      const name = this.client.queuePath(\n        this.projectId,\n        this.location,\n        this.queueName\n      );\n\n      const [queue] = await this.client.getQueue({ name });\n      return {\n        name: queue.name,\n        state: queue.state,\n        tasksCount: await this.getTasksCount(),\n      };\n    } catch (error) {\n      console.error('Erro ao obter estat√≠sticas da fila:', error);\n      throw new Error(`Falha ao obter estat√≠sticas: ${error}`);\n    }\n  }\n\n  /**\n   * Conta o n√∫mero de tarefas na fila\n   */\n  private async getTasksCount(): Promise<number> {\n    try {\n      const tasks = await this.listPendingTasks();\n      return tasks.length;\n    } catch (error) {\n      console.error('Erro ao contar tarefas:', error);\n      return 0;\n    }\n  }\n\n  /**\n   * Cria uma tarefa de an√°lise com prioridade\n   */\n  async enqueueAnalysisTask(\n    analysisId: string,\n    documentId: string,\n    organizationId: string,\n    priority: 'low' | 'normal' | 'high' = 'normal',\n    metadata?: Record<string, any>\n  ): Promise<string> {\n    const payload: TaskPayload = {\n      analysisId,\n      documentId,\n      organizationId,\n      priority,\n      metadata,\n    };\n\n    const options: TaskOptions = {\n      maxRetries: 3,\n      timeout: 300, // 5 minutos\n    };\n\n    // Ajustar delay baseado na prioridade\n    switch (priority) {\n      case 'high':\n        options.delay = 0; // Processar imediatamente\n        break;\n      case 'normal':\n        options.delay = 5; // 5 segundos de delay\n        break;\n      case 'low':\n        options.delay = 30; // 30 segundos de delay\n        break;\n    }\n\n    return await this.enqueueTask(payload, options);\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/analysis-config.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":391,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":391,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10897,10900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10897,10900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Analysis Configuration API Tests\n * LicitaReview Cloud Functions\n */\n\nimport { describe, it, expect, beforeEach, afterEach, jest } from \"@jest/globals\";\nimport request from \"supertest\";\nimport { AnalysisPreset, AnalysisWeights } from \"../types\";\n\n// Mock Firebase modules\nconst mockFirestore = {\n  collection: jest.fn(),\n  doc: jest.fn(),\n  where: jest.fn(),\n  orderBy: jest.fn(),\n  limit: jest.fn(),\n  offset: jest.fn(),\n  get: jest.fn(),\n  set: jest.fn(),\n  update: jest.fn(),\n  count: jest.fn(),\n  batch: jest.fn(),\n  FieldValue: {\n    increment: jest.fn()\n  }\n};\n\nconst mockAuth = {\n  verifyIdToken: jest.fn(),\n  getUser: jest.fn()\n};\n\njest.mock(\"../config/firebase\", () => ({\n  collections: {\n    configs: mockFirestore\n  },\n  auth: mockAuth\n}));\n\n// Import the API after mocking\nimport { analysisConfigApi } from \"../api/analysis-config\";\n\ndescribe(\"Analysis Configuration API\", () => {\n  const validToken = \"valid-jwt-token\";\n  const mockUser = {\n    uid: \"test-user-id\",\n    email: \"test@example.com\",\n    organizationId: \"test-org-id\",\n    roles: [\"org_admin\"],\n    permissions: [\"config:read\", \"config:write\"]\n  };\n\n  const mockConfig = {\n    id: \"test-config-id\",\n    organizationId: \"test-org-id\",\n    organizationName: \"Test Organization\",\n    weights: {\n      structural: 25.0,\n      legal: 25.0,\n      clarity: 25.0,\n      abnt: 25.0\n    } as AnalysisWeights,\n    presetType: AnalysisPreset.STANDARD,\n    customRules: [],\n    templates: [],\n    version: 1,\n    isActive: true,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    createdBy: \"test-user-id\"\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    // Setup default auth mocks\n    mockAuth.verifyIdToken.mockResolvedValue({\n      uid: mockUser.uid,\n      email: mockUser.email\n    });\n    \n    mockAuth.getUser.mockResolvedValue({\n      uid: mockUser.uid,\n      email: mockUser.email,\n      customClaims: {\n        organizationId: mockUser.organizationId,\n        roles: mockUser.roles,\n        permissions: mockUser.permissions\n      }\n    });\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"GET /configs/current\", () => {\n    it(\"should return current organization config\", async () => {\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        orderBy: jest.fn().mockReturnThis(),\n        limit: jest.fn().mockReturnThis(),\n        get: jest.fn().mockResolvedValue({\n          empty: false,\n          docs: [\n            {\n              id: mockConfig.id,\n              data: () => mockConfig\n            }\n          ]\n        })\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n\n      const response = await request(analysisConfigApi)\n        .get(\"/current\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.id).toBe(mockConfig.id);\n      expect(response.body.data.organizationId).toBe(mockConfig.organizationId);\n    });\n\n    it(\"should create default config if none exists\", async () => {\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        orderBy: jest.fn().mockReturnThis(),\n        limit: jest.fn().mockReturnThis(),\n        get: jest.fn().mockResolvedValue({\n          empty: true,\n          docs: []\n        })\n      };\n\n      const mockDocRef = {\n        set: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(analysisConfigApi)\n        .get(\"/current\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.presetType).toBe(AnalysisPreset.STANDARD);\n      expect(mockDocRef.set).toHaveBeenCalled();\n    });\n  });\n\n  describe(\"GET /configs/:id\", () => {\n    it(\"should return config by ID\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockConfig.id,\n          data: () => mockConfig\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(analysisConfigApi)\n        .get(`/${mockConfig.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.id).toBe(mockConfig.id);\n    });\n\n    it(\"should return 404 for non-existent config\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: false\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(analysisConfigApi)\n        .get(\"/non-existent-id\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(404);\n      expect(response.body.success).toBe(false);\n    });\n  });\n\n  describe(\"POST /configs\", () => {\n    const createConfigRequest = {\n      organizationId: \"test-org-id\",\n      organizationName: \"Test Organization\",\n      weights: {\n        structural: 30.0,\n        legal: 40.0,\n        clarity: 20.0,\n        abnt: 10.0\n      },\n      presetType: AnalysisPreset.RIGOROUS,\n      customRules: [],\n      createdBy: \"test-user-id\"\n    };\n\n    it(\"should create new config\", async () => {\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        get: jest.fn().mockResolvedValue({\n          empty: true,\n          docs: []\n        })\n      };\n\n      const mockDocRef = {\n        set: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(analysisConfigApi)\n        .post(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(createConfigRequest);\n\n      expect(response.status).toBe(201);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.organizationId).toBe(createConfigRequest.organizationId);\n      expect(mockDocRef.set).toHaveBeenCalled();\n    });\n\n    it(\"should validate weights sum to 100%\", async () => {\n      const invalidRequest = {\n        ...createConfigRequest,\n        weights: {\n          structural: 30.0,\n          legal: 30.0,\n          clarity: 30.0,\n          abnt: 20.0 // Total = 110%\n        }\n      };\n\n      const response = await request(analysisConfigApi)\n        .post(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(invalidRequest);\n\n      expect(response.status).toBe(400);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"100%\");\n    });\n\n    it(\"should prevent duplicate active configs\", async () => {\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        get: jest.fn().mockResolvedValue({\n          empty: false,\n          docs: [\n            {\n              id: \"existing-config-id\",\n              data: () => ({ ...mockConfig, isActive: true })\n            }\n          ]\n        })\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n\n      const response = await request(analysisConfigApi)\n        .post(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(createConfigRequest);\n\n      expect(response.status).toBe(409);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"already exists\");\n    });\n  });\n\n  describe(\"PUT /configs/:id\", () => {\n    const updateRequest = {\n      organizationName: \"Updated Organization Name\",\n      weights: {\n        structural: 20.0,\n        legal: 50.0,\n        clarity: 20.0,\n        abnt: 10.0\n      }\n    };\n\n    it(\"should update existing config\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockConfig.id,\n          data: () => mockConfig\n        }),\n        set: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(analysisConfigApi)\n        .put(`/${mockConfig.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(updateRequest);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.organizationName).toBe(updateRequest.organizationName);\n      expect(response.body.data.version).toBe(mockConfig.version + 1);\n      expect(mockDocRef.set).toHaveBeenCalled();\n    });\n\n    it(\"should validate updated weights\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockConfig.id,\n          data: () => mockConfig\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const invalidUpdate = {\n        weights: {\n          structural: 25.0,\n          legal: 25.0,\n          clarity: 25.0,\n          abnt: 30.0 // Total = 105%\n        }\n      };\n\n      const response = await request(analysisConfigApi)\n        .put(`/${mockConfig.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(invalidUpdate);\n\n      expect(response.status).toBe(400);\n      expect(response.body.success).toBe(false);\n    });\n  });\n\n  describe(\"POST /configs/:id/clone\", () => {\n    it(\"should clone existing config\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockConfig.id,\n          data: () => mockConfig\n        })\n      };\n\n      const mockNewDocRef = {\n        set: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.doc\n        .mockReturnValueOnce(mockDocRef) // First call for getting source config\n        .mockReturnValueOnce(mockNewDocRef); // Second call for setting cloned config\n\n      const response = await request(analysisConfigApi)\n        .post(`/${mockConfig.id}/clone`)\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(201);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.version).toBe(mockConfig.version + 1);\n      expect(response.body.data.isActive).toBe(false);\n      expect(mockNewDocRef.set).toHaveBeenCalled();\n    });\n  });\n\n  describe(\"GET /presets\", () => {\n    it(\"should return available presets\", async () => {\n      const response = await request(analysisConfigApi)\n        .get(\"/presets\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toBeInstanceOf(Array);\n      expect(response.body.data.length).toBeGreaterThan(0);\n      \n      const standardPreset = response.body.data.find(\n        (p: any) => p.preset === AnalysisPreset.STANDARD\n      );\n      expect(standardPreset).toBeDefined();\n      expect(standardPreset.weights).toEqual({\n        structural: 25.0,\n        legal: 25.0,\n        clarity: 25.0,\n        abnt: 25.0\n      });\n    });\n  });\n\n  describe(\"POST /validate-weights\", () => {\n    it(\"should validate correct weights\", async () => {\n      const validWeights = {\n        structural: 25.0,\n        legal: 25.0,\n        clarity: 25.0,\n        abnt: 25.0\n      };\n\n      const response = await request(analysisConfigApi)\n        .post(\"/validate-weights\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(validWeights);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.isValid).toBe(true);\n      expect(response.body.data.total).toBe(100);\n    });\n\n    it(\"should reject incorrect weights\", async () => {\n      const invalidWeights = {\n        structural: 30.0,\n        legal: 30.0,\n        clarity: 30.0,\n        abnt: 30.0 // Total = 120%\n      };\n\n      const response = await request(analysisConfigApi)\n        .post(\"/validate-weights\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(invalidWeights);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.isValid).toBe(false);\n      expect(response.body.data.total).toBe(120);\n      expect(response.body.data.error).toContain(\"100%\");\n    });\n  });\n\n  describe(\"POST /test-rule\", () => {\n    it(\"should test regex pattern matching\", async () => {\n      const testData = {\n        pattern: \"lei\\\\s+14\\\\.133\",\n        text: \"Este edital se baseia na Lei 14.133/2021\",\n        patternType: \"regex\"\n      };\n\n      const response = await request(analysisConfigApi)\n        .post(\"/test-rule\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(testData);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.matches).toBe(true);\n    });\n\n    it(\"should test keyword pattern matching\", async () => {\n      const testData = {\n        pattern: \"sustentabilidade\",\n        text: \"Crit√©rios de sustentabilidade ambiental\",\n        patternType: \"keyword\"\n      };\n\n      const response = await request(analysisConfigApi)\n        .post(\"/test-rule\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(testData);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.matches).toBe(true);\n    });\n\n    it(\"should handle invalid regex patterns\", async () => {\n      const testData = {\n        pattern: \"[invalid regex\",\n        text: \"Test text\",\n        patternType: \"regex\"\n      };\n\n      const response = await request(analysisConfigApi)\n        .post(\"/test-rule\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(testData);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.matches).toBe(false);\n      expect(response.body.data.error).toBeDefined();\n    });\n  });\n\n  describe(\"Authorization\", () => {\n    it(\"should require appropriate permissions\", async () => {\n      const limitedUser = {\n        ...mockUser,\n        permissions: [\"documents:read\"] // No config permissions\n      };\n\n      mockAuth.getUser.mockResolvedValue({\n        uid: limitedUser.uid,\n        email: limitedUser.email,\n        customClaims: {\n          organizationId: limitedUser.organizationId,\n          roles: limitedUser.roles,\n          permissions: limitedUser.permissions\n        }\n      });\n\n      const response = await request(analysisConfigApi)\n        .get(\"/current\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(403);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"permissions\");\n    });\n\n    it(\"should prevent cross-organization access\", async () => {\n      const otherOrgConfig = {\n        ...mockConfig,\n        organizationId: \"other-org-id\"\n      };\n\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockConfig.id,\n          data: () => otherOrgConfig\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(analysisConfigApi)\n        .get(`/${mockConfig.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(403);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"Access denied\");\n    });\n  });\n\n  describe(\"Error Handling\", () => {\n    it(\"should handle Firestore errors\", async () => {\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        orderBy: jest.fn().mockReturnThis(),\n        limit: jest.fn().mockReturnThis(),\n        get: jest.fn().mockRejectedValue(new Error(\"Firestore error\"))\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n\n      const response = await request(analysisConfigApi)\n        .get(\"/current\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(500);\n      expect(response.body.success).toBe(false);\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/basic-integration.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/documents.test.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'express' is defined but never used.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'express' is defined but never used.","line":8,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Documents API Tests\n * LicitaReview Cloud Functions\n */\n\nimport { describe, it, expect, beforeEach, afterEach, jest } from \"@jest/globals\";\nimport request from \"supertest\";\nimport express from \"express\";\nimport { DocumentType, DocumentStatus, LicitationModality } from \"../types\";\n\n// Mock Firebase modules\nconst mockFirestore = {\n  collection: jest.fn(),\n  doc: jest.fn(),\n  where: jest.fn(),\n  orderBy: jest.fn(),\n  limit: jest.fn(),\n  offset: jest.fn(),\n  get: jest.fn(),\n  set: jest.fn(),\n  update: jest.fn(),\n  count: jest.fn()\n};\n\nconst mockAuth = {\n  verifyIdToken: jest.fn(),\n  getUser: jest.fn()\n};\n\njest.mock(\"../config/firebase\", () => ({\n  collections: {\n    documents: mockFirestore\n  },\n  auth: mockAuth\n}));\n\n// Import the API after mocking\nimport { documentsApi } from \"../api/documents\";\n\ndescribe(\"Documents API\", () => {\n  const validToken = \"valid-jwt-token\";\n  const mockUser = {\n    uid: \"test-user-id\",\n    email: \"test@example.com\",\n    organizationId: \"test-org-id\",\n    roles: [\"user\"],\n    permissions: [\"documents:read\", \"documents:write\", \"documents:delete\"]\n  };\n\n  const mockDocument = {\n    id: \"test-document-id\",\n    title: \"Test Document\",\n    content: \"Test content\",\n    classification: {\n      primaryCategory: \"licitacao\",\n      documentType: DocumentType.EDITAL,\n      modality: LicitationModality.PREGAO_ELETRONICO\n    },\n    metadata: {\n      fileName: \"test.pdf\",\n      fileSize: 1024000,\n      fileType: \"application/pdf\",\n      organizationId: \"test-org-id\"\n    },\n    organizationId: \"test-org-id\",\n    createdBy: \"test-user-id\",\n    status: DocumentStatus.DRAFT,\n    version: 1,\n    createdAt: new Date(),\n    updatedAt: new Date()\n  };\n\n  beforeEach(() => {\n    // Reset all mocks\n    jest.clearAllMocks();\n    \n    // Setup default auth mocks\n    mockAuth.verifyIdToken.mockResolvedValue({\n      uid: mockUser.uid,\n      email: mockUser.email\n    });\n    \n    mockAuth.getUser.mockResolvedValue({\n      uid: mockUser.uid,\n      email: mockUser.email,\n      customClaims: {\n        organizationId: mockUser.organizationId,\n        roles: mockUser.roles,\n        permissions: mockUser.permissions\n      }\n    });\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"GET /documents\", () => {\n    it(\"should list documents for authenticated user\", async () => {\n      // Setup Firestore mocks\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        orderBy: jest.fn().mockReturnThis(),\n        offset: jest.fn().mockReturnThis(),\n        limit: jest.fn().mockReturnThis(),\n        get: jest.fn().mockResolvedValue({\n          docs: [\n            {\n              id: mockDocument.id,\n              data: () => mockDocument\n            }\n          ]\n        }),\n        count: jest.fn().mockReturnValue({\n          get: jest.fn().mockResolvedValue({\n            data: () => ({ count: 1 })\n          })\n        })\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n      mockFirestore.where.mockReturnValue(mockQuery);\n\n      const response = await request(documentsApi)\n        .get(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toHaveLength(1);\n      expect(response.body.data[0]).toMatchObject({\n        id: mockDocument.id,\n        title: mockDocument.title,\n        documentType: mockDocument.classification.documentType,\n        status: mockDocument.status\n      });\n    });\n\n    it(\"should require authentication\", async () => {\n      const response = await request(documentsApi).get(\"/\");\n\n      expect(response.status).toBe(401);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"authorization\");\n    });\n\n    it(\"should filter by document status\", async () => {\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        orderBy: jest.fn().mockReturnThis(),\n        offset: jest.fn().mockReturnThis(),\n        limit: jest.fn().mockReturnThis(),\n        get: jest.fn().mockResolvedValue({ docs: [] }),\n        count: jest.fn().mockReturnValue({\n          get: jest.fn().mockResolvedValue({\n            data: () => ({ count: 0 })\n          })\n        })\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n\n      await request(documentsApi)\n        .get(\"/?status=PROCESSED\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(mockQuery.where).toHaveBeenCalledWith(\"status\", \"==\", \"PROCESSED\");\n    });\n  });\n\n  describe(\"GET /documents/:id\", () => {\n    it(\"should return document by ID\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockDocument.id,\n          data: () => mockDocument\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .get(`/${mockDocument.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.id).toBe(mockDocument.id);\n    });\n\n    it(\"should return 404 for non-existent document\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: false\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .get(\"/non-existent-id\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(404);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"not found\");\n    });\n\n    it(\"should deny access to documents from other organizations\", async () => {\n      const otherOrgDocument = {\n        ...mockDocument,\n        organizationId: \"other-org-id\"\n      };\n\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockDocument.id,\n          data: () => otherOrgDocument\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .get(`/${mockDocument.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(403);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"Access denied\");\n    });\n  });\n\n  describe(\"POST /documents\", () => {\n    const createDocumentRequest = {\n      title: \"New Test Document\",\n      content: \"New test content\",\n      classification: {\n        primaryCategory: \"licitacao\",\n        documentType: DocumentType.EDITAL,\n        modality: LicitationModality.PREGAO_ELETRONICO\n      },\n      metadata: {\n        fileName: \"new-test.pdf\",\n        fileSize: 2048000,\n        fileType: \"application/pdf\",\n        organizationId: \"test-org-id\"\n      },\n      organizationId: \"test-org-id\",\n      createdBy: \"test-user-id\"\n    };\n\n    it(\"should create new document\", async () => {\n      const mockDocRef = {\n        set: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .post(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(createDocumentRequest);\n\n      expect(response.status).toBe(201);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.title).toBe(createDocumentRequest.title);\n      expect(response.body.data.status).toBe(DocumentStatus.DRAFT);\n      expect(mockDocRef.set).toHaveBeenCalled();\n    });\n\n    it(\"should validate required fields\", async () => {\n      const invalidRequest = {\n        ...createDocumentRequest,\n        title: \"\" // Invalid empty title\n      };\n\n      const response = await request(documentsApi)\n        .post(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(invalidRequest);\n\n      expect(response.status).toBe(400);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"Validation failed\");\n    });\n\n    it(\"should prevent creating documents for other organizations\", async () => {\n      const invalidRequest = {\n        ...createDocumentRequest,\n        organizationId: \"other-org-id\"\n      };\n\n      const response = await request(documentsApi)\n        .post(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(invalidRequest);\n\n      expect(response.status).toBe(403);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"different organization\");\n    });\n  });\n\n  describe(\"PUT /documents/:id\", () => {\n    const updateRequest = {\n      title: \"Updated Document Title\",\n      content: \"Updated content\"\n    };\n\n    it(\"should update existing document\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockDocument.id,\n          data: () => mockDocument\n        }),\n        set: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .put(`/${mockDocument.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(updateRequest);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.title).toBe(updateRequest.title);\n      expect(mockDocRef.set).toHaveBeenCalled();\n    });\n\n    it(\"should return 404 for non-existent document\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: false\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .put(\"/non-existent-id\")\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send(updateRequest);\n\n      expect(response.status).toBe(404);\n      expect(response.body.success).toBe(false);\n    });\n  });\n\n  describe(\"DELETE /documents/:id\", () => {\n    it(\"should archive document (soft delete)\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockDocument.id,\n          data: () => mockDocument\n        }),\n        update: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .delete(`/${mockDocument.id}`)\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.status).toBe(DocumentStatus.ARCHIVED);\n      expect(mockDocRef.update).toHaveBeenCalledWith({\n        status: DocumentStatus.ARCHIVED,\n        updatedAt: expect.any(Date)\n      });\n    });\n  });\n\n  describe(\"PATCH /documents/:id/status\", () => {\n    it(\"should update document status\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockDocument.id,\n          data: () => mockDocument\n        }),\n        update: jest.fn().mockResolvedValue(undefined)\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .patch(`/${mockDocument.id}/status`)\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send({ status: DocumentStatus.PROCESSING });\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.status).toBe(DocumentStatus.PROCESSING);\n      expect(mockDocRef.update).toHaveBeenCalledWith({\n        status: DocumentStatus.PROCESSING,\n        updatedAt: expect.any(Date)\n      });\n    });\n\n    it(\"should validate status values\", async () => {\n      const mockDocRef = {\n        get: jest.fn().mockResolvedValue({\n          exists: true,\n          id: mockDocument.id,\n          data: () => mockDocument\n        })\n      };\n\n      mockFirestore.doc.mockReturnValue(mockDocRef);\n\n      const response = await request(documentsApi)\n        .patch(`/${mockDocument.id}/status`)\n        .set(\"Authorization\", `Bearer ${validToken}`)\n        .send({ status: \"INVALID_STATUS\" });\n\n      expect(response.status).toBe(400);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"Validation failed\");\n    });\n  });\n\n  describe(\"Error Handling\", () => {\n    it(\"should handle Firestore errors gracefully\", async () => {\n      const mockQuery = {\n        where: jest.fn().mockReturnThis(),\n        orderBy: jest.fn().mockReturnThis(),\n        offset: jest.fn().mockReturnThis(),\n        limit: jest.fn().mockReturnThis(),\n        get: jest.fn().mockRejectedValue(new Error(\"Firestore error\")),\n        count: jest.fn().mockReturnValue({\n          get: jest.fn().mockResolvedValue({\n            data: () => ({ count: 0 })\n          })\n        })\n      };\n\n      mockFirestore.collection.mockReturnValue(mockQuery);\n\n      const response = await request(documentsApi)\n        .get(\"/\")\n        .set(\"Authorization\", `Bearer ${validToken}`);\n\n      expect(response.status).toBe(500);\n      expect(response.body.success).toBe(false);\n      expect(response.body.error).toContain(\"Internal server error\");\n    });\n\n    it(\"should handle invalid authentication tokens\", async () => {\n      mockAuth.verifyIdToken.mockRejectedValue(new Error(\"Invalid token\"));\n\n      const response = await request(documentsApi)\n        .get(\"/\")\n        .set(\"Authorization\", \"Bearer invalid-token\");\n\n      expect(response.status).toBe(401);\n      expect(response.body.success).toBe(false);\n    });\n  });\n\n  describe(\"Rate Limiting\", () => {\n    it(\"should apply rate limiting\", async () => {\n      // This test would require a more complex setup to actually test rate limiting\n      // For now, we'll just verify the rate limiter is configured\n      expect(documentsApi).toBeDefined();\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/e2e-analysis-flow.test.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'taskQueue' is assigned a value but never used.","line":29,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'taskQueue' is assigned a value but never used.","line":29,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'configService' is assigned a value but never used.","line":30,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'configService' is assigned a value but never used.","line":30,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Teste End-to-End do fluxo completo de an√°lise\n * Sprint 1 - LicitaReview\n */\n\nimport { describe, it, expect, beforeAll, afterAll } from '@jest/globals';\nimport { firestore } from '../config/firebase';\nimport { AnalysisOrchestrator } from '../services/AnalysisOrchestrator';\nimport { DocumentRepository } from '../db/repositories/DocumentRepository';\nimport { AnalysisRepository } from '../db/repositories/AnalysisRepository';\nimport { OrganizationRepository } from '../db/repositories/OrganizationRepository';\nimport { ParameterEngine } from '../services/ParameterEngine';\nimport { CloudRunClient } from '../services/CloudRunClient';\nimport { TaskQueueService } from '../services/TaskQueueService';\nimport { OrganizationConfigService } from '../services/OrganizationConfigService';\nimport { AnalysisStatus, DocumentType, AnalysisPriority } from '../types/config.types';\n\n// Configura√ß√£o do ambiente de teste\nprocess.env.FIRESTORE_EMULATOR_HOST = '127.0.0.1:8080';\nprocess.env.NODE_ENV = 'test';\n\ndescribe('Fluxo End-to-End de An√°lise', () => {\n  let orchestrator: AnalysisOrchestrator;\n  let documentRepo: DocumentRepository;\n  let analysisRepo: AnalysisRepository;\n  let organizationRepo: OrganizationRepository;\n  let parameterEngine: ParameterEngine;\n  let cloudRunClient: CloudRunClient;\n  let taskQueue: TaskQueueService;\n  let configService: OrganizationConfigService;\n  \n  const testOrganizationId = 'test-org-e2e';\n  const testUserId = 'test-user-e2e';\n  \n  beforeAll(async () => {\n    // Inicializar servi√ßos\n    documentRepo = new DocumentRepository(firestore);\n    analysisRepo = new AnalysisRepository(firestore);\n    organizationRepo = new OrganizationRepository(firestore);\n    \n    parameterEngine = new ParameterEngine(firestore, {\n      enableAdaptiveWeights: true,\n      enableLearningMode: false, // Desabilitar para testes\n      adaptationThreshold: 10,\n      maxWeightAdjustment: 15.0,\n      cacheTimeout: 30 * 60 * 1000\n    });\n    \n    cloudRunClient = new CloudRunClient({\n      serviceUrl: 'http://localhost:8080', // Mock URL\n      timeout: 30000,\n      retryAttempts: 3\n    });\n    \n    taskQueue = new TaskQueueService(firestore);\n    configService = new OrganizationConfigService(firestore, cloudRunClient);\n    \n    orchestrator = new AnalysisOrchestrator(\n      firestore,\n      'http://localhost:8080',\n      'test-project'\n    );\n    \n    // Criar organiza√ß√£o de teste\n    await organizationRepo.create({\n      id: testOrganizationId,\n      name: 'Organiza√ß√£o Teste E2E',\n      type: 'MUNICIPAL',\n      settings: {\n        analysisTimeout: 300000,\n        maxConcurrentAnalyses: 5,\n        enableAIAnalysis: true,\n        enableDetailedReports: true\n      },\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      isActive: true\n    });\n    \n    console.log('‚úÖ Ambiente de teste E2E configurado');\n  });\n  \n  afterAll(async () => {\n    // Limpar dados de teste\n    try {\n      const batch = firestore.batch();\n      \n      // Limpar documentos\n      const docs = await firestore\n        .collection('documents')\n        .where('organizationId', '==', testOrganizationId)\n        .get();\n      \n      docs.forEach(doc => batch.delete(doc.ref));\n      \n      // Limpar an√°lises\n      const analyses = await firestore\n        .collection('analyses')\n        .where('organizationId', '==', testOrganizationId)\n        .get();\n      \n      analyses.forEach(analysis => batch.delete(analysis.ref));\n      \n      // Limpar organiza√ß√£o\n      batch.delete(firestore.collection('organizations').doc(testOrganizationId));\n      \n      await batch.commit();\n      console.log('üßπ Dados de teste E2E limpos');\n    } catch (error) {\n      console.error('Erro ao limpar dados de teste:', error);\n    }\n  });\n  \n  it('deve executar fluxo completo de an√°lise de edital', async () => {\n    console.log('üöÄ Iniciando teste E2E do fluxo de an√°lise');\n    \n    // 1. Criar documento de teste\n    const documentData = {\n      id: 'doc-test-e2e-001',\n      organizationId: testOrganizationId,\n      name: 'Edital de Teste E2E - Servi√ßos de TI',\n      type: DocumentType.EDITAL,\n      content: `\n        EDITAL DE LICITA√á√ÉO N¬∫ 001/2024\n        \n        OBJETO: Contrata√ß√£o de empresa especializada em servi√ßos de tecnologia da informa√ß√£o\n        para desenvolvimento e manuten√ß√£o de sistemas web.\n        \n        VALOR ESTIMADO: R$ 500.000,00\n        \n        PRAZO DE EXECU√á√ÉO: 12 meses\n        \n        CRIT√âRIO DE JULGAMENTO: Menor pre√ßo\n        \n        DOCUMENTOS OBRIGAT√ìRIOS:\n        - Certid√£o de regularidade fiscal\n        - Comprova√ß√£o de experi√™ncia t√©cnica\n        - Atestado de capacidade t√©cnica\n        \n        ESPECIFICA√á√ïES T√âCNICAS:\n        - Desenvolvimento em tecnologias modernas (React, Node.js)\n        - Banco de dados PostgreSQL\n        - Hospedagem em nuvem\n        - Implementa√ß√£o de testes automatizados\n      `,\n      metadata: {\n        fileSize: 2048,\n        mimeType: 'text/plain',\n        uploadedBy: testUserId,\n        extractedText: true\n      },\n      uploadedAt: new Date(),\n      status: 'PROCESSED'\n    };\n    \n    const document = await documentRepo.create(documentData);\n    expect(document.id).toBe('doc-test-e2e-001');\n    console.log('‚úÖ Documento criado:', document.id);\n    \n    // 2. Gerar par√¢metros de an√°lise\n    const parameters = await parameterEngine.generateParameters(testOrganizationId);\n    expect(parameters).toBeDefined();\n    expect(parameters.organizationId).toBe(testOrganizationId);\n    expect(parameters.weights).toBeDefined();\n    console.log('‚úÖ Par√¢metros gerados:', {\n      weights: parameters.weights,\n      rulesCount: parameters.customRules.length\n    });\n    \n    // 3. Iniciar an√°lise\n    const analysisRequest = {\n      documentId: document.id,\n      organizationId: testOrganizationId,\n      userId: testUserId,\n      priority: AnalysisPriority.NORMAL,\n      parameters: parameters\n    };\n    \n    const analysis = await orchestrator.startAnalysis(analysisRequest);\n    expect(analysis).toBeDefined();\n    expect(analysis.status).toBe(AnalysisStatus.PENDING);\n    console.log('‚úÖ An√°lise iniciada:', analysis.id);\n    \n    // 4. Simular processamento (em ambiente real seria ass√≠ncrono)\n    // Para o teste, vamos simular o resultado da an√°lise\n    const mockAnalysisResult = {\n      documentId: document.id,\n      organizationId: testOrganizationId,\n      scores: {\n        technical: 85,\n        legal: 92,\n        financial: 78,\n        overall: 85\n      },\n      findings: [\n        {\n          category: 'technical',\n          severity: 'medium',\n          description: 'Especifica√ß√µes t√©cnicas bem definidas',\n          recommendation: 'Considerar adicionar requisitos de seguran√ßa'\n        },\n        {\n          category: 'legal',\n          severity: 'low',\n          description: 'Documenta√ß√£o legal completa',\n          recommendation: 'Manter padr√£o atual'\n        },\n        {\n          category: 'financial',\n          severity: 'medium',\n          description: 'Valor estimado dentro da faixa esperada',\n          recommendation: 'Verificar detalhamento de custos'\n        }\n      ],\n      risks: [\n        {\n          type: 'technical',\n          level: 'medium',\n          description: 'Complexidade t√©cnica moderada',\n          mitigation: 'Exigir comprova√ß√£o de experi√™ncia espec√≠fica'\n        }\n      ],\n      recommendations: [\n        'Incluir cl√°usulas de SLA espec√≠ficas',\n        'Definir crit√©rios de aceita√ß√£o detalhados',\n        'Estabelecer marcos de entrega intermedi√°rios'\n      ],\n      metadata: {\n        processingTime: 15000,\n        aiConfidence: 0.87,\n        rulesApplied: parameters.customRules.length,\n        version: '1.0.0'\n      }\n    };\n    \n    // 5. Atualizar an√°lise com resultado\n    const updatedAnalysis = await analysisRepo.update(analysis.id, {\n      status: AnalysisStatus.COMPLETED,\n      result: mockAnalysisResult,\n      completedAt: new Date(),\n      processingTime: 15000\n    });\n    \n    expect(updatedAnalysis.status).toBe(AnalysisStatus.COMPLETED);\n    expect(updatedAnalysis.result).toBeDefined();\n    expect(updatedAnalysis.result!.scores.overall).toBe(85);\n    console.log('‚úÖ An√°lise conclu√≠da com sucesso:', {\n      id: updatedAnalysis.id,\n      overallScore: updatedAnalysis.result!.scores.overall,\n      findingsCount: updatedAnalysis.result!.findings.length\n    });\n    \n    // 6. Verificar persist√™ncia dos dados\n    const retrievedDocument = await documentRepo.findById(document.id);\n    expect(retrievedDocument).toBeDefined();\n    expect(retrievedDocument!.name).toBe(documentData.name);\n    \n    const retrievedAnalysis = await analysisRepo.findById(analysis.id);\n    expect(retrievedAnalysis).toBeDefined();\n    expect(retrievedAnalysis!.status).toBe(AnalysisStatus.COMPLETED);\n    \n    // 7. Testar busca por configura√ß√£o\n    const analysesByConfig = await analysisRepo.findByConfiguration(testOrganizationId, {\n      limit: 10,\n      status: AnalysisStatus.COMPLETED\n    });\n    \n    expect(analysesByConfig.length).toBeGreaterThan(0);\n    expect(analysesByConfig[0].organizationId).toBe(testOrganizationId);\n    \n    console.log('‚úÖ Fluxo E2E conclu√≠do com sucesso!');\n    console.log('üìä Resumo do teste:', {\n      documentoId: document.id,\n      analiseId: analysis.id,\n      scoreGeral: updatedAnalysis.result!.scores.overall,\n      tempoProcessamento: updatedAnalysis.processingTime,\n      achados: updatedAnalysis.result!.findings.length,\n      riscos: updatedAnalysis.result!.risks.length,\n      recomendacoes: updatedAnalysis.result!.recommendations.length\n    });\n  }, 60000); // Timeout de 60 segundos\n  \n  it('deve lidar com erro de an√°lise graciosamente', async () => {\n    console.log('üß™ Testando tratamento de erro na an√°lise');\n    \n    // Criar documento com conte√∫do problem√°tico\n    const problematicDocument = await documentRepo.create({\n      id: 'doc-error-test',\n      organizationId: testOrganizationId,\n      name: 'Documento com Erro',\n      type: DocumentType.EDITAL,\n      content: '', // Conte√∫do vazio para simular erro\n      metadata: {\n        fileSize: 0,\n        mimeType: 'text/plain',\n        uploadedBy: testUserId,\n        extractedText: false\n      },\n      uploadedAt: new Date(),\n      status: 'PROCESSED'\n    });\n    \n    const parameters = await parameterEngine.generateParameters(testOrganizationId);\n    \n    const analysisRequest = {\n      documentId: problematicDocument.id,\n      organizationId: testOrganizationId,\n      userId: testUserId,\n      priority: AnalysisPriority.HIGH,\n      parameters: parameters\n    };\n    \n    const analysis = await orchestrator.startAnalysis(analysisRequest);\n    \n    // Simular erro na an√°lise\n    const errorAnalysis = await analysisRepo.update(analysis.id, {\n      status: AnalysisStatus.FAILED,\n      error: {\n        code: 'EMPTY_CONTENT',\n        message: 'Documento n√£o possui conte√∫do para an√°lise',\n        details: {\n          documentId: problematicDocument.id,\n          contentLength: 0\n        }\n      },\n      completedAt: new Date(),\n      processingTime: 1000\n    });\n    \n    expect(errorAnalysis.status).toBe(AnalysisStatus.FAILED);\n    expect(errorAnalysis.error).toBeDefined();\n    expect(errorAnalysis.error!.code).toBe('EMPTY_CONTENT');\n    \n    console.log('‚úÖ Erro tratado corretamente:', errorAnalysis.error);\n  });\n  \n  it('deve otimizar par√¢metros baseado no hist√≥rico', async () => {\n    console.log('üîß Testando otimiza√ß√£o de par√¢metros');\n    \n    // Criar algumas an√°lises hist√≥ricas simuladas\n    const historicalAnalyses = [];\n    \n    for (let i = 0; i < 5; i++) {\n      const doc = await documentRepo.create({\n        id: `doc-history-${i}`,\n        organizationId: testOrganizationId,\n        name: `Documento Hist√≥rico ${i}`,\n        type: DocumentType.EDITAL,\n        content: `Conte√∫do do documento ${i}`,\n        metadata: {\n          fileSize: 1024,\n          mimeType: 'text/plain',\n          uploadedBy: testUserId,\n          extractedText: true\n        },\n        uploadedAt: new Date(Date.now() - (i * 24 * 60 * 60 * 1000)), // Documentos dos √∫ltimos dias\n        status: 'PROCESSED'\n      });\n      \n      const analysis = await analysisRepo.create({\n        id: `analysis-history-${i}`,\n        documentId: doc.id,\n        organizationId: testOrganizationId,\n        userId: testUserId,\n        status: AnalysisStatus.COMPLETED,\n        priority: AnalysisPriority.NORMAL,\n        result: {\n          documentId: doc.id,\n          organizationId: testOrganizationId,\n          scores: {\n            technical: 80 + (i * 2),\n            legal: 85 + (i * 1),\n            financial: 75 + (i * 3),\n            overall: 80 + (i * 2)\n          },\n          findings: [],\n          risks: [],\n          recommendations: [],\n          metadata: {\n            processingTime: 10000,\n            aiConfidence: 0.8 + (i * 0.02),\n            rulesApplied: 5,\n            version: '1.0.0'\n          }\n        },\n        createdAt: new Date(Date.now() - (i * 24 * 60 * 60 * 1000)),\n        completedAt: new Date(Date.now() - (i * 24 * 60 * 60 * 1000) + 15000),\n        processingTime: 15000\n      });\n      \n      historicalAnalyses.push(analysis);\n    }\n    \n    // Otimizar par√¢metros baseado no hist√≥rico\n    const optimizationResult = await parameterEngine.optimizeParameters(\n      testOrganizationId,\n      historicalAnalyses\n    );\n    \n    expect(optimizationResult).toBeDefined();\n    expect(optimizationResult.suggestedWeights).toBeDefined();\n    expect(optimizationResult.confidence).toBeGreaterThan(0);\n    \n    console.log('‚úÖ Otimiza√ß√£o conclu√≠da:', {\n      pesosOtimizados: optimizationResult.suggestedWeights,\n      confianca: optimizationResult.confidence,\n      melhorias: optimizationResult.improvements?.length || 0\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/e2e-simple.js","messages":[{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'clarity'.","line":237,"column":49,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":237,"endColumn":56}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Teste End-to-End Simplificado (JavaScript)\n * Sprint 1 - LicitaReview\n * \n * Executa diretamente com Node.js para testar o fluxo b√°sico de an√°lise\n */\n\n// Configurar ambiente\nprocess.env.FIRESTORE_EMULATOR_HOST = '127.0.0.1:8080';\nprocess.env.GCLOUD_PROJECT = 'analisador-de-editais';\n\nconst admin = require('firebase-admin');\n\n// Inicializar Firebase Admin\nif (admin.apps.length === 0) {\n  admin.initializeApp({\n    projectId: 'analisador-de-editais'\n  });\n}\n\nconst firestore = admin.firestore();\n\n// Configura√ß√µes\nfirestore.settings({\n  ignoreUndefinedProperties: true,\n});\n\n// Utilit√°rios de teste\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(`Assertion failed: ${message}`);\n  }\n}\n\nfunction assertEqual(actual, expected, message) {\n  if (actual !== expected) {\n    throw new Error(`Assertion failed: ${message}. Expected: ${expected}, Actual: ${actual}`);\n  }\n}\n\nfunction assertExists(value, message) {\n  if (value === null || value === undefined) {\n    throw new Error(`Assertion failed: ${message}. Value should exist but is ${value}`);\n  }\n}\n\n// Vari√°veis globais do teste\nconst testOrgId = 'test-org-' + Date.now();\nconst testUserId = 'test-user-' + Date.now();\nlet testDocumentId;\nlet testConfigId;\nlet testAnalysisId;\n\nasync function runE2ETests() {\n  console.log('üöÄ Iniciando Testes End-to-End Simplificados');\n  console.log('üè¢ Organization ID:', testOrgId);\n  console.log('üë§ User ID:', testUserId);\n  console.log('=' .repeat(60));\n  \n  try {\n    // Teste 1: Criar configura√ß√£o organizacional\n    await testCreateOrganizationConfig();\n    \n    // Teste 2: Criar documento\n    await testCreateDocument();\n    \n    // Teste 3: Iniciar an√°lise\n    await testStartAnalysis();\n    \n    // Teste 4: Simular processamento\n    await testProcessAnalysis();\n    \n    // Teste 5: Concluir an√°lise\n    await testCompleteAnalysis();\n    \n    // Teste 6: Verificar integridade\n    await testDataIntegrity();\n    \n    // Teste 7: Testar queries complexas\n    await testComplexQueries();\n    \n    console.log('\\n' + '='.repeat(60));\n    console.log('üéâ TODOS OS TESTES E2E PASSARAM!');\n    console.log('‚úÖ Fluxo completo de an√°lise validado');\n    \n  } catch (error) {\n    console.error('\\n‚ùå TESTE E2E FALHOU:', error.message);\n    console.error('Stack trace:', error.stack);\n    throw error;\n  } finally {\n    // Limpeza\n    await cleanup();\n  }\n}\n\nasync function testCreateOrganizationConfig() {\n  console.log('\\nüèóÔ∏è Teste 1: Criando configura√ß√£o organizacional');\n  \n  const config = {\n    organizationId: testOrgId,\n    organizationName: 'Organiza√ß√£o de Teste E2E',\n    weights: {\n      structural: 25.0,\n      legal: 25.0,\n      clarity: 25.0,\n      abnt: 25.0\n    },\n    presetType: 'STANDARD',\n    isActive: true,\n    createdAt: new Date(),\n    updatedAt: new Date()\n  };\n  \n  const configRef = await firestore.collection('organizationConfigs').add(config);\n  testConfigId = configRef.id;\n  \n  console.log('‚úÖ Configura√ß√£o criada:', testConfigId);\n  \n  // Verificar\n  const configDoc = await configRef.get();\n  assert(configDoc.exists, 'Configura√ß√£o deve existir');\n  \n  const configData = configDoc.data();\n  assertEqual(configData.organizationId, testOrgId, 'Organization ID deve coincidir');\n  assertEqual(configData.weights.structural, 25.0, 'Peso structural deve ser 25.0');\n  assertEqual(configData.isActive, true, 'Configura√ß√£o deve estar ativa');\n  \n  console.log('‚úÖ Configura√ß√£o verificada com sucesso');\n}\n\nasync function testCreateDocument() {\n  console.log('\\nüìÑ Teste 2: Criando documento para an√°lise');\n  \n  const document = {\n    title: 'Edital de Teste E2E',\n    content: 'Este √© um edital de teste para verificar o fluxo end-to-end de an√°lise. O documento cont√©m informa√ß√µes estruturais, legais e de clareza para valida√ß√£o. Inclui se√ß√µes sobre requisitos t√©cnicos, crit√©rios de avalia√ß√£o, prazos de execu√ß√£o e condi√ß√µes contratuais.',\n    organizationId: testOrgId,\n    status: 'DRAFT',\n    type: 'EDITAL',\n    metadata: {\n      fileSize: 1024,\n      pageCount: 5,\n      language: 'pt-BR'\n    },\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    createdBy: testUserId\n  };\n  \n  const docRef = await firestore.collection('documents').add(document);\n  testDocumentId = docRef.id;\n  \n  console.log('‚úÖ Documento criado:', testDocumentId);\n  \n  // Verificar\n  const docDoc = await docRef.get();\n  assert(docDoc.exists, 'Documento deve existir');\n  \n  const docData = docDoc.data();\n  assertEqual(docData.title, 'Edital de Teste E2E', 'T√≠tulo deve coincidir');\n  assertEqual(docData.organizationId, testOrgId, 'Organization ID deve coincidir');\n  assertEqual(docData.status, 'DRAFT', 'Status inicial deve ser DRAFT');\n  \n  console.log('‚úÖ Documento verificado com sucesso');\n}\n\nasync function testStartAnalysis() {\n  console.log('\\nüîÑ Teste 3: Iniciando an√°lise');\n  \n  // Atualizar status do documento\n  await firestore.collection('documents').doc(testDocumentId).update({\n    status: 'PROCESSING',\n    updatedAt: new Date(),\n    processingStartedAt: new Date()\n  });\n  \n  // Criar registro de an√°lise\n  const analysisResult = {\n    documentId: testDocumentId,\n    organizationId: testOrgId,\n    status: 'pending',\n    priority: 'NORMAL',\n    analysisType: 'FULL',\n    parameters: {\n      enableStructuralAnalysis: true,\n      enableLegalAnalysis: true,\n      enableClarityAnalysis: true,\n      enableABNTAnalysis: true\n    },\n    createdAt: new Date(),\n    createdBy: testUserId\n  };\n  \n  const analysisRef = await firestore.collection('analysisResults').add(analysisResult);\n  testAnalysisId = analysisRef.id;\n  \n  console.log('‚úÖ An√°lise criada:', testAnalysisId);\n  \n  // Verificar documento atualizado\n  const docDoc = await firestore.collection('documents').doc(testDocumentId).get();\n  const docData = docDoc.data();\n  assertEqual(docData.status, 'PROCESSING', 'Status deve ser PROCESSING');\n  \n  // Verificar an√°lise criada\n  const analysisDoc = await analysisRef.get();\n  assert(analysisDoc.exists, 'An√°lise deve existir');\n  \n  const analysisData = analysisDoc.data();\n  assertEqual(analysisData.status, 'pending', 'Status da an√°lise deve ser pending');\n  assertEqual(analysisData.documentId, testDocumentId, 'Document ID deve coincidir');\n  \n  console.log('‚úÖ An√°lise iniciada com sucesso');\n}\n\nasync function testProcessAnalysis() {\n  console.log('\\n‚öôÔ∏è Teste 4: Simulando processamento');\n  \n  // Atualizar status para processing\n  await firestore.collection('analysisResults').doc(testAnalysisId).update({\n    status: 'processing',\n    processingStartedAt: new Date(),\n    progress: {\n      structural: 0,\n      legal: 0,\n      clarity: 0,\n      abnt: 0,\n      overall: 0\n    }\n  });\n  \n  console.log('‚úÖ Status atualizado para processing');\n  \n  // Simular progresso incremental\n  const progressSteps = [\n    { structural: 25, legal: 0, clarity: 0, abnt: 0, overall: 6.25 },\n    { structural: 100, legal: 50, clarity: 0, abnt: 0, overall: 37.5 },\n    { structural: 100, legal: 100, clarity: 75, clarity: 0, overall: 68.75 },\n    { structural: 100, legal: 100, clarity: 100, abnt: 50, overall: 87.5 }\n  ];\n  \n  for (let i = 0; i < progressSteps.length; i++) {\n    await firestore.collection('analysisResults').doc(testAnalysisId).update({\n      progress: progressSteps[i],\n      lastProgressUpdate: new Date()\n    });\n    \n    console.log(`‚úÖ Progresso atualizado: ${progressSteps[i].overall}%`);\n    \n    // Pequena pausa para simular processamento\n    await new Promise(resolve => setTimeout(resolve, 100));\n  }\n  \n  console.log('‚úÖ Processamento simulado com sucesso');\n}\n\nasync function testCompleteAnalysis() {\n  console.log('\\n‚úÖ Teste 5: Concluindo an√°lise');\n  \n  const completedAnalysis = {\n    status: 'completed',\n    conformityScores: {\n      structural: 85.5,\n      legal: 92.0,\n      clarity: 78.3,\n      abnt: 88.7,\n      overall: 86.1\n    },\n    weightedScore: 86.1,\n    findings: [\n      {\n        category: 'structural',\n        severity: 'medium',\n        description: 'Estrutura do documento adequada com pequenos ajustes necess√°rios',\n        location: 'Se√ß√£o 2.1'\n      },\n      {\n        category: 'legal',\n        severity: 'low',\n        description: 'Conformidade legal excelente',\n        location: 'Geral'\n      }\n    ],\n    recommendations: [\n      'Revisar formata√ß√£o da se√ß√£o 2.1',\n      'Adicionar mais detalhes nos crit√©rios de avalia√ß√£o'\n    ],\n    executionTimeSeconds: 45.2,\n    completedAt: new Date(),\n    processingCompletedAt: new Date()\n  };\n  \n  await firestore.collection('analysisResults').doc(testAnalysisId).update(completedAnalysis);\n  \n  // Atualizar documento\n  await firestore.collection('documents').doc(testDocumentId).update({\n    status: 'COMPLETED',\n    updatedAt: new Date(),\n    processingCompletedAt: new Date(),\n    lastAnalysisId: testAnalysisId\n  });\n  \n  console.log('‚úÖ An√°lise conclu√≠da');\n  \n  // Verificar resultados\n  const analysisDoc = await firestore.collection('analysisResults').doc(testAnalysisId).get();\n  const analysisData = analysisDoc.data();\n  \n  assertEqual(analysisData.status, 'completed', 'Status deve ser completed');\n  assertEqual(analysisData.conformityScores.overall, 86.1, 'Score overall deve ser 86.1');\n  assertExists(analysisData.completedAt, 'Data de conclus√£o deve existir');\n  assert(analysisData.findings.length > 0, 'Deve ter findings');\n  assert(analysisData.recommendations.length > 0, 'Deve ter recomenda√ß√µes');\n  \n  // Verificar documento\n  const docDoc = await firestore.collection('documents').doc(testDocumentId).get();\n  const docData = docDoc.data();\n  assertEqual(docData.status, 'COMPLETED', 'Status do documento deve ser COMPLETED');\n  assertEqual(docData.lastAnalysisId, testAnalysisId, 'Last analysis ID deve coincidir');\n  \n  console.log('‚úÖ Resultados verificados:', {\n    overallScore: analysisData.conformityScores.overall,\n    findingsCount: analysisData.findings.length,\n    recommendationsCount: analysisData.recommendations.length,\n    executionTime: analysisData.executionTimeSeconds\n  });\n}\n\nasync function testDataIntegrity() {\n  console.log('\\nüîç Teste 6: Verificando integridade dos dados');\n  \n  // Buscar todos os dados relacionados\n  const [configDoc, documentDoc, analysisDoc] = await Promise.all([\n    firestore.collection('organizationConfigs').doc(testConfigId).get(),\n    firestore.collection('documents').doc(testDocumentId).get(),\n    firestore.collection('analysisResults').doc(testAnalysisId).get()\n  ]);\n  \n  // Verificar exist√™ncia\n  assert(configDoc.exists, 'Configura√ß√£o deve existir');\n  assert(documentDoc.exists, 'Documento deve existir');\n  assert(analysisDoc.exists, 'An√°lise deve existir');\n  \n  const configData = configDoc.data();\n  const docData = documentDoc.data();\n  const analysisData = analysisDoc.data();\n  \n  // Verificar consist√™ncia de organiza√ß√£o\n  assertEqual(configData.organizationId, testOrgId, 'Config org ID deve coincidir');\n  assertEqual(docData.organizationId, testOrgId, 'Document org ID deve coincidir');\n  assertEqual(analysisData.organizationId, testOrgId, 'Analysis org ID deve coincidir');\n  \n  // Verificar relacionamentos\n  assertEqual(analysisData.documentId, testDocumentId, 'Analysis document ID deve coincidir');\n  assertEqual(docData.lastAnalysisId, testAnalysisId, 'Document last analysis ID deve coincidir');\n  \n  // Verificar estados finais\n  assertEqual(configData.isActive, true, 'Configura√ß√£o deve estar ativa');\n  assertEqual(docData.status, 'COMPLETED', 'Documento deve estar completo');\n  assertEqual(analysisData.status, 'completed', 'An√°lise deve estar completa');\n  \n  console.log('‚úÖ Integridade dos dados verificada:', {\n    allEntitiesExist: true,\n    organizationConsistency: true,\n    relationshipsValid: true,\n    finalStatesCorrect: true\n  });\n}\n\nasync function testComplexQueries() {\n  console.log('\\nüîç Teste 7: Testando queries complexas');\n  \n  // Query 1: Documentos por organiza√ß√£o\n  const orgDocsQuery = await firestore\n    .collection('documents')\n    .where('organizationId', '==', testOrgId)\n    .where('status', '==', 'COMPLETED')\n    .get();\n  \n  assert(orgDocsQuery.size >= 1, 'Deve encontrar pelo menos 1 documento');\n  console.log('‚úÖ Query documentos por organiza√ß√£o:', orgDocsQuery.size);\n  \n  // Query 2: An√°lises conclu√≠das\n  const completedAnalysesQuery = await firestore\n    .collection('analysisResults')\n    .where('organizationId', '==', testOrgId)\n    .where('status', '==', 'completed')\n    .orderBy('completedAt', 'desc')\n    .get();\n  \n  assert(completedAnalysesQuery.size >= 1, 'Deve encontrar pelo menos 1 an√°lise');\n  console.log('‚úÖ Query an√°lises conclu√≠das:', completedAnalysesQuery.size);\n  \n  // Query 3: Configura√ß√µes ativas\n  const activeConfigsQuery = await firestore\n    .collection('organizationConfigs')\n    .where('organizationId', '==', testOrgId)\n    .where('isActive', '==', true)\n    .get();\n  \n  assert(activeConfigsQuery.size >= 1, 'Deve encontrar pelo menos 1 configura√ß√£o ativa');\n  console.log('‚úÖ Query configura√ß√µes ativas:', activeConfigsQuery.size);\n  \n  // Query 4: An√°lises com score alto\n  const highScoreQuery = await firestore\n    .collection('analysisResults')\n    .where('organizationId', '==', testOrgId)\n    .where('conformityScores.overall', '>=', 80)\n    .get();\n  \n  assert(highScoreQuery.size >= 1, 'Deve encontrar an√°lises com score alto');\n  console.log('‚úÖ Query an√°lises com score alto:', highScoreQuery.size);\n  \n  console.log('‚úÖ Todas as queries complexas executadas com sucesso');\n}\n\nasync function cleanup() {\n  console.log('\\nüßπ Limpando dados de teste...');\n  \n  try {\n    const batch = firestore.batch();\n    \n    // Adicionar documentos para exclus√£o\n    if (testConfigId) {\n      batch.delete(firestore.collection('organizationConfigs').doc(testConfigId));\n    }\n    if (testDocumentId) {\n      batch.delete(firestore.collection('documents').doc(testDocumentId));\n    }\n    if (testAnalysisId) {\n      batch.delete(firestore.collection('analysisResults').doc(testAnalysisId));\n    }\n    \n    await batch.commit();\n    console.log('‚úÖ Dados de teste removidos');\n  } catch (error) {\n    console.error('Erro na limpeza:', error.message);\n  }\n}\n\n// Executar testes\nrunE2ETests()\n  .then(() => {\n    console.log('\\nüéâ TESTES E2E CONCLU√çDOS COM SUCESSO!');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('\\nüí• TESTES E2E FALHARAM:', error.message);\n    process.exit(1);\n  });","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/e2e-simple.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/firestore-integration.test.ts","messages":[{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":18,"column":15,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":18,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":34,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeAll' is not defined.","line":37,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'afterAll' is not defined.","line":43,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1452,1455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1452,1455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":62,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":73,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":78,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":81,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":82,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":87,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":111,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":111,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":117,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":117,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":127,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":127,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":141,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":141,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":147,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":147,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":173,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":173,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":177,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":177,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":181,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":181,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":182,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":182,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":194,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":194,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":196,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":11}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Teste de integra√ß√£o do Firestore (sem mocks)\n * Sprint 1 - LicitaReview\n * \n * Este arquivo executa testes de integra√ß√£o reais com o emulador do Firestore\n * sem usar os mocks configurados no setup.ts\n */\n\n// Configurar ambiente ANTES de qualquer import\nprocess.env.FIRESTORE_EMULATOR_HOST = '127.0.0.1:8080';\nprocess.env.NODE_ENV = 'integration-test';\nprocess.env.GCLOUD_PROJECT = 'analisador-de-editais';\n\n// Limpar require cache para evitar conflitos com mocks\ndelete require.cache[require.resolve('firebase-admin')];\n\n// Importar Firebase Admin diretamente\nconst admin = require('firebase-admin');\n\n// Inicializar Firebase Admin para testes de integra√ß√£o\nif (admin.apps.length === 0) {\n  admin.initializeApp({\n    projectId: 'analisador-de-editais'\n  });\n}\n\nconst firestore = admin.firestore();\n\n// Configura√ß√µes do Firestore\nfirestore.settings({\n  ignoreUndefinedProperties: true,\n});\n\ndescribe('Firestore Integration Tests', () => {\n  const testCollection = 'integration-test-' + Date.now();\n  \n  beforeAll(() => {\n    console.log('üîß Iniciando testes de integra√ß√£o do Firestore');\n    console.log('üìç Emulator Host:', process.env.FIRESTORE_EMULATOR_HOST);\n    console.log('üìÅ Test Collection:', testCollection);\n  });\n  \n  afterAll(async () => {\n    // Limpar dados de teste\n    try {\n      const snapshot = await firestore.collection(testCollection).get();\n      const batch = firestore.batch();\n      \n      snapshot.docs.forEach((doc: any) => {\n        batch.delete(doc.ref);\n      });\n      \n      if (snapshot.docs.length > 0) {\n        await batch.commit();\n        console.log(`üßπ ${snapshot.docs.length} documentos de teste removidos`);\n      }\n    } catch (error) {\n      console.error('Erro ao limpar dados de teste:', error);\n    }\n  });\n  \n  test('deve conectar com o emulador do Firestore', async () => {\n    console.log('üîå Testando conex√£o b√°sica');\n    \n    const testDoc = {\n      name: 'Teste de Conex√£o',\n      timestamp: new Date(),\n      status: 'active'\n    };\n    \n    // Criar documento\n    const docRef = await firestore.collection(testCollection).add(testDoc);\n    expect(docRef.id).toBeDefined();\n    console.log('‚úÖ Documento criado:', docRef.id);\n    \n    // Ler documento\n    const doc = await docRef.get();\n    expect(doc.exists).toBe(true);\n    \n    const data = doc.data();\n    expect(data.name).toBe('Teste de Conex√£o');\n    expect(data.status).toBe('active');\n    \n    console.log('‚úÖ Documento lido com sucesso');\n  });\n  \n  test('deve executar opera√ß√µes de batch', async () => {\n    console.log('üì¶ Testando opera√ß√µes de batch');\n    \n    const batch = firestore.batch();\n    const docRefs = [];\n    \n    // Criar 3 documentos em batch\n    for (let i = 1; i <= 3; i++) {\n      const docRef = firestore.collection(testCollection).doc(`batch-${i}`);\n      docRefs.push(docRef);\n      \n      batch.set(docRef, {\n        name: `Documento Batch ${i}`,\n        order: i,\n        createdAt: new Date()\n      });\n    }\n    \n    await batch.commit();\n    console.log('‚úÖ Batch commit executado');\n    \n    // Verificar se os documentos foram criados\n    for (const docRef of docRefs) {\n      const doc = await docRef.get();\n      expect(doc.exists).toBe(true);\n    }\n    \n    console.log('‚úÖ Todos os documentos do batch foram verificados');\n  });\n  \n  test('deve executar queries', async () => {\n    console.log('üîç Testando queries');\n    \n    // Buscar documentos com order >= 1\n    const querySnapshot = await firestore\n      .collection(testCollection)\n      .where('order', '>=', 1)\n      .orderBy('order')\n      .get();\n    \n    expect(querySnapshot.size).toBeGreaterThanOrEqual(3);\n    \n    const docs = querySnapshot.docs.map(doc => {\n      const data = doc.data();\n      return {\n        id: doc.id,\n        name: data.name as string,\n        order: data.order as number,\n        createdAt: data.createdAt as Date\n      };\n    });\n    \n    // Verificar ordena√ß√£o\n    for (let i = 1; i < docs.length; i++) {\n      expect(docs[i].order).toBeGreaterThanOrEqual(docs[i-1].order);\n    }\n    \n    console.log(`‚úÖ Query executada: ${docs.length} documentos encontrados`);\n  });\n  \n  test('deve executar transa√ß√µes', async () => {\n    console.log('üîÑ Testando transa√ß√µes');\n    \n    const counterRef = firestore.collection(testCollection).doc('counter');\n    \n    // Inicializar contador\n    await counterRef.set({ count: 0 });\n    \n    // Incrementar usando transa√ß√£o\n    await firestore.runTransaction(async (transaction) => {\n      const doc = await transaction.get(counterRef);\n      \n      if (!doc.exists) {\n        throw new Error('Contador n√£o existe');\n      }\n      \n      const data = doc.data();\n      const currentCount = data?.count as number || 0;\n      transaction.update(counterRef, { count: currentCount + 5 });\n    });\n    \n    // Verificar resultado\n    const finalDoc = await counterRef.get();\n    const finalData = finalDoc.data();\n    const finalCount = finalData?.count as number || 0;\n    \n    expect(finalCount).toBe(5);\n    console.log('‚úÖ Transa√ß√£o executada:', { finalCount });\n  });\n  \n  test('deve verificar configura√ß√µes do emulator', async () => {\n    console.log('‚öôÔ∏è Verificando configura√ß√µes');\n    \n    // Verificar vari√°veis de ambiente\n    expect(process.env.FIRESTORE_EMULATOR_HOST).toBe('127.0.0.1:8080');\n    expect(process.env.GCLOUD_PROJECT).toBe('analisador-de-editais');\n    \n    // Testar opera√ß√£o espec√≠fica do emulator\n    const testDoc = firestore.collection('_emulator_config').doc('test');\n    \n    await testDoc.set({\n      emulatorTest: true,\n      timestamp: new Date(),\n      host: process.env.FIRESTORE_EMULATOR_HOST\n    });\n    \n    const doc = await testDoc.get();\n    expect(doc.exists).toBe(true);\n    const docData = doc.data();\n    expect(docData?.emulatorTest).toBe(true);\n    \n    // Limpar\n    await testDoc.delete();\n    \n    console.log('‚úÖ Configura√ß√µes verificadas');\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/parameter-engine.test.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'firestore' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'firestore' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[619,622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[619,622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[629,632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[629,632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[640,643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[640,643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[804,807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[804,807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[814,817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[814,817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[825,828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[825,828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'permissions' is defined but never used.","line":34,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'permissions' is defined but never used.","line":34,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[896,899],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[896,899],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[906,909],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[906,909],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[917,920],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[917,920],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1172,1175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1172,1175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1182,1185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1182,1185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1193,1196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1193,1196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1290,1293],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1290,1293],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1300,1303],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1300,1303],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1311,1314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1311,1314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1404,1407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1404,1407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1414,1417],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1414,1417],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1425,1428],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1425,1428],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1852,1855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1852,1855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":95,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2228,2231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2228,2231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Testes para a API do ParameterEngine\n * Sprint 1 - LicitaReview\n */\n\nimport request from 'supertest';\nimport { describe, it, expect, beforeEach, afterEach, jest } from '@jest/globals';\nimport { ParameterEngine } from '../services/ParameterEngine';\nimport { firestore } from '../config/firebase';\n\n// Mock do Firebase\njest.mock('../config/firebase', () => ({\n  firestore: {\n    collection: jest.fn(),\n    doc: jest.fn(),\n    batch: jest.fn()\n  }\n}));\n\n// Mock do ParameterEngine\njest.mock('../services/ParameterEngine');\n\n// Mock da autentica√ß√£o\njest.mock('../middleware/auth', () => ({\n  authenticateUser: (req: any, res: any, next: any) => {\n    req.user = {\n      uid: 'test-user-id',\n      organizationId: 'test-org-id',\n      role: 'ADMIN'\n    };\n    next();\n  },\n  requireOrganization: (req: any, res: any, next: any) => next(),\n  requirePermissions: (permissions: string[]) => (req: any, res: any, next: any) => next(),\n  PERMISSIONS: {\n    CONFIG_READ: 'config:read',\n    CONFIG_WRITE: 'config:write'\n  },\n  ROLES: {\n    ADMIN: 'ADMIN',\n    USER: 'USER'\n  }\n}));\n\n// Mock do rate limiting\njest.mock('express-rate-limit', () => {\n  return jest.fn(() => (req: any, res: any, next: any) => next());\n});\n\n// Mock do helmet\njest.mock('helmet', () => {\n  return jest.fn(() => (req: any, res: any, next: any) => next());\n});\n\n// Mock do cors\njest.mock('cors', () => {\n  return jest.fn(() => (req: any, res: any, next: any) => next());\n});\n\n// Mock da configura√ß√£o\njest.mock('../config', () => ({\n  config: {\n    corsOrigin: '*',\n    maxRequestSize: '10mb',\n    rateLimitWindowMs: 15 * 60 * 1000,\n    rateLimitMax: 100\n  }\n}));\n\n// Mock do logger\njest.mock('firebase-functions', () => ({\n  logger: {\n    info: jest.fn(),\n    error: jest.fn(),\n    warn: jest.fn(),\n    debug: jest.fn()\n  }\n}));\n\ndescribe('ParameterEngine API', () => {\n  let app: any;\n  let mockParameterEngine: jest.Mocked<ParameterEngine>;\n\n  beforeEach(async () => {\n    // Reset mocks\n    jest.clearAllMocks();\n\n    // Mock ParameterEngine instance\n    mockParameterEngine = {\n      generateParameters: jest.fn(),\n      optimizeParameters: jest.fn(),\n      clearCache: jest.fn(),\n      getEngineStats: jest.fn(),\n      updateConfig: jest.fn()\n    } as any;\n\n    (ParameterEngine as jest.MockedClass<typeof ParameterEngine>).mockImplementation(() => mockParameterEngine);\n\n    // Import app after mocks are set up\n    const { parameterEngineApi } = await import('../api/parameter-engine');\n    app = parameterEngineApi;\n  });\n\n  afterEach(() => {\n    jest.resetModules();\n  });\n\n  describe('GET /parameters', () => {\n    it('deve gerar par√¢metros com sucesso', async () => {\n      const mockParameters = {\n        weights: {\n          technical: 40,\n          legal: 30,\n          financial: 30\n        },\n        rules: [\n          {\n            id: 'rule-1',\n            name: 'Verifica√ß√£o de documentos',\n            weight: 10\n          }\n        ]\n      };\n\n      mockParameterEngine.generateParameters.mockResolvedValue(mockParameters);\n\n      const response = await request(app)\n        .get('/parameters')\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toEqual(mockParameters);\n      expect(mockParameterEngine.generateParameters).toHaveBeenCalledWith('test-org-id');\n    });\n\n    it('deve lidar com erro de valida√ß√£o', async () => {\n      mockParameterEngine.generateParameters.mockRejectedValue(new Error('Validation error'));\n\n      const response = await request(app)\n        .get('/parameters')\n        .expect(500);\n\n      expect(response.body.success).toBe(false);\n      expect(response.body.error.code).toBe('INTERNAL_ERROR');\n    });\n  });\n\n  describe('POST /optimize', () => {\n    it('deve otimizar par√¢metros com sucesso', async () => {\n      const requestData = {\n        analysisCount: 50,\n        includeRecommendations: true\n      };\n\n      const mockOptimizationResult = {\n        optimizedWeights: {\n          technical: 45,\n          legal: 25,\n          financial: 30\n        },\n        improvements: [\n          {\n            category: 'technical',\n            change: '+5%',\n            reason: 'Melhor performance em an√°lises t√©cnicas'\n          }\n        ],\n        confidence: 0.85\n      };\n\n      mockParameterEngine.optimizeParameters.mockResolvedValue(mockOptimizationResult);\n\n      const response = await request(app)\n        .post('/optimize')\n        .send(requestData)\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toEqual(mockOptimizationResult);\n      expect(mockParameterEngine.optimizeParameters).toHaveBeenCalledWith(\n        'test-org-id',\n        requestData.includeRecommendations\n      );\n    });\n\n    it('deve validar dados de entrada', async () => {\n      const invalidData = {\n        analysisCount: -1, // Inv√°lido\n        includeRecommendations: 'invalid' // Inv√°lido\n      };\n\n      const response = await request(app)\n        .post('/optimize')\n        .send(invalidData)\n        .expect(400);\n\n      expect(response.body.success).toBe(false);\n      expect(response.body.error.code).toBe('VALIDATION_ERROR');\n    });\n  });\n\n  describe('POST /refresh-cache', () => {\n    it('deve limpar cache com sucesso', async () => {\n      const response = await request(app)\n        .post('/refresh-cache')\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.cleared).toBe(true);\n      expect(mockParameterEngine.clearCache).toHaveBeenCalledWith('test-org-id');\n    });\n  });\n\n  describe('GET /engine/stats', () => {\n    it('deve retornar estat√≠sticas do engine', async () => {\n      const mockStats = {\n        version: '1.0.0',\n        cacheSize: 5,\n        totalOrganizations: 5,\n        totalOptimizations: 25,\n        averageImprovement: 12.5,\n        cacheHitRate: 0.78,\n        config: {\n          enableAdaptiveWeights: true,\n          enableLearningMode: true,\n          adaptationThreshold: 10,\n          maxWeightAdjustment: 15.0,\n          cacheTimeout: 1800000\n        }\n      };\n\n      mockParameterEngine.getEngineStats.mockReturnValue(mockStats);\n\n      const response = await request(app)\n        .get('/engine/stats')\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toEqual(mockStats);\n    });\n  });\n\n  describe('PUT /engine/config', () => {\n    it('deve atualizar configura√ß√£o do engine', async () => {\n      const configUpdate = {\n        enableAdaptiveWeights: false,\n        adaptationThreshold: 15\n      };\n\n      const response = await request(app)\n        .put('/engine/config')\n        .send(configUpdate)\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.updated).toBe(true);\n    });\n\n    it('deve validar configura√ß√£o de entrada', async () => {\n      const invalidConfig = {\n        adaptationThreshold: -5, // Inv√°lido\n        maxWeightAdjustment: 100 // Inv√°lido\n      };\n\n      const response = await request(app)\n        .put('/engine/config')\n        .send(invalidConfig)\n        .expect(400);\n\n      expect(response.body.success).toBe(false);\n      expect(response.body.error.code).toBe('VALIDATION_ERROR');\n    });\n  });\n\n  describe('GET /health', () => {\n    it('deve retornar status de sa√∫de', async () => {\n      const response = await request(app)\n        .get('/health')\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.status).toBe('healthy');\n      expect(response.body.data.timestamp).toBeDefined();\n      expect(response.body.data.version).toBeDefined();\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/setup.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1237,1240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1237,1240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'afterEach' is not defined.","line":74,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Configura√ß√£o global para testes\n * LicitaReview - Sistema de An√°lise de Editais\n */\n\nimport { jest } from '@jest/globals';\n\n// Configurar timeout global para testes\njest.setTimeout(30000);\n\n// Configurar vari√°veis de ambiente para testes\nprocess.env.NODE_ENV = 'test';\nprocess.env.FIRESTORE_EMULATOR_HOST = '127.0.0.1:8080';\nprocess.env.FIREBASE_PROJECT_ID = 'test-project';\nprocess.env.GCLOUD_PROJECT = 'test-project';\nprocess.env.GOOGLE_CLOUD_PROJECT = 'test-project';\n\n// Mock b√°sico do Firebase Admin SDK\njest.mock('firebase-admin', () => ({\n  initializeApp: jest.fn(),\n  credential: {\n    cert: jest.fn(),\n    applicationDefault: jest.fn()\n  },\n  firestore: jest.fn(() => ({\n    collection: jest.fn(),\n    doc: jest.fn(),\n    batch: jest.fn(),\n    runTransaction: jest.fn()\n  }))\n}));\n\n// Mock b√°sico do Firebase Functions\njest.mock('firebase-functions', () => ({\n  logger: {\n    info: jest.fn(),\n    warn: jest.fn(),\n    error: jest.fn(),\n    debug: jest.fn()\n  }\n}));\n\n// Mock b√°sico do Express\njest.mock('express', () => {\n  const mockApp = {\n    use: jest.fn(),\n    get: jest.fn(),\n    post: jest.fn(),\n    put: jest.fn(),\n    delete: jest.fn(),\n    listen: jest.fn()\n  };\n  const mockExpress = jest.fn(() => mockApp) as any;\nmockExpress.json = jest.fn();\nmockExpress.Router = jest.fn(() => mockApp);\n  return mockExpress;\n});\n\n// Mock de middlewares\njest.mock('cors', () => jest.fn(() => jest.fn()));\njest.mock('helmet', () => jest.fn(() => jest.fn()));\n\n// Mock do Axios\njest.mock('axios', () => ({\n  create: jest.fn(() => ({\n    get: jest.fn(),\n    post: jest.fn()\n  })),\n  get: jest.fn(),\n  post: jest.fn()\n}));\n\n// Limpeza ap√≥s cada teste\nafterEach(() => {\n  jest.clearAllMocks();\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/simple-firestore-test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/unit/AnalysisOrchestrator.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1750,1753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1750,1753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1871,1874],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1871,1874],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2030,2033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2030,2033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2171,2174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2171,2174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2347,2350],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2347,2350],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2492,2495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2492,2495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":408,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":408,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13150,13153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13150,13153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":409,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":409,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13217,13220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13217,13220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":410,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":410,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13284,13287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13284,13287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":436,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":436,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14099,14102],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14099,14102],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":440,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":440,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14228,14231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14228,14231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Testes unit√°rios para AnalysisOrchestrator\n * LicitaReview - Sistema de An√°lise de Editais\n */\n\nimport { describe, it, expect, beforeEach, jest } from '@jest/globals';\nimport { AnalysisOrchestrator } from '../../services/AnalysisOrchestrator';\nimport { CloudRunClient } from '../../services/CloudRunClient';\nimport { TaskQueueService } from '../../services/TaskQueueService';\nimport { NotificationService } from '../../services/NotificationService';\nimport { DocumentRepository } from '../../db/repositories/DocumentRepository';\nimport { AnalysisRepository } from '../../db/repositories/AnalysisRepository';\nimport { OrganizationRepository } from '../../db/repositories/OrganizationRepository';\nimport { AnalysisStatus, AnalysisPriority } from '../../types/config.types';\nimport { testData } from '../setup';\n\n// Mocks dos servi√ßos\njest.mock('../../services/CloudRunClient');\njest.mock('../../services/TaskQueueService');\njest.mock('../../services/NotificationService');\njest.mock('../../db/repositories/DocumentRepository');\njest.mock('../../db/repositories/AnalysisRepository');\njest.mock('../../db/repositories/OrganizationRepository');\n\ndescribe('AnalysisOrchestrator', () => {\n  let orchestrator: AnalysisOrchestrator;\n  let mockCloudRunClient: jest.Mocked<CloudRunClient>;\n  let mockTaskQueue: jest.Mocked<TaskQueueService>;\n  let mockNotificationService: jest.Mocked<NotificationService>;\n  let mockDocumentRepo: jest.Mocked<DocumentRepository>;\n  let mockAnalysisRepo: jest.Mocked<AnalysisRepository>;\n  let mockOrganizationRepo: jest.Mocked<OrganizationRepository>;\n\n  beforeEach(() => {\n    // Criar mocks\n    mockCloudRunClient = {\n      analyzeDocument: jest.fn(),\n      healthCheck: jest.fn(),\n      isHealthy: jest.fn()\n    } as any;\n\n    mockTaskQueue = {\n      enqueue: jest.fn(),\n      dequeue: jest.fn(),\n      getQueueStatus: jest.fn()\n    } as any;\n\n    mockNotificationService = {\n      sendAnalysisComplete: jest.fn(),\n      sendAnalysisError: jest.fn(),\n      sendAnalysisStarted: jest.fn()\n    } as any;\n\n    mockDocumentRepo = {\n      findById: jest.fn(),\n      update: jest.fn(),\n      create: jest.fn(),\n      delete: jest.fn()\n    } as any;\n\n    mockAnalysisRepo = {\n      findById: jest.fn(),\n      update: jest.fn(),\n      create: jest.fn(),\n      delete: jest.fn(),\n      findByDocumentId: jest.fn()\n    } as any;\n\n    mockOrganizationRepo = {\n      findById: jest.fn(),\n      update: jest.fn(),\n      create: jest.fn(),\n      delete: jest.fn()\n    } as any;\n\n    // Inicializar orchestrator\n    orchestrator = new AnalysisOrchestrator(\n      mockCloudRunClient,\n      mockTaskQueue,\n      mockNotificationService,\n      mockDocumentRepo,\n      mockAnalysisRepo,\n      mockOrganizationRepo\n    );\n  });\n\n  describe('startAnalysis', () => {\n    it('deve iniciar uma an√°lise com sucesso', async () => {\n      // Arrange\n      const analysisRequest = {\n        documentId: testData.document.id,\n        organizationId: testData.organization.id,\n        userId: testData.user.uid,\n        priority: AnalysisPriority.MEDIUM,\n        options: {\n          forceReanalysis: false,\n          includeDetailedReport: true\n        }\n      };\n\n      const mockAnalysis = {\n        ...testData.analysis,\n        status: AnalysisStatus.PENDING\n      };\n\n      mockAnalysisRepo.create.mockResolvedValue(mockAnalysis);\n      mockTaskQueue.enqueue.mockResolvedValue(undefined);\n      mockNotificationService.sendAnalysisStarted.mockResolvedValue(undefined);\n\n      // Act\n      const result = await orchestrator.startAnalysis(analysisRequest);\n\n      // Assert\n      expect(result).toEqual(mockAnalysis);\n      expect(mockAnalysisRepo.create).toHaveBeenCalledWith(expect.objectContaining({\n        documentId: analysisRequest.documentId,\n        organizationId: analysisRequest.organizationId,\n        userId: analysisRequest.userId,\n        status: AnalysisStatus.PENDING,\n        priority: analysisRequest.priority\n      }));\n      expect(mockTaskQueue.enqueue).toHaveBeenCalled();\n      expect(mockNotificationService.sendAnalysisStarted).toHaveBeenCalledWith(mockAnalysis);\n    });\n\n    it('deve falhar se o documento n√£o existir', async () => {\n      // Arrange\n      const analysisRequest = {\n        documentId: 'non-existent-doc',\n        organizationId: testData.organization.id,\n        userId: testData.user.uid,\n        priority: AnalysisPriority.MEDIUM,\n        options: {}\n      };\n\n      mockDocumentRepo.findById.mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(orchestrator.startAnalysis(analysisRequest))\n        .rejects\n        .toThrow('Document not found');\n    });\n\n    it('deve falhar se a organiza√ß√£o n√£o existir', async () => {\n      // Arrange\n      const analysisRequest = {\n        documentId: testData.document.id,\n        organizationId: 'non-existent-org',\n        userId: testData.user.uid,\n        priority: AnalysisPriority.MEDIUM,\n        options: {}\n      };\n\n      mockDocumentRepo.findById.mockResolvedValue(testData.document);\n      mockOrganizationRepo.findById.mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(orchestrator.startAnalysis(analysisRequest))\n        .rejects\n        .toThrow('Organization not found');\n    });\n  });\n\n  describe('processAnalysis', () => {\n    it('deve processar uma an√°lise com sucesso', async () => {\n      // Arrange\n      const mockAnalysis = {\n        ...testData.analysis,\n        status: AnalysisStatus.PROCESSING\n      };\n\n      const mockDocument = testData.document;\n      const mockOrganization = testData.organization;\n      \n      const mockAnalysisResult = {\n        scores: {\n          structural: 85,\n          legal: 90,\n          clarity: 80,\n          abnt: 88,\n          overall: 86\n        },\n        findings: [\n          {\n            type: 'warning',\n            category: 'structural',\n            message: 'Se√ß√£o de especifica√ß√µes t√©cnicas incompleta',\n            severity: 'medium',\n            location: { page: 5, section: '3.2' }\n          }\n        ],\n        recommendations: [\n          'Incluir especifica√ß√µes t√©cnicas detalhadas',\n          'Revisar crit√©rios de avalia√ß√£o'\n        ],\n        metadata: {\n          processingTime: 12000,\n          aiConfidence: 0.92,\n          rulesApplied: 15,\n          version: '1.0.0'\n        }\n      };\n\n      mockAnalysisRepo.findById.mockResolvedValue(mockAnalysis);\n      mockDocumentRepo.findById.mockResolvedValue(mockDocument);\n      mockOrganizationRepo.findById.mockResolvedValue(mockOrganization);\n      mockCloudRunClient.analyzeDocument.mockResolvedValue(mockAnalysisResult);\n      mockAnalysisRepo.update.mockResolvedValue({\n        ...mockAnalysis,\n        status: AnalysisStatus.COMPLETED,\n        result: mockAnalysisResult\n      });\n      mockNotificationService.sendAnalysisComplete.mockResolvedValue(undefined);\n\n      // Act\n      const result = await orchestrator.processAnalysis(mockAnalysis.id);\n\n      // Assert\n      expect(result.status).toBe(AnalysisStatus.COMPLETED);\n      expect(result.result).toEqual(mockAnalysisResult);\n      expect(mockCloudRunClient.analyzeDocument).toHaveBeenCalledWith(expect.objectContaining({\n        document: mockDocument,\n        organizationConfig: mockOrganization\n      }));\n      expect(mockNotificationService.sendAnalysisComplete).toHaveBeenCalled();\n    });\n\n    it('deve lidar com falhas na an√°lise', async () => {\n      // Arrange\n      const mockAnalysis = {\n        ...testData.analysis,\n        status: AnalysisStatus.PROCESSING\n      };\n\n      const mockError = new Error('Cloud Run service unavailable');\n\n      mockAnalysisRepo.findById.mockResolvedValue(mockAnalysis);\n      mockDocumentRepo.findById.mockResolvedValue(testData.document);\n      mockOrganizationRepo.findById.mockResolvedValue(testData.organization);\n      mockCloudRunClient.analyzeDocument.mockRejectedValue(mockError);\n      mockAnalysisRepo.update.mockResolvedValue({\n        ...mockAnalysis,\n        status: AnalysisStatus.FAILED,\n        error: mockError.message\n      });\n      mockNotificationService.sendAnalysisError.mockResolvedValue(undefined);\n\n      // Act\n      const result = await orchestrator.processAnalysis(mockAnalysis.id);\n\n      // Assert\n      expect(result.status).toBe(AnalysisStatus.FAILED);\n      expect(result.error).toBe(mockError.message);\n      expect(mockNotificationService.sendAnalysisError).toHaveBeenCalled();\n    });\n\n    it('deve implementar retry logic para falhas tempor√°rias', async () => {\n      // Arrange\n      const mockAnalysis = {\n        ...testData.analysis,\n        status: AnalysisStatus.PROCESSING,\n        retryCount: 0\n      };\n\n      const temporaryError = new Error('Network timeout - ECONNRESET');\n      const successResult = {\n        scores: { overall: 85 },\n        findings: [],\n        recommendations: [],\n        metadata: { processingTime: 10000 }\n      };\n\n      mockAnalysisRepo.findById.mockResolvedValue(mockAnalysis);\n      mockDocumentRepo.findById.mockResolvedValue(testData.document);\n      mockOrganizationRepo.findById.mockResolvedValue(testData.organization);\n      \n      // Primeira chamada falha, segunda sucede\n      mockCloudRunClient.analyzeDocument\n        .mockRejectedValueOnce(temporaryError)\n        .mockResolvedValueOnce(successResult);\n      \n      mockAnalysisRepo.update.mockResolvedValue({\n        ...mockAnalysis,\n        status: AnalysisStatus.COMPLETED,\n        result: successResult,\n        retryCount: 1\n      });\n      mockNotificationService.sendAnalysisComplete.mockResolvedValue(undefined);\n\n      // Act\n      const result = await orchestrator.processAnalysis(mockAnalysis.id);\n\n      // Assert\n      expect(result.status).toBe(AnalysisStatus.COMPLETED);\n      expect(result.retryCount).toBe(1);\n      expect(mockCloudRunClient.analyzeDocument).toHaveBeenCalledTimes(2);\n    });\n  });\n\n  describe('getAnalysisProgress', () => {\n    it('deve retornar o progresso da an√°lise', async () => {\n      // Arrange\n      const mockAnalysis = {\n        ...testData.analysis,\n        status: AnalysisStatus.PROCESSING,\n        progress: {\n          currentStep: 'analyzing_content',\n          totalSteps: 5,\n          completedSteps: 2,\n          estimatedTimeRemaining: 30000\n        }\n      };\n\n      mockAnalysisRepo.findById.mockResolvedValue(mockAnalysis);\n\n      // Act\n      const progress = await orchestrator.getAnalysisProgress(mockAnalysis.id);\n\n      // Assert\n      expect(progress).toEqual(mockAnalysis.progress);\n    });\n\n    it('deve retornar null se a an√°lise n√£o existir', async () => {\n      // Arrange\n      mockAnalysisRepo.findById.mockResolvedValue(null);\n\n      // Act\n      const progress = await orchestrator.getAnalysisProgress('non-existent-id');\n\n      // Assert\n      expect(progress).toBeNull();\n    });\n  });\n\n  describe('cancelAnalysis', () => {\n    it('deve cancelar uma an√°lise em andamento', async () => {\n      // Arrange\n      const mockAnalysis = {\n        ...testData.analysis,\n        status: AnalysisStatus.PROCESSING\n      };\n\n      mockAnalysisRepo.findById.mockResolvedValue(mockAnalysis);\n      mockAnalysisRepo.update.mockResolvedValue({\n        ...mockAnalysis,\n        status: AnalysisStatus.CANCELLED,\n        cancelledAt: new Date()\n      });\n\n      // Act\n      const result = await orchestrator.cancelAnalysis(mockAnalysis.id, testData.user.uid);\n\n      // Assert\n      expect(result.status).toBe(AnalysisStatus.CANCELLED);\n      expect(result.cancelledAt).toBeDefined();\n      expect(mockAnalysisRepo.update).toHaveBeenCalledWith(\n        mockAnalysis.id,\n        expect.objectContaining({\n          status: AnalysisStatus.CANCELLED,\n          cancelledBy: testData.user.uid\n        })\n      );\n    });\n\n    it('deve falhar ao tentar cancelar an√°lise j√° conclu√≠da', async () => {\n      // Arrange\n      const mockAnalysis = {\n        ...testData.analysis,\n        status: AnalysisStatus.COMPLETED\n      };\n\n      mockAnalysisRepo.findById.mockResolvedValue(mockAnalysis);\n\n      // Act & Assert\n      await expect(orchestrator.cancelAnalysis(mockAnalysis.id, testData.user.uid))\n        .rejects\n        .toThrow('Cannot cancel completed analysis');\n    });\n  });\n\n  describe('listActiveAnalyses', () => {\n    it('deve listar an√°lises ativas para uma organiza√ß√£o', async () => {\n      // Arrange\n      const mockActiveAnalyses = [\n        { ...testData.analysis, status: AnalysisStatus.PROCESSING },\n        { ...testData.analysis, id: 'analysis-2', status: AnalysisStatus.PENDING }\n      ];\n\n      mockAnalysisRepo.findByOrganizationId = jest.fn().mockResolvedValue(mockActiveAnalyses);\n\n      // Act\n      const result = await orchestrator.listActiveAnalyses(testData.organization.id);\n\n      // Assert\n      expect(result).toEqual(mockActiveAnalyses);\n      expect(mockAnalysisRepo.findByOrganizationId).toHaveBeenCalledWith(\n        testData.organization.id,\n        expect.objectContaining({\n          status: { in: [AnalysisStatus.PENDING, AnalysisStatus.PROCESSING] }\n        })\n      );\n    });\n  });\n\n  describe('retry logic', () => {\n    it('deve implementar backoff exponencial', () => {\n      // Arrange & Act\n      const delay1 = (orchestrator as any).calculateRetryDelay(1);\n      const delay2 = (orchestrator as any).calculateRetryDelay(2);\n      const delay3 = (orchestrator as any).calculateRetryDelay(3);\n\n      // Assert\n      expect(delay2).toBeGreaterThan(delay1);\n      expect(delay3).toBeGreaterThan(delay2);\n      expect(delay3).toBeLessThanOrEqual(10000); // maxRetryDelayMs\n    });\n\n    it('deve identificar erros retry√°veis corretamente', () => {\n      // Arrange\n      const retryableErrors = [\n        new Error('Network timeout'),\n        new Error('ECONNRESET'),\n        new Error('Service unavailable - 503'),\n        new Error('Rate limit exceeded - 429'),\n        new Error('Firestore unavailable')\n      ];\n\n      const nonRetryableErrors = [\n        new Error('Invalid input format'),\n        new Error('Authentication failed'),\n        new Error('Permission denied')\n      ];\n\n      // Act & Assert\n      retryableErrors.forEach(error => {\n        expect((orchestrator as any).isRetryableError(error)).toBe(true);\n      });\n\n      nonRetryableErrors.forEach(error => {\n        expect((orchestrator as any).isRetryableError(error)).toBe(false);\n      });\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/unit/CloudRunClient.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[718,721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[718,721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":336,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":336,"endColumn":73},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":340,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":340,"endColumn":73},{"ruleId":"no-unused-vars","severity":2,"message":"'op' is defined but never used.","line":356,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":356,"endColumn":96},{"ruleId":"no-unused-vars","severity":2,"message":"'isRetryable' is defined but never used.","line":356,"column":98,"nodeType":"Identifier","messageId":"unusedVar","endLine":356,"endColumn":138},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":356,"column":112,"nodeType":"Identifier","messageId":"unusedVar","endLine":356,"endColumn":126},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":356,"column":140,"nodeType":"Identifier","messageId":"unusedVar","endLine":356,"endColumn":155},{"ruleId":"no-unused-vars","severity":2,"message":"'attempt' is defined but never used.","line":369,"column":70,"nodeType":"Identifier","messageId":"unusedVar","endLine":369,"endColumn":85},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":369,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":369,"endColumn":102},{"ruleId":"no-unused-vars","severity":2,"message":"'attempt' is defined but never used.","line":370,"column":70,"nodeType":"Identifier","messageId":"unusedVar","endLine":370,"endColumn":85},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":370,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":370,"endColumn":102},{"ruleId":"no-unused-vars","severity":2,"message":"'attempt' is defined but never used.","line":371,"column":70,"nodeType":"Identifier","messageId":"unusedVar","endLine":371,"endColumn":85},{"ruleId":"no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":371,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":371,"endColumn":102},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":424,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":424,"endColumn":85},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":442,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":442,"endColumn":83}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Testes unit√°rios para CloudRunClient\n * LicitaReview - Sistema de An√°lise de Editais\n */\n\nimport { describe, it, expect, beforeEach, jest } from '@jest/globals';\nimport axios from 'axios';\nimport { CloudRunClient } from '../../services/CloudRunClient';\nimport { GoogleAuth } from 'google-auth-library';\nimport { testData } from '../setup';\n\n// Mock do axios\njest.mock('axios');\nconst mockedAxios = axios as jest.Mocked<typeof axios>;\n\n// Mock do GoogleAuth\njest.mock('google-auth-library');\nconst MockedGoogleAuth = GoogleAuth as jest.MockedClass<typeof GoogleAuth>;\n\ndescribe('CloudRunClient', () => {\n  let client: CloudRunClient;\n  let mockAuth: jest.Mocked<GoogleAuth>;\n  let mockAxiosInstance: jest.Mocked<any>;\n\n  const serviceUrl = 'https://test-service-url.run.app';\n  const circuitBreakerConfig = {\n    failureThreshold: 5,\n    resetTimeout: 60000,\n    monitoringPeriod: 10000\n  };\n  const retryConfig = {\n    maxRetries: 3,\n    initialDelay: 1000,\n    maxDelay: 10000,\n    backoffMultiplier: 2\n  };\n\n  // Mock data para an√°lise de documentos\n  const mockAnalysisRequest = {\n    document_content: testData.document.content,\n    document_type: 'pdf',\n    classification: {\n      type: 'edital',\n      category: 'obras',\n      confidence: 0.95\n    },\n    organization_config: {\n      id: testData.organization.id,\n      weights: {\n        structural: 25,\n        legal: 25,\n        clarity: 25,\n        abnt: 25\n      },\n      customRules: [],\n      templates: []\n    },\n    analysis_options: {\n      includeDetailedReport: true,\n      analysisDepth: 'comprehensive'\n    },\n    metadata: {\n      document_id: testData.document.id,\n      file_size: 1024000,\n      upload_date: new Date()\n    }\n  };\n\n  beforeEach(() => {\n    // Setup mocks\n    mockAxiosInstance = {\n      get: jest.fn(),\n      post: jest.fn(),\n      put: jest.fn(),\n      delete: jest.fn(),\n      patch: jest.fn(),\n      interceptors: {\n        request: { use: jest.fn() },\n        response: { use: jest.fn() }\n      }\n    };\n\n    mockedAxios.create.mockReturnValue(mockAxiosInstance);\n\n    mockAuth = {\n      getAccessToken: jest.fn().mockResolvedValue('mock-access-token'),\n      getClient: jest.fn(),\n      getCredentials: jest.fn()\n    } as jest.Mocked<GoogleAuth>;\n\n    MockedGoogleAuth.mockImplementation(() => mockAuth);\n\n    // Inicializar cliente\n    client = new CloudRunClient(serviceUrl, circuitBreakerConfig, retryConfig);\n  });\n\n  describe('constructor', () => {\n    it('deve inicializar com configura√ß√µes corretas', () => {\n      expect(client).toBeDefined();\n      expect(mockedAxios.create).toHaveBeenCalledWith({\n        baseURL: serviceUrl,\n        timeout: 300000, // 5 minutos\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n    });\n  });\n\n  describe('healthCheck', () => {\n    it('deve retornar status saud√°vel', async () => {\n      // Arrange\n      const mockHealthResponse = {\n        status: 200,\n        data: {\n          status: 'healthy',\n          timestamp: new Date().toISOString(),\n          version: '1.0.0',\n          uptime: 3600\n        }\n      };\n\n      mockAxiosInstance.get.mockResolvedValue(mockHealthResponse);\n\n      // Act\n      const result = await client.healthCheck();\n\n      // Assert\n      expect(result).toEqual(mockHealthResponse.data);\n      expect(mockAxiosInstance.get).toHaveBeenCalledWith('/health');\n    });\n\n    it('deve lidar com falhas no health check', async () => {\n      // Arrange\n      const mockError = new Error('Service unavailable');\n      mockAxiosInstance.get.mockRejectedValue(mockError);\n\n      // Act & Assert\n      await expect(client.healthCheck()).rejects.toThrow('Service unavailable');\n    });\n  });\n\n  describe('analyzeDocument', () => {\n\n    it('deve analisar documento com sucesso', async () => {\n      // Arrange\n      const mockAnalysisResponse = {\n        status: 200,\n        data: {\n          scores: {\n            structural: 85,\n            legal: 90,\n            clarity: 80,\n            abnt: 88,\n            overall: 86\n          },\n          findings: [\n            {\n              type: 'warning',\n              category: 'structural',\n              message: 'Se√ß√£o incompleta',\n              severity: 'medium',\n              location: { page: 5, section: '3.2' }\n            }\n          ],\n          recommendations: [\n            'Incluir especifica√ß√µes t√©cnicas detalhadas'\n          ],\n          metadata: {\n            processingTime: 12000,\n            aiConfidence: 0.92,\n            rulesApplied: 15,\n            version: '1.0.0'\n          }\n        }\n      };\n\n      mockAxiosInstance.post.mockResolvedValue(mockAnalysisResponse);\n\n      // Act\n      const result = await client.analyzeDocument(mockAnalysisRequest);\n\n      // Assert\n      expect(result).toEqual(mockAnalysisResponse.data);\n      expect(mockAxiosInstance.post).toHaveBeenCalledWith('/analyze', mockAnalysisRequest);\n    });\n\n    it('deve implementar retry para falhas tempor√°rias', async () => {\n      // Arrange\n      const temporaryError = {\n        response: { status: 503 },\n        message: 'Service temporarily unavailable'\n      };\n      const successResponse = {\n        status: 200,\n        data: { scores: { overall: 85 }, findings: [], recommendations: [] }\n      };\n\n      mockAxiosInstance.post\n        .mockRejectedValueOnce(temporaryError)\n        .mockRejectedValueOnce(temporaryError)\n        .mockResolvedValueOnce(successResponse);\n\n      // Act\n      const result = await client.analyzeDocument(mockAnalysisRequest);\n\n      // Assert\n      expect(result).toEqual(successResponse.data);\n      expect(mockAxiosInstance.post).toHaveBeenCalledTimes(3);\n    });\n\n    it('deve falhar ap√≥s esgotar tentativas de retry', async () => {\n      // Arrange\n      const persistentError = {\n        response: { status: 503 },\n        message: 'Service persistently unavailable'\n      };\n\n      mockAxiosInstance.post.mockRejectedValue(persistentError);\n\n      // Act & Assert\n      await expect(client.analyzeDocument(mockAnalysisRequest))\n        .rejects\n        .toThrow('Service persistently unavailable');\n      \n      expect(mockAxiosInstance.post).toHaveBeenCalledTimes(4); // 1 inicial + 3 retries\n    });\n\n    it('deve n√£o fazer retry para erros n√£o retry√°veis', async () => {\n      // Arrange\n      const nonRetryableError = {\n        response: { status: 400 },\n        message: 'Bad request - invalid input'\n      };\n\n      mockAxiosInstance.post.mockRejectedValue(nonRetryableError);\n\n      // Act & Assert\n      await expect(client.analyzeDocument(mockAnalysisRequest))\n        .rejects\n        .toThrow('Bad request - invalid input');\n      \n      expect(mockAxiosInstance.post).toHaveBeenCalledTimes(1); // Sem retry\n    });\n  });\n\n  describe('circuit breaker', () => {\n    it('deve abrir o circuito ap√≥s muitas falhas', async () => {\n      // Arrange\n      const error = {\n        response: { status: 500 },\n        message: 'Internal server error'\n      };\n\n      mockAxiosInstance.post.mockRejectedValue(error);\n\n      // Act - Causar falhas suficientes para abrir o circuito\n      for (let i = 0; i < circuitBreakerConfig.failureThreshold; i++) {\n        try {\n          await client.analyzeDocument(mockAnalysisRequest);\n        } catch (e) {\n          // Ignorar erros esperados\n        }\n      }\n\n      // Assert - Pr√≥xima chamada deve falhar imediatamente (circuito aberto)\n      const startTime = Date.now();\n      try {\n        await client.analyzeDocument(mockAnalysisRequest);\n      } catch (e) {\n        const endTime = Date.now();\n        expect(endTime - startTime).toBeLessThan(100); // Falha r√°pida\n      }\n    });\n\n    it('deve permitir tentativas ap√≥s per√≠odo de recupera√ß√£o', async () => {\n      // Arrange\n      const error = {\n        response: { status: 500 },\n        message: 'Internal server error'\n      };\n      const successResponse = {\n        status: 200,\n        data: { scores: { overall: 85 }, findings: [], recommendations: [] }\n      };\n\n      // Abrir o circuito\n      mockAxiosInstance.post.mockRejectedValue(error);\n      for (let i = 0; i < circuitBreakerConfig.failureThreshold; i++) {\n        try {\n          await client.analyzeDocument(mockAnalysisRequest);\n        } catch (e) {\n          // Ignorar\n        }\n      }\n\n      // Simular passagem do tempo de recupera√ß√£o\n      jest.advanceTimersByTime(circuitBreakerConfig.resetTimeout + 1000);\n\n      // Configurar sucesso para pr√≥xima tentativa\n      mockAxiosInstance.post.mockResolvedValue(successResponse);\n\n      // Act\n      const result = await client.analyzeDocument(mockAnalysisRequest);\n\n      // Assert\n      expect(result).toEqual(successResponse.data);\n    });\n  });\n\n  describe('isRetryableError', () => {\n    it('deve identificar erros retry√°veis corretamente', () => {\n      // Arrange\n      const retryableErrors = [\n        { response: { status: 429 } }, // Rate limit\n        { response: { status: 500 } }, // Internal server error\n        { response: { status: 502 } }, // Bad gateway\n        { response: { status: 503 } }, // Service unavailable\n        { response: { status: 504 } }, // Gateway timeout\n        { code: 'ECONNRESET' },        // Network error\n        { code: 'ETIMEDOUT' },         // Timeout\n        { message: 'Network Error' }   // Generic network error\n      ];\n\n      const nonRetryableErrors = [\n        { response: { status: 400 } }, // Bad request\n        { response: { status: 401 } }, // Unauthorized\n        { response: { status: 403 } }, // Forbidden\n        { response: { status: 404 } }, // Not found\n        { response: { status: 422 } }, // Unprocessable entity\n        { message: 'Invalid input' }   // Application error\n      ];\n\n      // Act & Assert\n      retryableErrors.forEach(error => {\n        expect((client as unknown as { isRetryableError: (error: unknown) => boolean }).isRetryableError(error)).toBe(true);\n      });\n\n      nonRetryableErrors.forEach(error => {\n        expect((client as unknown as { isRetryableError: (error: unknown) => boolean }).isRetryableError(error)).toBe(false);\n      });\n    });\n  });\n\n  describe('retryWithBackoff', () => {\n    it('deve implementar backoff exponencial', async () => {\n      // Arrange\n      const operation = jest.fn()\n        .mockRejectedValueOnce(new Error('Temporary failure 1'))\n        .mockRejectedValueOnce(new Error('Temporary failure 2'))\n        .mockResolvedValueOnce('Success');\n\n      const isRetryable = jest.fn().mockReturnValue(true);\n\n      // Act\n      const result = await (client as unknown as { retryWithBackoff: (op: () => Promise<string>, isRetryable: (error: unknown) => boolean, config: unknown) => Promise<string> }).retryWithBackoff(\n        operation,\n        isRetryable,\n        retryConfig\n      );\n\n      // Assert\n      expect(result).toBe('Success');\n      expect(operation).toHaveBeenCalledTimes(3);\n    });\n\n    it('deve respeitar o delay m√°ximo', () => {\n      // Arrange & Act\n      const delay1 = (client as unknown as { calculateBackoffDelay: (attempt: number, config: unknown) => number }).calculateBackoffDelay(1, retryConfig);\n      const delay2 = (client as unknown as { calculateBackoffDelay: (attempt: number, config: unknown) => number }).calculateBackoffDelay(2, retryConfig);\n      const delay3 = (client as unknown as { calculateBackoffDelay: (attempt: number, config: unknown) => number }).calculateBackoffDelay(10, retryConfig); // Tentativa alta\n\n      // Assert\n      expect(delay1).toBe(retryConfig.initialDelay);\n      expect(delay2).toBe(retryConfig.initialDelay * retryConfig.backoffMultiplier);\n      expect(delay3).toBeLessThanOrEqual(retryConfig.maxDelay);\n    });\n  });\n\n  describe('authentication', () => {\n    it('deve adicionar token de autentica√ß√£o √†s requisi√ß√µes', async () => {\n      // Arrange\n      const mockResponse = {\n        status: 200,\n        data: { status: 'healthy' }\n      };\n\n      mockAxiosInstance.get.mockResolvedValue(mockResponse);\n\n      // Act\n      await client.healthCheck();\n\n      // Assert\n      expect(mockAuth.getAccessToken).toHaveBeenCalled();\n      expect(mockAxiosInstance.interceptors.request.use).toHaveBeenCalled();\n    });\n\n    it('deve lidar com falhas de autentica√ß√£o', async () => {\n      // Arrange\n      const authError = new Error('Authentication failed');\n      mockAuth.getAccessToken.mockRejectedValue(authError);\n\n      // Act & Assert\n      await expect(client.healthCheck()).rejects.toThrow('Authentication failed');\n    });\n  });\n\n  describe('error handling', () => {\n    it('deve mapear c√≥digos de erro HTTP corretamente', () => {\n      // Arrange\n      const errorMappings = [\n        { status: 400, expectedType: 'ValidationError' },\n        { status: 401, expectedType: 'AuthenticationError' },\n        { status: 403, expectedType: 'AuthorizationError' },\n        { status: 404, expectedType: 'NotFoundError' },\n        { status: 429, expectedType: 'RateLimitError' },\n        { status: 500, expectedType: 'InternalServerError' },\n        { status: 503, expectedType: 'ServiceUnavailableError' }\n      ];\n\n      // Act & Assert\n      errorMappings.forEach(({ status, expectedType }) => {\n        const error = { response: { status, data: { message: 'Test error' } } };\n        const mappedError = (client as unknown as { handleHttpError: (error: unknown) => { name: string } }).handleHttpError(error);\n        expect(mappedError.name).toBe(expectedType);\n      });\n    });\n\n    it('deve preservar informa√ß√µes de erro originais', () => {\n      // Arrange\n      const originalError = {\n        response: {\n          status: 400,\n          data: {\n            message: 'Validation failed',\n            details: ['Field X is required', 'Field Y is invalid']\n          }\n        }\n      };\n\n      // Act\n      const mappedError = (client as unknown as { handleHttpError: (error: unknown) => { message: string; details: string[]; statusCode: number } }).handleHttpError(originalError);\n\n      // Assert\n      expect(mappedError.message).toContain('Validation failed');\n      expect(mappedError.details).toEqual(originalError.response.data.details);\n      expect(mappedError.statusCode).toBe(400);\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/unit/DocumentRepository.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/tests/unit/ParameterEngine.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/triggers/analysis-complete.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/triggers/document-upload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/types/analysis.types.ts","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'CRITICA' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ALTA' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'MEDIA' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'BAIXA' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ESTRUTURAL' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'JURIDICO' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CLAREZA' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ABNT' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CONFORMIDADE' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'COMPLETUDE' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/types/comissoes.types.ts","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'PERMANENTE' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TEMPORARIA' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ATIVA' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'INATIVA' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'SUSPENSA' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ENCERRADA' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'PRESIDENTE' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'VICE_PRESIDENTE' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'SECRETARIO' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'MEMBRO' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'SUPLENTE' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/types/config.types.ts","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'PENDING' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'PROCESSING' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'COMPLETED' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'FAILED' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CANCELLED' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'LOW' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":6,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'NORMAL' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'HIGH' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'RIGOROUS' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'STANDARD' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TECHNICAL' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'FAST' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CUSTOM' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'BALANCED' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'LEGAL_FOCUSED' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TECHNICAL_FOCUSED' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'STRUCTURAL_FOCUSED' is defined but never used.","line":38,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CUSTOM' is defined but never used.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/types/document.types.ts","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'EDITAL' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TERMO_REFERENCIA' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ETP' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":6,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'MAPA_RISCOS' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'MINUTA_CONTRATO' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ANEXO_TECNICO' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'PROJETO_BASICO' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'DRAFT' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'UPLOADED' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'PROCESSING' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'PROCESSED' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ANALYSIS_COMPLETE' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ERROR' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'ARCHIVED' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'PREGAO_ELETRONICO' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'PREGAO_PRESENCIAL' is defined but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CONCORRENCIA' is defined but never used.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'TOMADA_PRECOS' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CARTA_CONVITE' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'DIALOGO_COMPETITIVO' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'LEILAO' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'CREDENCIAMENTO' is defined but never used.","line":38,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/utils/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/src/utils/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/test-e2e.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/test-retry-logic.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/services/api/test-retry-simple.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/setup-custom-claims.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/test-firebase-config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/Users/narcisofilho/revisor-de-editais/tools/scripts/migrate-to-monorepo.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
